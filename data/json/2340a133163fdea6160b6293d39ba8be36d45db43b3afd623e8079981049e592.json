{"ast":null,"code":"// Music Brain integration hook\n// In production, this would use Tauri's invoke to call Python\n// Default emotions for when Music Brain is not available\nconst defaultEmotions=[{name:'Grief',category:'Sadness',intensity:0.9},{name:'Melancholy',category:'Sadness',intensity:0.6},{name:'Longing',category:'Sadness',intensity:0.7},{name:'Joy',category:'Happiness',intensity:0.8},{name:'Euphoria',category:'Happiness',intensity:1.0},{name:'Contentment',category:'Happiness',intensity:0.5},{name:'Rage',category:'Anger',intensity:1.0},{name:'Frustration',category:'Anger',intensity:0.6},{name:'Resentment',category:'Anger',intensity:0.7},{name:'Terror',category:'Fear',intensity:1.0},{name:'Anxiety',category:'Fear',intensity:0.6},{name:'Dread',category:'Fear',intensity:0.8},{name:'Passion',category:'Love',intensity:0.9},{name:'Tenderness',category:'Love',intensity:0.5},{name:'Devotion',category:'Love',intensity:0.8}];// Rule-breaking suggestions based on emotions\nconst ruleBreakingDatabase={Grief:[{rule:'HARMONY_AvoidTonicResolution',effect:'Creates unresolved yearning that mirrors emotional state',use_when:'The listener should feel the loss is still unprocessed',justification:'Grief rarely resolves cleanly. Music that refuses resolution honors that truth.'},{rule:'ARRANGEMENT_BuriedVocals',effect:'Creates dissociation, words half-heard like fading memories',use_when:'The subject is too painful to confront directly',justification:'Sometimes the truth is easier to bear when obscured.'}],Anxiety:[{rule:'RHYTHM_ConstantDisplacement',effect:'Never lets listener settle into comfortable expectation',use_when:'Representing intrusive thoughts or restlessness',justification:'Anxiety never follows a predictable pattern.'},{rule:'HARMONY_UnresolvedSuspensions',effect:'Creates tension that never fully releases',use_when:'Showing the impossibility of finding peace',justification:'The anxious mind cannot find resolution.'}],Rage:[{rule:'DYNAMICS_ExtremeContrasts',effect:'Jarring shifts that mirror emotional volatility',use_when:'The anger comes in unpredictable waves',justification:'Rage rarely announces itself politely.'},{rule:'FORM_StructuralCollapse',effect:'Traditional form breaks down as control is lost',use_when:'Representing loss of composure',justification:'Anger destroys structure by nature.'}],Joy:[{rule:'HARMONY_ModalInterchange',effect:'Unexpected brightness from borrowed chords',use_when:'Joy that contains complexity and depth',justification:'Real joy often comes from unexpected places.'}],Love:[{rule:'PRODUCTION_PitchImperfection',effect:'Vulnerability through imperfect tuning',use_when:'Love that is honest and unpolished',justification:'Perfect pitch is a lie we tell ourselves.'}]};import{useState}from'react';export function useMusicBrain(){const[isLoading,setIsLoading]=useState(false);const getEmotions=async()=>{// In production: return invoke('music_brain_command', { command: 'get_emotions', args: {} });\nsetIsLoading(true);try{return await new Promise(resolve=>{setTimeout(()=>resolve(defaultEmotions),300);});}finally{setIsLoading(false);}};const suggestRuleBreak=async emotion=>{// In production: return invoke('music_brain_command', { command: 'suggest_rule_break', args: { emotion } });\nsetIsLoading(true);try{return await new Promise(resolve=>{setTimeout(()=>{const suggestions=ruleBreakingDatabase[emotion]||[{rule:'HARMONY_ModalInterchange',effect:'Unexpected harmonic color',use_when:'You want to surprise the listener',justification:'Breaking expectations creates emotional impact.'}];resolve(suggestions);},500);});}finally{setIsLoading(false);}};const processIntent=async intent=>{// In production: return invoke('music_brain_command', { command: 'process_intent', args: { intent } });\nsetIsLoading(true);try{return await new Promise(resolve=>{setTimeout(()=>{var _intent$song_intent,_intent$technical_con;// Generate contextual results based on intent\nconst emotion=((_intent$song_intent=intent.song_intent)===null||_intent$song_intent===void 0?void 0:_intent$song_intent.mood_primary)||'neutral';const key=((_intent$technical_con=intent.technical_constraints)===null||_intent$technical_con===void 0?void 0:_intent$technical_con.technical_key)||'C';const harmonyByEmotion={Grief:['Am','F','C','G'],Anxiety:['Dm','Am/E','Bb','F/A'],Rage:['Em','C','G','D'],Joy:['C','G','Am','F'],Love:['F','Am','Dm','C']};const tempoByEmotion={Grief:72,Anxiety:140,Rage:160,Joy:120,Love:90};resolve({harmony:harmonyByEmotion[emotion]||['C','Am','F','G'],tempo:tempoByEmotion[emotion]||120,key,mixer_params:{reverb:emotion==='Grief'?0.7:0.3,delay:emotion==='Anxiety'?0.5:0.2,compression:emotion==='Rage'?0.8:0.4,warmth:emotion==='Love'?0.6:0.3}});},800);});}finally{setIsLoading(false);}};return{getEmotions,suggestRuleBreak,processIntent,isLoading};}","map":{"version":3,"names":["defaultEmotions","name","category","intensity","ruleBreakingDatabase","Grief","rule","effect","use_when","justification","Anxiety","Rage","Joy","Love","useState","useMusicBrain","isLoading","setIsLoading","getEmotions","Promise","resolve","setTimeout","suggestRuleBreak","emotion","suggestions","processIntent","intent","_intent$song_intent","_intent$technical_con","song_intent","mood_primary","key","technical_constraints","technical_key","harmonyByEmotion","tempoByEmotion","harmony","tempo","mixer_params","reverb","delay","compression","warmth"],"sources":["/Users/seanburdges/Documents/GitHub/iDAWi/src/hooks/useMusicBrain.ts"],"sourcesContent":["// Music Brain integration hook\n// In production, this would use Tauri's invoke to call Python\n\ninterface Emotion {\n  name: string;\n  category: string;\n  intensity: number;\n}\n\ninterface RuleBreakSuggestion {\n  rule: string;\n  effect: string;\n  use_when: string;\n  justification: string;\n}\n\ninterface ProcessIntentResult {\n  harmony: string[];\n  tempo: number;\n  key: string;\n  mixer_params: Record<string, number | string>;\n}\n\n// Default emotions for when Music Brain is not available\nconst defaultEmotions: Emotion[] = [\n  { name: 'Grief', category: 'Sadness', intensity: 0.9 },\n  { name: 'Melancholy', category: 'Sadness', intensity: 0.6 },\n  { name: 'Longing', category: 'Sadness', intensity: 0.7 },\n  { name: 'Joy', category: 'Happiness', intensity: 0.8 },\n  { name: 'Euphoria', category: 'Happiness', intensity: 1.0 },\n  { name: 'Contentment', category: 'Happiness', intensity: 0.5 },\n  { name: 'Rage', category: 'Anger', intensity: 1.0 },\n  { name: 'Frustration', category: 'Anger', intensity: 0.6 },\n  { name: 'Resentment', category: 'Anger', intensity: 0.7 },\n  { name: 'Terror', category: 'Fear', intensity: 1.0 },\n  { name: 'Anxiety', category: 'Fear', intensity: 0.6 },\n  { name: 'Dread', category: 'Fear', intensity: 0.8 },\n  { name: 'Passion', category: 'Love', intensity: 0.9 },\n  { name: 'Tenderness', category: 'Love', intensity: 0.5 },\n  { name: 'Devotion', category: 'Love', intensity: 0.8 },\n];\n\n// Rule-breaking suggestions based on emotions\nconst ruleBreakingDatabase: Record<string, RuleBreakSuggestion[]> = {\n  Grief: [\n    {\n      rule: 'HARMONY_AvoidTonicResolution',\n      effect: 'Creates unresolved yearning that mirrors emotional state',\n      use_when: 'The listener should feel the loss is still unprocessed',\n      justification: 'Grief rarely resolves cleanly. Music that refuses resolution honors that truth.',\n    },\n    {\n      rule: 'ARRANGEMENT_BuriedVocals',\n      effect: 'Creates dissociation, words half-heard like fading memories',\n      use_when: 'The subject is too painful to confront directly',\n      justification: 'Sometimes the truth is easier to bear when obscured.',\n    },\n  ],\n  Anxiety: [\n    {\n      rule: 'RHYTHM_ConstantDisplacement',\n      effect: 'Never lets listener settle into comfortable expectation',\n      use_when: 'Representing intrusive thoughts or restlessness',\n      justification: 'Anxiety never follows a predictable pattern.',\n    },\n    {\n      rule: 'HARMONY_UnresolvedSuspensions',\n      effect: 'Creates tension that never fully releases',\n      use_when: 'Showing the impossibility of finding peace',\n      justification: 'The anxious mind cannot find resolution.',\n    },\n  ],\n  Rage: [\n    {\n      rule: 'DYNAMICS_ExtremeContrasts',\n      effect: 'Jarring shifts that mirror emotional volatility',\n      use_when: 'The anger comes in unpredictable waves',\n      justification: 'Rage rarely announces itself politely.',\n    },\n    {\n      rule: 'FORM_StructuralCollapse',\n      effect: 'Traditional form breaks down as control is lost',\n      use_when: 'Representing loss of composure',\n      justification: 'Anger destroys structure by nature.',\n    },\n  ],\n  Joy: [\n    {\n      rule: 'HARMONY_ModalInterchange',\n      effect: 'Unexpected brightness from borrowed chords',\n      use_when: 'Joy that contains complexity and depth',\n      justification: 'Real joy often comes from unexpected places.',\n    },\n  ],\n  Love: [\n    {\n      rule: 'PRODUCTION_PitchImperfection',\n      effect: 'Vulnerability through imperfect tuning',\n      use_when: 'Love that is honest and unpolished',\n      justification: 'Perfect pitch is a lie we tell ourselves.',\n    },\n  ],\n};\n\nimport { useState } from 'react';\n\nexport function useMusicBrain() {\n  const [isLoading, setIsLoading] = useState(false);\n\n  const getEmotions = async (): Promise<Emotion[]> => {\n    // In production: return invoke('music_brain_command', { command: 'get_emotions', args: {} });\n    setIsLoading(true);\n    try {\n      return await new Promise((resolve) => {\n        setTimeout(() => resolve(defaultEmotions), 300);\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const suggestRuleBreak = async (emotion: string): Promise<RuleBreakSuggestion[]> => {\n    // In production: return invoke('music_brain_command', { command: 'suggest_rule_break', args: { emotion } });\n    setIsLoading(true);\n    try {\n      return await new Promise((resolve) => {\n        setTimeout(() => {\n          const suggestions = ruleBreakingDatabase[emotion] || [\n            {\n              rule: 'HARMONY_ModalInterchange',\n              effect: 'Unexpected harmonic color',\n              use_when: 'You want to surprise the listener',\n              justification: 'Breaking expectations creates emotional impact.',\n            },\n          ];\n          resolve(suggestions);\n        }, 500);\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const processIntent = async (intent: Record<string, unknown>): Promise<ProcessIntentResult> => {\n    // In production: return invoke('music_brain_command', { command: 'process_intent', args: { intent } });\n    setIsLoading(true);\n    try {\n      return await new Promise((resolve) => {\n        setTimeout(() => {\n          // Generate contextual results based on intent\n          const emotion = (intent.song_intent as Record<string, string>)?.mood_primary || 'neutral';\n          const key = (intent.technical_constraints as Record<string, string>)?.technical_key || 'C';\n\n          const harmonyByEmotion: Record<string, string[]> = {\n            Grief: ['Am', 'F', 'C', 'G'],\n            Anxiety: ['Dm', 'Am/E', 'Bb', 'F/A'],\n            Rage: ['Em', 'C', 'G', 'D'],\n            Joy: ['C', 'G', 'Am', 'F'],\n            Love: ['F', 'Am', 'Dm', 'C'],\n          };\n\n          const tempoByEmotion: Record<string, number> = {\n            Grief: 72,\n            Anxiety: 140,\n            Rage: 160,\n            Joy: 120,\n            Love: 90,\n          };\n\n          resolve({\n            harmony: harmonyByEmotion[emotion] || ['C', 'Am', 'F', 'G'],\n            tempo: tempoByEmotion[emotion] || 120,\n            key,\n            mixer_params: {\n              reverb: emotion === 'Grief' ? 0.7 : 0.3,\n              delay: emotion === 'Anxiety' ? 0.5 : 0.2,\n              compression: emotion === 'Rage' ? 0.8 : 0.4,\n              warmth: emotion === 'Love' ? 0.6 : 0.3,\n            },\n          });\n        }, 800);\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return {\n    getEmotions,\n    suggestRuleBreak,\n    processIntent,\n    isLoading,\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}