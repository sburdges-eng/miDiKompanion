{"ast":null,"code":"import React from'react';import{Play,Pause,Square,SkipBack,Circle}from'lucide-react';import{useStore}from'../../store/useStore';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const Transport=()=>{const{isPlaying,isRecording,currentTime,tempo,timeSignature,setPlaying,setRecording,setCurrentTime,setTempo}=useStore();const formatTime=seconds=>{const mins=Math.floor(seconds/60);const secs=Math.floor(seconds%60);const ms=Math.floor(seconds%1*100);return\"\".concat(mins.toString().padStart(2,'0'),\":\").concat(secs.toString().padStart(2,'0'),\".\").concat(ms.toString().padStart(2,'0'));};const calculateBarBeat=seconds=>{const beatsPerSecond=tempo/60;const totalBeats=seconds*beatsPerSecond;const bar=Math.floor(totalBeats/timeSignature[0])+1;const beat=Math.floor(totalBeats%timeSignature[0])+1;return\"\".concat(bar,\".\").concat(beat);};return/*#__PURE__*/_jsxs(\"div\",{className:\"h-16 bg-ableton-surface border-t border-ableton-border flex items-center px-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentTime(0),className:\"btn-ableton p-2\",title:\"Go to start\",children:/*#__PURE__*/_jsx(SkipBack,{size:18})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPlaying(!isPlaying),className:\"btn-ableton p-2 \".concat(isPlaying?'btn-ableton-active':''),title:isPlaying?'Pause':'Play',children:isPlaying?/*#__PURE__*/_jsx(Pause,{size:18}):/*#__PURE__*/_jsx(Play,{size:18})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setPlaying(false);setCurrentTime(0);},className:\"btn-ableton p-2\",title:\"Stop\",children:/*#__PURE__*/_jsx(Square,{size:18})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setRecording(!isRecording),className:\"btn-ableton p-2 \".concat(isRecording?'bg-red-600 hover:bg-red-500':''),title:isRecording?'Stop Recording':'Record',children:/*#__PURE__*/_jsx(Circle,{size:18,fill:isRecording?'#fff':'none'})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 font-mono text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-ableton-text-dim\",children:\"Time\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:formatTime(currentTime)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-ableton-text-dim\",children:\"Bar.Beat\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:calculateBarBeat(currentTime)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-ableton-text-dim\",children:\"BPM\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:tempo,onChange:e=>setTempo(Math.max(20,Math.min(300,Number(e.target.value)))),className:\"w-16 bg-ableton-bg border border-ableton-border rounded px-2 py-1 text-center font-mono\",min:\"20\",max:\"300\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-ableton-text-dim\",children:\"Time Sig\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-mono\",children:[timeSignature[0],\"/\",timeSignature[1]]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[isRecording&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1 text-red-500\",children:[/*#__PURE__*/_jsx(Circle,{size:8,fill:\"currentColor\",className:\"animate-pulse\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"REC\"})]}),isPlaying&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1 text-green-500\",children:[/*#__PURE__*/_jsx(Play,{size:8,fill:\"currentColor\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:\"PLAY\"})]})]})]});};","map":{"version":3,"names":["React","Play","Pause","Square","SkipBack","Circle","useStore","jsx","_jsx","jsxs","_jsxs","Transport","isPlaying","isRecording","currentTime","tempo","timeSignature","setPlaying","setRecording","setCurrentTime","setTempo","formatTime","seconds","mins","Math","floor","secs","ms","concat","toString","padStart","calculateBarBeat","beatsPerSecond","totalBeats","bar","beat","className","children","onClick","title","size","fill","type","value","onChange","e","max","min","Number","target"],"sources":["/Users/seanburdges/Documents/GitHub/iDAWi/src/components/SideA/Transport.tsx"],"sourcesContent":["import React from 'react';\nimport { Play, Pause, Square, SkipBack, Circle } from 'lucide-react';\nimport { useStore } from '../../store/useStore';\n\nexport const Transport: React.FC = () => {\n  const {\n    isPlaying,\n    isRecording,\n    currentTime,\n    tempo,\n    timeSignature,\n    setPlaying,\n    setRecording,\n    setCurrentTime,\n    setTempo\n  } = useStore();\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    const ms = Math.floor((seconds % 1) * 100);\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}.${ms.toString().padStart(2, '0')}`;\n  };\n\n  const calculateBarBeat = (seconds: number) => {\n    const beatsPerSecond = tempo / 60;\n    const totalBeats = seconds * beatsPerSecond;\n    const bar = Math.floor(totalBeats / timeSignature[0]) + 1;\n    const beat = Math.floor(totalBeats % timeSignature[0]) + 1;\n    return `${bar}.${beat}`;\n  };\n\n  return (\n    <div className=\"h-16 bg-ableton-surface border-t border-ableton-border flex items-center px-4 gap-4\">\n      {/* Transport Controls */}\n      <div className=\"flex items-center gap-2\">\n        <button\n          onClick={() => setCurrentTime(0)}\n          className=\"btn-ableton p-2\"\n          title=\"Go to start\"\n        >\n          <SkipBack size={18} />\n        </button>\n\n        <button\n          onClick={() => setPlaying(!isPlaying)}\n          className={`btn-ableton p-2 ${isPlaying ? 'btn-ableton-active' : ''}`}\n          title={isPlaying ? 'Pause' : 'Play'}\n        >\n          {isPlaying ? <Pause size={18} /> : <Play size={18} />}\n        </button>\n\n        <button\n          onClick={() => {\n            setPlaying(false);\n            setCurrentTime(0);\n          }}\n          className=\"btn-ableton p-2\"\n          title=\"Stop\"\n        >\n          <Square size={18} />\n        </button>\n\n        <button\n          onClick={() => setRecording(!isRecording)}\n          className={`btn-ableton p-2 ${isRecording ? 'bg-red-600 hover:bg-red-500' : ''}`}\n          title={isRecording ? 'Stop Recording' : 'Record'}\n        >\n          <Circle size={18} fill={isRecording ? '#fff' : 'none'} />\n        </button>\n      </div>\n\n      {/* Time Display */}\n      <div className=\"flex items-center gap-4 font-mono text-sm\">\n        <div className=\"flex flex-col items-center\">\n          <span className=\"text-xs text-ableton-text-dim\">Time</span>\n          <span className=\"text-lg\">{formatTime(currentTime)}</span>\n        </div>\n        <div className=\"flex flex-col items-center\">\n          <span className=\"text-xs text-ableton-text-dim\">Bar.Beat</span>\n          <span className=\"text-lg\">{calculateBarBeat(currentTime)}</span>\n        </div>\n      </div>\n\n      {/* Tempo */}\n      <div className=\"flex items-center gap-2\">\n        <span className=\"text-xs text-ableton-text-dim\">BPM</span>\n        <input\n          type=\"number\"\n          value={tempo}\n          onChange={(e) => setTempo(Math.max(20, Math.min(300, Number(e.target.value))))}\n          className=\"w-16 bg-ableton-bg border border-ableton-border rounded px-2 py-1 text-center font-mono\"\n          min=\"20\"\n          max=\"300\"\n        />\n      </div>\n\n      {/* Time Signature */}\n      <div className=\"flex items-center gap-1\">\n        <span className=\"text-xs text-ableton-text-dim\">Time Sig</span>\n        <span className=\"font-mono\">{timeSignature[0]}/{timeSignature[1]}</span>\n      </div>\n\n      {/* Spacer */}\n      <div className=\"flex-1\" />\n\n      {/* Status indicators */}\n      <div className=\"flex items-center gap-4\">\n        {isRecording && (\n          <div className=\"flex items-center gap-1 text-red-500\">\n            <Circle size={8} fill=\"currentColor\" className=\"animate-pulse\" />\n            <span className=\"text-xs\">REC</span>\n          </div>\n        )}\n        {isPlaying && (\n          <div className=\"flex items-center gap-1 text-green-500\">\n            <Play size={8} fill=\"currentColor\" />\n            <span className=\"text-xs\">PLAY</span>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}