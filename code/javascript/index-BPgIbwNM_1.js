(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();function b0(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function tv(o){if(Object.prototype.hasOwnProperty.call(o,"__esModule"))return o;var e=o.default;if(typeof e=="function"){var n=function i(){var r=!1;try{r=this instanceof i}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(o).forEach(function(i){var r=Object.getOwnPropertyDescriptor(o,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return o[i]}})}),n}var Sd={exports:{}},kr={};var Cg;function nv(){if(Cg)return kr;Cg=1;var o=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,l){var d=null;if(l!==void 0&&(d=""+l),r.key!==void 0&&(d=""+r.key),"key"in r){l={};for(var f in r)f!=="key"&&(l[f]=r[f])}else l=r;return r=l.ref,{$$typeof:o,type:i,key:d,ref:r!==void 0?r:null,props:l}}return kr.Fragment=e,kr.jsx=n,kr.jsxs=n,kr}var wg;function sv(){return wg||(wg=1,Sd.exports=nv()),Sd.exports}var u=sv(),_d={exports:{}},Se={};var kg;function iv(){if(kg)return Se;kg=1;var o=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),b=Symbol.iterator;function v(z){return z===null||typeof z!="object"?null:(z=b&&z[b]||z["@@iterator"],typeof z=="function"?z:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,T={};function C(z,X,ie){this.props=z,this.context=X,this.refs=T,this.updater=ie||_}C.prototype.isReactComponent={},C.prototype.setState=function(z,X){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,X,"setState")},C.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function N(){}N.prototype=C.prototype;function A(z,X,ie){this.props=z,this.context=X,this.refs=T,this.updater=ie||_}var D=A.prototype=new N;D.constructor=A,w(D,C.prototype),D.isPureReactComponent=!0;var M=Array.isArray;function E(){}var k={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function O(z,X,ie){var le=ie.ref;return{$$typeof:o,type:z,key:X,ref:le!==void 0?le:null,props:ie}}function L(z,X){return O(z.type,X,z.props)}function q(z){return typeof z=="object"&&z!==null&&z.$$typeof===o}function P(z){var X={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ie){return X[ie]})}var te=/\/+/g;function se(z,X){return typeof z=="object"&&z!==null&&z.key!=null?P(""+z.key):X.toString(36)}function de(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(E,E):(z.status="pending",z.then(function(X){z.status==="pending"&&(z.status="fulfilled",z.value=X)},function(X){z.status==="pending"&&(z.status="rejected",z.reason=X)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function B(z,X,ie,le,oe){var me=typeof z;(me==="undefined"||me==="boolean")&&(z=null);var be=!1;if(z===null)be=!0;else switch(me){case"bigint":case"string":case"number":be=!0;break;case"object":switch(z.$$typeof){case o:case e:be=!0;break;case y:return be=z._init,B(be(z._payload),X,ie,le,oe)}}if(be)return oe=oe(z),be=le===""?"."+se(z,0):le,M(oe)?(ie="",be!=null&&(ie=be.replace(te,"$&/")+"/"),B(oe,X,ie,"",function(Nt){return Nt})):oe!=null&&(q(oe)&&(oe=L(oe,ie+(oe.key==null||z&&z.key===oe.key?"":(""+oe.key).replace(te,"$&/")+"/")+be)),X.push(oe)),1;be=0;var fe=le===""?".":le+":";if(M(z))for(var ze=0;ze<z.length;ze++)le=z[ze],me=fe+se(le,ze),be+=B(le,X,ie,me,oe);else if(ze=v(z),typeof ze=="function")for(z=ze.call(z),ze=0;!(le=z.next()).done;)le=le.value,me=fe+se(le,ze++),be+=B(le,X,ie,me,oe);else if(me==="object"){if(typeof z.then=="function")return B(de(z),X,ie,le,oe);throw X=String(z),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return be}function Q(z,X,ie){if(z==null)return z;var le=[],oe=0;return B(z,le,"","",function(me){return X.call(ie,me,oe++)}),le}function ne(z){if(z._status===-1){var X=z._result;X=X(),X.then(function(ie){(z._status===0||z._status===-1)&&(z._status=1,z._result=ie)},function(ie){(z._status===0||z._status===-1)&&(z._status=2,z._result=ie)}),z._status===-1&&(z._status=0,z._result=X)}if(z._status===1)return z._result.default;throw z._result}var ae=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},ue={map:Q,forEach:function(z,X,ie){Q(z,function(){X.apply(this,arguments)},ie)},count:function(z){var X=0;return Q(z,function(){X++}),X},toArray:function(z){return Q(z,function(X){return X})||[]},only:function(z){if(!q(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return Se.Activity=x,Se.Children=ue,Se.Component=C,Se.Fragment=n,Se.Profiler=r,Se.PureComponent=A,Se.StrictMode=i,Se.Suspense=g,Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Se.__COMPILER_RUNTIME={__proto__:null,c:function(z){return k.H.useMemoCache(z)}},Se.cache=function(z){return function(){return z.apply(null,arguments)}},Se.cacheSignal=function(){return null},Se.cloneElement=function(z,X,ie){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var le=w({},z.props),oe=z.key;if(X!=null)for(me in X.key!==void 0&&(oe=""+X.key),X)!R.call(X,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&X.ref===void 0||(le[me]=X[me]);var me=arguments.length-2;if(me===1)le.children=ie;else if(1<me){for(var be=Array(me),fe=0;fe<me;fe++)be[fe]=arguments[fe+2];le.children=be}return O(z.type,oe,le)},Se.createContext=function(z){return z={$$typeof:d,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:l,_context:z},z},Se.createElement=function(z,X,ie){var le,oe={},me=null;if(X!=null)for(le in X.key!==void 0&&(me=""+X.key),X)R.call(X,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(oe[le]=X[le]);var be=arguments.length-2;if(be===1)oe.children=ie;else if(1<be){for(var fe=Array(be),ze=0;ze<be;ze++)fe[ze]=arguments[ze+2];oe.children=fe}if(z&&z.defaultProps)for(le in be=z.defaultProps,be)oe[le]===void 0&&(oe[le]=be[le]);return O(z,me,oe)},Se.createRef=function(){return{current:null}},Se.forwardRef=function(z){return{$$typeof:f,render:z}},Se.isValidElement=q,Se.lazy=function(z){return{$$typeof:y,_payload:{_status:-1,_result:z},_init:ne}},Se.memo=function(z,X){return{$$typeof:m,type:z,compare:X===void 0?null:X}},Se.startTransition=function(z){var X=k.T,ie={};k.T=ie;try{var le=z(),oe=k.S;oe!==null&&oe(ie,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(E,ae)}catch(me){ae(me)}finally{X!==null&&ie.types!==null&&(X.types=ie.types),k.T=X}},Se.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Se.use=function(z){return k.H.use(z)},Se.useActionState=function(z,X,ie){return k.H.useActionState(z,X,ie)},Se.useCallback=function(z,X){return k.H.useCallback(z,X)},Se.useContext=function(z){return k.H.useContext(z)},Se.useDebugValue=function(){},Se.useDeferredValue=function(z,X){return k.H.useDeferredValue(z,X)},Se.useEffect=function(z,X){return k.H.useEffect(z,X)},Se.useEffectEvent=function(z){return k.H.useEffectEvent(z)},Se.useId=function(){return k.H.useId()},Se.useImperativeHandle=function(z,X,ie){return k.H.useImperativeHandle(z,X,ie)},Se.useInsertionEffect=function(z,X){return k.H.useInsertionEffect(z,X)},Se.useLayoutEffect=function(z,X){return k.H.useLayoutEffect(z,X)},Se.useMemo=function(z,X){return k.H.useMemo(z,X)},Se.useOptimistic=function(z,X){return k.H.useOptimistic(z,X)},Se.useReducer=function(z,X,ie){return k.H.useReducer(z,X,ie)},Se.useRef=function(z){return k.H.useRef(z)},Se.useState=function(z){return k.H.useState(z)},Se.useSyncExternalStore=function(z,X,ie){return k.H.useSyncExternalStore(z,X,ie)},Se.useTransition=function(){return k.H.useTransition()},Se.version="19.2.1",Se}var jg;function Zd(){return jg||(jg=1,_d.exports=iv()),_d.exports}var I=Zd();const v0=b0(I);var Td={exports:{}},jr={},Cd={exports:{}},wd={};var Ag;function av(){return Ag||(Ag=1,(function(o){function e(B,Q){var ne=B.length;B.push(Q);e:for(;0<ne;){var ae=ne-1>>>1,ue=B[ae];if(0<r(ue,Q))B[ae]=Q,B[ne]=ue,ne=ae;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var Q=B[0],ne=B.pop();if(ne!==Q){B[0]=ne;e:for(var ae=0,ue=B.length,z=ue>>>1;ae<z;){var X=2*(ae+1)-1,ie=B[X],le=X+1,oe=B[le];if(0>r(ie,ne))le<ue&&0>r(oe,ie)?(B[ae]=oe,B[le]=ne,ae=le):(B[ae]=ie,B[X]=ne,ae=X);else if(le<ue&&0>r(oe,ne))B[ae]=oe,B[le]=ne,ae=le;else break e}}return Q}function r(B,Q){var ne=B.sortIndex-Q.sortIndex;return ne!==0?ne:B.id-Q.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;o.unstable_now=function(){return l.now()}}else{var d=Date,f=d.now();o.unstable_now=function(){return d.now()-f}}var g=[],m=[],y=1,x=null,b=3,v=!1,_=!1,w=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function D(B){for(var Q=n(m);Q!==null;){if(Q.callback===null)i(m);else if(Q.startTime<=B)i(m),Q.sortIndex=Q.expirationTime,e(g,Q);else break;Q=n(m)}}function M(B){if(w=!1,D(B),!_)if(n(g)!==null)_=!0,E||(E=!0,P());else{var Q=n(m);Q!==null&&de(M,Q.startTime-B)}}var E=!1,k=-1,R=5,O=-1;function L(){return T?!0:!(o.unstable_now()-O<R)}function q(){if(T=!1,E){var B=o.unstable_now();O=B;var Q=!0;try{e:{_=!1,w&&(w=!1,N(k),k=-1),v=!0;var ne=b;try{t:{for(D(B),x=n(g);x!==null&&!(x.expirationTime>B&&L());){var ae=x.callback;if(typeof ae=="function"){x.callback=null,b=x.priorityLevel;var ue=ae(x.expirationTime<=B);if(B=o.unstable_now(),typeof ue=="function"){x.callback=ue,D(B),Q=!0;break t}x===n(g)&&i(g),D(B)}else i(g);x=n(g)}if(x!==null)Q=!0;else{var z=n(m);z!==null&&de(M,z.startTime-B),Q=!1}}break e}finally{x=null,b=ne,v=!1}Q=void 0}}finally{Q?P():E=!1}}}var P;if(typeof A=="function")P=function(){A(q)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,se=te.port2;te.port1.onmessage=q,P=function(){se.postMessage(null)}}else P=function(){C(q,0)};function de(B,Q){k=C(function(){B(o.unstable_now())},Q)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(B){B.callback=null},o.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<B?Math.floor(1e3/B):5},o.unstable_getCurrentPriorityLevel=function(){return b},o.unstable_next=function(B){switch(b){case 1:case 2:case 3:var Q=3;break;default:Q=b}var ne=b;b=Q;try{return B()}finally{b=ne}},o.unstable_requestPaint=function(){T=!0},o.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ne=b;b=B;try{return Q()}finally{b=ne}},o.unstable_scheduleCallback=function(B,Q,ne){var ae=o.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?ae+ne:ae):ne=ae,B){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=ne+ue,B={id:y++,callback:Q,priorityLevel:B,startTime:ne,expirationTime:ue,sortIndex:-1},ne>ae?(B.sortIndex=ne,e(m,B),n(g)===null&&B===n(m)&&(w?(N(k),k=-1):w=!0,de(M,ne-ae))):(B.sortIndex=ue,e(g,B),_||v||(_=!0,E||(E=!0,P()))),B},o.unstable_shouldYield=L,o.unstable_wrapCallback=function(B){var Q=b;return function(){var ne=b;b=Q;try{return B.apply(this,arguments)}finally{b=ne}}}})(wd)),wd}var Mg;function rv(){return Mg||(Mg=1,Cd.exports=av()),Cd.exports}var kd={exports:{}},Rt={};var Rg;function ov(){if(Rg)return Rt;Rg=1;var o=Zd();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(g,m,y){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:x==null?null:""+x,children:g,containerInfo:m,implementation:y}}var d=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Rt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Rt.createPortal=function(g,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(g,m,null,y)},Rt.flushSync=function(g){var m=d.T,y=i.p;try{if(d.T=null,i.p=2,g)return g()}finally{d.T=m,i.p=y,i.d.f()}},Rt.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(g,m))},Rt.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Rt.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var y=m.as,x=f(y,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,v=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?i.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:x,integrity:b,fetchPriority:v}):y==="script"&&i.d.X(g,{crossOrigin:x,integrity:b,fetchPriority:v,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Rt.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=f(m.as,m.crossOrigin);i.d.M(g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(g)},Rt.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,x=f(y,m.crossOrigin);i.d.L(g,y,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Rt.preloadModule=function(g,m){if(typeof g=="string")if(m){var y=f(m.as,m.crossOrigin);i.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(g)},Rt.requestFormReset=function(g){i.d.r(g)},Rt.unstable_batchedUpdates=function(g,m){return g(m)},Rt.useFormState=function(g,m,y){return d.H.useFormState(g,m,y)},Rt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Rt.version="19.2.1",Rt}var Eg;function lv(){if(Eg)return kd.exports;Eg=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(e){console.error(e)}}return o(),kd.exports=ov(),kd.exports}var Dg;function cv(){if(Dg)return jr;Dg=1;var o=rv(),e=Zd(),n=lv();function i(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function l(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function d(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function f(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function g(t){if(l(t)!==t)throw Error(i(188))}function m(t){var s=t.alternate;if(!s){if(s=l(t),s===null)throw Error(i(188));return s!==t?null:t}for(var a=t,c=s;;){var h=a.return;if(h===null)break;var p=h.alternate;if(p===null){if(c=h.return,c!==null){a=c;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===a)return g(h),t;if(p===c)return g(h),s;p=p.sibling}throw Error(i(188))}if(a.return!==c.return)a=h,c=p;else{for(var S=!1,j=h.child;j;){if(j===a){S=!0,a=h,c=p;break}if(j===c){S=!0,c=h,a=p;break}j=j.sibling}if(!S){for(j=p.child;j;){if(j===a){S=!0,a=p,c=h;break}if(j===c){S=!0,c=p,a=h;break}j=j.sibling}if(!S)throw Error(i(189))}}if(a.alternate!==c)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?t:s}function y(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=y(t),s!==null)return s;t=t.sibling}return null}var x=Object.assign,b=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),A=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=q&&t[q]||t["@@iterator"],typeof t=="function"?t:null)}var te=Symbol.for("react.client.reference");function se(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===te?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case w:return"Fragment";case C:return"Profiler";case T:return"StrictMode";case M:return"Suspense";case E:return"SuspenseList";case O:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case _:return"Portal";case A:return t.displayName||"Context";case N:return(t._context.displayName||"Context")+".Consumer";case D:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return s=t.displayName||null,s!==null?s:se(t.type)||"Memo";case R:s=t._payload,t=t._init;try{return se(t(s))}catch{}}return null}var de=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},ae=[],ue=-1;function z(t){return{current:t}}function X(t){0>ue||(t.current=ae[ue],ae[ue]=null,ue--)}function ie(t,s){ue++,ae[ue]=t.current,t.current=s}var le=z(null),oe=z(null),me=z(null),be=z(null);function fe(t,s){switch(ie(me,s),ie(oe,t),ie(le,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Wm(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Wm(s),t=Qm(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}X(le),ie(le,t)}function ze(){X(le),X(oe),X(me)}function Nt(t){t.memoizedState!==null&&ie(be,t);var s=le.current,a=Qm(s,t.type);s!==a&&(ie(oe,t),ie(le,a))}function Zt(t){oe.current===t&&(X(le),X(oe)),be.current===t&&(X(be),_r._currentValue=ne)}var cn,Ot;function re(t){if(cn===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);cn=s&&s[1]||"",Ot=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cn+t+Ot}var ee=!1;function he(t,s){if(!t||ee)return"";ee=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(Z){var W=Z}Reflect.construct(t,[],J)}else{try{J.call()}catch(Z){W=Z}t.call(J.prototype)}}else{try{throw Error()}catch(Z){W=Z}(J=t())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(Z){if(Z&&W&&typeof Z.stack=="string")return[Z.stack,W.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),S=p[0],j=p[1];if(S&&j){var F=S.split(`
`),G=j.split(`
`);for(h=c=0;c<F.length&&!F[c].includes("DetermineComponentFrameRoot");)c++;for(;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;if(c===F.length||h===G.length)for(c=F.length-1,h=G.length-1;1<=c&&0<=h&&F[c]!==G[h];)h--;for(;1<=c&&0<=h;c--,h--)if(F[c]!==G[h]){if(c!==1||h!==1)do if(c--,h--,0>h||F[c]!==G[h]){var K=`
`+F[c].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=c&&0<=h);break}}}finally{ee=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?re(a):""}function Ie(t,s){switch(t.tag){case 26:case 27:case 5:return re(t.type);case 16:return re("Lazy");case 13:return t.child!==s&&s!==null?re("Suspense Fallback"):re("Suspense");case 19:return re("SuspenseList");case 0:case 15:return he(t.type,!1);case 11:return he(t.type.render,!1);case 1:return he(t.type,!0);case 31:return re("Activity");default:return""}}function Ae(t){try{var s="",a=null;do s+=Ie(t,a),a=t,t=t.return;while(t);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var we=Object.prototype.hasOwnProperty,Ye=o.unstable_scheduleCallback,Mt=o.unstable_cancelCallback,Rn=o.unstable_shouldYield,Qs=o.unstable_requestPaint,_t=o.unstable_now,lc=o.unstable_getCurrentPriorityLevel,io=o.unstable_ImmediatePriority,wh=o.unstable_UserBlockingPriority,ao=o.unstable_NormalPriority,By=o.unstable_LowPriority,kh=o.unstable_IdlePriority,Iy=o.log,Fy=o.unstable_setDisableYieldValue,Oa=null,Kt=null;function ps(t){if(typeof Iy=="function"&&Fy(t),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Oa,t)}catch{}}var $t=Math.clz32?Math.clz32:Uy,Vy=Math.log,Ly=Math.LN2;function Uy(t){return t>>>=0,t===0?32:31-(Vy(t)/Ly|0)|0}var ro=256,oo=262144,lo=4194304;function Xs(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function co(t,s,a){var c=t.pendingLanes;if(c===0)return 0;var h=0,p=t.suspendedLanes,S=t.pingedLanes;t=t.warmLanes;var j=c&134217727;return j!==0?(c=j&~p,c!==0?h=Xs(c):(S&=j,S!==0?h=Xs(S):a||(a=j&~t,a!==0&&(h=Xs(a))))):(j=c&~p,j!==0?h=Xs(j):S!==0?h=Xs(S):a||(a=c&~t,a!==0&&(h=Xs(a)))),h===0?0:s!==0&&s!==h&&(s&p)===0&&(p=h&-h,a=s&-s,p>=a||p===32&&(a&4194048)!==0)?s:h}function za(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function qy(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jh(){var t=lo;return lo<<=1,(lo&62914560)===0&&(lo=4194304),t}function cc(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Ba(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Py(t,s,a,c,h,p){var S=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var j=t.entanglements,F=t.expirationTimes,G=t.hiddenUpdates;for(a=S&~a;0<a;){var K=31-$t(a),J=1<<K;j[K]=0,F[K]=-1;var W=G[K];if(W!==null)for(G[K]=null,K=0;K<W.length;K++){var Z=W[K];Z!==null&&(Z.lane&=-536870913)}a&=~J}c!==0&&Ah(t,c,0),p!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=p&~(S&~s))}function Ah(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var c=31-$t(s);t.entangledLanes|=s,t.entanglements[c]=t.entanglements[c]|1073741824|a&261930}function Mh(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var c=31-$t(a),h=1<<c;h&s|t[c]&s&&(t[c]|=s),a&=~h}}function Rh(t,s){var a=s&-s;return a=(a&42)!==0?1:uc(a),(a&(t.suspendedLanes|s))!==0?0:a}function uc(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function dc(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Eh(){var t=Q.p;return t!==0?t:(t=window.event,t===void 0?32:yg(t.type))}function Dh(t,s){var a=Q.p;try{return Q.p=t,s()}finally{Q.p=a}}var ms=Math.random().toString(36).slice(2),Tt="__reactFiber$"+ms,Vt="__reactProps$"+ms,Ri="__reactContainer$"+ms,hc="__reactEvents$"+ms,Hy="__reactListeners$"+ms,Gy="__reactHandles$"+ms,Nh="__reactResources$"+ms,Ia="__reactMarker$"+ms;function fc(t){delete t[Tt],delete t[Vt],delete t[hc],delete t[Hy],delete t[Gy]}function Ei(t){var s=t[Tt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[Ri]||a[Tt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=tg(t);t!==null;){if(a=t[Tt])return a;t=tg(t)}return s}t=a,a=t.parentNode}return null}function Di(t){if(t=t[Tt]||t[Ri]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function Fa(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(i(33))}function Ni(t){var s=t[Nh];return s||(s=t[Nh]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function xt(t){t[Ia]=!0}var Oh=new Set,zh={};function Zs(t,s){Oi(t,s),Oi(t+"Capture",s)}function Oi(t,s){for(zh[t]=s,t=0;t<s.length;t++)Oh.add(s[t])}var Yy=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bh={},Ih={};function Wy(t){return we.call(Ih,t)?!0:we.call(Bh,t)?!1:Yy.test(t)?Ih[t]=!0:(Bh[t]=!0,!1)}function uo(t,s,a){if(Wy(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function ho(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Un(t,s,a,c){if(c===null)t.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+c)}}function un(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fh(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Qy(t,s,a){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var h=c.get,p=c.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return h.call(this)},set:function(S){a=""+S,p.call(this,S)}}),Object.defineProperty(t,s,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function pc(t){if(!t._valueTracker){var s=Fh(t)?"checked":"value";t._valueTracker=Qy(t,s,""+t[s])}}function Vh(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return t&&(c=Fh(t)?t.checked?"true":"false":t.value),t=c,t!==a?(s.setValue(t),!0):!1}function fo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Xy=/[\n"\\]/g;function dn(t){return t.replace(Xy,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function mc(t,s,a,c,h,p,S,j){t.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.type=S:t.removeAttribute("type"),s!=null?S==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+un(s)):t.value!==""+un(s)&&(t.value=""+un(s)):S!=="submit"&&S!=="reset"||t.removeAttribute("value"),s!=null?gc(t,S,un(s)):a!=null?gc(t,S,un(a)):c!=null&&t.removeAttribute("value"),h==null&&p!=null&&(t.defaultChecked=!!p),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?t.name=""+un(j):t.removeAttribute("name")}function Lh(t,s,a,c,h,p,S,j){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),s!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||s!=null)){pc(t);return}a=a!=null?""+un(a):"",s=s!=null?""+un(s):a,j||s===t.value||(t.value=s),t.defaultValue=s}c=c??h,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=j?t.checked:!!c,t.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(t.name=S),pc(t)}function gc(t,s,a){s==="number"&&fo(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function zi(t,s,a,c){if(t=t.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=s.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&c&&(t[a].defaultSelected=!0)}else{for(a=""+un(a),s=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,c&&(t[h].defaultSelected=!0);return}s!==null||t[h].disabled||(s=t[h])}s!==null&&(s.selected=!0)}}function Uh(t,s,a){if(s!=null&&(s=""+un(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+un(a):""}function qh(t,s,a,c){if(s==null){if(c!=null){if(a!=null)throw Error(i(92));if(de(c)){if(1<c.length)throw Error(i(93));c=c[0]}a=c}a==null&&(a=""),s=a}a=un(s),t.defaultValue=a,c=t.textContent,c===a&&c!==""&&c!==null&&(t.value=c),pc(t)}function Bi(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var Zy=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ph(t,s,a){var c=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":c?t.setProperty(s,a):typeof a!="number"||a===0||Zy.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function Hh(t,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(t=t.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var h in s)c=s[h],s.hasOwnProperty(h)&&a[h]!==c&&Ph(t,h,c)}else for(var p in s)s.hasOwnProperty(p)&&Ph(t,p,s[p])}function yc(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ky=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$y=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function po(t){return $y.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function qn(){}var xc=null;function bc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ii=null,Fi=null;function Gh(t){var s=Di(t);if(s&&(t=s.stateNode)){var a=t[Vt]||null;e:switch(t=s.stateNode,s.type){case"input":if(mc(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+dn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==t&&c.form===t.form){var h=c[Vt]||null;if(!h)throw Error(i(90));mc(c,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)c=a[s],c.form===t.form&&Vh(c)}break e;case"textarea":Uh(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&zi(t,!!a.multiple,s,!1)}}}var vc=!1;function Yh(t,s,a){if(vc)return t(s,a);vc=!0;try{var c=t(s);return c}finally{if(vc=!1,(Ii!==null||Fi!==null)&&(tl(),Ii&&(s=Ii,t=Fi,Fi=Ii=null,Gh(s),t)))for(s=0;s<t.length;s++)Gh(t[s])}}function Va(t,s){var a=t.stateNode;if(a===null)return null;var c=a[Vt]||null;if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sc=!1;if(Pn)try{var La={};Object.defineProperty(La,"passive",{get:function(){Sc=!0}}),window.addEventListener("test",La,La),window.removeEventListener("test",La,La)}catch{Sc=!1}var gs=null,_c=null,mo=null;function Wh(){if(mo)return mo;var t,s=_c,a=s.length,c,h="value"in gs?gs.value:gs.textContent,p=h.length;for(t=0;t<a&&s[t]===h[t];t++);var S=a-t;for(c=1;c<=S&&s[a-c]===h[p-c];c++);return mo=h.slice(t,1<c?1-c:void 0)}function go(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function yo(){return!0}function Qh(){return!1}function Lt(t){function s(a,c,h,p,S){this._reactName=a,this._targetInst=h,this.type=c,this.nativeEvent=p,this.target=S,this.currentTarget=null;for(var j in t)t.hasOwnProperty(j)&&(a=t[j],this[j]=a?a(p):p[j]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?yo:Qh,this.isPropagationStopped=Qh,this}return x(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=yo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=yo)},persist:function(){},isPersistent:yo}),s}var Ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xo=Lt(Ks),Ua=x({},Ks,{view:0,detail:0}),Jy=Lt(Ua),Tc,Cc,qa,bo=x({},Ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qa&&(qa&&t.type==="mousemove"?(Tc=t.screenX-qa.screenX,Cc=t.screenY-qa.screenY):Cc=Tc=0,qa=t),Tc)},movementY:function(t){return"movementY"in t?t.movementY:Cc}}),Xh=Lt(bo),ex=x({},bo,{dataTransfer:0}),tx=Lt(ex),nx=x({},Ua,{relatedTarget:0}),wc=Lt(nx),sx=x({},Ks,{animationName:0,elapsedTime:0,pseudoElement:0}),ix=Lt(sx),ax=x({},Ks,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rx=Lt(ax),ox=x({},Ks,{data:0}),Zh=Lt(ox),lx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ux={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dx(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=ux[t])?!!s[t]:!1}function kc(){return dx}var hx=x({},Ua,{key:function(t){if(t.key){var s=lx[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=go(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kc,charCode:function(t){return t.type==="keypress"?go(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?go(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fx=Lt(hx),px=x({},bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kh=Lt(px),mx=x({},Ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kc}),gx=Lt(mx),yx=x({},Ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),xx=Lt(yx),bx=x({},bo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vx=Lt(bx),Sx=x({},Ks,{newState:0,oldState:0}),_x=Lt(Sx),Tx=[9,13,27,32],jc=Pn&&"CompositionEvent"in window,Pa=null;Pn&&"documentMode"in document&&(Pa=document.documentMode);var Cx=Pn&&"TextEvent"in window&&!Pa,$h=Pn&&(!jc||Pa&&8<Pa&&11>=Pa),Jh=" ",ef=!1;function tf(t,s){switch(t){case"keyup":return Tx.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vi=!1;function wx(t,s){switch(t){case"compositionend":return nf(s);case"keypress":return s.which!==32?null:(ef=!0,Jh);case"textInput":return t=s.data,t===Jh&&ef?null:t;default:return null}}function kx(t,s){if(Vi)return t==="compositionend"||!jc&&tf(t,s)?(t=Wh(),mo=_c=gs=null,Vi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return $h&&s.locale!=="ko"?null:s.data;default:return null}}var jx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sf(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!jx[t.type]:s==="textarea"}function af(t,s,a,c){Ii?Fi?Fi.push(c):Fi=[c]:Ii=c,s=ll(s,"onChange"),0<s.length&&(a=new xo("onChange","change",null,a,c),t.push({event:a,listeners:s}))}var Ha=null,Ga=null;function Ax(t){Um(t,0)}function vo(t){var s=Fa(t);if(Vh(s))return t}function rf(t,s){if(t==="change")return s}var of=!1;if(Pn){var Ac;if(Pn){var Mc="oninput"in document;if(!Mc){var lf=document.createElement("div");lf.setAttribute("oninput","return;"),Mc=typeof lf.oninput=="function"}Ac=Mc}else Ac=!1;of=Ac&&(!document.documentMode||9<document.documentMode)}function cf(){Ha&&(Ha.detachEvent("onpropertychange",uf),Ga=Ha=null)}function uf(t){if(t.propertyName==="value"&&vo(Ga)){var s=[];af(s,Ga,t,bc(t)),Yh(Ax,s)}}function Mx(t,s,a){t==="focusin"?(cf(),Ha=s,Ga=a,Ha.attachEvent("onpropertychange",uf)):t==="focusout"&&cf()}function Rx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vo(Ga)}function Ex(t,s){if(t==="click")return vo(s)}function Dx(t,s){if(t==="input"||t==="change")return vo(s)}function Nx(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Jt=typeof Object.is=="function"?Object.is:Nx;function Ya(t,s){if(Jt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var h=a[c];if(!we.call(s,h)||!Jt(t[h],s[h]))return!1}return!0}function df(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hf(t,s){var a=df(t);t=0;for(var c;a;){if(a.nodeType===3){if(c=t+a.textContent.length,t<=s&&c>=s)return{node:a,offset:s-t};t=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=df(a)}}function ff(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?ff(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function pf(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=fo(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=fo(t.document)}return s}function Rc(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var Ox=Pn&&"documentMode"in document&&11>=document.documentMode,Li=null,Ec=null,Wa=null,Dc=!1;function mf(t,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Dc||Li==null||Li!==fo(c)||(c=Li,"selectionStart"in c&&Rc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Wa&&Ya(Wa,c)||(Wa=c,c=ll(Ec,"onSelect"),0<c.length&&(s=new xo("onSelect","select",null,s,a),t.push({event:s,listeners:c}),s.target=Li)))}function $s(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var Ui={animationend:$s("Animation","AnimationEnd"),animationiteration:$s("Animation","AnimationIteration"),animationstart:$s("Animation","AnimationStart"),transitionrun:$s("Transition","TransitionRun"),transitionstart:$s("Transition","TransitionStart"),transitioncancel:$s("Transition","TransitionCancel"),transitionend:$s("Transition","TransitionEnd")},Nc={},gf={};Pn&&(gf=document.createElement("div").style,"AnimationEvent"in window||(delete Ui.animationend.animation,delete Ui.animationiteration.animation,delete Ui.animationstart.animation),"TransitionEvent"in window||delete Ui.transitionend.transition);function Js(t){if(Nc[t])return Nc[t];if(!Ui[t])return t;var s=Ui[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in gf)return Nc[t]=s[a];return t}var yf=Js("animationend"),xf=Js("animationiteration"),bf=Js("animationstart"),zx=Js("transitionrun"),Bx=Js("transitionstart"),Ix=Js("transitioncancel"),vf=Js("transitionend"),Sf=new Map,Oc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Oc.push("scrollEnd");function Sn(t,s){Sf.set(t,s),Zs(s,[t])}var So=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},hn=[],qi=0,zc=0;function _o(){for(var t=qi,s=zc=qi=0;s<t;){var a=hn[s];hn[s++]=null;var c=hn[s];hn[s++]=null;var h=hn[s];hn[s++]=null;var p=hn[s];if(hn[s++]=null,c!==null&&h!==null){var S=c.pending;S===null?h.next=h:(h.next=S.next,S.next=h),c.pending=h}p!==0&&_f(a,h,p)}}function To(t,s,a,c){hn[qi++]=t,hn[qi++]=s,hn[qi++]=a,hn[qi++]=c,zc|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function Bc(t,s,a,c){return To(t,s,a,c),Co(t)}function ei(t,s){return To(t,null,null,s),Co(t)}function _f(t,s,a){t.lanes|=a;var c=t.alternate;c!==null&&(c.lanes|=a);for(var h=!1,p=t.return;p!==null;)p.childLanes|=a,c=p.alternate,c!==null&&(c.childLanes|=a),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(h=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,h&&s!==null&&(h=31-$t(a),t=p.hiddenUpdates,c=t[h],c===null?t[h]=[s]:c.push(s),s.lane=a|536870912),p):null}function Co(t){if(50<mr)throw mr=0,Gu=null,Error(i(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Pi={};function Fx(t,s,a,c){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,s,a,c){return new Fx(t,s,a,c)}function Ic(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hn(t,s){var a=t.alternate;return a===null?(a=en(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Tf(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function wo(t,s,a,c,h,p){var S=0;if(c=t,typeof t=="function")Ic(t)&&(S=1);else if(typeof t=="string")S=Pb(t,a,le.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case O:return t=en(31,a,s,h),t.elementType=O,t.lanes=p,t;case w:return ti(a.children,h,p,s);case T:S=8,h|=24;break;case C:return t=en(12,a,s,h|2),t.elementType=C,t.lanes=p,t;case M:return t=en(13,a,s,h),t.elementType=M,t.lanes=p,t;case E:return t=en(19,a,s,h),t.elementType=E,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case A:S=10;break e;case N:S=9;break e;case D:S=11;break e;case k:S=14;break e;case R:S=16,c=null;break e}S=29,a=Error(i(130,t===null?"null":typeof t,"")),c=null}return s=en(S,a,s,h),s.elementType=t,s.type=c,s.lanes=p,s}function ti(t,s,a,c){return t=en(7,t,c,s),t.lanes=a,t}function Fc(t,s,a){return t=en(6,t,null,s),t.lanes=a,t}function Cf(t){var s=en(18,null,null,0);return s.stateNode=t,s}function Vc(t,s,a){return s=en(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var wf=new WeakMap;function fn(t,s){if(typeof t=="object"&&t!==null){var a=wf.get(t);return a!==void 0?a:(s={value:t,source:s,stack:Ae(s)},wf.set(t,s),s)}return{value:t,source:s,stack:Ae(s)}}var Hi=[],Gi=0,ko=null,Qa=0,pn=[],mn=0,ys=null,En=1,Dn="";function Gn(t,s){Hi[Gi++]=Qa,Hi[Gi++]=ko,ko=t,Qa=s}function kf(t,s,a){pn[mn++]=En,pn[mn++]=Dn,pn[mn++]=ys,ys=t;var c=En;t=Dn;var h=32-$t(c)-1;c&=~(1<<h),a+=1;var p=32-$t(s)+h;if(30<p){var S=h-h%5;p=(c&(1<<S)-1).toString(32),c>>=S,h-=S,En=1<<32-$t(s)+h|a<<h|c,Dn=p+t}else En=1<<p|a<<h|c,Dn=t}function Lc(t){t.return!==null&&(Gn(t,1),kf(t,1,0))}function Uc(t){for(;t===ko;)ko=Hi[--Gi],Hi[Gi]=null,Qa=Hi[--Gi],Hi[Gi]=null;for(;t===ys;)ys=pn[--mn],pn[mn]=null,Dn=pn[--mn],pn[mn]=null,En=pn[--mn],pn[mn]=null}function jf(t,s){pn[mn++]=En,pn[mn++]=Dn,pn[mn++]=ys,En=s.id,Dn=s.overflow,ys=t}var Ct=null,Qe=null,De=!1,xs=null,gn=!1,qc=Error(i(519));function bs(t){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xa(fn(s,t)),qc}function Af(t){var s=t.stateNode,a=t.type,c=t.memoizedProps;switch(s[Tt]=t,s[Vt]=c,a){case"dialog":je("cancel",s),je("close",s);break;case"iframe":case"object":case"embed":je("load",s);break;case"video":case"audio":for(a=0;a<yr.length;a++)je(yr[a],s);break;case"source":je("error",s);break;case"img":case"image":case"link":je("error",s),je("load",s);break;case"details":je("toggle",s);break;case"input":je("invalid",s),Lh(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":je("invalid",s);break;case"textarea":je("invalid",s),qh(s,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||c.suppressHydrationWarning===!0||Gm(s.textContent,a)?(c.popover!=null&&(je("beforetoggle",s),je("toggle",s)),c.onScroll!=null&&je("scroll",s),c.onScrollEnd!=null&&je("scrollend",s),c.onClick!=null&&(s.onclick=qn),s=!0):s=!1,s||bs(t,!0)}function Mf(t){for(Ct=t.return;Ct;)switch(Ct.tag){case 5:case 31:case 13:gn=!1;return;case 27:case 3:gn=!0;return;default:Ct=Ct.return}}function Yi(t){if(t!==Ct)return!1;if(!De)return Mf(t),De=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||rd(t.type,t.memoizedProps)),a=!a),a&&Qe&&bs(t),Mf(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Qe=eg(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));Qe=eg(t)}else s===27?(s=Qe,Ns(t.type)?(t=dd,dd=null,Qe=t):Qe=s):Qe=Ct?xn(t.stateNode.nextSibling):null;return!0}function ni(){Qe=Ct=null,De=!1}function Pc(){var t=xs;return t!==null&&(Ht===null?Ht=t:Ht.push.apply(Ht,t),xs=null),t}function Xa(t){xs===null?xs=[t]:xs.push(t)}var Hc=z(null),si=null,Yn=null;function vs(t,s,a){ie(Hc,s._currentValue),s._currentValue=a}function Wn(t){t._currentValue=Hc.current,X(Hc)}function Gc(t,s,a){for(;t!==null;){var c=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),t===a)break;t=t.return}}function Yc(t,s,a,c){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var p=h.dependencies;if(p!==null){var S=h.child;p=p.firstContext;e:for(;p!==null;){var j=p;p=h;for(var F=0;F<s.length;F++)if(j.context===s[F]){p.lanes|=a,j=p.alternate,j!==null&&(j.lanes|=a),Gc(p.return,a,t),c||(S=null);break e}p=j.next}}else if(h.tag===18){if(S=h.return,S===null)throw Error(i(341));S.lanes|=a,p=S.alternate,p!==null&&(p.lanes|=a),Gc(S,a,t),S=null}else S=h.child;if(S!==null)S.return=h;else for(S=h;S!==null;){if(S===t){S=null;break}if(h=S.sibling,h!==null){h.return=S.return,S=h;break}S=S.return}h=S}}function Wi(t,s,a,c){t=null;for(var h=s,p=!1;h!==null;){if(!p){if((h.flags&524288)!==0)p=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var S=h.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var j=h.type;Jt(h.pendingProps.value,S.value)||(t!==null?t.push(j):t=[j])}}else if(h===be.current){if(S=h.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(_r):t=[_r])}h=h.return}t!==null&&Yc(s,t,a,c),s.flags|=262144}function jo(t){for(t=t.firstContext;t!==null;){if(!Jt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ii(t){si=t,Yn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function wt(t){return Rf(si,t)}function Ao(t,s){return si===null&&ii(t),Rf(t,s)}function Rf(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Yn===null){if(t===null)throw Error(i(308));Yn=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else Yn=Yn.next=s;return a}var Vx=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,c){t.push(c)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},Lx=o.unstable_scheduleCallback,Ux=o.unstable_NormalPriority,ut={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wc(){return{controller:new Vx,data:new Map,refCount:0}}function Za(t){t.refCount--,t.refCount===0&&Lx(Ux,function(){t.controller.abort()})}var Ka=null,Qc=0,Qi=0,Xi=null;function qx(t,s){if(Ka===null){var a=Ka=[];Qc=0,Qi=Ku(),Xi={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Qc++,s.then(Ef,Ef),s}function Ef(){if(--Qc===0&&Ka!==null){Xi!==null&&(Xi.status="fulfilled");var t=Ka;Ka=null,Qi=0,Xi=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function Px(t,s){var a=[],c={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){c.status="fulfilled",c.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(c.status="rejected",c.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),c}var Df=B.S;B.S=function(t,s){mm=_t(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&qx(t,s),Df!==null&&Df(t,s)};var ai=z(null);function Xc(){var t=ai.current;return t!==null?t:Ge.pooledCache}function Mo(t,s){s===null?ie(ai,ai.current):ie(ai,s.pool)}function Nf(){var t=Xc();return t===null?null:{parent:ut._currentValue,pool:t}}var Zi=Error(i(460)),Zc=Error(i(474)),Ro=Error(i(542)),Eo={then:function(){}};function Of(t){return t=t.status,t==="fulfilled"||t==="rejected"}function zf(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(qn,qn),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,If(t),t;default:if(typeof s.status=="string")s.then(qn,qn);else{if(t=Ge,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=s,t.status="pending",t.then(function(c){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=c}},function(c){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,If(t),t}throw oi=s,Zi}}function ri(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(oi=a,Zi):a}}var oi=null;function Bf(){if(oi===null)throw Error(i(459));var t=oi;return oi=null,t}function If(t){if(t===Zi||t===Ro)throw Error(i(483))}var Ki=null,$a=0;function Do(t){var s=$a;return $a+=1,Ki===null&&(Ki=[]),zf(Ki,t,s)}function Ja(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function No(t,s){throw s.$$typeof===b?Error(i(525)):(t=Object.prototype.toString.call(s),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Ff(t){function s(U,V){if(t){var H=U.deletions;H===null?(U.deletions=[V],U.flags|=16):H.push(V)}}function a(U,V){if(!t)return null;for(;V!==null;)s(U,V),V=V.sibling;return null}function c(U){for(var V=new Map;U!==null;)U.key!==null?V.set(U.key,U):V.set(U.index,U),U=U.sibling;return V}function h(U,V){return U=Hn(U,V),U.index=0,U.sibling=null,U}function p(U,V,H){return U.index=H,t?(H=U.alternate,H!==null?(H=H.index,H<V?(U.flags|=67108866,V):H):(U.flags|=67108866,V)):(U.flags|=1048576,V)}function S(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function j(U,V,H,$){return V===null||V.tag!==6?(V=Fc(H,U.mode,$),V.return=U,V):(V=h(V,H),V.return=U,V)}function F(U,V,H,$){var ye=H.type;return ye===w?K(U,V,H.props.children,$,H.key):V!==null&&(V.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===R&&ri(ye)===V.type)?(V=h(V,H.props),Ja(V,H),V.return=U,V):(V=wo(H.type,H.key,H.props,null,U.mode,$),Ja(V,H),V.return=U,V)}function G(U,V,H,$){return V===null||V.tag!==4||V.stateNode.containerInfo!==H.containerInfo||V.stateNode.implementation!==H.implementation?(V=Vc(H,U.mode,$),V.return=U,V):(V=h(V,H.children||[]),V.return=U,V)}function K(U,V,H,$,ye){return V===null||V.tag!==7?(V=ti(H,U.mode,$,ye),V.return=U,V):(V=h(V,H),V.return=U,V)}function J(U,V,H){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Fc(""+V,U.mode,H),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case v:return H=wo(V.type,V.key,V.props,null,U.mode,H),Ja(H,V),H.return=U,H;case _:return V=Vc(V,U.mode,H),V.return=U,V;case R:return V=ri(V),J(U,V,H)}if(de(V)||P(V))return V=ti(V,U.mode,H,null),V.return=U,V;if(typeof V.then=="function")return J(U,Do(V),H);if(V.$$typeof===A)return J(U,Ao(U,V),H);No(U,V)}return null}function W(U,V,H,$){var ye=V!==null?V.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ye!==null?null:j(U,V,""+H,$);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case v:return H.key===ye?F(U,V,H,$):null;case _:return H.key===ye?G(U,V,H,$):null;case R:return H=ri(H),W(U,V,H,$)}if(de(H)||P(H))return ye!==null?null:K(U,V,H,$,null);if(typeof H.then=="function")return W(U,V,Do(H),$);if(H.$$typeof===A)return W(U,V,Ao(U,H),$);No(U,H)}return null}function Z(U,V,H,$,ye){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return U=U.get(H)||null,j(V,U,""+$,ye);if(typeof $=="object"&&$!==null){switch($.$$typeof){case v:return U=U.get($.key===null?H:$.key)||null,F(V,U,$,ye);case _:return U=U.get($.key===null?H:$.key)||null,G(V,U,$,ye);case R:return $=ri($),Z(U,V,H,$,ye)}if(de($)||P($))return U=U.get(H)||null,K(V,U,$,ye,null);if(typeof $.then=="function")return Z(U,V,H,Do($),ye);if($.$$typeof===A)return Z(U,V,H,Ao(V,$),ye);No(V,$)}return null}function pe(U,V,H,$){for(var ye=null,Ne=null,ge=V,Te=V=0,Re=null;ge!==null&&Te<H.length;Te++){ge.index>Te?(Re=ge,ge=null):Re=ge.sibling;var Oe=W(U,ge,H[Te],$);if(Oe===null){ge===null&&(ge=Re);break}t&&ge&&Oe.alternate===null&&s(U,ge),V=p(Oe,V,Te),Ne===null?ye=Oe:Ne.sibling=Oe,Ne=Oe,ge=Re}if(Te===H.length)return a(U,ge),De&&Gn(U,Te),ye;if(ge===null){for(;Te<H.length;Te++)ge=J(U,H[Te],$),ge!==null&&(V=p(ge,V,Te),Ne===null?ye=ge:Ne.sibling=ge,Ne=ge);return De&&Gn(U,Te),ye}for(ge=c(ge);Te<H.length;Te++)Re=Z(ge,U,Te,H[Te],$),Re!==null&&(t&&Re.alternate!==null&&ge.delete(Re.key===null?Te:Re.key),V=p(Re,V,Te),Ne===null?ye=Re:Ne.sibling=Re,Ne=Re);return t&&ge.forEach(function(Fs){return s(U,Fs)}),De&&Gn(U,Te),ye}function xe(U,V,H,$){if(H==null)throw Error(i(151));for(var ye=null,Ne=null,ge=V,Te=V=0,Re=null,Oe=H.next();ge!==null&&!Oe.done;Te++,Oe=H.next()){ge.index>Te?(Re=ge,ge=null):Re=ge.sibling;var Fs=W(U,ge,Oe.value,$);if(Fs===null){ge===null&&(ge=Re);break}t&&ge&&Fs.alternate===null&&s(U,ge),V=p(Fs,V,Te),Ne===null?ye=Fs:Ne.sibling=Fs,Ne=Fs,ge=Re}if(Oe.done)return a(U,ge),De&&Gn(U,Te),ye;if(ge===null){for(;!Oe.done;Te++,Oe=H.next())Oe=J(U,Oe.value,$),Oe!==null&&(V=p(Oe,V,Te),Ne===null?ye=Oe:Ne.sibling=Oe,Ne=Oe);return De&&Gn(U,Te),ye}for(ge=c(ge);!Oe.done;Te++,Oe=H.next())Oe=Z(ge,U,Te,Oe.value,$),Oe!==null&&(t&&Oe.alternate!==null&&ge.delete(Oe.key===null?Te:Oe.key),V=p(Oe,V,Te),Ne===null?ye=Oe:Ne.sibling=Oe,Ne=Oe);return t&&ge.forEach(function(ev){return s(U,ev)}),De&&Gn(U,Te),ye}function qe(U,V,H,$){if(typeof H=="object"&&H!==null&&H.type===w&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case v:e:{for(var ye=H.key;V!==null;){if(V.key===ye){if(ye=H.type,ye===w){if(V.tag===7){a(U,V.sibling),$=h(V,H.props.children),$.return=U,U=$;break e}}else if(V.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===R&&ri(ye)===V.type){a(U,V.sibling),$=h(V,H.props),Ja($,H),$.return=U,U=$;break e}a(U,V);break}else s(U,V);V=V.sibling}H.type===w?($=ti(H.props.children,U.mode,$,H.key),$.return=U,U=$):($=wo(H.type,H.key,H.props,null,U.mode,$),Ja($,H),$.return=U,U=$)}return S(U);case _:e:{for(ye=H.key;V!==null;){if(V.key===ye)if(V.tag===4&&V.stateNode.containerInfo===H.containerInfo&&V.stateNode.implementation===H.implementation){a(U,V.sibling),$=h(V,H.children||[]),$.return=U,U=$;break e}else{a(U,V);break}else s(U,V);V=V.sibling}$=Vc(H,U.mode,$),$.return=U,U=$}return S(U);case R:return H=ri(H),qe(U,V,H,$)}if(de(H))return pe(U,V,H,$);if(P(H)){if(ye=P(H),typeof ye!="function")throw Error(i(150));return H=ye.call(H),xe(U,V,H,$)}if(typeof H.then=="function")return qe(U,V,Do(H),$);if(H.$$typeof===A)return qe(U,V,Ao(U,H),$);No(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,V!==null&&V.tag===6?(a(U,V.sibling),$=h(V,H),$.return=U,U=$):(a(U,V),$=Fc(H,U.mode,$),$.return=U,U=$),S(U)):a(U,V)}return function(U,V,H,$){try{$a=0;var ye=qe(U,V,H,$);return Ki=null,ye}catch(ge){if(ge===Zi||ge===Ro)throw ge;var Ne=en(29,ge,null,U.mode);return Ne.lanes=$,Ne.return=U,Ne}finally{}}}var li=Ff(!0),Vf=Ff(!1),Ss=!1;function Kc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $c(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function _s(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ts(t,s,a){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(Be&2)!==0){var h=c.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),c.pending=s,s=Co(t),_f(t,null,a),s}return To(t,c,s,a),Co(t)}function er(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var c=s.lanes;c&=t.pendingLanes,a|=c,s.lanes=a,Mh(t,a)}}function Jc(t,s){var a=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var h=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?h=p=S:p=p.next=S,a=a.next}while(a!==null);p===null?h=p=s:p=p.next=s}else h=p=s;a={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var eu=!1;function tr(){if(eu){var t=Xi;if(t!==null)throw t}}function nr(t,s,a,c){eu=!1;var h=t.updateQueue;Ss=!1;var p=h.firstBaseUpdate,S=h.lastBaseUpdate,j=h.shared.pending;if(j!==null){h.shared.pending=null;var F=j,G=F.next;F.next=null,S===null?p=G:S.next=G,S=F;var K=t.alternate;K!==null&&(K=K.updateQueue,j=K.lastBaseUpdate,j!==S&&(j===null?K.firstBaseUpdate=G:j.next=G,K.lastBaseUpdate=F))}if(p!==null){var J=h.baseState;S=0,K=G=F=null,j=p;do{var W=j.lane&-536870913,Z=W!==j.lane;if(Z?(Me&W)===W:(c&W)===W){W!==0&&W===Qi&&(eu=!0),K!==null&&(K=K.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var pe=t,xe=j;W=s;var qe=a;switch(xe.tag){case 1:if(pe=xe.payload,typeof pe=="function"){J=pe.call(qe,J,W);break e}J=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=xe.payload,W=typeof pe=="function"?pe.call(qe,J,W):pe,W==null)break e;J=x({},J,W);break e;case 2:Ss=!0}}W=j.callback,W!==null&&(t.flags|=64,Z&&(t.flags|=8192),Z=h.callbacks,Z===null?h.callbacks=[W]:Z.push(W))}else Z={lane:W,tag:j.tag,payload:j.payload,callback:j.callback,next:null},K===null?(G=K=Z,F=J):K=K.next=Z,S|=W;if(j=j.next,j===null){if(j=h.shared.pending,j===null)break;Z=j,j=Z.next,Z.next=null,h.lastBaseUpdate=Z,h.shared.pending=null}}while(!0);K===null&&(F=J),h.baseState=F,h.firstBaseUpdate=G,h.lastBaseUpdate=K,p===null&&(h.shared.lanes=0),As|=S,t.lanes=S,t.memoizedState=J}}function Lf(t,s){if(typeof t!="function")throw Error(i(191,t));t.call(s)}function Uf(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Lf(a[t],s)}var $i=z(null),Oo=z(0);function qf(t,s){t=ns,ie(Oo,t),ie($i,s),ns=t|s.baseLanes}function tu(){ie(Oo,ns),ie($i,$i.current)}function nu(){ns=Oo.current,X($i),X(Oo)}var tn=z(null),yn=null;function Cs(t){var s=t.alternate;ie(at,at.current&1),ie(tn,t),yn===null&&(s===null||$i.current!==null||s.memoizedState!==null)&&(yn=t)}function su(t){ie(at,at.current),ie(tn,t),yn===null&&(yn=t)}function Pf(t){t.tag===22?(ie(at,at.current),ie(tn,t),yn===null&&(yn=t)):ws()}function ws(){ie(at,at.current),ie(tn,tn.current)}function nn(t){X(tn),yn===t&&(yn=null),X(at)}var at=z(0);function zo(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||cd(a)||ud(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Qn=0,_e=null,Le=null,dt=null,Bo=!1,Ji=!1,ci=!1,Io=0,sr=0,ea=null,Hx=0;function tt(){throw Error(i(321))}function iu(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Jt(t[a],s[a]))return!1;return!0}function au(t,s,a,c,h,p){return Qn=p,_e=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,B.H=t===null||t.memoizedState===null?kp:vu,ci=!1,p=a(c,h),ci=!1,Ji&&(p=Gf(s,a,c,h)),Hf(t),p}function Hf(t){B.H=rr;var s=Le!==null&&Le.next!==null;if(Qn=0,dt=Le=_e=null,Bo=!1,sr=0,ea=null,s)throw Error(i(300));t===null||ht||(t=t.dependencies,t!==null&&jo(t)&&(ht=!0))}function Gf(t,s,a,c){_e=t;var h=0;do{if(Ji&&(ea=null),sr=0,Ji=!1,25<=h)throw Error(i(301));if(h+=1,dt=Le=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}B.H=jp,p=s(a,c)}while(Ji);return p}function Gx(){var t=B.H,s=t.useState()[0];return s=typeof s.then=="function"?ir(s):s,t=t.useState()[0],(Le!==null?Le.memoizedState:null)!==t&&(_e.flags|=1024),s}function ru(){var t=Io!==0;return Io=0,t}function ou(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function lu(t){if(Bo){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Bo=!1}Qn=0,dt=Le=_e=null,Ji=!1,sr=Io=0,ea=null}function zt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?_e.memoizedState=dt=t:dt=dt.next=t,dt}function rt(){if(Le===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var s=dt===null?_e.memoizedState:dt.next;if(s!==null)dt=s,Le=t;else{if(t===null)throw _e.alternate===null?Error(i(467)):Error(i(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},dt===null?_e.memoizedState=dt=t:dt=dt.next=t}return dt}function Fo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ir(t){var s=sr;return sr+=1,ea===null&&(ea=[]),t=zf(ea,t,s),s=_e,(dt===null?s.memoizedState:dt.next)===null&&(s=s.alternate,B.H=s===null||s.memoizedState===null?kp:vu),t}function Vo(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ir(t);if(t.$$typeof===A)return wt(t)}throw Error(i(438,String(t)))}function cu(t){var s=null,a=_e.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var c=_e.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Fo(),_e.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),c=0;c<t;c++)a[c]=L;return s.index++,a}function Xn(t,s){return typeof s=="function"?s(t):s}function Lo(t){var s=rt();return uu(s,Le,t)}function uu(t,s,a){var c=t.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=a;var h=t.baseQueue,p=c.pending;if(p!==null){if(h!==null){var S=h.next;h.next=p.next,p.next=S}s.baseQueue=h=p,c.pending=null}if(p=t.baseState,h===null)t.memoizedState=p;else{s=h.next;var j=S=null,F=null,G=s,K=!1;do{var J=G.lane&-536870913;if(J!==G.lane?(Me&J)===J:(Qn&J)===J){var W=G.revertLane;if(W===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),J===Qi&&(K=!0);else if((Qn&W)===W){G=G.next,W===Qi&&(K=!0);continue}else J={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},F===null?(j=F=J,S=p):F=F.next=J,_e.lanes|=W,As|=W;J=G.action,ci&&a(p,J),p=G.hasEagerState?G.eagerState:a(p,J)}else W={lane:J,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},F===null?(j=F=W,S=p):F=F.next=W,_e.lanes|=J,As|=J;G=G.next}while(G!==null&&G!==s);if(F===null?S=p:F.next=j,!Jt(p,t.memoizedState)&&(ht=!0,K&&(a=Xi,a!==null)))throw a;t.memoizedState=p,t.baseState=S,t.baseQueue=F,c.lastRenderedState=p}return h===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function du(t){var s=rt(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=t;var c=a.dispatch,h=a.pending,p=s.memoizedState;if(h!==null){a.pending=null;var S=h=h.next;do p=t(p,S.action),S=S.next;while(S!==h);Jt(p,s.memoizedState)||(ht=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),a.lastRenderedState=p}return[p,c]}function Yf(t,s,a){var c=_e,h=rt(),p=De;if(p){if(a===void 0)throw Error(i(407));a=a()}else a=s();var S=!Jt((Le||h).memoizedState,a);if(S&&(h.memoizedState=a,ht=!0),h=h.queue,pu(Xf.bind(null,c,h,t),[t]),h.getSnapshot!==s||S||dt!==null&&dt.memoizedState.tag&1){if(c.flags|=2048,ta(9,{destroy:void 0},Qf.bind(null,c,h,a,s),null),Ge===null)throw Error(i(349));p||(Qn&127)!==0||Wf(c,s,a)}return a}function Wf(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=_e.updateQueue,s===null?(s=Fo(),_e.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Qf(t,s,a,c){s.value=a,s.getSnapshot=c,Zf(s)&&Kf(t)}function Xf(t,s,a){return a(function(){Zf(s)&&Kf(t)})}function Zf(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Jt(t,a)}catch{return!0}}function Kf(t){var s=ei(t,2);s!==null&&Gt(s,t,2)}function hu(t){var s=zt();if(typeof t=="function"){var a=t;if(t=a(),ci){ps(!0);try{a()}finally{ps(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:t},s}function $f(t,s,a,c){return t.baseState=a,uu(t,Le,typeof c=="function"?c:Xn)}function Yx(t,s,a,c,h){if(Po(t))throw Error(i(485));if(t=s.action,t!==null){var p={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){p.listeners.push(S)}};B.T!==null?a(!0):p.isTransition=!1,c(p),a=s.pending,a===null?(p.next=s.pending=p,Jf(s,p)):(p.next=a.next,s.pending=a.next=p)}}function Jf(t,s){var a=s.action,c=s.payload,h=t.state;if(s.isTransition){var p=B.T,S={};B.T=S;try{var j=a(h,c),F=B.S;F!==null&&F(S,j),ep(t,s,j)}catch(G){fu(t,s,G)}finally{p!==null&&S.types!==null&&(p.types=S.types),B.T=p}}else try{p=a(h,c),ep(t,s,p)}catch(G){fu(t,s,G)}}function ep(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){tp(t,s,c)},function(c){return fu(t,s,c)}):tp(t,s,a)}function tp(t,s,a){s.status="fulfilled",s.value=a,np(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,Jf(t,a)))}function fu(t,s,a){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=a,np(s),s=s.next;while(s!==c)}t.action=null}function np(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function sp(t,s){return s}function ip(t,s){if(De){var a=Ge.formState;if(a!==null){e:{var c=_e;if(De){if(Qe){t:{for(var h=Qe,p=gn;h.nodeType!==8;){if(!p){h=null;break t}if(h=xn(h.nextSibling),h===null){h=null;break t}}p=h.data,h=p==="F!"||p==="F"?h:null}if(h){Qe=xn(h.nextSibling),c=h.data==="F!";break e}}bs(c)}c=!1}c&&(s=a[0])}}return a=zt(),a.memoizedState=a.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sp,lastRenderedState:s},a.queue=c,a=Tp.bind(null,_e,c),c.dispatch=a,c=hu(!1),p=bu.bind(null,_e,!1,c.queue),c=zt(),h={state:s,dispatch:null,action:t,pending:null},c.queue=h,a=Yx.bind(null,_e,h,p,a),h.dispatch=a,c.memoizedState=t,[s,a,!1]}function ap(t){var s=rt();return rp(s,Le,t)}function rp(t,s,a){if(s=uu(t,s,sp)[0],t=Lo(Xn)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=ir(s)}catch(S){throw S===Zi?Ro:S}else c=s;s=rt();var h=s.queue,p=h.dispatch;return a!==s.memoizedState&&(_e.flags|=2048,ta(9,{destroy:void 0},Wx.bind(null,h,a),null)),[c,p,t]}function Wx(t,s){t.action=s}function op(t){var s=rt(),a=Le;if(a!==null)return rp(s,a,t);rt(),s=s.memoizedState,a=rt();var c=a.queue.dispatch;return a.memoizedState=t,[s,c,!1]}function ta(t,s,a,c){return t={tag:t,create:a,deps:c,inst:s,next:null},s=_e.updateQueue,s===null&&(s=Fo(),_e.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(c=a.next,a.next=t,t.next=c,s.lastEffect=t),t}function lp(){return rt().memoizedState}function Uo(t,s,a,c){var h=zt();_e.flags|=t,h.memoizedState=ta(1|s,{destroy:void 0},a,c===void 0?null:c)}function qo(t,s,a,c){var h=rt();c=c===void 0?null:c;var p=h.memoizedState.inst;Le!==null&&c!==null&&iu(c,Le.memoizedState.deps)?h.memoizedState=ta(s,p,a,c):(_e.flags|=t,h.memoizedState=ta(1|s,p,a,c))}function cp(t,s){Uo(8390656,8,t,s)}function pu(t,s){qo(2048,8,t,s)}function Qx(t){_e.flags|=4;var s=_e.updateQueue;if(s===null)s=Fo(),_e.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function up(t){var s=rt().memoizedState;return Qx({ref:s,nextImpl:t}),function(){if((Be&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function dp(t,s){return qo(4,2,t,s)}function hp(t,s){return qo(4,4,t,s)}function fp(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function pp(t,s,a){a=a!=null?a.concat([t]):null,qo(4,4,fp.bind(null,s,t),a)}function mu(){}function mp(t,s){var a=rt();s=s===void 0?null:s;var c=a.memoizedState;return s!==null&&iu(s,c[1])?c[0]:(a.memoizedState=[t,s],t)}function gp(t,s){var a=rt();s=s===void 0?null:s;var c=a.memoizedState;if(s!==null&&iu(s,c[1]))return c[0];if(c=t(),ci){ps(!0);try{t()}finally{ps(!1)}}return a.memoizedState=[c,s],c}function gu(t,s,a){return a===void 0||(Qn&1073741824)!==0&&(Me&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=ym(),_e.lanes|=t,As|=t,a)}function yp(t,s,a,c){return Jt(a,s)?a:$i.current!==null?(t=gu(t,a,c),Jt(t,s)||(ht=!0),t):(Qn&42)===0||(Qn&1073741824)!==0&&(Me&261930)===0?(ht=!0,t.memoizedState=a):(t=ym(),_e.lanes|=t,As|=t,s)}function xp(t,s,a,c,h){var p=Q.p;Q.p=p!==0&&8>p?p:8;var S=B.T,j={};B.T=j,bu(t,!1,s,a);try{var F=h(),G=B.S;if(G!==null&&G(j,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var K=Px(F,c);ar(t,s,K,rn(t))}else ar(t,s,c,rn(t))}catch(J){ar(t,s,{then:function(){},status:"rejected",reason:J},rn())}finally{Q.p=p,S!==null&&j.types!==null&&(S.types=j.types),B.T=S}}function Xx(){}function yu(t,s,a,c){if(t.tag!==5)throw Error(i(476));var h=bp(t).queue;xp(t,h,s,ne,a===null?Xx:function(){return vp(t),a(c)})}function bp(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:ne},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function vp(t){var s=bp(t);s.next===null&&(s=t.alternate.memoizedState),ar(t,s.next.queue,{},rn())}function xu(){return wt(_r)}function Sp(){return rt().memoizedState}function _p(){return rt().memoizedState}function Zx(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=rn();t=_s(a);var c=Ts(s,t,a);c!==null&&(Gt(c,s,a),er(c,s,a)),s={cache:Wc()},t.payload=s;return}s=s.return}}function Kx(t,s,a){var c=rn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Po(t)?Cp(s,a):(a=Bc(t,s,a,c),a!==null&&(Gt(a,t,c),wp(a,s,c)))}function Tp(t,s,a){var c=rn();ar(t,s,a,c)}function ar(t,s,a,c){var h={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Po(t))Cp(s,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var S=s.lastRenderedState,j=p(S,a);if(h.hasEagerState=!0,h.eagerState=j,Jt(j,S))return To(t,s,h,0),Ge===null&&_o(),!1}catch{}finally{}if(a=Bc(t,s,h,c),a!==null)return Gt(a,t,c),wp(a,s,c),!0}return!1}function bu(t,s,a,c){if(c={lane:2,revertLane:Ku(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Po(t)){if(s)throw Error(i(479))}else s=Bc(t,a,c,2),s!==null&&Gt(s,t,2)}function Po(t){var s=t.alternate;return t===_e||s!==null&&s===_e}function Cp(t,s){Ji=Bo=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function wp(t,s,a){if((a&4194048)!==0){var c=s.lanes;c&=t.pendingLanes,a|=c,s.lanes=a,Mh(t,a)}}var rr={readContext:wt,use:Vo,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useLayoutEffect:tt,useInsertionEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useSyncExternalStore:tt,useId:tt,useHostTransitionStatus:tt,useFormState:tt,useActionState:tt,useOptimistic:tt,useMemoCache:tt,useCacheRefresh:tt};rr.useEffectEvent=tt;var kp={readContext:wt,use:Vo,useCallback:function(t,s){return zt().memoizedState=[t,s===void 0?null:s],t},useContext:wt,useEffect:cp,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Uo(4194308,4,fp.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Uo(4194308,4,t,s)},useInsertionEffect:function(t,s){Uo(4,2,t,s)},useMemo:function(t,s){var a=zt();s=s===void 0?null:s;var c=t();if(ci){ps(!0);try{t()}finally{ps(!1)}}return a.memoizedState=[c,s],c},useReducer:function(t,s,a){var c=zt();if(a!==void 0){var h=a(s);if(ci){ps(!0);try{a(s)}finally{ps(!1)}}}else h=s;return c.memoizedState=c.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},c.queue=t,t=t.dispatch=Kx.bind(null,_e,t),[c.memoizedState,t]},useRef:function(t){var s=zt();return t={current:t},s.memoizedState=t},useState:function(t){t=hu(t);var s=t.queue,a=Tp.bind(null,_e,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:mu,useDeferredValue:function(t,s){var a=zt();return gu(a,t,s)},useTransition:function(){var t=hu(!1);return t=xp.bind(null,_e,t.queue,!0,!1),zt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var c=_e,h=zt();if(De){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),Ge===null)throw Error(i(349));(Me&127)!==0||Wf(c,s,a)}h.memoizedState=a;var p={value:a,getSnapshot:s};return h.queue=p,cp(Xf.bind(null,c,p,t),[t]),c.flags|=2048,ta(9,{destroy:void 0},Qf.bind(null,c,p,a,s),null),a},useId:function(){var t=zt(),s=Ge.identifierPrefix;if(De){var a=Dn,c=En;a=(c&~(1<<32-$t(c)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Io++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=Hx++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:xu,useFormState:ip,useActionState:ip,useOptimistic:function(t){var s=zt();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=bu.bind(null,_e,!0,a),a.dispatch=s,[t,s]},useMemoCache:cu,useCacheRefresh:function(){return zt().memoizedState=Zx.bind(null,_e)},useEffectEvent:function(t){var s=zt(),a={impl:t};return s.memoizedState=a,function(){if((Be&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},vu={readContext:wt,use:Vo,useCallback:mp,useContext:wt,useEffect:pu,useImperativeHandle:pp,useInsertionEffect:dp,useLayoutEffect:hp,useMemo:gp,useReducer:Lo,useRef:lp,useState:function(){return Lo(Xn)},useDebugValue:mu,useDeferredValue:function(t,s){var a=rt();return yp(a,Le.memoizedState,t,s)},useTransition:function(){var t=Lo(Xn)[0],s=rt().memoizedState;return[typeof t=="boolean"?t:ir(t),s]},useSyncExternalStore:Yf,useId:Sp,useHostTransitionStatus:xu,useFormState:ap,useActionState:ap,useOptimistic:function(t,s){var a=rt();return $f(a,Le,t,s)},useMemoCache:cu,useCacheRefresh:_p};vu.useEffectEvent=up;var jp={readContext:wt,use:Vo,useCallback:mp,useContext:wt,useEffect:pu,useImperativeHandle:pp,useInsertionEffect:dp,useLayoutEffect:hp,useMemo:gp,useReducer:du,useRef:lp,useState:function(){return du(Xn)},useDebugValue:mu,useDeferredValue:function(t,s){var a=rt();return Le===null?gu(a,t,s):yp(a,Le.memoizedState,t,s)},useTransition:function(){var t=du(Xn)[0],s=rt().memoizedState;return[typeof t=="boolean"?t:ir(t),s]},useSyncExternalStore:Yf,useId:Sp,useHostTransitionStatus:xu,useFormState:op,useActionState:op,useOptimistic:function(t,s){var a=rt();return Le!==null?$f(a,Le,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:cu,useCacheRefresh:_p};jp.useEffectEvent=up;function Su(t,s,a,c){s=t.memoizedState,a=a(c,s),a=a==null?s:x({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var _u={enqueueSetState:function(t,s,a){t=t._reactInternals;var c=rn(),h=_s(c);h.payload=s,a!=null&&(h.callback=a),s=Ts(t,h,c),s!==null&&(Gt(s,t,c),er(s,t,c))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var c=rn(),h=_s(c);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=Ts(t,h,c),s!==null&&(Gt(s,t,c),er(s,t,c))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=rn(),c=_s(a);c.tag=2,s!=null&&(c.callback=s),s=Ts(t,c,a),s!==null&&(Gt(s,t,a),er(s,t,a))}};function Ap(t,s,a,c,h,p,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,p,S):s.prototype&&s.prototype.isPureReactComponent?!Ya(a,c)||!Ya(h,p):!0}function Mp(t,s,a,c){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==t&&_u.enqueueReplaceState(s,s.state,null)}function ui(t,s){var a=s;if("ref"in s){a={};for(var c in s)c!=="ref"&&(a[c]=s[c])}if(t=t.defaultProps){a===s&&(a=x({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Rp(t){So(t)}function Ep(t){console.error(t)}function Dp(t){So(t)}function Ho(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function Np(t,s,a){try{var c=t.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Tu(t,s,a){return a=_s(a),a.tag=3,a.payload={element:null},a.callback=function(){Ho(t,s)},a}function Op(t){return t=_s(t),t.tag=3,t}function zp(t,s,a,c){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var p=c.value;t.payload=function(){return h(p)},t.callback=function(){Np(s,a,c)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(t.callback=function(){Np(s,a,c),typeof h!="function"&&(Ms===null?Ms=new Set([this]):Ms.add(this));var j=c.stack;this.componentDidCatch(c.value,{componentStack:j!==null?j:""})})}function $x(t,s,a,c,h){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=a.alternate,s!==null&&Wi(s,a,h,!0),a=tn.current,a!==null){switch(a.tag){case 31:case 13:return yn===null?nl():a.alternate===null&&nt===0&&(nt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,c===Eo?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([c]):s.add(c),Qu(t,c,h)),!1;case 22:return a.flags|=65536,c===Eo?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([c]):a.add(c)),Qu(t,c,h)),!1}throw Error(i(435,a.tag))}return Qu(t,c,h),nl(),!1}if(De)return s=tn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,c!==qc&&(t=Error(i(422),{cause:c}),Xa(fn(t,a)))):(c!==qc&&(s=Error(i(423),{cause:c}),Xa(fn(s,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,c=fn(c,a),h=Tu(t.stateNode,c,h),Jc(t,h),nt!==4&&(nt=2)),!1;var p=Error(i(520),{cause:c});if(p=fn(p,a),pr===null?pr=[p]:pr.push(p),nt!==4&&(nt=2),s===null)return!0;c=fn(c,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Tu(a.stateNode,c,t),Jc(a,t),!1;case 1:if(s=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ms===null||!Ms.has(p))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Op(h),zp(h,t,a,c),Jc(a,h),!1}a=a.return}while(a!==null);return!1}var Cu=Error(i(461)),ht=!1;function kt(t,s,a,c){s.child=t===null?Vf(s,null,a,c):li(s,t.child,a,c)}function Bp(t,s,a,c,h){a=a.render;var p=s.ref;if("ref"in c){var S={};for(var j in c)j!=="ref"&&(S[j]=c[j])}else S=c;return ii(s),c=au(t,s,a,S,p,h),j=ru(),t!==null&&!ht?(ou(t,s,h),Zn(t,s,h)):(De&&j&&Lc(s),s.flags|=1,kt(t,s,c,h),s.child)}function Ip(t,s,a,c,h){if(t===null){var p=a.type;return typeof p=="function"&&!Ic(p)&&p.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=p,Fp(t,s,p,c,h)):(t=wo(a.type,null,c,s,s.mode,h),t.ref=s.ref,t.return=s,s.child=t)}if(p=t.child,!Du(t,h)){var S=p.memoizedProps;if(a=a.compare,a=a!==null?a:Ya,a(S,c)&&t.ref===s.ref)return Zn(t,s,h)}return s.flags|=1,t=Hn(p,c),t.ref=s.ref,t.return=s,s.child=t}function Fp(t,s,a,c,h){if(t!==null){var p=t.memoizedProps;if(Ya(p,c)&&t.ref===s.ref)if(ht=!1,s.pendingProps=c=p,Du(t,h))(t.flags&131072)!==0&&(ht=!0);else return s.lanes=t.lanes,Zn(t,s,h)}return wu(t,s,a,c,h)}function Vp(t,s,a,c){var h=c.children,p=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(p=p!==null?p.baseLanes|a:a,t!==null){for(c=s.child=t.child,h=0;c!==null;)h=h|c.lanes|c.childLanes,c=c.sibling;c=h&~p}else c=0,s.child=null;return Lp(t,s,p,a,c)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Mo(s,p!==null?p.cachePool:null),p!==null?qf(s,p):tu(),Pf(s);else return c=s.lanes=536870912,Lp(t,s,p!==null?p.baseLanes|a:a,a,c)}else p!==null?(Mo(s,p.cachePool),qf(s,p),ws(),s.memoizedState=null):(t!==null&&Mo(s,null),tu(),ws());return kt(t,s,h,a),s.child}function or(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Lp(t,s,a,c,h){var p=Xc();return p=p===null?null:{parent:ut._currentValue,pool:p},s.memoizedState={baseLanes:a,cachePool:p},t!==null&&Mo(s,null),tu(),Pf(s),t!==null&&Wi(t,s,c,!0),s.childLanes=h,null}function Go(t,s){return s=Wo({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Up(t,s,a){return li(s,t.child,null,a),t=Go(s,s.pendingProps),t.flags|=2,nn(s),s.memoizedState=null,t}function Jx(t,s,a){var c=s.pendingProps,h=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(De){if(c.mode==="hidden")return t=Go(s,c),s.lanes=536870912,or(null,t);if(su(s),(t=Qe)?(t=Jm(t,gn),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:ys!==null?{id:En,overflow:Dn}:null,retryLane:536870912,hydrationErrors:null},a=Cf(t),a.return=s,s.child=a,Ct=s,Qe=null)):t=null,t===null)throw bs(s);return s.lanes=536870912,null}return Go(s,c)}var p=t.memoizedState;if(p!==null){var S=p.dehydrated;if(su(s),h)if(s.flags&256)s.flags&=-257,s=Up(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(i(558));else if(ht||Wi(t,s,a,!1),h=(a&t.childLanes)!==0,ht||h){if(c=Ge,c!==null&&(S=Rh(c,a),S!==0&&S!==p.retryLane))throw p.retryLane=S,ei(t,S),Gt(c,t,S),Cu;nl(),s=Up(t,s,a)}else t=p.treeContext,Qe=xn(S.nextSibling),Ct=s,De=!0,xs=null,gn=!1,t!==null&&jf(s,t),s=Go(s,c),s.flags|=4096;return s}return t=Hn(t.child,{mode:c.mode,children:c.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Yo(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function wu(t,s,a,c,h){return ii(s),a=au(t,s,a,c,void 0,h),c=ru(),t!==null&&!ht?(ou(t,s,h),Zn(t,s,h)):(De&&c&&Lc(s),s.flags|=1,kt(t,s,a,h),s.child)}function qp(t,s,a,c,h,p){return ii(s),s.updateQueue=null,a=Gf(s,c,a,h),Hf(t),c=ru(),t!==null&&!ht?(ou(t,s,p),Zn(t,s,p)):(De&&c&&Lc(s),s.flags|=1,kt(t,s,a,p),s.child)}function Pp(t,s,a,c,h){if(ii(s),s.stateNode===null){var p=Pi,S=a.contextType;typeof S=="object"&&S!==null&&(p=wt(S)),p=new a(c,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=_u,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=c,p.state=s.memoizedState,p.refs={},Kc(s),S=a.contextType,p.context=typeof S=="object"&&S!==null?wt(S):Pi,p.state=s.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(Su(s,a,S,c),p.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(S=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),S!==p.state&&_u.enqueueReplaceState(p,p.state,null),nr(s,c,p,h),tr(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(t===null){p=s.stateNode;var j=s.memoizedProps,F=ui(a,j);p.props=F;var G=p.context,K=a.contextType;S=Pi,typeof K=="object"&&K!==null&&(S=wt(K));var J=a.getDerivedStateFromProps;K=typeof J=="function"||typeof p.getSnapshotBeforeUpdate=="function",j=s.pendingProps!==j,K||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(j||G!==S)&&Mp(s,p,c,S),Ss=!1;var W=s.memoizedState;p.state=W,nr(s,c,p,h),tr(),G=s.memoizedState,j||W!==G||Ss?(typeof J=="function"&&(Su(s,a,J,c),G=s.memoizedState),(F=Ss||Ap(s,a,F,c,W,G,S))?(K||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=G),p.props=c,p.state=G,p.context=S,c=F):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{p=s.stateNode,$c(t,s),S=s.memoizedProps,K=ui(a,S),p.props=K,J=s.pendingProps,W=p.context,G=a.contextType,F=Pi,typeof G=="object"&&G!==null&&(F=wt(G)),j=a.getDerivedStateFromProps,(G=typeof j=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S!==J||W!==F)&&Mp(s,p,c,F),Ss=!1,W=s.memoizedState,p.state=W,nr(s,c,p,h),tr();var Z=s.memoizedState;S!==J||W!==Z||Ss||t!==null&&t.dependencies!==null&&jo(t.dependencies)?(typeof j=="function"&&(Su(s,a,j,c),Z=s.memoizedState),(K=Ss||Ap(s,a,K,c,W,Z,F)||t!==null&&t.dependencies!==null&&jo(t.dependencies))?(G||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,Z,F),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,Z,F)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||S===t.memoizedProps&&W===t.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&W===t.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=Z),p.props=c,p.state=Z,p.context=F,c=K):(typeof p.componentDidUpdate!="function"||S===t.memoizedProps&&W===t.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&W===t.memoizedState||(s.flags|=1024),c=!1)}return p=c,Yo(t,s),c=(s.flags&128)!==0,p||c?(p=s.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,t!==null&&c?(s.child=li(s,t.child,null,h),s.child=li(s,null,a,h)):kt(t,s,a,h),s.memoizedState=p.state,t=s.child):t=Zn(t,s,h),t}function Hp(t,s,a,c){return ni(),s.flags|=256,kt(t,s,a,c),s.child}var ku={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ju(t){return{baseLanes:t,cachePool:Nf()}}function Au(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=an),t}function Gp(t,s,a){var c=s.pendingProps,h=!1,p=(s.flags&128)!==0,S;if((S=p)||(S=t!==null&&t.memoizedState===null?!1:(at.current&2)!==0),S&&(h=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,t===null){if(De){if(h?Cs(s):ws(),(t=Qe)?(t=Jm(t,gn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:ys!==null?{id:En,overflow:Dn}:null,retryLane:536870912,hydrationErrors:null},a=Cf(t),a.return=s,s.child=a,Ct=s,Qe=null)):t=null,t===null)throw bs(s);return ud(t)?s.lanes=32:s.lanes=536870912,null}var j=c.children;return c=c.fallback,h?(ws(),h=s.mode,j=Wo({mode:"hidden",children:j},h),c=ti(c,h,a,null),j.return=s,c.return=s,j.sibling=c,s.child=j,c=s.child,c.memoizedState=ju(a),c.childLanes=Au(t,S,a),s.memoizedState=ku,or(null,c)):(Cs(s),Mu(s,j))}var F=t.memoizedState;if(F!==null&&(j=F.dehydrated,j!==null)){if(p)s.flags&256?(Cs(s),s.flags&=-257,s=Ru(t,s,a)):s.memoizedState!==null?(ws(),s.child=t.child,s.flags|=128,s=null):(ws(),j=c.fallback,h=s.mode,c=Wo({mode:"visible",children:c.children},h),j=ti(j,h,a,null),j.flags|=2,c.return=s,j.return=s,c.sibling=j,s.child=c,li(s,t.child,null,a),c=s.child,c.memoizedState=ju(a),c.childLanes=Au(t,S,a),s.memoizedState=ku,s=or(null,c));else if(Cs(s),ud(j)){if(S=j.nextSibling&&j.nextSibling.dataset,S)var G=S.dgst;S=G,c=Error(i(419)),c.stack="",c.digest=S,Xa({value:c,source:null,stack:null}),s=Ru(t,s,a)}else if(ht||Wi(t,s,a,!1),S=(a&t.childLanes)!==0,ht||S){if(S=Ge,S!==null&&(c=Rh(S,a),c!==0&&c!==F.retryLane))throw F.retryLane=c,ei(t,c),Gt(S,t,c),Cu;cd(j)||nl(),s=Ru(t,s,a)}else cd(j)?(s.flags|=192,s.child=t.child,s=null):(t=F.treeContext,Qe=xn(j.nextSibling),Ct=s,De=!0,xs=null,gn=!1,t!==null&&jf(s,t),s=Mu(s,c.children),s.flags|=4096);return s}return h?(ws(),j=c.fallback,h=s.mode,F=t.child,G=F.sibling,c=Hn(F,{mode:"hidden",children:c.children}),c.subtreeFlags=F.subtreeFlags&65011712,G!==null?j=Hn(G,j):(j=ti(j,h,a,null),j.flags|=2),j.return=s,c.return=s,c.sibling=j,s.child=c,or(null,c),c=s.child,j=t.child.memoizedState,j===null?j=ju(a):(h=j.cachePool,h!==null?(F=ut._currentValue,h=h.parent!==F?{parent:F,pool:F}:h):h=Nf(),j={baseLanes:j.baseLanes|a,cachePool:h}),c.memoizedState=j,c.childLanes=Au(t,S,a),s.memoizedState=ku,or(t.child,c)):(Cs(s),a=t.child,t=a.sibling,a=Hn(a,{mode:"visible",children:c.children}),a.return=s,a.sibling=null,t!==null&&(S=s.deletions,S===null?(s.deletions=[t],s.flags|=16):S.push(t)),s.child=a,s.memoizedState=null,a)}function Mu(t,s){return s=Wo({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Wo(t,s){return t=en(22,t,null,s),t.lanes=0,t}function Ru(t,s,a){return li(s,t.child,null,a),t=Mu(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Yp(t,s,a){t.lanes|=s;var c=t.alternate;c!==null&&(c.lanes|=s),Gc(t.return,s,a)}function Eu(t,s,a,c,h,p){var S=t.memoizedState;S===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:h,treeForkCount:p}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=c,S.tail=a,S.tailMode=h,S.treeForkCount=p)}function Wp(t,s,a){var c=s.pendingProps,h=c.revealOrder,p=c.tail;c=c.children;var S=at.current,j=(S&2)!==0;if(j?(S=S&1|2,s.flags|=128):S&=1,ie(at,S),kt(t,s,c,a),c=De?Qa:0,!j&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yp(t,a,s);else if(t.tag===19)Yp(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=s.child,h=null;a!==null;)t=a.alternate,t!==null&&zo(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),Eu(s,!1,h,a,p,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(t=h.alternate,t!==null&&zo(t)===null){s.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Eu(s,!0,a,null,p,c);break;case"together":Eu(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function Zn(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),As|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Wi(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(i(153));if(s.child!==null){for(t=s.child,a=Hn(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=Hn(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function Du(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&jo(t)))}function eb(t,s,a){switch(s.tag){case 3:fe(s,s.stateNode.containerInfo),vs(s,ut,t.memoizedState.cache),ni();break;case 27:case 5:Nt(s);break;case 4:fe(s,s.stateNode.containerInfo);break;case 10:vs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,su(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Cs(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Gp(t,s,a):(Cs(s),t=Zn(t,s,a),t!==null?t.sibling:null);Cs(s);break;case 19:var h=(t.flags&128)!==0;if(c=(a&s.childLanes)!==0,c||(Wi(t,s,a,!1),c=(a&s.childLanes)!==0),h){if(c)return Wp(t,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ie(at,at.current),c)break;return null;case 22:return s.lanes=0,Vp(t,s,a,s.pendingProps);case 24:vs(s,ut,t.memoizedState.cache)}return Zn(t,s,a)}function Qp(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)ht=!0;else{if(!Du(t,a)&&(s.flags&128)===0)return ht=!1,eb(t,s,a);ht=(t.flags&131072)!==0}else ht=!1,De&&(s.flags&1048576)!==0&&kf(s,Qa,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(t=ri(s.elementType),s.type=t,typeof t=="function")Ic(t)?(c=ui(t,c),s.tag=1,s=Pp(null,s,t,c,a)):(s.tag=0,s=wu(null,s,t,c,a));else{if(t!=null){var h=t.$$typeof;if(h===D){s.tag=11,s=Bp(null,s,t,c,a);break e}else if(h===k){s.tag=14,s=Ip(null,s,t,c,a);break e}}throw s=se(t)||t,Error(i(306,s,""))}}return s;case 0:return wu(t,s,s.type,s.pendingProps,a);case 1:return c=s.type,h=ui(c,s.pendingProps),Pp(t,s,c,h,a);case 3:e:{if(fe(s,s.stateNode.containerInfo),t===null)throw Error(i(387));c=s.pendingProps;var p=s.memoizedState;h=p.element,$c(t,s),nr(s,c,null,a);var S=s.memoizedState;if(c=S.cache,vs(s,ut,c),c!==p.cache&&Yc(s,[ut],a,!0),tr(),c=S.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=Hp(t,s,c,a);break e}else if(c!==h){h=fn(Error(i(424)),s),Xa(h),s=Hp(t,s,c,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Qe=xn(t.firstChild),Ct=s,De=!0,xs=null,gn=!0,a=Vf(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ni(),c===h){s=Zn(t,s,a);break e}kt(t,s,c,a)}s=s.child}return s;case 26:return Yo(t,s),t===null?(a=ag(s.type,null,s.pendingProps,null))?s.memoizedState=a:De||(a=s.type,t=s.pendingProps,c=cl(me.current).createElement(a),c[Tt]=s,c[Vt]=t,jt(c,a,t),xt(c),s.stateNode=c):s.memoizedState=ag(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Nt(s),t===null&&De&&(c=s.stateNode=ng(s.type,s.pendingProps,me.current),Ct=s,gn=!0,h=Qe,Ns(s.type)?(dd=h,Qe=xn(c.firstChild)):Qe=h),kt(t,s,s.pendingProps.children,a),Yo(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&De&&((h=c=Qe)&&(c=Rb(c,s.type,s.pendingProps,gn),c!==null?(s.stateNode=c,Ct=s,Qe=xn(c.firstChild),gn=!1,h=!0):h=!1),h||bs(s)),Nt(s),h=s.type,p=s.pendingProps,S=t!==null?t.memoizedProps:null,c=p.children,rd(h,p)?c=null:S!==null&&rd(h,S)&&(s.flags|=32),s.memoizedState!==null&&(h=au(t,s,Gx,null,null,a),_r._currentValue=h),Yo(t,s),kt(t,s,c,a),s.child;case 6:return t===null&&De&&((t=a=Qe)&&(a=Eb(a,s.pendingProps,gn),a!==null?(s.stateNode=a,Ct=s,Qe=null,t=!0):t=!1),t||bs(s)),null;case 13:return Gp(t,s,a);case 4:return fe(s,s.stateNode.containerInfo),c=s.pendingProps,t===null?s.child=li(s,null,c,a):kt(t,s,c,a),s.child;case 11:return Bp(t,s,s.type,s.pendingProps,a);case 7:return kt(t,s,s.pendingProps,a),s.child;case 8:return kt(t,s,s.pendingProps.children,a),s.child;case 12:return kt(t,s,s.pendingProps.children,a),s.child;case 10:return c=s.pendingProps,vs(s,s.type,c.value),kt(t,s,c.children,a),s.child;case 9:return h=s.type._context,c=s.pendingProps.children,ii(s),h=wt(h),c=c(h),s.flags|=1,kt(t,s,c,a),s.child;case 14:return Ip(t,s,s.type,s.pendingProps,a);case 15:return Fp(t,s,s.type,s.pendingProps,a);case 19:return Wp(t,s,a);case 31:return Jx(t,s,a);case 22:return Vp(t,s,a,s.pendingProps);case 24:return ii(s),c=wt(ut),t===null?(h=Xc(),h===null&&(h=Ge,p=Wc(),h.pooledCache=p,p.refCount++,p!==null&&(h.pooledCacheLanes|=a),h=p),s.memoizedState={parent:c,cache:h},Kc(s),vs(s,ut,h)):((t.lanes&a)!==0&&($c(t,s),nr(s,null,null,a),tr()),h=t.memoizedState,p=s.memoizedState,h.parent!==c?(h={parent:c,cache:c},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),vs(s,ut,c)):(c=p.cache,vs(s,ut,c),c!==h.cache&&Yc(s,[ut],a,!0))),kt(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Kn(t){t.flags|=4}function Nu(t,s,a,c,h){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Sm())t.flags|=8192;else throw oi=Eo,Zc}else t.flags&=-16777217}function Xp(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!ug(s))if(Sm())t.flags|=8192;else throw oi=Eo,Zc}function Qo(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?jh():536870912,t.lanes|=s,aa|=s)}function lr(t,s){if(!De)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Xe(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,c=0;if(s)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags&65011712,c|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=c,t.childLanes=a,s}function tb(t,s,a){var c=s.pendingProps;switch(Uc(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(s),null;case 1:return Xe(s),null;case 3:return a=s.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),Wn(ut),ze(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Yi(s)?Kn(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Pc())),Xe(s),null;case 26:var h=s.type,p=s.memoizedState;return t===null?(Kn(s),p!==null?(Xe(s),Xp(s,p)):(Xe(s),Nu(s,h,null,c,a))):p?p!==t.memoizedState?(Kn(s),Xe(s),Xp(s,p)):(Xe(s),s.flags&=-16777217):(t=t.memoizedProps,t!==c&&Kn(s),Xe(s),Nu(s,h,t,c,a)),null;case 27:if(Zt(s),a=me.current,h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==c&&Kn(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Xe(s),null}t=le.current,Yi(s)?Af(s):(t=ng(h,c,a),s.stateNode=t,Kn(s))}return Xe(s),null;case 5:if(Zt(s),h=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==c&&Kn(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return Xe(s),null}if(p=le.current,Yi(s))Af(s);else{var S=cl(me.current);switch(p){case 1:p=S.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:p=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":p=S.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":p=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":p=S.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof c.is=="string"?S.createElement("select",{is:c.is}):S.createElement("select"),c.multiple?p.multiple=!0:c.size&&(p.size=c.size);break;default:p=typeof c.is=="string"?S.createElement(h,{is:c.is}):S.createElement(h)}}p[Tt]=s,p[Vt]=c;e:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)p.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break e;for(;S.sibling===null;){if(S.return===null||S.return===s)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=p;e:switch(jt(p,h,c),h){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Kn(s)}}return Xe(s),Nu(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==c&&Kn(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(t=me.current,Yi(s)){if(t=s.stateNode,a=s.memoizedProps,c=null,h=Ct,h!==null)switch(h.tag){case 27:case 5:c=h.memoizedProps}t[Tt]=s,t=!!(t.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||Gm(t.nodeValue,a)),t||bs(s,!0)}else t=cl(t).createTextNode(c),t[Tt]=s,s.stateNode=t}return Xe(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(c=Yi(s),a!==null){if(t===null){if(!c)throw Error(i(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[Tt]=s}else ni(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Xe(s),t=!1}else a=Pc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(nn(s),s):(nn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Xe(s),null;case 13:if(c=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Yi(s),c!==null&&c.dehydrated!==null){if(t===null){if(!h)throw Error(i(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[Tt]=s}else ni(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Xe(s),h=!1}else h=Pc(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(nn(s),s):(nn(s),null)}return nn(s),(s.flags&128)!==0?(s.lanes=a,s):(a=c!==null,t=t!==null&&t.memoizedState!==null,a&&(c=s.child,h=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(h=c.alternate.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==h&&(c.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),Qo(s,s.updateQueue),Xe(s),null);case 4:return ze(),t===null&&td(s.stateNode.containerInfo),Xe(s),null;case 10:return Wn(s.type),Xe(s),null;case 19:if(X(at),c=s.memoizedState,c===null)return Xe(s),null;if(h=(s.flags&128)!==0,p=c.rendering,p===null)if(h)lr(c,!1);else{if(nt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(p=zo(t),p!==null){for(s.flags|=128,lr(c,!1),t=p.updateQueue,s.updateQueue=t,Qo(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Tf(a,t),a=a.sibling;return ie(at,at.current&1|2),De&&Gn(s,c.treeForkCount),s.child}t=t.sibling}c.tail!==null&&_t()>Jo&&(s.flags|=128,h=!0,lr(c,!1),s.lanes=4194304)}else{if(!h)if(t=zo(p),t!==null){if(s.flags|=128,h=!0,t=t.updateQueue,s.updateQueue=t,Qo(s,t),lr(c,!0),c.tail===null&&c.tailMode==="hidden"&&!p.alternate&&!De)return Xe(s),null}else 2*_t()-c.renderingStartTime>Jo&&a!==536870912&&(s.flags|=128,h=!0,lr(c,!1),s.lanes=4194304);c.isBackwards?(p.sibling=s.child,s.child=p):(t=c.last,t!==null?t.sibling=p:s.child=p,c.last=p)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=_t(),t.sibling=null,a=at.current,ie(at,h?a&1|2:a&1),De&&Gn(s,c.treeForkCount),t):(Xe(s),null);case 22:case 23:return nn(s),nu(),c=s.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(a&536870912)!==0&&(s.flags&128)===0&&(Xe(s),s.subtreeFlags&6&&(s.flags|=8192)):Xe(s),a=s.updateQueue,a!==null&&Qo(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==a&&(s.flags|=2048),t!==null&&X(ai),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Wn(ut),Xe(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function nb(t,s){switch(Uc(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Wn(ut),ze(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Zt(s),null;case 31:if(s.memoizedState!==null){if(nn(s),s.alternate===null)throw Error(i(340));ni()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(nn(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(i(340));ni()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return X(at),null;case 4:return ze(),null;case 10:return Wn(s.type),null;case 22:case 23:return nn(s),nu(),t!==null&&X(ai),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return Wn(ut),null;case 25:return null;default:return null}}function Zp(t,s){switch(Uc(s),s.tag){case 3:Wn(ut),ze();break;case 26:case 27:case 5:Zt(s);break;case 4:ze();break;case 31:s.memoizedState!==null&&nn(s);break;case 13:nn(s);break;case 19:X(at);break;case 10:Wn(s.type);break;case 22:case 23:nn(s),nu(),t!==null&&X(ai);break;case 24:Wn(ut)}}function cr(t,s){try{var a=s.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var h=c.next;a=h;do{if((a.tag&t)===t){c=void 0;var p=a.create,S=a.inst;c=p(),S.destroy=c}a=a.next}while(a!==h)}}catch(j){Ve(s,s.return,j)}}function ks(t,s,a){try{var c=s.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var p=h.next;c=p;do{if((c.tag&t)===t){var S=c.inst,j=S.destroy;if(j!==void 0){S.destroy=void 0,h=s;var F=a,G=j;try{G()}catch(K){Ve(h,F,K)}}}c=c.next}while(c!==p)}}catch(K){Ve(s,s.return,K)}}function Kp(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Uf(s,a)}catch(c){Ve(t,t.return,c)}}}function $p(t,s,a){a.props=ui(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(c){Ve(t,s,c)}}function ur(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof a=="function"?t.refCleanup=a(c):a.current=c}}catch(h){Ve(t,s,h)}}function Nn(t,s){var a=t.ref,c=t.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(h){Ve(t,s,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Ve(t,s,h)}else a.current=null}function Jp(t){var s=t.type,a=t.memoizedProps,c=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(h){Ve(t,t.return,h)}}function Ou(t,s,a){try{var c=t.stateNode;Cb(c,t.type,a,s),c[Vt]=s}catch(h){Ve(t,t.return,h)}}function em(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ns(t.type)||t.tag===4}function zu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||em(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ns(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Bu(t,s,a){var c=t.tag;if(c===5||c===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=qn));else if(c!==4&&(c===27&&Ns(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Bu(t,s,a),t=t.sibling;t!==null;)Bu(t,s,a),t=t.sibling}function Xo(t,s,a){var c=t.tag;if(c===5||c===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(c!==4&&(c===27&&Ns(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Xo(t,s,a),t=t.sibling;t!==null;)Xo(t,s,a),t=t.sibling}function tm(t){var s=t.stateNode,a=t.memoizedProps;try{for(var c=t.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);jt(s,c,a),s[Tt]=t,s[Vt]=a}catch(p){Ve(t,t.return,p)}}var $n=!1,ft=!1,Iu=!1,nm=typeof WeakSet=="function"?WeakSet:Set,bt=null;function sb(t,s){if(t=t.containerInfo,id=gl,t=pf(t),Rc(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var h=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var S=0,j=-1,F=-1,G=0,K=0,J=t,W=null;t:for(;;){for(var Z;J!==a||h!==0&&J.nodeType!==3||(j=S+h),J!==p||c!==0&&J.nodeType!==3||(F=S+c),J.nodeType===3&&(S+=J.nodeValue.length),(Z=J.firstChild)!==null;)W=J,J=Z;for(;;){if(J===t)break t;if(W===a&&++G===h&&(j=S),W===p&&++K===c&&(F=S),(Z=J.nextSibling)!==null)break;J=W,W=J.parentNode}J=Z}a=j===-1||F===-1?null:{start:j,end:F}}else a=null}a=a||{start:0,end:0}}else a=null;for(ad={focusedElem:t,selectionRange:a},gl=!1,bt=s;bt!==null;)if(s=bt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,bt=t;else for(;bt!==null;){switch(s=bt,p=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,a=s,h=p.memoizedProps,p=p.memoizedState,c=a.stateNode;try{var pe=ui(a.type,h);t=c.getSnapshotBeforeUpdate(pe,p),c.__reactInternalSnapshotBeforeUpdate=t}catch(xe){Ve(a,a.return,xe)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)ld(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":ld(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=s.sibling,t!==null){t.return=s.return,bt=t;break}bt=s.return}}function sm(t,s,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:es(t,a),c&4&&cr(5,a);break;case 1:if(es(t,a),c&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(S){Ve(a,a.return,S)}else{var h=ui(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(h,s,t.__reactInternalSnapshotBeforeUpdate)}catch(S){Ve(a,a.return,S)}}c&64&&Kp(a),c&512&&ur(a,a.return);break;case 3:if(es(t,a),c&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Uf(t,s)}catch(S){Ve(a,a.return,S)}}break;case 27:s===null&&c&4&&tm(a);case 26:case 5:es(t,a),s===null&&c&4&&Jp(a),c&512&&ur(a,a.return);break;case 12:es(t,a);break;case 31:es(t,a),c&4&&rm(t,a);break;case 13:es(t,a),c&4&&om(t,a),c&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=hb.bind(null,a),Db(t,a))));break;case 22:if(c=a.memoizedState!==null||$n,!c){s=s!==null&&s.memoizedState!==null||ft,h=$n;var p=ft;$n=c,(ft=s)&&!p?ts(t,a,(a.subtreeFlags&8772)!==0):es(t,a),$n=h,ft=p}break;case 30:break;default:es(t,a)}}function im(t){var s=t.alternate;s!==null&&(t.alternate=null,im(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&fc(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var $e=null,Ut=!1;function Jn(t,s,a){for(a=a.child;a!==null;)am(t,s,a),a=a.sibling}function am(t,s,a){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Oa,a)}catch{}switch(a.tag){case 26:ft||Nn(a,s),Jn(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ft||Nn(a,s);var c=$e,h=Ut;Ns(a.type)&&($e=a.stateNode,Ut=!1),Jn(t,s,a),br(a.stateNode),$e=c,Ut=h;break;case 5:ft||Nn(a,s);case 6:if(c=$e,h=Ut,$e=null,Jn(t,s,a),$e=c,Ut=h,$e!==null)if(Ut)try{($e.nodeType===9?$e.body:$e.nodeName==="HTML"?$e.ownerDocument.body:$e).removeChild(a.stateNode)}catch(p){Ve(a,s,p)}else try{$e.removeChild(a.stateNode)}catch(p){Ve(a,s,p)}break;case 18:$e!==null&&(Ut?(t=$e,Km(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),fa(t)):Km($e,a.stateNode));break;case 4:c=$e,h=Ut,$e=a.stateNode.containerInfo,Ut=!0,Jn(t,s,a),$e=c,Ut=h;break;case 0:case 11:case 14:case 15:ks(2,a,s),ft||ks(4,a,s),Jn(t,s,a);break;case 1:ft||(Nn(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"&&$p(a,s,c)),Jn(t,s,a);break;case 21:Jn(t,s,a);break;case 22:ft=(c=ft)||a.memoizedState!==null,Jn(t,s,a),ft=c;break;default:Jn(t,s,a)}}function rm(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{fa(t)}catch(a){Ve(s,s.return,a)}}}function om(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{fa(t)}catch(a){Ve(s,s.return,a)}}function ib(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new nm),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new nm),s;default:throw Error(i(435,t.tag))}}function Zo(t,s){var a=ib(t);s.forEach(function(c){if(!a.has(c)){a.add(c);var h=fb.bind(null,t,c);c.then(h,h)}})}function qt(t,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var h=a[c],p=t,S=s,j=S;e:for(;j!==null;){switch(j.tag){case 27:if(Ns(j.type)){$e=j.stateNode,Ut=!1;break e}break;case 5:$e=j.stateNode,Ut=!1;break e;case 3:case 4:$e=j.stateNode.containerInfo,Ut=!0;break e}j=j.return}if($e===null)throw Error(i(160));am(p,S,h),$e=null,Ut=!1,p=h.alternate,p!==null&&(p.return=null),h.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)lm(s,t),s=s.sibling}var _n=null;function lm(t,s){var a=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:qt(s,t),Pt(t),c&4&&(ks(3,t,t.return),cr(3,t),ks(5,t,t.return));break;case 1:qt(s,t),Pt(t),c&512&&(ft||a===null||Nn(a,a.return)),c&64&&$n&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var h=_n;if(qt(s,t),Pt(t),c&512&&(ft||a===null||Nn(a,a.return)),c&4){var p=a!==null?a.memoizedState:null;if(c=t.memoizedState,a===null)if(c===null)if(t.stateNode===null){e:{c=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(c){case"title":p=h.getElementsByTagName("title")[0],(!p||p[Ia]||p[Tt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=h.createElement(c),h.head.insertBefore(p,h.querySelector("head > title"))),jt(p,c,a),p[Tt]=t,xt(p),c=p;break e;case"link":var S=lg("link","href",h).get(c+(a.href||""));if(S){for(var j=0;j<S.length;j++)if(p=S[j],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(j,1);break t}}p=h.createElement(c),jt(p,c,a),h.head.appendChild(p);break;case"meta":if(S=lg("meta","content",h).get(c+(a.content||""))){for(j=0;j<S.length;j++)if(p=S[j],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(j,1);break t}}p=h.createElement(c),jt(p,c,a),h.head.appendChild(p);break;default:throw Error(i(468,c))}p[Tt]=t,xt(p),c=p}t.stateNode=c}else cg(h,t.type,t.stateNode);else t.stateNode=og(h,c,t.memoizedProps);else p!==c?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,c===null?cg(h,t.type,t.stateNode):og(h,c,t.memoizedProps)):c===null&&t.stateNode!==null&&Ou(t,t.memoizedProps,a.memoizedProps)}break;case 27:qt(s,t),Pt(t),c&512&&(ft||a===null||Nn(a,a.return)),a!==null&&c&4&&Ou(t,t.memoizedProps,a.memoizedProps);break;case 5:if(qt(s,t),Pt(t),c&512&&(ft||a===null||Nn(a,a.return)),t.flags&32){h=t.stateNode;try{Bi(h,"")}catch(pe){Ve(t,t.return,pe)}}c&4&&t.stateNode!=null&&(h=t.memoizedProps,Ou(t,h,a!==null?a.memoizedProps:h)),c&1024&&(Iu=!0);break;case 6:if(qt(s,t),Pt(t),c&4){if(t.stateNode===null)throw Error(i(162));c=t.memoizedProps,a=t.stateNode;try{a.nodeValue=c}catch(pe){Ve(t,t.return,pe)}}break;case 3:if(hl=null,h=_n,_n=ul(s.containerInfo),qt(s,t),_n=h,Pt(t),c&4&&a!==null&&a.memoizedState.isDehydrated)try{fa(s.containerInfo)}catch(pe){Ve(t,t.return,pe)}Iu&&(Iu=!1,cm(t));break;case 4:c=_n,_n=ul(t.stateNode.containerInfo),qt(s,t),Pt(t),_n=c;break;case 12:qt(s,t),Pt(t);break;case 31:qt(s,t),Pt(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Zo(t,c)));break;case 13:qt(s,t),Pt(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&($o=_t()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Zo(t,c)));break;case 22:h=t.memoizedState!==null;var F=a!==null&&a.memoizedState!==null,G=$n,K=ft;if($n=G||h,ft=K||F,qt(s,t),ft=K,$n=G,Pt(t),c&8192)e:for(s=t.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||F||$n||ft||di(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){F=a=s;try{if(p=F.stateNode,h)S=p.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{j=F.stateNode;var J=F.memoizedProps.style,W=J!=null&&J.hasOwnProperty("display")?J.display:null;j.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(pe){Ve(F,F.return,pe)}}}else if(s.tag===6){if(a===null){F=s;try{F.stateNode.nodeValue=h?"":F.memoizedProps}catch(pe){Ve(F,F.return,pe)}}}else if(s.tag===18){if(a===null){F=s;try{var Z=F.stateNode;h?$m(Z,!0):$m(F.stateNode,!1)}catch(pe){Ve(F,F.return,pe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=t.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,Zo(t,a))));break;case 19:qt(s,t),Pt(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Zo(t,c)));break;case 30:break;case 21:break;default:qt(s,t),Pt(t)}}function Pt(t){var s=t.flags;if(s&2){try{for(var a,c=t.return;c!==null;){if(em(c)){a=c;break}c=c.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var h=a.stateNode,p=zu(t);Xo(t,p,h);break;case 5:var S=a.stateNode;a.flags&32&&(Bi(S,""),a.flags&=-33);var j=zu(t);Xo(t,j,S);break;case 3:case 4:var F=a.stateNode.containerInfo,G=zu(t);Bu(t,G,F);break;default:throw Error(i(161))}}catch(K){Ve(t,t.return,K)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function cm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;cm(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function es(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)sm(t,s.alternate,s),s=s.sibling}function di(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:ks(4,s,s.return),di(s);break;case 1:Nn(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&$p(s,s.return,a),di(s);break;case 27:br(s.stateNode);case 26:case 5:Nn(s,s.return),di(s);break;case 22:s.memoizedState===null&&di(s);break;case 30:di(s);break;default:di(s)}t=t.sibling}}function ts(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,h=t,p=s,S=p.flags;switch(p.tag){case 0:case 11:case 15:ts(h,p,a),cr(4,p);break;case 1:if(ts(h,p,a),c=p,h=c.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(G){Ve(c,c.return,G)}if(c=p,h=c.updateQueue,h!==null){var j=c.stateNode;try{var F=h.shared.hiddenCallbacks;if(F!==null)for(h.shared.hiddenCallbacks=null,h=0;h<F.length;h++)Lf(F[h],j)}catch(G){Ve(c,c.return,G)}}a&&S&64&&Kp(p),ur(p,p.return);break;case 27:tm(p);case 26:case 5:ts(h,p,a),a&&c===null&&S&4&&Jp(p),ur(p,p.return);break;case 12:ts(h,p,a);break;case 31:ts(h,p,a),a&&S&4&&rm(h,p);break;case 13:ts(h,p,a),a&&S&4&&om(h,p);break;case 22:p.memoizedState===null&&ts(h,p,a),ur(p,p.return);break;case 30:break;default:ts(h,p,a)}s=s.sibling}}function Fu(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Za(a))}function Vu(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Za(t))}function Tn(t,s,a,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)um(t,s,a,c),s=s.sibling}function um(t,s,a,c){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Tn(t,s,a,c),h&2048&&cr(9,s);break;case 1:Tn(t,s,a,c);break;case 3:Tn(t,s,a,c),h&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Za(t)));break;case 12:if(h&2048){Tn(t,s,a,c),t=s.stateNode;try{var p=s.memoizedProps,S=p.id,j=p.onPostCommit;typeof j=="function"&&j(S,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(F){Ve(s,s.return,F)}}else Tn(t,s,a,c);break;case 31:Tn(t,s,a,c);break;case 13:Tn(t,s,a,c);break;case 23:break;case 22:p=s.stateNode,S=s.alternate,s.memoizedState!==null?p._visibility&2?Tn(t,s,a,c):dr(t,s):p._visibility&2?Tn(t,s,a,c):(p._visibility|=2,na(t,s,a,c,(s.subtreeFlags&10256)!==0||!1)),h&2048&&Fu(S,s);break;case 24:Tn(t,s,a,c),h&2048&&Vu(s.alternate,s);break;default:Tn(t,s,a,c)}}function na(t,s,a,c,h){for(h=h&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var p=t,S=s,j=a,F=c,G=S.flags;switch(S.tag){case 0:case 11:case 15:na(p,S,j,F,h),cr(8,S);break;case 23:break;case 22:var K=S.stateNode;S.memoizedState!==null?K._visibility&2?na(p,S,j,F,h):dr(p,S):(K._visibility|=2,na(p,S,j,F,h)),h&&G&2048&&Fu(S.alternate,S);break;case 24:na(p,S,j,F,h),h&&G&2048&&Vu(S.alternate,S);break;default:na(p,S,j,F,h)}s=s.sibling}}function dr(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,c=s,h=c.flags;switch(c.tag){case 22:dr(a,c),h&2048&&Fu(c.alternate,c);break;case 24:dr(a,c),h&2048&&Vu(c.alternate,c);break;default:dr(a,c)}s=s.sibling}}var hr=8192;function sa(t,s,a){if(t.subtreeFlags&hr)for(t=t.child;t!==null;)dm(t,s,a),t=t.sibling}function dm(t,s,a){switch(t.tag){case 26:sa(t,s,a),t.flags&hr&&t.memoizedState!==null&&Hb(a,_n,t.memoizedState,t.memoizedProps);break;case 5:sa(t,s,a);break;case 3:case 4:var c=_n;_n=ul(t.stateNode.containerInfo),sa(t,s,a),_n=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=hr,hr=16777216,sa(t,s,a),hr=c):sa(t,s,a));break;default:sa(t,s,a)}}function hm(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function fr(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];bt=c,pm(c,t)}hm(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)fm(t),t=t.sibling}function fm(t){switch(t.tag){case 0:case 11:case 15:fr(t),t.flags&2048&&ks(9,t,t.return);break;case 3:fr(t);break;case 12:fr(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Ko(t)):fr(t);break;default:fr(t)}}function Ko(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];bt=c,pm(c,t)}hm(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:ks(8,s,s.return),Ko(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Ko(s));break;default:Ko(s)}t=t.sibling}}function pm(t,s){for(;bt!==null;){var a=bt;switch(a.tag){case 0:case 11:case 15:ks(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Za(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,bt=c;else e:for(a=t;bt!==null;){c=bt;var h=c.sibling,p=c.return;if(im(c),c===a){bt=null;break e}if(h!==null){h.return=p,bt=h;break e}bt=p}}}var ab={getCacheForType:function(t){var s=wt(ut),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return wt(ut).controller.signal}},rb=typeof WeakMap=="function"?WeakMap:Map,Be=0,Ge=null,ke=null,Me=0,Fe=0,sn=null,js=!1,ia=!1,Lu=!1,ns=0,nt=0,As=0,hi=0,Uu=0,an=0,aa=0,pr=null,Ht=null,qu=!1,$o=0,mm=0,Jo=1/0,el=null,Ms=null,mt=0,Rs=null,ra=null,ss=0,Pu=0,Hu=null,gm=null,mr=0,Gu=null;function rn(){return(Be&2)!==0&&Me!==0?Me&-Me:B.T!==null?Ku():Eh()}function ym(){if(an===0)if((Me&536870912)===0||De){var t=oo;oo<<=1,(oo&3932160)===0&&(oo=262144),an=t}else an=536870912;return t=tn.current,t!==null&&(t.flags|=32),an}function Gt(t,s,a){(t===Ge&&(Fe===2||Fe===9)||t.cancelPendingCommit!==null)&&(oa(t,0),Es(t,Me,an,!1)),Ba(t,a),((Be&2)===0||t!==Ge)&&(t===Ge&&((Be&2)===0&&(hi|=a),nt===4&&Es(t,Me,an,!1)),On(t))}function xm(t,s,a){if((Be&6)!==0)throw Error(i(327));var c=!a&&(s&127)===0&&(s&t.expiredLanes)===0||za(t,s),h=c?cb(t,s):Wu(t,s,!0),p=c;do{if(h===0){ia&&!c&&Es(t,s,0,!1);break}else{if(a=t.current.alternate,p&&!ob(a)){h=Wu(t,s,!1),p=!1;continue}if(h===2){if(p=s,t.errorRecoveryDisabledLanes&p)var S=0;else S=t.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var j=t;h=pr;var F=j.current.memoizedState.isDehydrated;if(F&&(oa(j,S).flags|=256),S=Wu(j,S,!1),S!==2){if(Lu&&!F){j.errorRecoveryDisabledLanes|=p,hi|=p,h=4;break e}p=Ht,Ht=h,p!==null&&(Ht===null?Ht=p:Ht.push.apply(Ht,p))}h=S}if(p=!1,h!==2)continue}}if(h===1){oa(t,0),Es(t,s,0,!0);break}e:{switch(c=t,p=h,p){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Es(c,s,an,!js);break e;case 2:Ht=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(h=$o+300-_t(),10<h)){if(Es(c,s,an,!js),co(c,0,!0)!==0)break e;ss=s,c.timeoutHandle=Xm(bm.bind(null,c,a,Ht,el,qu,s,an,hi,aa,js,p,"Throttled",-0,0),h);break e}bm(c,a,Ht,el,qu,s,an,hi,aa,js,p,null,-0,0)}}break}while(!0);On(t)}function bm(t,s,a,c,h,p,S,j,F,G,K,J,W,Z){if(t.timeoutHandle=-1,J=s.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qn},dm(s,p,J);var pe=(p&62914560)===p?$o-_t():(p&4194048)===p?mm-_t():0;if(pe=Gb(J,pe),pe!==null){ss=p,t.cancelPendingCommit=pe(jm.bind(null,t,s,p,a,c,h,S,j,F,K,J,null,W,Z)),Es(t,p,S,!G);return}}jm(t,s,p,a,c,h,S,j,F)}function ob(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var h=a[c],p=h.getSnapshot;h=h.value;try{if(!Jt(p(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Es(t,s,a,c){s&=~Uu,s&=~hi,t.suspendedLanes|=s,t.pingedLanes&=~s,c&&(t.warmLanes|=s),c=t.expirationTimes;for(var h=s;0<h;){var p=31-$t(h),S=1<<p;c[p]=-1,h&=~S}a!==0&&Ah(t,a,s)}function tl(){return(Be&6)===0?(gr(0),!1):!0}function Yu(){if(ke!==null){if(Fe===0)var t=ke.return;else t=ke,Yn=si=null,lu(t),Ki=null,$a=0,t=ke;for(;t!==null;)Zp(t.alternate,t),t=t.return;ke=null}}function oa(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,jb(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ss=0,Yu(),Ge=t,ke=a=Hn(t.current,null),Me=s,Fe=0,sn=null,js=!1,ia=za(t,s),Lu=!1,aa=an=Uu=hi=As=nt=0,Ht=pr=null,qu=!1,(s&8)!==0&&(s|=s&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=s;0<c;){var h=31-$t(c),p=1<<h;s|=t[h],c&=~p}return ns=s,_o(),a}function vm(t,s){_e=null,B.H=rr,s===Zi||s===Ro?(s=Bf(),Fe=3):s===Zc?(s=Bf(),Fe=4):Fe=s===Cu?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,sn=s,ke===null&&(nt=1,Ho(t,fn(s,t.current)))}function Sm(){var t=tn.current;return t===null?!0:(Me&4194048)===Me?yn===null:(Me&62914560)===Me||(Me&536870912)!==0?t===yn:!1}function _m(){var t=B.H;return B.H=rr,t===null?rr:t}function Tm(){var t=B.A;return B.A=ab,t}function nl(){nt=4,js||(Me&4194048)!==Me&&tn.current!==null||(ia=!0),(As&134217727)===0&&(hi&134217727)===0||Ge===null||Es(Ge,Me,an,!1)}function Wu(t,s,a){var c=Be;Be|=2;var h=_m(),p=Tm();(Ge!==t||Me!==s)&&(el=null,oa(t,s)),s=!1;var S=nt;e:do try{if(Fe!==0&&ke!==null){var j=ke,F=sn;switch(Fe){case 8:Yu(),S=6;break e;case 3:case 2:case 9:case 6:tn.current===null&&(s=!0);var G=Fe;if(Fe=0,sn=null,la(t,j,F,G),a&&ia){S=0;break e}break;default:G=Fe,Fe=0,sn=null,la(t,j,F,G)}}lb(),S=nt;break}catch(K){vm(t,K)}while(!0);return s&&t.shellSuspendCounter++,Yn=si=null,Be=c,B.H=h,B.A=p,ke===null&&(Ge=null,Me=0,_o()),S}function lb(){for(;ke!==null;)Cm(ke)}function cb(t,s){var a=Be;Be|=2;var c=_m(),h=Tm();Ge!==t||Me!==s?(el=null,Jo=_t()+500,oa(t,s)):ia=za(t,s);e:do try{if(Fe!==0&&ke!==null){s=ke;var p=sn;t:switch(Fe){case 1:Fe=0,sn=null,la(t,s,p,1);break;case 2:case 9:if(Of(p)){Fe=0,sn=null,wm(s);break}s=function(){Fe!==2&&Fe!==9||Ge!==t||(Fe=7),On(t)},p.then(s,s);break e;case 3:Fe=7;break e;case 4:Fe=5;break e;case 7:Of(p)?(Fe=0,sn=null,wm(s)):(Fe=0,sn=null,la(t,s,p,7));break;case 5:var S=null;switch(ke.tag){case 26:S=ke.memoizedState;case 5:case 27:var j=ke;if(S?ug(S):j.stateNode.complete){Fe=0,sn=null;var F=j.sibling;if(F!==null)ke=F;else{var G=j.return;G!==null?(ke=G,sl(G)):ke=null}break t}}Fe=0,sn=null,la(t,s,p,5);break;case 6:Fe=0,sn=null,la(t,s,p,6);break;case 8:Yu(),nt=6;break e;default:throw Error(i(462))}}ub();break}catch(K){vm(t,K)}while(!0);return Yn=si=null,B.H=c,B.A=h,Be=a,ke!==null?0:(Ge=null,Me=0,_o(),nt)}function ub(){for(;ke!==null&&!Rn();)Cm(ke)}function Cm(t){var s=Qp(t.alternate,t,ns);t.memoizedProps=t.pendingProps,s===null?sl(t):ke=s}function wm(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=qp(a,s,s.pendingProps,s.type,void 0,Me);break;case 11:s=qp(a,s,s.pendingProps,s.type.render,s.ref,Me);break;case 5:lu(s);default:Zp(a,s),s=ke=Tf(s,ns),s=Qp(a,s,ns)}t.memoizedProps=t.pendingProps,s===null?sl(t):ke=s}function la(t,s,a,c){Yn=si=null,lu(s),Ki=null,$a=0;var h=s.return;try{if($x(t,h,s,a,Me)){nt=1,Ho(t,fn(a,t.current)),ke=null;return}}catch(p){if(h!==null)throw ke=h,p;nt=1,Ho(t,fn(a,t.current)),ke=null;return}s.flags&32768?(De||c===1?t=!0:ia||(Me&536870912)!==0?t=!1:(js=t=!0,(c===2||c===9||c===3||c===6)&&(c=tn.current,c!==null&&c.tag===13&&(c.flags|=16384))),km(s,t)):sl(s)}function sl(t){var s=t;do{if((s.flags&32768)!==0){km(s,js);return}t=s.return;var a=tb(s.alternate,s,ns);if(a!==null){ke=a;return}if(s=s.sibling,s!==null){ke=s;return}ke=s=t}while(s!==null);nt===0&&(nt=5)}function km(t,s){do{var a=nb(t.alternate,t);if(a!==null){a.flags&=32767,ke=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){ke=t;return}ke=t=a}while(t!==null);nt=6,ke=null}function jm(t,s,a,c,h,p,S,j,F){t.cancelPendingCommit=null;do il();while(mt!==0);if((Be&6)!==0)throw Error(i(327));if(s!==null){if(s===t.current)throw Error(i(177));if(p=s.lanes|s.childLanes,p|=zc,Py(t,a,p,S,j,F),t===Ge&&(ke=Ge=null,Me=0),ra=s,Rs=t,ss=a,Pu=p,Hu=h,gm=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,pb(ao,function(){return Dm(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=B.T,B.T=null,h=Q.p,Q.p=2,S=Be,Be|=4;try{sb(t,s,a)}finally{Be=S,Q.p=h,B.T=c}}mt=1,Am(),Mm(),Rm()}}function Am(){if(mt===1){mt=0;var t=Rs,s=ra,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=B.T,B.T=null;var c=Q.p;Q.p=2;var h=Be;Be|=4;try{lm(s,t);var p=ad,S=pf(t.containerInfo),j=p.focusedElem,F=p.selectionRange;if(S!==j&&j&&j.ownerDocument&&ff(j.ownerDocument.documentElement,j)){if(F!==null&&Rc(j)){var G=F.start,K=F.end;if(K===void 0&&(K=G),"selectionStart"in j)j.selectionStart=G,j.selectionEnd=Math.min(K,j.value.length);else{var J=j.ownerDocument||document,W=J&&J.defaultView||window;if(W.getSelection){var Z=W.getSelection(),pe=j.textContent.length,xe=Math.min(F.start,pe),qe=F.end===void 0?xe:Math.min(F.end,pe);!Z.extend&&xe>qe&&(S=qe,qe=xe,xe=S);var U=hf(j,xe),V=hf(j,qe);if(U&&V&&(Z.rangeCount!==1||Z.anchorNode!==U.node||Z.anchorOffset!==U.offset||Z.focusNode!==V.node||Z.focusOffset!==V.offset)){var H=J.createRange();H.setStart(U.node,U.offset),Z.removeAllRanges(),xe>qe?(Z.addRange(H),Z.extend(V.node,V.offset)):(H.setEnd(V.node,V.offset),Z.addRange(H))}}}}for(J=[],Z=j;Z=Z.parentNode;)Z.nodeType===1&&J.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<J.length;j++){var $=J[j];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}gl=!!id,ad=id=null}finally{Be=h,Q.p=c,B.T=a}}t.current=s,mt=2}}function Mm(){if(mt===2){mt=0;var t=Rs,s=ra,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=B.T,B.T=null;var c=Q.p;Q.p=2;var h=Be;Be|=4;try{sm(t,s.alternate,s)}finally{Be=h,Q.p=c,B.T=a}}mt=3}}function Rm(){if(mt===4||mt===3){mt=0,Qs();var t=Rs,s=ra,a=ss,c=gm;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?mt=5:(mt=0,ra=Rs=null,Em(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Ms=null),dc(a),s=s.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Oa,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=B.T,h=Q.p,Q.p=2,B.T=null;try{for(var p=t.onRecoverableError,S=0;S<c.length;S++){var j=c[S];p(j.value,{componentStack:j.stack})}}finally{B.T=s,Q.p=h}}(ss&3)!==0&&il(),On(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Gu?mr++:(mr=0,Gu=t):mr=0,gr(0)}}function Em(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Za(s)))}function il(){return Am(),Mm(),Rm(),Dm()}function Dm(){if(mt!==5)return!1;var t=Rs,s=Pu;Pu=0;var a=dc(ss),c=B.T,h=Q.p;try{Q.p=32>a?32:a,B.T=null,a=Hu,Hu=null;var p=Rs,S=ss;if(mt=0,ra=Rs=null,ss=0,(Be&6)!==0)throw Error(i(331));var j=Be;if(Be|=4,fm(p.current),um(p,p.current,S,a),Be=j,gr(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Oa,p)}catch{}return!0}finally{Q.p=h,B.T=c,Em(t,s)}}function Nm(t,s,a){s=fn(a,s),s=Tu(t.stateNode,s,2),t=Ts(t,s,2),t!==null&&(Ba(t,2),On(t))}function Ve(t,s,a){if(t.tag===3)Nm(t,t,a);else for(;s!==null;){if(s.tag===3){Nm(s,t,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ms===null||!Ms.has(c))){t=fn(a,t),a=Op(2),c=Ts(s,a,2),c!==null&&(zp(a,c,s,t),Ba(c,2),On(c));break}}s=s.return}}function Qu(t,s,a){var c=t.pingCache;if(c===null){c=t.pingCache=new rb;var h=new Set;c.set(s,h)}else h=c.get(s),h===void 0&&(h=new Set,c.set(s,h));h.has(a)||(Lu=!0,h.add(a),t=db.bind(null,t,s,a),s.then(t,t))}function db(t,s,a){var c=t.pingCache;c!==null&&c.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Ge===t&&(Me&a)===a&&(nt===4||nt===3&&(Me&62914560)===Me&&300>_t()-$o?(Be&2)===0&&oa(t,0):Uu|=a,aa===Me&&(aa=0)),On(t)}function Om(t,s){s===0&&(s=jh()),t=ei(t,s),t!==null&&(Ba(t,s),On(t))}function hb(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),Om(t,a)}function fb(t,s){var a=0;switch(t.tag){case 31:case 13:var c=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),Om(t,a)}function pb(t,s){return Ye(t,s)}var al=null,ca=null,Xu=!1,rl=!1,Zu=!1,Ds=0;function On(t){t!==ca&&t.next===null&&(ca===null?al=ca=t:ca=ca.next=t),rl=!0,Xu||(Xu=!0,gb())}function gr(t,s){if(!Zu&&rl){Zu=!0;do for(var a=!1,c=al;c!==null;){if(t!==0){var h=c.pendingLanes;if(h===0)var p=0;else{var S=c.suspendedLanes,j=c.pingedLanes;p=(1<<31-$t(42|t)+1)-1,p&=h&~(S&~j),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,Fm(c,p))}else p=Me,p=co(c,c===Ge?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||za(c,p)||(a=!0,Fm(c,p));c=c.next}while(a);Zu=!1}}function mb(){zm()}function zm(){rl=Xu=!1;var t=0;Ds!==0&&kb()&&(t=Ds);for(var s=_t(),a=null,c=al;c!==null;){var h=c.next,p=Bm(c,s);p===0?(c.next=null,a===null?al=h:a.next=h,h===null&&(ca=a)):(a=c,(t!==0||(p&3)!==0)&&(rl=!0)),c=h}mt!==0&&mt!==5||gr(t),Ds!==0&&(Ds=0)}function Bm(t,s){for(var a=t.suspendedLanes,c=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var S=31-$t(p),j=1<<S,F=h[S];F===-1?((j&a)===0||(j&c)!==0)&&(h[S]=qy(j,s)):F<=s&&(t.expiredLanes|=j),p&=~j}if(s=Ge,a=Me,a=co(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,a===0||t===s&&(Fe===2||Fe===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&Mt(c),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||za(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(c!==null&&Mt(c),dc(a)){case 2:case 8:a=wh;break;case 32:a=ao;break;case 268435456:a=kh;break;default:a=ao}return c=Im.bind(null,t),a=Ye(a,c),t.callbackPriority=s,t.callbackNode=a,s}return c!==null&&c!==null&&Mt(c),t.callbackPriority=2,t.callbackNode=null,2}function Im(t,s){if(mt!==0&&mt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(il()&&t.callbackNode!==a)return null;var c=Me;return c=co(t,t===Ge?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(xm(t,c,s),Bm(t,_t()),t.callbackNode!=null&&t.callbackNode===a?Im.bind(null,t):null)}function Fm(t,s){if(il())return null;xm(t,s,!0)}function gb(){Ab(function(){(Be&6)!==0?Ye(io,mb):zm()})}function Ku(){if(Ds===0){var t=Qi;t===0&&(t=ro,ro<<=1,(ro&261888)===0&&(ro=256)),Ds=t}return Ds}function Vm(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:po(""+t)}function Lm(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function yb(t,s,a,c,h){if(s==="submit"&&a&&a.stateNode===h){var p=Vm((h[Vt]||null).action),S=c.submitter;S&&(s=(s=S[Vt]||null)?Vm(s.formAction):S.getAttribute("formAction"),s!==null&&(p=s,S=null));var j=new xo("action","action",null,c,h);t.push({event:j,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ds!==0){var F=S?Lm(h,S):new FormData(h);yu(a,{pending:!0,data:F,method:h.method,action:p},null,F)}}else typeof p=="function"&&(j.preventDefault(),F=S?Lm(h,S):new FormData(h),yu(a,{pending:!0,data:F,method:h.method,action:p},p,F))},currentTarget:h}]})}}for(var $u=0;$u<Oc.length;$u++){var Ju=Oc[$u],xb=Ju.toLowerCase(),bb=Ju[0].toUpperCase()+Ju.slice(1);Sn(xb,"on"+bb)}Sn(yf,"onAnimationEnd"),Sn(xf,"onAnimationIteration"),Sn(bf,"onAnimationStart"),Sn("dblclick","onDoubleClick"),Sn("focusin","onFocus"),Sn("focusout","onBlur"),Sn(zx,"onTransitionRun"),Sn(Bx,"onTransitionStart"),Sn(Ix,"onTransitionCancel"),Sn(vf,"onTransitionEnd"),Oi("onMouseEnter",["mouseout","mouseover"]),Oi("onMouseLeave",["mouseout","mouseover"]),Oi("onPointerEnter",["pointerout","pointerover"]),Oi("onPointerLeave",["pointerout","pointerover"]),Zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yr));function Um(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var c=t[a],h=c.event;c=c.listeners;e:{var p=void 0;if(s)for(var S=c.length-1;0<=S;S--){var j=c[S],F=j.instance,G=j.currentTarget;if(j=j.listener,F!==p&&h.isPropagationStopped())break e;p=j,h.currentTarget=G;try{p(h)}catch(K){So(K)}h.currentTarget=null,p=F}else for(S=0;S<c.length;S++){if(j=c[S],F=j.instance,G=j.currentTarget,j=j.listener,F!==p&&h.isPropagationStopped())break e;p=j,h.currentTarget=G;try{p(h)}catch(K){So(K)}h.currentTarget=null,p=F}}}}function je(t,s){var a=s[hc];a===void 0&&(a=s[hc]=new Set);var c=t+"__bubble";a.has(c)||(qm(s,t,2,!1),a.add(c))}function ed(t,s,a){var c=0;s&&(c|=4),qm(a,t,c,s)}var ol="_reactListening"+Math.random().toString(36).slice(2);function td(t){if(!t[ol]){t[ol]=!0,Oh.forEach(function(a){a!=="selectionchange"&&(vb.has(a)||ed(a,!1,t),ed(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[ol]||(s[ol]=!0,ed("selectionchange",!1,s))}}function qm(t,s,a,c){switch(yg(s)){case 2:var h=Qb;break;case 8:h=Xb;break;default:h=gd}a=h.bind(null,s,a,t),h=void 0,!Sc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),c?h!==void 0?t.addEventListener(s,a,{capture:!0,passive:h}):t.addEventListener(s,a,!0):h!==void 0?t.addEventListener(s,a,{passive:h}):t.addEventListener(s,a,!1)}function nd(t,s,a,c,h){var p=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var j=c.stateNode.containerInfo;if(j===h)break;if(S===4)for(S=c.return;S!==null;){var F=S.tag;if((F===3||F===4)&&S.stateNode.containerInfo===h)return;S=S.return}for(;j!==null;){if(S=Ei(j),S===null)return;if(F=S.tag,F===5||F===6||F===26||F===27){c=p=S;continue e}j=j.parentNode}}c=c.return}Yh(function(){var G=p,K=bc(a),J=[];e:{var W=Sf.get(t);if(W!==void 0){var Z=xo,pe=t;switch(t){case"keypress":if(go(a)===0)break e;case"keydown":case"keyup":Z=fx;break;case"focusin":pe="focus",Z=wc;break;case"focusout":pe="blur",Z=wc;break;case"beforeblur":case"afterblur":Z=wc;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Xh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=tx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=gx;break;case yf:case xf:case bf:Z=ix;break;case vf:Z=xx;break;case"scroll":case"scrollend":Z=Jy;break;case"wheel":Z=vx;break;case"copy":case"cut":case"paste":Z=rx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Kh;break;case"toggle":case"beforetoggle":Z=_x}var xe=(s&4)!==0,qe=!xe&&(t==="scroll"||t==="scrollend"),U=xe?W!==null?W+"Capture":null:W;xe=[];for(var V=G,H;V!==null;){var $=V;if(H=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||H===null||U===null||($=Va(V,U),$!=null&&xe.push(xr(V,$,H))),qe)break;V=V.return}0<xe.length&&(W=new Z(W,pe,null,a,K),J.push({event:W,listeners:xe}))}}if((s&7)===0){e:{if(W=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",W&&a!==xc&&(pe=a.relatedTarget||a.fromElement)&&(Ei(pe)||pe[Ri]))break e;if((Z||W)&&(W=K.window===K?K:(W=K.ownerDocument)?W.defaultView||W.parentWindow:window,Z?(pe=a.relatedTarget||a.toElement,Z=G,pe=pe?Ei(pe):null,pe!==null&&(qe=l(pe),xe=pe.tag,pe!==qe||xe!==5&&xe!==27&&xe!==6)&&(pe=null)):(Z=null,pe=G),Z!==pe)){if(xe=Xh,$="onMouseLeave",U="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(xe=Kh,$="onPointerLeave",U="onPointerEnter",V="pointer"),qe=Z==null?W:Fa(Z),H=pe==null?W:Fa(pe),W=new xe($,V+"leave",Z,a,K),W.target=qe,W.relatedTarget=H,$=null,Ei(K)===G&&(xe=new xe(U,V+"enter",pe,a,K),xe.target=H,xe.relatedTarget=qe,$=xe),qe=$,Z&&pe)t:{for(xe=Sb,U=Z,V=pe,H=0,$=U;$;$=xe($))H++;$=0;for(var ye=V;ye;ye=xe(ye))$++;for(;0<H-$;)U=xe(U),H--;for(;0<$-H;)V=xe(V),$--;for(;H--;){if(U===V||V!==null&&U===V.alternate){xe=U;break t}U=xe(U),V=xe(V)}xe=null}else xe=null;Z!==null&&Pm(J,W,Z,xe,!1),pe!==null&&qe!==null&&Pm(J,qe,pe,xe,!0)}}e:{if(W=G?Fa(G):window,Z=W.nodeName&&W.nodeName.toLowerCase(),Z==="select"||Z==="input"&&W.type==="file")var Ne=rf;else if(sf(W))if(of)Ne=Dx;else{Ne=Rx;var ge=Mx}else Z=W.nodeName,!Z||Z.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?G&&yc(G.elementType)&&(Ne=rf):Ne=Ex;if(Ne&&(Ne=Ne(t,G))){af(J,Ne,a,K);break e}ge&&ge(t,W,G),t==="focusout"&&G&&W.type==="number"&&G.memoizedProps.value!=null&&gc(W,"number",W.value)}switch(ge=G?Fa(G):window,t){case"focusin":(sf(ge)||ge.contentEditable==="true")&&(Li=ge,Ec=G,Wa=null);break;case"focusout":Wa=Ec=Li=null;break;case"mousedown":Dc=!0;break;case"contextmenu":case"mouseup":case"dragend":Dc=!1,mf(J,a,K);break;case"selectionchange":if(Ox)break;case"keydown":case"keyup":mf(J,a,K)}var Te;if(jc)e:{switch(t){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Vi?tf(t,a)&&(Re="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Re="onCompositionStart");Re&&($h&&a.locale!=="ko"&&(Vi||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Vi&&(Te=Wh()):(gs=K,_c="value"in gs?gs.value:gs.textContent,Vi=!0)),ge=ll(G,Re),0<ge.length&&(Re=new Zh(Re,t,null,a,K),J.push({event:Re,listeners:ge}),Te?Re.data=Te:(Te=nf(a),Te!==null&&(Re.data=Te)))),(Te=Cx?wx(t,a):kx(t,a))&&(Re=ll(G,"onBeforeInput"),0<Re.length&&(ge=new Zh("onBeforeInput","beforeinput",null,a,K),J.push({event:ge,listeners:Re}),ge.data=Te)),yb(J,t,G,a,K)}Um(J,s)})}function xr(t,s,a){return{instance:t,listener:s,currentTarget:a}}function ll(t,s){for(var a=s+"Capture",c=[];t!==null;){var h=t,p=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||p===null||(h=Va(t,a),h!=null&&c.unshift(xr(t,h,p)),h=Va(t,s),h!=null&&c.push(xr(t,h,p))),t.tag===3)return c;t=t.return}return[]}function Sb(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Pm(t,s,a,c,h){for(var p=s._reactName,S=[];a!==null&&a!==c;){var j=a,F=j.alternate,G=j.stateNode;if(j=j.tag,F!==null&&F===c)break;j!==5&&j!==26&&j!==27||G===null||(F=G,h?(G=Va(a,p),G!=null&&S.unshift(xr(a,G,F))):h||(G=Va(a,p),G!=null&&S.push(xr(a,G,F)))),a=a.return}S.length!==0&&t.push({event:s,listeners:S})}var _b=/\r\n?/g,Tb=/\u0000|\uFFFD/g;function Hm(t){return(typeof t=="string"?t:""+t).replace(_b,`
`).replace(Tb,"")}function Gm(t,s){return s=Hm(s),Hm(t)===s}function Ue(t,s,a,c,h,p){switch(a){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Bi(t,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Bi(t,""+c);break;case"className":ho(t,"class",c);break;case"tabIndex":ho(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ho(t,a,c);break;case"style":Hh(t,c,p);break;case"data":if(s!=="object"){ho(t,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(a);break}c=po(""+c),t.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(s!=="input"&&Ue(t,s,"name",h.name,h,null),Ue(t,s,"formEncType",h.formEncType,h,null),Ue(t,s,"formMethod",h.formMethod,h,null),Ue(t,s,"formTarget",h.formTarget,h,null)):(Ue(t,s,"encType",h.encType,h,null),Ue(t,s,"method",h.method,h,null),Ue(t,s,"target",h.target,h,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(a);break}c=po(""+c),t.setAttribute(a,c);break;case"onClick":c!=null&&(t.onclick=qn);break;case"onScroll":c!=null&&je("scroll",t);break;case"onScrollEnd":c!=null&&je("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}a=po(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(a,""+c):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":c===!0?t.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(a,c):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(a,c):t.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(a):t.setAttribute(a,c);break;case"popover":je("beforetoggle",t),je("toggle",t),uo(t,"popover",c);break;case"xlinkActuate":Un(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Un(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Un(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Un(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Un(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Un(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Un(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Un(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Un(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":uo(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ky.get(a)||a,uo(t,a,c))}}function sd(t,s,a,c,h,p){switch(a){case"style":Hh(t,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(a=c.__html,a!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=a}}break;case"children":typeof c=="string"?Bi(t,c):(typeof c=="number"||typeof c=="bigint")&&Bi(t,""+c);break;case"onScroll":c!=null&&je("scroll",t);break;case"onScrollEnd":c!=null&&je("scrollend",t);break;case"onClick":c!=null&&(t.onclick=qn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zh.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),p=t[Vt]||null,p=p!=null?p[a]:null,typeof p=="function"&&t.removeEventListener(s,p,h),typeof c=="function")){typeof p!="function"&&p!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,c,h);break e}a in t?t[a]=c:c===!0?t.setAttribute(a,""):uo(t,a,c)}}}function jt(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",t),je("load",t);var c=!1,h=!1,p;for(p in a)if(a.hasOwnProperty(p)){var S=a[p];if(S!=null)switch(p){case"src":c=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ue(t,s,p,S,a,null)}}h&&Ue(t,s,"srcSet",a.srcSet,a,null),c&&Ue(t,s,"src",a.src,a,null);return;case"input":je("invalid",t);var j=p=S=h=null,F=null,G=null;for(c in a)if(a.hasOwnProperty(c)){var K=a[c];if(K!=null)switch(c){case"name":h=K;break;case"type":S=K;break;case"checked":F=K;break;case"defaultChecked":G=K;break;case"value":p=K;break;case"defaultValue":j=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:Ue(t,s,c,K,a,null)}}Lh(t,p,j,F,G,S,h,!1);return;case"select":je("invalid",t),c=S=p=null;for(h in a)if(a.hasOwnProperty(h)&&(j=a[h],j!=null))switch(h){case"value":p=j;break;case"defaultValue":S=j;break;case"multiple":c=j;default:Ue(t,s,h,j,a,null)}s=p,a=S,t.multiple=!!c,s!=null?zi(t,!!c,s,!1):a!=null&&zi(t,!!c,a,!0);return;case"textarea":je("invalid",t),p=h=c=null;for(S in a)if(a.hasOwnProperty(S)&&(j=a[S],j!=null))switch(S){case"value":c=j;break;case"defaultValue":h=j;break;case"children":p=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(91));break;default:Ue(t,s,S,j,a,null)}qh(t,c,h,p);return;case"option":for(F in a)if(a.hasOwnProperty(F)&&(c=a[F],c!=null))switch(F){case"selected":t.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Ue(t,s,F,c,a,null)}return;case"dialog":je("beforetoggle",t),je("toggle",t),je("cancel",t),je("close",t);break;case"iframe":case"object":je("load",t);break;case"video":case"audio":for(c=0;c<yr.length;c++)je(yr[c],t);break;case"image":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"embed":case"source":case"link":je("error",t),je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(c=a[G],c!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Ue(t,s,G,c,a,null)}return;default:if(yc(s)){for(K in a)a.hasOwnProperty(K)&&(c=a[K],c!==void 0&&sd(t,s,K,c,a,void 0));return}}for(j in a)a.hasOwnProperty(j)&&(c=a[j],c!=null&&Ue(t,s,j,c,a,null))}function Cb(t,s,a,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,p=null,S=null,j=null,F=null,G=null,K=null;for(Z in a){var J=a[Z];if(a.hasOwnProperty(Z)&&J!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":F=J;default:c.hasOwnProperty(Z)||Ue(t,s,Z,null,c,J)}}for(var W in c){var Z=c[W];if(J=a[W],c.hasOwnProperty(W)&&(Z!=null||J!=null))switch(W){case"type":p=Z;break;case"name":h=Z;break;case"checked":G=Z;break;case"defaultChecked":K=Z;break;case"value":S=Z;break;case"defaultValue":j=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:Z!==J&&Ue(t,s,W,Z,c,J)}}mc(t,S,j,F,G,K,p,h);return;case"select":Z=S=j=W=null;for(p in a)if(F=a[p],a.hasOwnProperty(p)&&F!=null)switch(p){case"value":break;case"multiple":Z=F;default:c.hasOwnProperty(p)||Ue(t,s,p,null,c,F)}for(h in c)if(p=c[h],F=a[h],c.hasOwnProperty(h)&&(p!=null||F!=null))switch(h){case"value":W=p;break;case"defaultValue":j=p;break;case"multiple":S=p;default:p!==F&&Ue(t,s,h,p,c,F)}s=j,a=S,c=Z,W!=null?zi(t,!!a,W,!1):!!c!=!!a&&(s!=null?zi(t,!!a,s,!0):zi(t,!!a,a?[]:"",!1));return;case"textarea":Z=W=null;for(j in a)if(h=a[j],a.hasOwnProperty(j)&&h!=null&&!c.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:Ue(t,s,j,null,c,h)}for(S in c)if(h=c[S],p=a[S],c.hasOwnProperty(S)&&(h!=null||p!=null))switch(S){case"value":W=h;break;case"defaultValue":Z=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==p&&Ue(t,s,S,h,c,p)}Uh(t,W,Z);return;case"option":for(var pe in a)if(W=a[pe],a.hasOwnProperty(pe)&&W!=null&&!c.hasOwnProperty(pe))switch(pe){case"selected":t.selected=!1;break;default:Ue(t,s,pe,null,c,W)}for(F in c)if(W=c[F],Z=a[F],c.hasOwnProperty(F)&&W!==Z&&(W!=null||Z!=null))switch(F){case"selected":t.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:Ue(t,s,F,W,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in a)W=a[xe],a.hasOwnProperty(xe)&&W!=null&&!c.hasOwnProperty(xe)&&Ue(t,s,xe,null,c,W);for(G in c)if(W=c[G],Z=a[G],c.hasOwnProperty(G)&&W!==Z&&(W!=null||Z!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:Ue(t,s,G,W,c,Z)}return;default:if(yc(s)){for(var qe in a)W=a[qe],a.hasOwnProperty(qe)&&W!==void 0&&!c.hasOwnProperty(qe)&&sd(t,s,qe,void 0,c,W);for(K in c)W=c[K],Z=a[K],!c.hasOwnProperty(K)||W===Z||W===void 0&&Z===void 0||sd(t,s,K,W,c,Z);return}}for(var U in a)W=a[U],a.hasOwnProperty(U)&&W!=null&&!c.hasOwnProperty(U)&&Ue(t,s,U,null,c,W);for(J in c)W=c[J],Z=a[J],!c.hasOwnProperty(J)||W===Z||W==null&&Z==null||Ue(t,s,J,W,c,Z)}function Ym(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wb(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var h=a[c],p=h.transferSize,S=h.initiatorType,j=h.duration;if(p&&j&&Ym(S)){for(S=0,j=h.responseEnd,c+=1;c<a.length;c++){var F=a[c],G=F.startTime;if(G>j)break;var K=F.transferSize,J=F.initiatorType;K&&Ym(J)&&(F=F.responseEnd,S+=K*(F<j?1:(j-G)/(F-G)))}if(--c,s+=8*(p+S)/(h.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var id=null,ad=null;function cl(t){return t.nodeType===9?t:t.ownerDocument}function Wm(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Qm(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function rd(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var od=null;function kb(){var t=window.event;return t&&t.type==="popstate"?t===od?!1:(od=t,!0):(od=null,!1)}var Xm=typeof setTimeout=="function"?setTimeout:void 0,jb=typeof clearTimeout=="function"?clearTimeout:void 0,Zm=typeof Promise=="function"?Promise:void 0,Ab=typeof queueMicrotask=="function"?queueMicrotask:typeof Zm<"u"?function(t){return Zm.resolve(null).then(t).catch(Mb)}:Xm;function Mb(t){setTimeout(function(){throw t})}function Ns(t){return t==="head"}function Km(t,s){var a=s,c=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(c===0){t.removeChild(h),fa(s);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")br(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,br(a);for(var p=a.firstChild;p;){var S=p.nextSibling,j=p.nodeName;p[Ia]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&p.rel.toLowerCase()==="stylesheet"||a.removeChild(p),p=S}}else a==="body"&&br(t.ownerDocument.body);a=h}while(a);fa(s)}function $m(t,s){var a=t;t=0;do{var c=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=c}while(a)}function ld(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ld(a),fc(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Rb(t,s,a,c){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[Ia])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var p=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=xn(t.nextSibling),t===null)break}return null}function Eb(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=xn(t.nextSibling),t===null))return null;return t}function Jm(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=xn(t.nextSibling),t===null))return null;return t}function cd(t){return t.data==="$?"||t.data==="$~"}function ud(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Db(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var c=function(){s(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function xn(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var dd=null;function eg(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return xn(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function tg(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function ng(t,s,a){switch(s=cl(a),t){case"html":if(t=s.documentElement,!t)throw Error(i(452));return t;case"head":if(t=s.head,!t)throw Error(i(453));return t;case"body":if(t=s.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function br(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);fc(t)}var bn=new Map,sg=new Set;function ul(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var is=Q.d;Q.d={f:Nb,r:Ob,D:zb,C:Bb,L:Ib,m:Fb,X:Lb,S:Vb,M:Ub};function Nb(){var t=is.f(),s=tl();return t||s}function Ob(t){var s=Di(t);s!==null&&s.tag===5&&s.type==="form"?vp(s):is.r(t)}var ua=typeof document>"u"?null:document;function ig(t,s,a){var c=ua;if(c&&typeof s=="string"&&s){var h=dn(s);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),sg.has(h)||(sg.add(h),t={rel:t,crossOrigin:a,href:s},c.querySelector(h)===null&&(s=c.createElement("link"),jt(s,"link",t),xt(s),c.head.appendChild(s)))}}function zb(t){is.D(t),ig("dns-prefetch",t,null)}function Bb(t,s){is.C(t,s),ig("preconnect",t,s)}function Ib(t,s,a){is.L(t,s,a);var c=ua;if(c&&t&&s){var h='link[rel="preload"][as="'+dn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+dn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+dn(a.imageSizes)+'"]')):h+='[href="'+dn(t)+'"]';var p=h;switch(s){case"style":p=da(t);break;case"script":p=ha(t)}bn.has(p)||(t=x({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),bn.set(p,t),c.querySelector(h)!==null||s==="style"&&c.querySelector(vr(p))||s==="script"&&c.querySelector(Sr(p))||(s=c.createElement("link"),jt(s,"link",t),xt(s),c.head.appendChild(s)))}}function Fb(t,s){is.m(t,s);var a=ua;if(a&&t){var c=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+dn(c)+'"][href="'+dn(t)+'"]',p=h;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=ha(t)}if(!bn.has(p)&&(t=x({rel:"modulepreload",href:t},s),bn.set(p,t),a.querySelector(h)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Sr(p)))return}c=a.createElement("link"),jt(c,"link",t),xt(c),a.head.appendChild(c)}}}function Vb(t,s,a){is.S(t,s,a);var c=ua;if(c&&t){var h=Ni(c).hoistableStyles,p=da(t);s=s||"default";var S=h.get(p);if(!S){var j={loading:0,preload:null};if(S=c.querySelector(vr(p)))j.loading=5;else{t=x({rel:"stylesheet",href:t,"data-precedence":s},a),(a=bn.get(p))&&hd(t,a);var F=S=c.createElement("link");xt(F),jt(F,"link",t),F._p=new Promise(function(G,K){F.onload=G,F.onerror=K}),F.addEventListener("load",function(){j.loading|=1}),F.addEventListener("error",function(){j.loading|=2}),j.loading|=4,dl(S,s,c)}S={type:"stylesheet",instance:S,count:1,state:j},h.set(p,S)}}}function Lb(t,s){is.X(t,s);var a=ua;if(a&&t){var c=Ni(a).hoistableScripts,h=ha(t),p=c.get(h);p||(p=a.querySelector(Sr(h)),p||(t=x({src:t,async:!0},s),(s=bn.get(h))&&fd(t,s),p=a.createElement("script"),xt(p),jt(p,"link",t),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(h,p))}}function Ub(t,s){is.M(t,s);var a=ua;if(a&&t){var c=Ni(a).hoistableScripts,h=ha(t),p=c.get(h);p||(p=a.querySelector(Sr(h)),p||(t=x({src:t,async:!0,type:"module"},s),(s=bn.get(h))&&fd(t,s),p=a.createElement("script"),xt(p),jt(p,"link",t),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(h,p))}}function ag(t,s,a,c){var h=(h=me.current)?ul(h):null;if(!h)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=da(a.href),a=Ni(h).hoistableStyles,c=a.get(s),c||(c={type:"style",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=da(a.href);var p=Ni(h).hoistableStyles,S=p.get(t);if(S||(h=h.ownerDocument||h,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,S),(p=h.querySelector(vr(t)))&&!p._p&&(S.instance=p,S.state.loading=5),bn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},bn.set(t,a),p||qb(h,t,a,S.state))),s&&c===null)throw Error(i(528,""));return S}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ha(a),a=Ni(h).hoistableScripts,c=a.get(s),c||(c={type:"script",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function da(t){return'href="'+dn(t)+'"'}function vr(t){return'link[rel="stylesheet"]['+t+"]"}function rg(t){return x({},t,{"data-precedence":t.precedence,precedence:null})}function qb(t,s,a,c){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=t.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),jt(s,"link",a),xt(s),t.head.appendChild(s))}function ha(t){return'[src="'+dn(t)+'"]'}function Sr(t){return"script[async]"+t}function og(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var c=t.querySelector('style[data-href~="'+dn(a.href)+'"]');if(c)return s.instance=c,xt(c),c;var h=x({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),xt(c),jt(c,"style",h),dl(c,a.precedence,t),s.instance=c;case"stylesheet":h=da(a.href);var p=t.querySelector(vr(h));if(p)return s.state.loading|=4,s.instance=p,xt(p),p;c=rg(a),(h=bn.get(h))&&hd(c,h),p=(t.ownerDocument||t).createElement("link"),xt(p);var S=p;return S._p=new Promise(function(j,F){S.onload=j,S.onerror=F}),jt(p,"link",c),s.state.loading|=4,dl(p,a.precedence,t),s.instance=p;case"script":return p=ha(a.src),(h=t.querySelector(Sr(p)))?(s.instance=h,xt(h),h):(c=a,(h=bn.get(p))&&(c=x({},a),fd(c,h)),t=t.ownerDocument||t,h=t.createElement("script"),xt(h),jt(h,"link",c),t.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,dl(c,a.precedence,t));return s.instance}function dl(t,s,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=c.length?c[c.length-1]:null,p=h,S=0;S<c.length;S++){var j=c[S];if(j.dataset.precedence===s)p=j;else if(p!==h)break}p?p.parentNode.insertBefore(t,p.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function hd(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function fd(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var hl=null;function lg(t,s,a){if(hl===null){var c=new Map,h=hl=new Map;h.set(a,c)}else h=hl,c=h.get(a),c||(c=new Map,h.set(a,c));if(c.has(t))return c;for(c.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var p=a[h];if(!(p[Ia]||p[Tt]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var S=p.getAttribute(s)||"";S=t+S;var j=c.get(S);j?j.push(p):c.set(S,[p])}}return c}function cg(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function Pb(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function ug(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Hb(t,s,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=da(c.href),p=s.querySelector(vr(h));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=fl.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=p,xt(p);return}p=s.ownerDocument||s,c=rg(c),(h=bn.get(h))&&hd(c,h),p=p.createElement("link"),xt(p);var S=p;S._p=new Promise(function(j,F){S.onload=j,S.onerror=F}),jt(p,"link",c),a.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=fl.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var pd=0;function Gb(t,s){return t.stylesheets&&t.count===0&&ml(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var c=setTimeout(function(){if(t.stylesheets&&ml(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+s);0<t.imgBytes&&pd===0&&(pd=62500*wb());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&ml(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>pd?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(h)}}:null}function fl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ml(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var pl=null;function ml(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,pl=new Map,s.forEach(Yb,t),pl=null,fl.call(t))}function Yb(t,s){if(!(s.state.loading&4)){var a=pl.get(t);if(a)var c=a.get(null);else{a=new Map,pl.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<h.length;p++){var S=h[p];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),c=S)}c&&a.set(null,c)}h=s.instance,S=h.getAttribute("data-precedence"),p=a.get(S)||c,p===c&&a.set(null,h),a.set(S,h),this.count++,c=fl.bind(this),h.addEventListener("load",c),h.addEventListener("error",c),p?p.parentNode.insertBefore(h,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),s.state.loading|=4}}var _r={$$typeof:A,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function Wb(t,s,a,c,h,p,S,j,F){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cc(0),this.hiddenUpdates=cc(null),this.identifierPrefix=c,this.onUncaughtError=h,this.onCaughtError=p,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function dg(t,s,a,c,h,p,S,j,F,G,K,J){return t=new Wb(t,s,a,S,F,G,K,J,j),s=1,p===!0&&(s|=24),p=en(3,null,null,s),t.current=p,p.stateNode=t,s=Wc(),s.refCount++,t.pooledCache=s,s.refCount++,p.memoizedState={element:c,isDehydrated:a,cache:s},Kc(p),t}function hg(t){return t?(t=Pi,t):Pi}function fg(t,s,a,c,h,p){h=hg(h),c.context===null?c.context=h:c.pendingContext=h,c=_s(s),c.payload={element:a},p=p===void 0?null:p,p!==null&&(c.callback=p),a=Ts(t,c,s),a!==null&&(Gt(a,t,s),er(a,t,s))}function pg(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function md(t,s){pg(t,s),(t=t.alternate)&&pg(t,s)}function mg(t){if(t.tag===13||t.tag===31){var s=ei(t,67108864);s!==null&&Gt(s,t,67108864),md(t,67108864)}}function gg(t){if(t.tag===13||t.tag===31){var s=rn();s=uc(s);var a=ei(t,s);a!==null&&Gt(a,t,s),md(t,s)}}var gl=!0;function Qb(t,s,a,c){var h=B.T;B.T=null;var p=Q.p;try{Q.p=2,gd(t,s,a,c)}finally{Q.p=p,B.T=h}}function Xb(t,s,a,c){var h=B.T;B.T=null;var p=Q.p;try{Q.p=8,gd(t,s,a,c)}finally{Q.p=p,B.T=h}}function gd(t,s,a,c){if(gl){var h=yd(c);if(h===null)nd(t,s,c,yl,a),xg(t,c);else if(Kb(h,t,s,a,c))c.stopPropagation();else if(xg(t,c),s&4&&-1<Zb.indexOf(t)){for(;h!==null;){var p=Di(h);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var S=Xs(p.pendingLanes);if(S!==0){var j=p;for(j.pendingLanes|=2,j.entangledLanes|=2;S;){var F=1<<31-$t(S);j.entanglements[1]|=F,S&=~F}On(p),(Be&6)===0&&(Jo=_t()+500,gr(0))}}break;case 31:case 13:j=ei(p,2),j!==null&&Gt(j,p,2),tl(),md(p,2)}if(p=yd(c),p===null&&nd(t,s,c,yl,a),p===h)break;h=p}h!==null&&c.stopPropagation()}else nd(t,s,c,null,a)}}function yd(t){return t=bc(t),xd(t)}var yl=null;function xd(t){if(yl=null,t=Ei(t),t!==null){var s=l(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=d(s),t!==null)return t;t=null}else if(a===31){if(t=f(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return yl=t,null}function yg(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lc()){case io:return 2;case wh:return 8;case ao:case By:return 32;case kh:return 268435456;default:return 32}default:return 32}}var bd=!1,Os=null,zs=null,Bs=null,Tr=new Map,Cr=new Map,Is=[],Zb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xg(t,s){switch(t){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":zs=null;break;case"mouseover":case"mouseout":Bs=null;break;case"pointerover":case"pointerout":Tr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cr.delete(s.pointerId)}}function wr(t,s,a,c,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[h]},s!==null&&(s=Di(s),s!==null&&mg(s)),t):(t.eventSystemFlags|=c,s=t.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),t)}function Kb(t,s,a,c,h){switch(s){case"focusin":return Os=wr(Os,t,s,a,c,h),!0;case"dragenter":return zs=wr(zs,t,s,a,c,h),!0;case"mouseover":return Bs=wr(Bs,t,s,a,c,h),!0;case"pointerover":var p=h.pointerId;return Tr.set(p,wr(Tr.get(p)||null,t,s,a,c,h)),!0;case"gotpointercapture":return p=h.pointerId,Cr.set(p,wr(Cr.get(p)||null,t,s,a,c,h)),!0}return!1}function bg(t){var s=Ei(t.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=d(a),s!==null){t.blockedOn=s,Dh(t.priority,function(){gg(a)});return}}else if(s===31){if(s=f(a),s!==null){t.blockedOn=s,Dh(t.priority,function(){gg(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xl(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=yd(t.nativeEvent);if(a===null){a=t.nativeEvent;var c=new a.constructor(a.type,a);xc=c,a.target.dispatchEvent(c),xc=null}else return s=Di(a),s!==null&&mg(s),t.blockedOn=a,!1;s.shift()}return!0}function vg(t,s,a){xl(t)&&a.delete(s)}function $b(){bd=!1,Os!==null&&xl(Os)&&(Os=null),zs!==null&&xl(zs)&&(zs=null),Bs!==null&&xl(Bs)&&(Bs=null),Tr.forEach(vg),Cr.forEach(vg)}function bl(t,s){t.blockedOn===s&&(t.blockedOn=null,bd||(bd=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,$b)))}var vl=null;function Sg(t){vl!==t&&(vl=t,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){vl===t&&(vl=null);for(var s=0;s<t.length;s+=3){var a=t[s],c=t[s+1],h=t[s+2];if(typeof c!="function"){if(xd(c||a)===null)continue;break}var p=Di(a);p!==null&&(t.splice(s,3),s-=3,yu(p,{pending:!0,data:h,method:a.method,action:c},c,h))}}))}function fa(t){function s(F){return bl(F,t)}Os!==null&&bl(Os,t),zs!==null&&bl(zs,t),Bs!==null&&bl(Bs,t),Tr.forEach(s),Cr.forEach(s);for(var a=0;a<Is.length;a++){var c=Is[a];c.blockedOn===t&&(c.blockedOn=null)}for(;0<Is.length&&(a=Is[0],a.blockedOn===null);)bg(a),a.blockedOn===null&&Is.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var h=a[c],p=a[c+1],S=h[Vt]||null;if(typeof p=="function")S||Sg(a);else if(S){var j=null;if(p&&p.hasAttribute("formAction")){if(h=p,S=p[Vt]||null)j=S.formAction;else if(xd(h)!==null)continue}else j=S.action;typeof j=="function"?a[c+1]=j:(a.splice(c,3),c-=3),Sg(a)}}}function _g(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(S){return h=S})},focusReset:"manual",scroll:"manual"})}function s(){h!==null&&(h(),h=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),h!==null&&(h(),h=null)}}}function vd(t){this._internalRoot=t}Sl.prototype.render=vd.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,c=rn();fg(a,c,t,s,null,null)},Sl.prototype.unmount=vd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;fg(t.current,2,null,t,null,null),tl(),s[Ri]=null}};function Sl(t){this._internalRoot=t}Sl.prototype.unstable_scheduleHydration=function(t){if(t){var s=Eh();t={blockedOn:null,target:t,priority:s};for(var a=0;a<Is.length&&s!==0&&s<Is[a].priority;a++);Is.splice(a,0,t),a===0&&bg(t)}};var Tg=e.version;if(Tg!=="19.2.1")throw Error(i(527,Tg,"19.2.1"));Q.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=m(s),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var Jb={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_l.isDisabled&&_l.supportsFiber)try{Oa=_l.inject(Jb),Kt=_l}catch{}}return jr.createRoot=function(t,s){if(!r(t))throw Error(i(299));var a=!1,c="",h=Rp,p=Ep,S=Dp;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=dg(t,1,!1,null,null,a,c,null,h,p,S,_g),t[Ri]=s.current,td(t),new vd(s)},jr.hydrateRoot=function(t,s,a){if(!r(t))throw Error(i(299));var c=!1,h="",p=Rp,S=Ep,j=Dp,F=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(j=a.onRecoverableError),a.formState!==void 0&&(F=a.formState)),s=dg(t,1,!0,s,a??null,c,h,F,p,S,j,_g),s.context=hg(null),a=s.current,c=rn(),c=uc(c),h=_s(c),h.callback=null,Ts(a,h,c),a=c,s.current.lanes=a,Ba(s,a),On(s),t[Ri]=s.current,td(t),new Sl(s)},jr.version="19.2.1",jr}var Ng;function uv(){if(Ng)return Td.exports;Ng=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(e){console.error(e)}}return o(),Td.exports=cv(),Td.exports}var dv=uv();const hv=b0(dv);async function jd(o,e={},n){return window.__TAURI_INTERNALS__.invoke(o,e,n)}const fv=()=>({getEmotions:async()=>{try{return await jd("get_emotions")}catch(i){throw console.error("Failed to get emotions:",i),i}},generateMusic:async i=>{try{return await jd("generate_music",{request:i})}catch(r){throw console.error("Failed to generate music:",r),r}},interrogate:async i=>{try{return await jd("interrogate",{request:i})}catch(r){throw console.error("Failed to interrogate:",r),r}}}),pv=({emotions:o,onEmotionSelected:e})=>{const[n,i]=I.useState(null),[r,l]=I.useState(null),[d,f]=I.useState(null);if(!o)return u.jsx("div",{className:"emotion-wheel-empty",children:"Load emotions to begin selection"});const g=Object.keys(o.emotions),m=C=>{i(C),l(null),f(null),e(null)},y=C=>{l(C),f(null),e(null)},x=C=>{f(C),n&&r&&e({base:n,intensity:r,sub:C})},b=()=>{i(null),l(null),f(null),e(null)},v=C=>{const N=C.toLowerCase();return N.includes("angry")||N==="anger"?"emotion-angry":N.includes("sad")||N==="sadness"?"emotion-sad":N.includes("happy")||N==="joy"||N==="happiness"?"emotion-happy":N.includes("fear")||N==="fear"?"emotion-fear":N.includes("disgust")||N==="disgust"?"emotion-disgust":N.includes("surprise")||N==="surprise"?"emotion-surprise":"emotion-neutral"},_=()=>!n||!o?.emotions[n]?[]:Object.keys(o.emotions[n].intensities||{}),w=()=>!n||!r||!o?.emotions[n]?[]:o.emotions[n].intensities?.[r]||[],T=C=>C&&C.charAt(0).toUpperCase()+C.slice(1);return u.jsxs("div",{className:"emotion-wheel-container",children:[n&&r&&d&&u.jsxs("div",{className:"emotion-wheel-selected animate-fadeIn",children:[u.jsxs("div",{className:"emotion-wheel-selected-content",children:[u.jsx("div",{className:"emotion-wheel-selected-label",children:"Selected Emotion:"}),u.jsxs("div",{className:"emotion-wheel-selected-value",children:[T(n),"  ",T(r),"  ",T(d)]})]}),u.jsx("button",{onClick:b,className:"emotion-wheel-clear-btn",children:"Clear"})]}),u.jsxs("div",{className:"emotion-wheel-step",children:[u.jsx("h4",{className:"emotion-wheel-step-title",children:n?"1. Base Emotion (selected)":"1. Select Base Emotion"}),u.jsx("div",{className:"emotion-wheel-grid emotion-wheel-grid-base",children:g.map(C=>u.jsx("button",{onClick:()=>m(C),className:`emotion-wheel-btn ${v(C)} ${n===C?"emotion-wheel-btn-selected":""}`,children:T(C)},C))})]}),n&&u.jsxs("div",{className:"emotion-wheel-step animate-fadeIn",children:[u.jsx("h4",{className:"emotion-wheel-step-title",children:r?"2. Intensity Level (selected)":"2. Select Intensity Level"}),u.jsx("div",{className:"emotion-wheel-grid emotion-wheel-grid-intensity",children:_().map(C=>u.jsx("button",{onClick:()=>y(C),className:`emotion-wheel-btn ${v(n)} ${r===C?"emotion-wheel-btn-selected":""}`,children:T(C)},C))})]}),n&&r&&u.jsxs("div",{className:"emotion-wheel-step animate-fadeIn",children:[u.jsx("h4",{className:"emotion-wheel-step-title",children:d?"3. Specific Emotion (selected)":"3. Select Specific Emotion"}),u.jsx("div",{className:"emotion-wheel-grid emotion-wheel-grid-sub",children:w().map(C=>u.jsx("button",{onClick:()=>x(C),className:`emotion-wheel-btn ${v(n)} ${d===C?"emotion-wheel-btn-selected":""}`,children:T(C)},C))})]}),!n&&u.jsx("div",{className:"emotion-wheel-empty",children:"Choose your emotional starting point above"})]})},S0="14.9.17",Og=(o,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:o}),zg=(o,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:o}),zd=(o,e)=>({startTime:e,type:"setValue",value:o}),_0=(o,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:o}),T0=(o,e,{startTime:n,target:i,timeConstant:r})=>i+(e-i)*Math.exp((n-o)/r),ma=o=>o.type==="exponentialRampToValue",Rl=o=>o.type==="linearRampToValue",Ls=o=>ma(o)||Rl(o),Kd=o=>o.type==="setValue",rs=o=>o.type==="setValueCurve",El=(o,e,n,i)=>{const r=o[e];return r===void 0?i:Ls(r)||Kd(r)?r.value:rs(r)?r.values[r.values.length-1]:T0(n,El(o,e-1,r.startTime,i),r)},Bg=(o,e,n,i,r)=>n===void 0?[i.insertTime,r]:Ls(n)?[n.endTime,n.value]:Kd(n)?[n.startTime,n.value]:rs(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,El(o,e-1,n.startTime,r)],Bd=o=>o.type==="cancelAndHold",Id=o=>o.type==="cancelScheduledValues",Vs=o=>Bd(o)||Id(o)?o.cancelTime:ma(o)||Rl(o)?o.endTime:o.startTime,Ig=(o,e,n,{endTime:i,value:r})=>n===r?r:0<n&&0<r||n<0&&r<0?n*(r/n)**((o-e)/(i-e)):0,Fg=(o,e,n,{endTime:i,value:r})=>n+(o-e)/(i-e)*(r-n),mv=(o,e)=>{const n=Math.floor(e),i=Math.ceil(e);return n===i?o[n]:(1-(e-n))*o[n]+(1-(i-e))*o[i]},gv=(o,{duration:e,startTime:n,values:i})=>{const r=(o-n)/e*(i.length-1);return mv(i,r)},Tl=o=>o.type==="setTarget";class yv{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=Vs(e);if(Bd(e)||Id(e)){const i=this._automationEvents.findIndex(l=>Id(e)&&rs(l)?l.startTime+l.duration>=n:Vs(l)>=n),r=this._automationEvents[i];if(i!==-1&&(this._automationEvents=this._automationEvents.slice(0,i)),Bd(e)){const l=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&Ls(r)){if(l!==void 0&&Tl(l))throw new Error("The internal list is malformed.");const d=l===void 0?r.insertTime:rs(l)?l.startTime+l.duration:Vs(l),f=l===void 0?this._defaultValue:rs(l)?l.values[l.values.length-1]:l.value,g=ma(r)?Ig(n,d,f,r):Fg(n,d,f,r),m=ma(r)?Og(g,n,this._currenTime):zg(g,n,this._currenTime);this._automationEvents.push(m)}if(l!==void 0&&Tl(l)&&this._automationEvents.push(zd(this.getValue(n),n)),l!==void 0&&rs(l)&&l.startTime+l.duration>n){const d=n-l.startTime,f=(l.values.length-1)/l.duration,g=Math.max(2,1+Math.ceil(d*f)),m=d/(g-1)*f,y=l.values.slice(0,g);if(m<1)for(let x=1;x<g;x+=1){const b=m*x%1;y[x]=l.values[x-1]*(1-b)+l.values[x]*b}this._automationEvents[this._automationEvents.length-1]=_0(y,l.startTime,d)}}}else{const i=this._automationEvents.findIndex(d=>Vs(d)>n),r=i===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[i-1];if(r!==void 0&&rs(r)&&Vs(r)+r.duration>n)return!1;const l=ma(e)?Og(e.value,e.endTime,this._currenTime):Rl(e)?zg(e.value,n,this._currenTime):e;if(i===-1)this._automationEvents.push(l);else{if(rs(e)&&n+e.duration>Vs(this._automationEvents[i]))return!1;this._automationEvents.splice(i,0,l)}}return!0}flush(e){const n=this._automationEvents.findIndex(i=>Vs(i)>e);if(n>1){const i=this._automationEvents.slice(n-1),r=i[0];Tl(r)&&i.unshift(zd(El(this._automationEvents,n-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=i}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(d=>Vs(d)>e),i=this._automationEvents[n],r=(n===-1?this._automationEvents.length:n)-1,l=this._automationEvents[r];if(l!==void 0&&Tl(l)&&(i===void 0||!Ls(i)||i.insertTime>e))return T0(e,El(this._automationEvents,r-1,l.startTime,this._defaultValue),l);if(l!==void 0&&Kd(l)&&(i===void 0||!Ls(i)))return l.value;if(l!==void 0&&rs(l)&&(i===void 0||!Ls(i)||l.startTime+l.duration>e))return e<l.startTime+l.duration?gv(e,l):l.values[l.values.length-1];if(l!==void 0&&Ls(l)&&(i===void 0||!Ls(i)))return l.value;if(i!==void 0&&ma(i)){const[d,f]=Bg(this._automationEvents,r,l,i,this._defaultValue);return Ig(e,d,f,i)}if(i!==void 0&&Rl(i)){const[d,f]=Bg(this._automationEvents,r,l,i,this._defaultValue);return Fg(e,d,f,i)}return this._defaultValue}}const xv=o=>({cancelTime:o,type:"cancelAndHold"}),bv=o=>({cancelTime:o,type:"cancelScheduledValues"}),vv=(o,e)=>({endTime:e,type:"exponentialRampToValue",value:o}),Sv=(o,e)=>({endTime:e,type:"linearRampToValue",value:o}),_v=(o,e,n)=>({startTime:e,target:o,timeConstant:n,type:"setTarget"}),Tv=()=>new DOMException("","AbortError"),Cv=o=>(e,n,[i,r,l],d)=>{o(e[r],[n,i,l],f=>f[0]===n&&f[1]===i,d)},wv=o=>(e,n,i)=>{const r=[];for(let l=0;l<i.numberOfInputs;l+=1)r.push(new Set);o.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},kv=o=>(e,n)=>{o.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},ba=new WeakSet,C0=new WeakMap,$d=new WeakMap,w0=new WeakMap,Jd=new WeakMap,$l=new WeakMap,k0=new WeakMap,Fd=new WeakMap,Vd=new WeakMap,Ld=new WeakMap,j0={construct(){return j0}},jv=o=>{try{const e=new Proxy(o,j0);new e}catch{return!1}return!0},Vg=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Lg=(o,e)=>{const n=[];let i=o.replace(/^[\s]+/,""),r=i.match(Vg);for(;r!==null;){const l=r[1].slice(1,-1),d=r[0].replace(/([\s]+)?;?$/,"").replace(l,new URL(l,e).toString());n.push(d),i=i.slice(r[0].length).replace(/^[\s]+/,""),r=i.match(Vg)}return[n.join(";"),i]},Ug=o=>{if(o!==void 0&&!Array.isArray(o))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},qg=o=>{if(!jv(o))throw new TypeError("The given value for processorCtor should be a constructor.");if(o.prototype===null||typeof o.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},Av=(o,e,n,i,r,l,d,f,g,m,y,x,b)=>{let v=0;return(_,w,T={credentials:"omit"})=>{const C=y.get(_);if(C!==void 0&&C.has(w))return Promise.resolve();const N=m.get(_);if(N!==void 0){const M=N.get(w);if(M!==void 0)return M}const A=l(_),D=A.audioWorklet===void 0?r(w).then(([M,E])=>{const[k,R]=Lg(M,E),O=`${k};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${R}
})})(window,'_AWGS')`;return n(O)}).then(()=>{const M=b._AWGS.pop();if(M===void 0)throw new SyntaxError;i(A.currentTime,A.sampleRate,()=>M(class{},void 0,(E,k)=>{if(E.trim()==="")throw e();const R=Vd.get(A);if(R!==void 0){if(R.has(E))throw e();qg(k),Ug(k.parameterDescriptors),R.set(E,k)}else qg(k),Ug(k.parameterDescriptors),Vd.set(A,new Map([[E,k]]))},A.sampleRate,void 0,void 0))}):Promise.all([r(w),Promise.resolve(o(x,x))]).then(([[M,E],k])=>{const R=v+1;v=R;const[O,L]=Lg(M,E),se=`${O};((AudioWorkletProcessor,registerProcessor)=>{${L}
})(${k?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${k?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${k?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${R}',class extends AudioWorkletProcessor{process(){return !1}})`,de=new Blob([se],{type:"application/javascript; charset=utf-8"}),B=URL.createObjectURL(de);return A.audioWorklet.addModule(B,T).then(()=>{if(f(A))return A;const Q=d(A);return Q.audioWorklet.addModule(B,T).then(()=>Q)}).then(Q=>{if(g===null)throw new SyntaxError;try{new g(Q,`__sac${R}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(B))});return N===void 0?m.set(_,new Map([[w,D]])):N.set(w,D),D.then(()=>{const M=y.get(_);M===void 0?y.set(_,new Set([w])):M.add(w)}).finally(()=>{const M=m.get(_);M!==void 0&&M.delete(w)}),D}},kn=(o,e)=>{const n=o.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},Jl=(o,e)=>{const n=Array.from(o).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[i]=n;return o.delete(i),i},A0=(o,e,n,i)=>{const r=kn(o,e),l=Jl(r,d=>d[0]===n&&d[1]===i);return r.size===0&&o.delete(e),l},Qr=o=>kn(k0,o),va=o=>{if(ba.has(o))throw new Error("The AudioNode is already stored.");ba.add(o),Qr(o).forEach(e=>e(!0))},M0=o=>"port"in o,Xr=o=>{if(!ba.has(o))throw new Error("The AudioNode is not stored.");ba.delete(o),Qr(o).forEach(e=>e(!1))},Ud=(o,e)=>{!M0(o)&&e.every(n=>n.size===0)&&Xr(o)},Mv=(o,e,n,i,r,l,d,f,g,m,y,x,b)=>{const v=new WeakMap;return(_,w,T,C,N)=>{const{activeInputs:A,passiveInputs:D}=l(w),{outputs:M}=l(_),E=f(_),k=R=>{const O=g(w),L=g(_);if(R){const q=A0(D,_,T,C);o(A,_,q,!1),!N&&!x(_)&&n(L,O,T,C),b(w)&&va(w)}else{const q=i(A,_,T,C);e(D,C,q,!1),!N&&!x(_)&&r(L,O,T,C);const P=d(w);if(P===0)y(w)&&Ud(w,A);else{const te=v.get(w);te!==void 0&&clearTimeout(te),v.set(w,setTimeout(()=>{y(w)&&Ud(w,A)},P*1e3))}}};return m(M,[w,T,C],R=>R[0]===w&&R[1]===T&&R[2]===C,!0)?(E.add(k),y(_)?o(A,_,[T,C,k],!0):e(D,C,[_,T,k],!0),!0):!1}},Rv=o=>(e,n,[i,r,l],d)=>{const f=e.get(i);f===void 0?e.set(i,new Set([[r,n,l]])):o(f,[r,n,l],g=>g[0]===r&&g[1]===n,d)},Ev=o=>(e,n)=>{const i=o(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(i).connect(e.destination);const r=()=>{n.removeEventListener("ended",r),n.disconnect(i),i.disconnect()};n.addEventListener("ended",r)},Dv=o=>(e,n)=>{o(e).add(n)},Nv={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Ov=(o,e,n,i,r,l)=>class extends o{constructor(f,g){const m=r(f),y={...Nv,...g},x=i(m,y),b=l(m)?e():null;super(f,!1,x,b),this._nativeAnalyserNode=x}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(f){this._nativeAnalyserNode.fftSize=f}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(f){const g=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=f,!(f>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=g,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(f){const g=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=f,!(this._nativeAnalyserNode.maxDecibels>f))throw this._nativeAnalyserNode.minDecibels=g,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(f){this._nativeAnalyserNode.smoothingTimeConstant=f}getByteFrequencyData(f){this._nativeAnalyserNode.getByteFrequencyData(f)}getByteTimeDomainData(f){this._nativeAnalyserNode.getByteTimeDomainData(f)}getFloatFrequencyData(f){this._nativeAnalyserNode.getFloatFrequencyData(f)}getFloatTimeDomainData(f){this._nativeAnalyserNode.getFloatTimeDomainData(f)}},Dt=(o,e)=>o.context===e,zv=(o,e,n)=>()=>{const i=new WeakMap,r=async(l,d)=>{let f=e(l);if(!Dt(f,d)){const m={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,fftSize:f.fftSize,maxDecibels:f.maxDecibels,minDecibels:f.minDecibels,smoothingTimeConstant:f.smoothingTimeConstant};f=o(d,m)}return i.set(d,f),await n(l,d,f),f};return{render(l,d){const f=i.get(d);return f!==void 0?Promise.resolve(f):r(l,d)}}},Dl=o=>{try{o.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Fn=()=>new DOMException("","IndexSizeError"),eh=o=>{o.getChannelData=(e=>n=>{try{return e.call(o,n)}catch(i){throw i.code===12?Fn():i}})(o.getChannelData)},Bv={numberOfChannels:1},Iv=(o,e,n,i,r,l,d,f)=>{let g=null;return class R0{constructor(y){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:x,numberOfChannels:b,sampleRate:v}={...Bv,...y};g===null&&(g=new r(1,1,44100));const _=i!==null&&e(l,l)?new i({length:x,numberOfChannels:b,sampleRate:v}):g.createBuffer(b,x,v);if(_.numberOfChannels===0)throw n();return typeof _.copyFromChannel!="function"?(d(_),eh(_)):e(Dl,()=>Dl(_))||f(_),o.add(_),_}static[Symbol.hasInstance](y){return y!==null&&typeof y=="object"&&Object.getPrototypeOf(y)===R0.prototype||o.has(y)}}},Yt=-34028234663852886e22,Bt=-Yt,os=o=>ba.has(o),Fv={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Vv=(o,e,n,i,r,l,d,f)=>class extends o{constructor(m,y){const x=l(m),b={...Fv,...y},v=r(x,b),_=d(x),w=_?e():null;super(m,!1,v,w),this._audioBufferSourceNodeRenderer=w,this._isBufferNullified=!1,this._isBufferSet=b.buffer!==null,this._nativeAudioBufferSourceNode=v,this._onended=null,this._playbackRate=n(this,_,v.playbackRate,Bt,Yt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(m){if(this._nativeAudioBufferSourceNode.buffer=m,m!==null){if(this._isBufferSet)throw i();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(m){this._nativeAudioBufferSourceNode.loop=m}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(m){this._nativeAudioBufferSourceNode.loopEnd=m}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(m){this._nativeAudioBufferSourceNode.loopStart=m}get onended(){return this._onended}set onended(m){const y=typeof m=="function"?f(this,m):null;this._nativeAudioBufferSourceNode.onended=y;const x=this._nativeAudioBufferSourceNode.onended;this._onended=x!==null&&x===y?m:x}get playbackRate(){return this._playbackRate}start(m=0,y=0,x){if(this._nativeAudioBufferSourceNode.start(m,y,x),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=x===void 0?[m,y]:[m,y,x]),this.context.state!=="closed"){va(this);const b=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",b),os(this)&&Xr(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",b)}}stop(m=0){this._nativeAudioBufferSourceNode.stop(m),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=m)}},Lv=(o,e,n,i,r)=>()=>{const l=new WeakMap;let d=null,f=null;const g=async(m,y)=>{let x=n(m);const b=Dt(x,y);if(!b){const v={buffer:x.buffer,channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,loop:x.loop,loopEnd:x.loopEnd,loopStart:x.loopStart,playbackRate:x.playbackRate.value};x=e(y,v),d!==null&&x.start(...d),f!==null&&x.stop(f)}return l.set(y,x),b?await o(y,m.playbackRate,x.playbackRate):await i(y,m.playbackRate,x.playbackRate),await r(m,y,x),x};return{set start(m){d=m},set stop(m){f=m},render(m,y){const x=l.get(y);return x!==void 0?Promise.resolve(x):g(m,y)}}},Uv=o=>"playbackRate"in o,qv=o=>"frequency"in o&&"gain"in o,Pv=o=>"offset"in o,Hv=o=>!("frequency"in o)&&"gain"in o,Gv=o=>"detune"in o&&"frequency"in o&&!("gain"in o),Yv=o=>"pan"in o,It=o=>kn(C0,o),Zr=o=>kn(w0,o),qd=(o,e)=>{const{activeInputs:n}=It(o);n.forEach(r=>r.forEach(([l])=>{e.includes(o)||qd(l,[...e,o])}));const i=Uv(o)?[o.playbackRate]:M0(o)?Array.from(o.parameters.values()):qv(o)?[o.Q,o.detune,o.frequency,o.gain]:Pv(o)?[o.offset]:Hv(o)?[o.gain]:Gv(o)?[o.detune,o.frequency]:Yv(o)?[o.pan]:[];for(const r of i){const l=Zr(r);l!==void 0&&l.activeInputs.forEach(([d])=>qd(d,e))}os(o)&&Xr(o)},E0=o=>{qd(o.destination,[])},Wv=o=>o===void 0||typeof o=="number"||typeof o=="string"&&(o==="balanced"||o==="interactive"||o==="playback"),Qv=(o,e,n,i,r,l,d,f,g)=>class extends o{constructor(y={}){if(g===null)throw new Error("Missing the native AudioContext constructor.");let x;try{x=new g(y)}catch(_){throw _.code===12&&_.message==="sampleRate is not in range"?n():_}if(x===null)throw i();if(!Wv(y.latencyHint))throw new TypeError(`The provided value '${y.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(y.sampleRate!==void 0&&x.sampleRate!==y.sampleRate)throw n();super(x,2);const{latencyHint:b}=y,{sampleRate:v}=x;if(this._baseLatency=typeof x.baseLatency=="number"?x.baseLatency:b==="balanced"?512/v:b==="interactive"||b===void 0?256/v:b==="playback"?1024/v:Math.max(2,Math.min(128,Math.round(b*v/128)))*128/v,this._nativeAudioContext=x,g.name==="webkitAudioContext"?(this._nativeGainNode=x.createGain(),this._nativeOscillatorNode=x.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(x.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,x.state==="running"){this._state="suspended";const _=()=>{this._state==="suspended"&&(this._state=null),x.removeEventListener("statechange",_)};x.addEventListener("statechange",_)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),E0(this)}))}createMediaElementSource(y){return new r(this,{mediaElement:y})}createMediaStreamDestination(){return new l(this)}createMediaStreamSource(y){return new d(this,{mediaStream:y})}createMediaStreamTrackSource(y){return new f(this,{mediaStreamTrack:y})}resume(){return this._state==="suspended"?new Promise((y,x)=>{const b=()=>{this._nativeAudioContext.removeEventListener("statechange",b),this._nativeAudioContext.state==="running"?y():this.resume().then(y,x)};this._nativeAudioContext.addEventListener("statechange",b)}):this._nativeAudioContext.resume().catch(y=>{throw y===void 0||y.code===15?e():y})}suspend(){return this._nativeAudioContext.suspend().catch(y=>{throw y===void 0?e():y})}},Xv=(o,e,n,i,r,l,d,f)=>class extends o{constructor(m,y){const x=l(m),b=d(x),v=r(x,y,b),_=b?e(f):null;super(m,!1,v,_),this._isNodeOfNativeOfflineAudioContext=b,this._nativeAudioDestinationNode=v}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(m){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(m>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=m}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(m){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=m}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},Zv=o=>{const e=new WeakMap,n=async(i,r)=>{const l=r.destination;return e.set(r,l),await o(i,r,l),l};return{render(i,r){const l=e.get(r);return l!==void 0?Promise.resolve(l):n(i,r)}}},Kv=(o,e,n,i,r,l,d,f)=>(g,m)=>{const y=m.listener,x=()=>{const M=new Float32Array(1),E=e(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),k=d(m);let R=!1,O=[0,0,-1,0,1,0],L=[0,0,0];const q=()=>{if(R)return;R=!0;const de=i(m,256,9,0);de.onaudioprocess=({inputBuffer:B})=>{const Q=[l(B,M,0),l(B,M,1),l(B,M,2),l(B,M,3),l(B,M,4),l(B,M,5)];Q.some((ae,ue)=>ae!==O[ue])&&(y.setOrientation(...Q),O=Q);const ne=[l(B,M,6),l(B,M,7),l(B,M,8)];ne.some((ae,ue)=>ae!==L[ue])&&(y.setPosition(...ne),L=ne)},E.connect(de)},P=de=>B=>{B!==O[de]&&(O[de]=B,y.setOrientation(...O))},te=de=>B=>{B!==L[de]&&(L[de]=B,y.setPosition(...L))},se=(de,B,Q)=>{const ne=n(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:B});ne.connect(E,0,de),ne.start(),Object.defineProperty(ne.offset,"defaultValue",{get(){return B}});const ae=o({context:g},k,ne.offset,Bt,Yt);return f(ae,"value",ue=>()=>ue.call(ae),ue=>z=>{try{ue.call(ae,z)}catch(X){if(X.code!==9)throw X}q(),k&&Q(z)}),ae.cancelAndHoldAtTime=(ue=>k?()=>{throw r()}:(...z)=>{const X=ue.apply(ae,z);return q(),X})(ae.cancelAndHoldAtTime),ae.cancelScheduledValues=(ue=>k?()=>{throw r()}:(...z)=>{const X=ue.apply(ae,z);return q(),X})(ae.cancelScheduledValues),ae.exponentialRampToValueAtTime=(ue=>k?()=>{throw r()}:(...z)=>{const X=ue.apply(ae,z);return q(),X})(ae.exponentialRampToValueAtTime),ae.linearRampToValueAtTime=(ue=>k?()=>{throw r()}:(...z)=>{const X=ue.apply(ae,z);return q(),X})(ae.linearRampToValueAtTime),ae.setTargetAtTime=(ue=>k?()=>{throw r()}:(...z)=>{const X=ue.apply(ae,z);return q(),X})(ae.setTargetAtTime),ae.setValueAtTime=(ue=>k?()=>{throw r()}:(...z)=>{const X=ue.apply(ae,z);return q(),X})(ae.setValueAtTime),ae.setValueCurveAtTime=(ue=>k?()=>{throw r()}:(...z)=>{const X=ue.apply(ae,z);return q(),X})(ae.setValueCurveAtTime),ae};return{forwardX:se(0,0,P(0)),forwardY:se(1,0,P(1)),forwardZ:se(2,-1,P(2)),positionX:se(6,0,te(0)),positionY:se(7,0,te(1)),positionZ:se(8,0,te(2)),upX:se(3,0,P(3)),upY:se(4,1,P(4)),upZ:se(5,0,P(5))}},{forwardX:b,forwardY:v,forwardZ:_,positionX:w,positionY:T,positionZ:C,upX:N,upY:A,upZ:D}=y.forwardX===void 0?x():y;return{get forwardX(){return b},get forwardY(){return v},get forwardZ(){return _},get positionX(){return w},get positionY(){return T},get positionZ(){return C},get upX(){return N},get upY(){return A},get upZ(){return D}}},Nl=o=>"context"in o,Kr=o=>Nl(o[0]),ji=(o,e,n,i)=>{for(const r of o)if(n(r)){if(i)return!1;throw Error("The set contains at least one similar element.")}return o.add(e),!0},Pg=(o,e,[n,i],r)=>{ji(o,[e,n,i],l=>l[0]===e&&l[1]===n,r)},Hg=(o,[e,n,i],r)=>{const l=o.get(e);l===void 0?o.set(e,new Set([[n,i]])):ji(l,[n,i],d=>d[0]===n,r)},ja=o=>"inputs"in o,Ol=(o,e,n,i)=>{if(ja(e)){const r=e.inputs[i];return o.connect(r,n,0),[r,n,0]}return o.connect(e,n,i),[e,n,i]},D0=(o,e,n)=>{for(const i of o)if(i[0]===e&&i[1]===n)return o.delete(i),i;return null},$v=(o,e,n)=>Jl(o,i=>i[0]===e&&i[1]===n),N0=(o,e)=>{if(!Qr(o).delete(e))throw new Error("Missing the expected event listener.")},O0=(o,e,n)=>{const i=kn(o,e),r=Jl(i,l=>l[0]===n);return i.size===0&&o.delete(e),r},zl=(o,e,n,i)=>{ja(e)?o.disconnect(e.inputs[i],n,0):o.disconnect(e,n,i)},Ke=o=>kn($d,o),Or=o=>kn(Jd,o),Ti=o=>Fd.has(o),Al=o=>!ba.has(o),Gg=(o,e)=>new Promise(n=>{if(e!==null)n(!0);else{const i=o.createScriptProcessor(256,1,1),r=o.createGain(),l=o.createBuffer(1,2,44100),d=l.getChannelData(0);d[0]=1,d[1]=1;const f=o.createBufferSource();f.buffer=l,f.loop=!0,f.connect(i).connect(o.destination),f.connect(r),f.disconnect(r),i.onaudioprocess=g=>{const m=g.inputBuffer.getChannelData(0);Array.prototype.some.call(m,y=>y===1)?n(!0):n(!1),f.stop(),i.onaudioprocess=null,f.disconnect(i),i.disconnect(o.destination)},f.start()}}),Ad=(o,e)=>{const n=new Map;for(const i of o)for(const r of i){const l=n.get(r);n.set(r,l===void 0?1:l+1)}n.forEach((i,r)=>e(r,i))},Bl=o=>"context"in o,Jv=o=>{const e=new Map;o.connect=(n=>(i,r=0,l=0)=>{const d=Bl(i)?n(i,r,l):n(i,r),f=e.get(i);return f===void 0?e.set(i,[{input:l,output:r}]):f.every(g=>g.input!==l||g.output!==r)&&f.push({input:l,output:r}),d})(o.connect.bind(o)),o.disconnect=(n=>(i,r,l)=>{if(n.apply(o),i===void 0)e.clear();else if(typeof i=="number")for(const[d,f]of e){const g=f.filter(m=>m.output!==i);g.length===0?e.delete(d):e.set(d,g)}else if(e.has(i))if(r===void 0)e.delete(i);else{const d=e.get(i);if(d!==void 0){const f=d.filter(g=>g.output!==r&&(g.input!==l||l===void 0));f.length===0?e.delete(i):e.set(i,f)}}for(const[d,f]of e)f.forEach(g=>{Bl(d)?o.connect(d,g.output,g.input):o.connect(d,g.output)})})(o.disconnect)},e1=(o,e,n,i)=>{const{activeInputs:r,passiveInputs:l}=Zr(e),{outputs:d}=It(o),f=Qr(o),g=m=>{const y=Ke(o),x=Or(e);if(m){const b=O0(l,o,n);Pg(r,o,b,!1),!i&&!Ti(o)&&y.connect(x,n)}else{const b=$v(r,o,n);Hg(l,b,!1),!i&&!Ti(o)&&y.disconnect(x,n)}};return ji(d,[e,n],m=>m[0]===e&&m[1]===n,!0)?(f.add(g),os(o)?Pg(r,o,[n,g],!0):Hg(l,[o,n,g],!0),!0):!1},t1=(o,e,n,i)=>{const{activeInputs:r,passiveInputs:l}=It(e),d=D0(r[i],o,n);return d===null?[A0(l,o,n,i)[2],!1]:[d[2],!0]},n1=(o,e,n)=>{const{activeInputs:i,passiveInputs:r}=Zr(e),l=D0(i,o,n);return l===null?[O0(r,o,n)[1],!1]:[l[2],!0]},th=(o,e,n,i,r)=>{const[l,d]=t1(o,n,i,r);if(l!==null&&(N0(o,l),d&&!e&&!Ti(o)&&zl(Ke(o),Ke(n),i,r)),os(n)){const{activeInputs:f}=It(n);Ud(n,f)}},nh=(o,e,n,i)=>{const[r,l]=n1(o,n,i);r!==null&&(N0(o,r),l&&!e&&!Ti(o)&&Ke(o).disconnect(Or(n),i))},s1=(o,e)=>{const n=It(o),i=[];for(const r of n.outputs)Kr(r)?th(o,e,...r):nh(o,e,...r),i.push(r[0]);return n.outputs.clear(),i},i1=(o,e,n)=>{const i=It(o),r=[];for(const l of i.outputs)l[1]===n&&(Kr(l)?th(o,e,...l):nh(o,e,...l),r.push(l[0]),i.outputs.delete(l));return r},a1=(o,e,n,i,r)=>{const l=It(o);return Array.from(l.outputs).filter(d=>d[0]===n&&(i===void 0||d[1]===i)&&(r===void 0||d[2]===r)).map(d=>(Kr(d)?th(o,e,...d):nh(o,e,...d),l.outputs.delete(d),d[0]))},r1=(o,e,n,i,r,l,d,f,g,m,y,x,b,v,_,w)=>class extends m{constructor(C,N,A,D){super(A),this._context=C,this._nativeAudioNode=A;const M=y(C);x(M)&&n(Gg,()=>Gg(M,w))!==!0&&Jv(A),$d.set(this,A),k0.set(this,new Set),C.state!=="closed"&&N&&va(this),o(this,D,A)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(C){this._nativeAudioNode.channelCount=C}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(C){this._nativeAudioNode.channelCountMode=C}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(C){this._nativeAudioNode.channelInterpretation=C}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(C,N=0,A=0){if(N<0||N>=this._nativeAudioNode.numberOfOutputs)throw r();const D=y(this._context),M=_(D);if(b(C)||v(C))throw l();if(Nl(C)){const R=Ke(C);try{const L=Ol(this._nativeAudioNode,R,N,A),q=Al(this);(M||q)&&this._nativeAudioNode.disconnect(...L),this.context.state!=="closed"&&!q&&Al(C)&&va(C)}catch(L){throw L.code===12?l():L}if(e(this,C,N,A,M)){const L=g([this],C);Ad(L,i(M))}return C}const E=Or(C);if(E.name==="playbackRate"&&E.maxValue===1024)throw d();try{this._nativeAudioNode.connect(E,N),(M||Al(this))&&this._nativeAudioNode.disconnect(E,N)}catch(R){throw R.code===12?l():R}if(e1(this,C,N,M)){const R=g([this],C);Ad(R,i(M))}}disconnect(C,N,A){let D;const M=y(this._context),E=_(M);if(C===void 0)D=s1(this,E);else if(typeof C=="number"){if(C<0||C>=this.numberOfOutputs)throw r();D=i1(this,E,C)}else{if(N!==void 0&&(N<0||N>=this.numberOfOutputs)||Nl(C)&&A!==void 0&&(A<0||A>=C.numberOfInputs))throw r();if(D=a1(this,E,C,N,A),D.length===0)throw l()}for(const k of D){const R=g([this],k);Ad(R,f)}}},o1=(o,e,n,i,r,l,d,f,g,m,y,x,b)=>(v,_,w,T=null,C=null)=>{const N=w.value,A=new yv(N),D=_?i(A):null,M={get defaultValue(){return N},get maxValue(){return T===null?w.maxValue:T},get minValue(){return C===null?w.minValue:C},get value(){return w.value},set value(E){w.value=E,M.setValueAtTime(E,v.context.currentTime)},cancelAndHoldAtTime(E){if(typeof w.cancelAndHoldAtTime=="function")D===null&&A.flush(v.context.currentTime),A.add(r(E)),w.cancelAndHoldAtTime(E);else{const k=Array.from(A).pop();D===null&&A.flush(v.context.currentTime),A.add(r(E));const R=Array.from(A).pop();w.cancelScheduledValues(E),k!==R&&R!==void 0&&(R.type==="exponentialRampToValue"?w.exponentialRampToValueAtTime(R.value,R.endTime):R.type==="linearRampToValue"?w.linearRampToValueAtTime(R.value,R.endTime):R.type==="setValue"?w.setValueAtTime(R.value,R.startTime):R.type==="setValueCurve"&&w.setValueCurveAtTime(R.values,R.startTime,R.duration))}return M},cancelScheduledValues(E){return D===null&&A.flush(v.context.currentTime),A.add(l(E)),w.cancelScheduledValues(E),M},exponentialRampToValueAtTime(E,k){if(E===0)throw new RangeError;if(!Number.isFinite(k)||k<0)throw new RangeError;const R=v.context.currentTime;return D===null&&A.flush(R),Array.from(A).length===0&&(A.add(m(N,R)),w.setValueAtTime(N,R)),A.add(d(E,k)),w.exponentialRampToValueAtTime(E,k),M},linearRampToValueAtTime(E,k){const R=v.context.currentTime;return D===null&&A.flush(R),Array.from(A).length===0&&(A.add(m(N,R)),w.setValueAtTime(N,R)),A.add(f(E,k)),w.linearRampToValueAtTime(E,k),M},setTargetAtTime(E,k,R){return D===null&&A.flush(v.context.currentTime),A.add(g(E,k,R)),w.setTargetAtTime(E,k,R),M},setValueAtTime(E,k){return D===null&&A.flush(v.context.currentTime),A.add(m(E,k)),w.setValueAtTime(E,k),M},setValueCurveAtTime(E,k,R){const O=E instanceof Float32Array?E:new Float32Array(E);if(x!==null&&x.name==="webkitAudioContext"){const L=k+R,q=v.context.sampleRate,P=Math.ceil(k*q),te=Math.floor(L*q),se=te-P,de=new Float32Array(se);for(let Q=0;Q<se;Q+=1){const ne=(O.length-1)/R*((P+Q)/q-k),ae=Math.floor(ne),ue=Math.ceil(ne);de[Q]=ae===ue?O[ae]:(1-(ne-ae))*O[ae]+(1-(ue-ne))*O[ue]}D===null&&A.flush(v.context.currentTime),A.add(y(de,k,R)),w.setValueCurveAtTime(de,k,R);const B=te/q;B<L&&b(M,de[de.length-1],B),b(M,O[O.length-1],L)}else D===null&&A.flush(v.context.currentTime),A.add(y(O,k,R)),w.setValueCurveAtTime(O,k,R);return M}};return n.set(M,w),e.set(M,v),o(M,D),M},l1=o=>({replay(e){for(const n of o)if(n.type==="exponentialRampToValue"){const{endTime:i,value:r}=n;e.exponentialRampToValueAtTime(r,i)}else if(n.type==="linearRampToValue"){const{endTime:i,value:r}=n;e.linearRampToValueAtTime(r,i)}else if(n.type==="setTarget"){const{startTime:i,target:r,timeConstant:l}=n;e.setTargetAtTime(r,i,l)}else if(n.type==="setValue"){const{startTime:i,value:r}=n;e.setValueAtTime(r,i)}else if(n.type==="setValueCurve"){const{duration:i,startTime:r,values:l}=n;e.setValueCurveAtTime(l,r,i)}else throw new Error("Can't apply an unknown automation.")}});class z0{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((i,r)=>e.call(n,i,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const c1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},u1=(o,e,n,i,r,l,d,f,g,m,y,x,b,v)=>class extends e{constructor(w,T,C){var N;const A=f(w),D=g(A),M=y({...c1,...C});b(M);const E=Vd.get(A),k=E?.get(T),R=D||A.state!=="closed"?A:(N=d(A))!==null&&N!==void 0?N:A,O=r(R,D?null:w.baseLatency,m,T,k,M),L=D?i(T,M,k):null;super(w,!0,O,L);const q=[];O.parameters.forEach((te,se)=>{const de=n(this,D,te);q.push([se,de])}),this._nativeAudioWorkletNode=O,this._onprocessorerror=null,this._parameters=new z0(q),D&&o(A,this);const{activeInputs:P}=l(this);x(O,P)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(w){const T=typeof w=="function"?v(this,w):null;this._nativeAudioWorkletNode.onprocessorerror=T;const C=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=C!==null&&C===T?w:C}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Il(o,e,n,i,r){if(typeof o.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),o.copyFromChannel(e[n],i,r);else{const l=o.getChannelData(i);if(e[n].byteLength===0)e[n]=l.slice(r,r+128);else{const d=new Float32Array(l.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(d)}}}const B0=(o,e,n,i,r)=>{typeof o.copyToChannel=="function"?e[n].byteLength!==0&&o.copyToChannel(e[n],i,r):e[n].byteLength!==0&&o.getChannelData(i).set(e[n],r)},Fl=(o,e)=>{const n=[];for(let i=0;i<o;i+=1){const r=[],l=typeof e=="number"?e:e[i];for(let d=0;d<l;d+=1)r.push(new Float32Array(128));n.push(r)}return n},d1=(o,e)=>{const n=kn(Ld,o),i=Ke(e);return kn(n,i)},h1=async(o,e,n,i,r,l,d)=>{const f=e===null?Math.ceil(o.context.length/128)*128:e.length,g=i.channelCount*i.numberOfInputs,m=r.reduce((T,C)=>T+C,0),y=m===0?null:n.createBuffer(m,f,n.sampleRate);if(l===void 0)throw new Error("Missing the processor constructor.");const x=It(o),b=await d1(n,o),v=Fl(i.numberOfInputs,i.channelCount),_=Fl(i.numberOfOutputs,r),w=Array.from(o.parameters.keys()).reduce((T,C)=>({...T,[C]:new Float32Array(128)}),{});for(let T=0;T<f;T+=128){if(i.numberOfInputs>0&&e!==null)for(let C=0;C<i.numberOfInputs;C+=1)for(let N=0;N<i.channelCount;N+=1)Il(e,v[C],N,N,T);l.parameterDescriptors!==void 0&&e!==null&&l.parameterDescriptors.forEach(({name:C},N)=>{Il(e,w,C,g+N,T)});for(let C=0;C<i.numberOfInputs;C+=1)for(let N=0;N<r[C];N+=1)_[C][N].byteLength===0&&(_[C][N]=new Float32Array(128));try{const C=v.map((A,D)=>x.activeInputs[D].size===0?[]:A),N=d(T/n.sampleRate,n.sampleRate,()=>b.process(C,_,w));if(y!==null)for(let A=0,D=0;A<i.numberOfOutputs;A+=1){for(let M=0;M<r[A];M+=1)B0(y,_[A],M,D+M,T);D+=r[A]}if(!N)break}catch(C){o.dispatchEvent(new ErrorEvent("processorerror",{colno:C.colno,filename:C.filename,lineno:C.lineno,message:C.message}));break}}return y},f1=(o,e,n,i,r,l,d,f,g,m,y,x,b,v,_,w)=>(T,C,N)=>{const A=new WeakMap;let D=null;const M=async(E,k)=>{let R=y(E),O=null;const L=Dt(R,k),q=Array.isArray(C.outputChannelCount)?C.outputChannelCount:Array.from(C.outputChannelCount);if(x===null){const P=q.reduce((B,Q)=>B+Q,0),te=r(k,{channelCount:Math.max(1,P),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,P)}),se=[];for(let B=0;B<E.numberOfOutputs;B+=1)se.push(i(k,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:q[B]}));const de=d(k,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1});de.connect=e.bind(null,se),de.disconnect=g.bind(null,se),O=[te,se,de]}else L||(R=new x(k,T));if(A.set(k,O===null?R:O[2]),O!==null){if(D===null){if(N===void 0)throw new Error("Missing the processor constructor.");if(b===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Q=E.channelCount*E.numberOfInputs,ne=N.parameterDescriptors===void 0?0:N.parameterDescriptors.length,ae=Q+ne;D=h1(E,ae===0?null:await(async()=>{const z=new b(ae,Math.ceil(E.context.length/128)*128,k.sampleRate),X=[],ie=[];for(let me=0;me<C.numberOfInputs;me+=1)X.push(d(z,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1})),ie.push(r(z,{channelCount:C.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:C.channelCount}));const le=await Promise.all(Array.from(E.parameters.values()).map(async me=>{const be=l(z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:me.value});return await v(z,me,be.offset),be})),oe=i(z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,Q+ne)});for(let me=0;me<C.numberOfInputs;me+=1){X[me].connect(ie[me]);for(let be=0;be<C.channelCount;be+=1)ie[me].connect(oe,be,me*C.channelCount+be)}for(const[me,be]of le.entries())be.connect(oe,0,Q+me),be.start(0);return oe.connect(z.destination),await Promise.all(X.map(me=>_(E,z,me))),w(z)})(),k,C,q,N,m)}const P=await D,te=n(k,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[se,de,B]=O;P!==null&&(te.buffer=P,te.start(0)),te.connect(se);for(let Q=0,ne=0;Q<E.numberOfOutputs;Q+=1){const ae=de[Q];for(let ue=0;ue<q[Q];ue+=1)se.connect(ae,ne+ue,ue);ne+=q[Q]}return B}if(L)for(const[P,te]of E.parameters.entries())await o(k,te,R.parameters.get(P));else for(const[P,te]of E.parameters.entries())await v(k,te,R.parameters.get(P));return await _(E,k,R),R};return{render(E,k){f(k,E);const R=A.get(k);return R!==void 0?Promise.resolve(R):M(E,k)}}},p1=(o,e,n,i,r,l,d,f,g,m,y,x,b,v,_,w,T,C,N,A)=>class extends _{constructor(M,E){super(M,E),this._nativeContext=M,this._audioWorklet=o===void 0?void 0:{addModule:(k,R)=>o(this,k,R)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(M,E,k){return new n({length:E,numberOfChannels:M,sampleRate:k})}createBufferSource(){return new i(this)}createChannelMerger(M=6){return new l(this,{numberOfInputs:M})}createChannelSplitter(M=6){return new d(this,{numberOfOutputs:M})}createConstantSource(){return new f(this)}createConvolver(){return new g(this)}createDelay(M=1){return new y(this,{maxDelayTime:M})}createDynamicsCompressor(){return new x(this)}createGain(){return new b(this)}createIIRFilter(M,E){return new v(this,{feedback:E,feedforward:M})}createOscillator(){return new w(this)}createPanner(){return new T(this)}createPeriodicWave(M,E,k={disableNormalization:!1}){return new C(this,{...k,imag:E,real:M})}createStereoPanner(){return new N(this)}createWaveShaper(){return new A(this)}decodeAudioData(M,E,k){return m(this._nativeContext,M).then(R=>(typeof E=="function"&&E(R),R),R=>{throw typeof k=="function"&&k(R),R})}},m1={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},g1=(o,e,n,i,r,l,d,f)=>class extends o{constructor(m,y){const x=l(m),b={...m1,...y},v=r(x,b),_=d(x),w=_?n():null;super(m,!1,v,w),this._Q=e(this,_,v.Q,Bt,Yt),this._detune=e(this,_,v.detune,1200*Math.log2(Bt),-1200*Math.log2(Bt)),this._frequency=e(this,_,v.frequency,m.sampleRate/2,0),this._gain=e(this,_,v.gain,40*Math.log10(Bt),Yt),this._nativeBiquadFilterNode=v,f(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(m){this._nativeBiquadFilterNode.type=m}getFrequencyResponse(m,y,x){try{this._nativeBiquadFilterNode.getFrequencyResponse(m,y,x)}catch(b){throw b.code===11?i():b}if(m.length!==y.length||y.length!==x.length)throw i()}},y1=(o,e,n,i,r)=>()=>{const l=new WeakMap,d=async(f,g)=>{let m=n(f);const y=Dt(m,g);if(!y){const x={Q:m.Q.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,detune:m.detune.value,frequency:m.frequency.value,gain:m.gain.value,type:m.type};m=e(g,x)}return l.set(g,m),y?(await o(g,f.Q,m.Q),await o(g,f.detune,m.detune),await o(g,f.frequency,m.frequency),await o(g,f.gain,m.gain)):(await i(g,f.Q,m.Q),await i(g,f.detune,m.detune),await i(g,f.frequency,m.frequency),await i(g,f.gain,m.gain)),await r(f,g,m),m};return{render(f,g){const m=l.get(g);return m!==void 0?Promise.resolve(m):d(f,g)}}},x1=(o,e)=>(n,i)=>{const r=e.get(n);if(r!==void 0)return r;const l=o.get(n);if(l!==void 0)return l;try{const d=i();return d instanceof Promise?(o.set(n,d),d.catch(()=>!1).then(f=>(o.delete(n),e.set(n,f),f))):(e.set(n,d),d)}catch{return e.set(n,!1),!1}},b1={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},v1=(o,e,n,i,r)=>class extends o{constructor(d,f){const g=i(d),m={...b1,...f},y=n(g,m),x=r(g)?e():null;super(d,!1,y,x)}},S1=(o,e,n)=>()=>{const i=new WeakMap,r=async(l,d)=>{let f=e(l);if(!Dt(f,d)){const m={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,numberOfInputs:f.numberOfInputs};f=o(d,m)}return i.set(d,f),await n(l,d,f),f};return{render(l,d){const f=i.get(d);return f!==void 0?Promise.resolve(f):r(l,d)}}},_1={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},T1=(o,e,n,i,r,l)=>class extends o{constructor(f,g){const m=i(f),y=l({..._1,...g}),x=n(m,y),b=r(m)?e():null;super(f,!1,x,b)}},C1=(o,e,n)=>()=>{const i=new WeakMap,r=async(l,d)=>{let f=e(l);if(!Dt(f,d)){const m={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,numberOfOutputs:f.numberOfOutputs};f=o(d,m)}return i.set(d,f),await n(l,d,f),f};return{render(l,d){const f=i.get(d);return f!==void 0?Promise.resolve(f):r(l,d)}}},w1=o=>(e,n,i)=>o(n,e,i),k1=o=>(e,n,i=0,r=0)=>{const l=e[i];if(l===void 0)throw o();return Bl(n)?l.connect(n,0,r):l.connect(n,0)},j1=o=>(e,n)=>{const i=o(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return i.buffer=r,i.loop=!0,i.connect(n),i.start(),()=>{i.stop(),i.disconnect(n)}},A1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},M1=(o,e,n,i,r,l,d)=>class extends o{constructor(g,m){const y=r(g),x={...A1,...m},b=i(y,x),v=l(y),_=v?n():null;super(g,!1,b,_),this._constantSourceNodeRenderer=_,this._nativeConstantSourceNode=b,this._offset=e(this,v,b.offset,Bt,Yt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(g){const m=typeof g=="function"?d(this,g):null;this._nativeConstantSourceNode.onended=m;const y=this._nativeConstantSourceNode.onended;this._onended=y!==null&&y===m?g:y}start(g=0){if(this._nativeConstantSourceNode.start(g),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=g),this.context.state!=="closed"){va(this);const m=()=>{this._nativeConstantSourceNode.removeEventListener("ended",m),os(this)&&Xr(this)};this._nativeConstantSourceNode.addEventListener("ended",m)}}stop(g=0){this._nativeConstantSourceNode.stop(g),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=g)}},R1=(o,e,n,i,r)=>()=>{const l=new WeakMap;let d=null,f=null;const g=async(m,y)=>{let x=n(m);const b=Dt(x,y);if(!b){const v={channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,offset:x.offset.value};x=e(y,v),d!==null&&x.start(d),f!==null&&x.stop(f)}return l.set(y,x),b?await o(y,m.offset,x.offset):await i(y,m.offset,x.offset),await r(m,y,x),x};return{set start(m){d=m},set stop(m){f=m},render(m,y){const x=l.get(y);return x!==void 0?Promise.resolve(x):g(m,y)}}},E1=o=>e=>(o[0]=e,o[0]),D1={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},N1=(o,e,n,i,r,l)=>class extends o{constructor(f,g){const m=i(f),y={...D1,...g},x=n(m,y),v=r(m)?e():null;super(f,!1,x,v),this._isBufferNullified=!1,this._nativeConvolverNode=x,y.buffer!==null&&l(this,y.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(f){if(this._nativeConvolverNode.buffer=f,f===null&&this._nativeConvolverNode.buffer!==null){const g=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=g.createBuffer(1,1,g.sampleRate),this._isBufferNullified=!0,l(this,0)}else this._isBufferNullified=!1,l(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(f){this._nativeConvolverNode.normalize=f}},O1=(o,e,n)=>()=>{const i=new WeakMap,r=async(l,d)=>{let f=e(l);if(!Dt(f,d)){const m={buffer:f.buffer,channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,disableNormalization:!f.normalize};f=o(d,m)}return i.set(d,f),ja(f)?await n(l,d,f.inputs[0]):await n(l,d,f),f};return{render(l,d){const f=i.get(d);return f!==void 0?Promise.resolve(f):r(l,d)}}},z1=(o,e)=>(n,i,r)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,i,r)}catch(l){throw l.name==="SyntaxError"?o():l}},B1=()=>new DOMException("","DataCloneError"),Yg=o=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(i=>{const r=()=>{n.onmessage=null,e.close(),n.close(),i()};n.onmessage=()=>r();try{e.postMessage(o,[o])}catch{}finally{r()}})},I1=(o,e,n,i,r,l,d,f,g,m,y)=>(x,b)=>{const v=d(x)?x:l(x);if(r.has(b)){const _=n();return Promise.reject(_)}try{r.add(b)}catch{}return e(g,()=>g(v))?v.decodeAudioData(b).then(_=>(Yg(b).catch(()=>{}),e(f,()=>f(_))||y(_),o.add(_),_)):new Promise((_,w)=>{const T=async()=>{try{await Yg(b)}catch{}},C=N=>{w(N),T()};try{v.decodeAudioData(b,N=>{typeof N.copyFromChannel!="function"&&(m(N),eh(N)),o.add(N),T().then(()=>_(N))},N=>{C(N===null?i():N)})}catch(N){C(N)}})},F1=(o,e,n,i,r,l,d,f)=>(g,m)=>{const y=e.get(g);if(y===void 0)throw new Error("Missing the expected cycle count.");const x=l(g.context),b=f(x);if(y===m){if(e.delete(g),!b&&d(g)){const v=i(g),{outputs:_}=n(g);for(const w of _)if(Kr(w)){const T=i(w[0]);o(v,T,w[1],w[2])}else{const T=r(w[0]);v.connect(T,w[1])}}}else e.set(g,y-m)},V1={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},L1=(o,e,n,i,r,l,d)=>class extends o{constructor(g,m){const y=r(g),x={...V1,...m},b=i(y,x),v=l(y),_=v?n(x.maxDelayTime):null;super(g,!1,b,_),this._delayTime=e(this,v,b.delayTime),d(this,x.maxDelayTime)}get delayTime(){return this._delayTime}},U1=(o,e,n,i,r)=>l=>{const d=new WeakMap,f=async(g,m)=>{let y=n(g);const x=Dt(y,m);if(!x){const b={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,delayTime:y.delayTime.value,maxDelayTime:l};y=e(m,b)}return d.set(m,y),x?await o(m,g.delayTime,y.delayTime):await i(m,g.delayTime,y.delayTime),await r(g,m,y),y};return{render(g,m){const y=d.get(m);return y!==void 0?Promise.resolve(y):f(g,m)}}},q1=o=>(e,n,i,r)=>o(e[r],l=>l[0]===n&&l[1]===i),P1=o=>(e,n)=>{o(e).delete(n)},H1=o=>"delayTime"in o,G1=(o,e,n)=>function i(r,l){const d=Nl(l)?l:n(o,l);if(H1(d))return[];if(r[0]===d)return[r];if(r.includes(d))return[];const{outputs:f}=e(d);return Array.from(f).map(g=>i([...r,d],g[0])).reduce((g,m)=>g.concat(m),[])},Cl=(o,e,n)=>{const i=e[n];if(i===void 0)throw o();return i},Y1=o=>(e,n=void 0,i=void 0,r=0)=>n===void 0?e.forEach(l=>l.disconnect()):typeof n=="number"?Cl(o,e,n).disconnect():Bl(n)?i===void 0?e.forEach(l=>l.disconnect(n)):r===void 0?Cl(o,e,i).disconnect(n,0):Cl(o,e,i).disconnect(n,0,r):i===void 0?e.forEach(l=>l.disconnect(n)):Cl(o,e,i).disconnect(n,0),W1={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Q1=(o,e,n,i,r,l,d,f)=>class extends o{constructor(m,y){const x=l(m),b={...W1,...y},v=i(x,b),_=d(x),w=_?n():null;super(m,!1,v,w),this._attack=e(this,_,v.attack),this._knee=e(this,_,v.knee),this._nativeDynamicsCompressorNode=v,this._ratio=e(this,_,v.ratio),this._release=e(this,_,v.release),this._threshold=e(this,_,v.threshold),f(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(m){const y=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=m,m>2)throw this._nativeDynamicsCompressorNode.channelCount=y,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(m){const y=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=m,m==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=y,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},X1=(o,e,n,i,r)=>()=>{const l=new WeakMap,d=async(f,g)=>{let m=n(f);const y=Dt(m,g);if(!y){const x={attack:m.attack.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,knee:m.knee.value,ratio:m.ratio.value,release:m.release.value,threshold:m.threshold.value};m=e(g,x)}return l.set(g,m),y?(await o(g,f.attack,m.attack),await o(g,f.knee,m.knee),await o(g,f.ratio,m.ratio),await o(g,f.release,m.release),await o(g,f.threshold,m.threshold)):(await i(g,f.attack,m.attack),await i(g,f.knee,m.knee),await i(g,f.ratio,m.ratio),await i(g,f.release,m.release),await i(g,f.threshold,m.threshold)),await r(f,g,m),m};return{render(f,g){const m=l.get(g);return m!==void 0?Promise.resolve(m):d(f,g)}}},Z1=()=>new DOMException("","EncodingError"),K1=o=>e=>new Promise((n,i)=>{if(o===null){i(new SyntaxError);return}const r=o.document.head;if(r===null)i(new SyntaxError);else{const l=o.document.createElement("script"),d=new Blob([e],{type:"application/javascript"}),f=URL.createObjectURL(d),g=o.onerror,m=()=>{o.onerror=g,URL.revokeObjectURL(f)};o.onerror=(y,x,b,v,_)=>{if(x===f||x===o.location.href&&b===1&&v===1)return m(),i(_),!1;if(g!==null)return g(y,x,b,v,_)},l.onerror=()=>{m(),i(new SyntaxError)},l.onload=()=>{m(),n()},l.src=f,l.type="module",r.appendChild(l)}}),$1=o=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,i,r){if(i!==null){let l=this._listeners.get(i);l===void 0&&(l=o(this,i),typeof i=="function"&&this._listeners.set(i,l)),this._nativeEventTarget.addEventListener(n,l,r)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,i,r){const l=i===null?void 0:this._listeners.get(i);this._nativeEventTarget.removeEventListener(n,l===void 0?null:l,r)}},J1=o=>(e,n,i)=>{Object.defineProperties(o,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return i()}finally{o!==null&&(delete o.currentFrame,delete o.currentTime)}},eS=o=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw o()},tS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},nS=(o,e,n,i,r,l)=>class extends o{constructor(f,g){const m=r(f),y={...tS,...g},x=i(m,y),b=l(m),v=b?n():null;super(f,!1,x,v),this._gain=e(this,b,x.gain,Bt,Yt)}get gain(){return this._gain}},sS=(o,e,n,i,r)=>()=>{const l=new WeakMap,d=async(f,g)=>{let m=n(f);const y=Dt(m,g);if(!y){const x={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:m.gain.value};m=e(g,x)}return l.set(g,m),y?await o(g,f.gain,m.gain):await i(g,f.gain,m.gain),await r(f,g,m),m};return{render(f,g){const m=l.get(g);return m!==void 0?Promise.resolve(m):d(f,g)}}},iS=(o,e)=>n=>e(o,n),aS=o=>e=>{const n=o(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},rS=o=>e=>{var n;return(n=o.get(e))!==null&&n!==void 0?n:0},oS=o=>e=>{const n=o(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},lS=o=>e=>o.get(e),vt=()=>new DOMException("","InvalidStateError"),cS=o=>e=>{const n=o.get(e);if(n===void 0)throw vt();return n},uS=(o,e)=>n=>{let i=o.get(n);if(i!==void 0)return i;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return i=new e(1,1,44100),o.set(n,i),i},dS=o=>e=>{const n=o.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},ec=()=>new DOMException("","InvalidAccessError"),hS=o=>{o.getFrequencyResponse=(e=>(n,i,r)=>{if(n.length!==i.length||i.length!==r.length)throw ec();return e.call(o,n,i,r)})(o.getFrequencyResponse)},fS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},pS=(o,e,n,i,r,l)=>class extends o{constructor(f,g){const m=i(f),y=r(m),x={...fS,...g},b=e(m,y?null:f.baseLatency,x),v=y?n(x.feedback,x.feedforward):null;super(f,!1,b,v),hS(b),this._nativeIIRFilterNode=b,l(this,1)}getFrequencyResponse(f,g,m){return this._nativeIIRFilterNode.getFrequencyResponse(f,g,m)}},I0=(o,e,n,i,r,l,d,f,g,m,y)=>{const x=m.length;let b=f;for(let v=0;v<x;v+=1){let _=n[0]*m[v];for(let w=1;w<r;w+=1){const T=b-w&g-1;_+=n[w]*l[T],_-=o[w]*d[T]}for(let w=r;w<i;w+=1)_+=n[w]*l[b-w&g-1];for(let w=r;w<e;w+=1)_-=o[w]*d[b-w&g-1];l[b]=m[v],d[b]=_,b=b+1&g-1,y[v]=_}return b},mS=(o,e,n,i)=>{const r=n instanceof Float64Array?n:new Float64Array(n),l=i instanceof Float64Array?i:new Float64Array(i),d=r.length,f=l.length,g=Math.min(d,f);if(r[0]!==1){for(let _=0;_<d;_+=1)l[_]/=r[0];for(let _=1;_<f;_+=1)r[_]/=r[0]}const m=32,y=new Float32Array(m),x=new Float32Array(m),b=e.createBuffer(o.numberOfChannels,o.length,o.sampleRate),v=o.numberOfChannels;for(let _=0;_<v;_+=1){const w=o.getChannelData(_),T=b.getChannelData(_);y.fill(0),x.fill(0),I0(r,d,l,f,g,y,x,0,m,w,T)}return b},gS=(o,e,n,i,r)=>(l,d)=>{const f=new WeakMap;let g=null;const m=async(y,x)=>{let b=null,v=e(y);const _=Dt(v,x);if(x.createIIRFilter===void 0?b=o(x,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):_||(v=x.createIIRFilter(d,l)),f.set(x,b===null?v:b),b!==null){if(g===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const T=new n(y.context.destination.channelCount,y.context.length,x.sampleRate);g=(async()=>{await i(y,T,T.destination);const C=await r(T);return mS(C,x,l,d)})()}const w=await g;return b.buffer=w,b.start(0),b}return await i(y,x,v),v};return{render(y,x){const b=f.get(x);return b!==void 0?Promise.resolve(b):m(y,x)}}},yS=(o,e,n,i,r,l)=>d=>(f,g)=>{const m=o.get(f);if(m===void 0){if(!d&&l(f)){const y=i(f),{outputs:x}=n(f);for(const b of x)if(Kr(b)){const v=i(b[0]);e(y,v,b[1],b[2])}else{const v=r(b[0]);y.disconnect(v,b[1])}}o.set(f,g)}else o.set(f,m+g)},xS=(o,e)=>n=>{const i=o.get(n);return e(i)||e(n)},bS=(o,e)=>n=>o.has(n)||e(n),vS=(o,e)=>n=>o.has(n)||e(n),SS=(o,e)=>n=>{const i=o.get(n);return e(i)||e(n)},_S=o=>e=>o!==null&&e instanceof o,TS=o=>e=>o!==null&&typeof o.AudioNode=="function"&&e instanceof o.AudioNode,CS=o=>e=>o!==null&&typeof o.AudioParam=="function"&&e instanceof o.AudioParam,wS=(o,e)=>n=>o(n)||e(n),kS=o=>e=>o!==null&&e instanceof o,jS=o=>o!==null&&o.isSecureContext,AS=(o,e,n,i)=>class extends o{constructor(l,d){const f=n(l),g=e(f,d);if(i(f))throw TypeError();super(l,!0,g,null),this._nativeMediaElementAudioSourceNode=g}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},MS={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},RS=(o,e,n,i)=>class extends o{constructor(l,d){const f=n(l);if(i(f))throw new TypeError;const g={...MS,...d},m=e(f,g);super(l,!1,m,null),this._nativeMediaStreamAudioDestinationNode=m}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},ES=(o,e,n,i)=>class extends o{constructor(l,d){const f=n(l),g=e(f,d);if(i(f))throw new TypeError;super(l,!0,g,null),this._nativeMediaStreamAudioSourceNode=g}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},DS=(o,e,n)=>class extends o{constructor(r,l){const d=n(r),f=e(d,l);super(r,!0,f,null)}},NS=(o,e,n,i,r,l)=>class extends n{constructor(f,g){super(f),this._nativeContext=f,$l.set(this,f),i(f)&&r.set(f,new Set),this._destination=new o(this,g),this._listener=e(this,f),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(f){const g=typeof f=="function"?l(this,f):null;this._nativeContext.onstatechange=g;const m=this._nativeContext.onstatechange;this._onstatechange=m!==null&&m===g?f:m}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},zr=o=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=o.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},OS=(o,e)=>(n,i,r)=>{const l=new Set;return n.connect=(d=>(f,g=0,m=0)=>{const y=l.size===0;if(e(f))return d.call(n,f,g,m),o(l,[f,g,m],x=>x[0]===f&&x[1]===g&&x[2]===m,!0),y&&i(),f;d.call(n,f,g),o(l,[f,g],x=>x[0]===f&&x[1]===g,!0),y&&i()})(n.connect),n.disconnect=(d=>(f,g,m)=>{const y=l.size>0;if(f===void 0)d.apply(n),l.clear();else if(typeof f=="number"){d.call(n,f);for(const b of l)b[1]===f&&l.delete(b)}else{e(f)?d.call(n,f,g,m):d.call(n,f,g);for(const b of l)b[0]===f&&(g===void 0||b[1]===g)&&(m===void 0||b[2]===m)&&l.delete(b)}const x=l.size===0;y&&x&&r()})(n.disconnect),n},et=(o,e,n)=>{const i=e[n];i!==void 0&&i!==o[n]&&(o[n]=i)},gt=(o,e)=>{et(o,e,"channelCount"),et(o,e,"channelCountMode"),et(o,e,"channelInterpretation")},Wg=o=>typeof o.getFloatTimeDomainData=="function",zS=o=>{o.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);o.getByteTimeDomainData(n);const i=Math.max(n.length,o.fftSize);for(let r=0;r<i;r+=1)e[r]=(n[r]-128)*.0078125;return e}},BS=(o,e)=>(n,i)=>{const r=n.createAnalyser();if(gt(r,i),!(i.maxDecibels>i.minDecibels))throw e();return et(r,i,"fftSize"),et(r,i,"maxDecibels"),et(r,i,"minDecibels"),et(r,i,"smoothingTimeConstant"),o(Wg,()=>Wg(r))||zS(r),r},IS=o=>o===null?null:o.hasOwnProperty("AudioBuffer")?o.AudioBuffer:null,st=(o,e,n)=>{const i=e[n];i!==void 0&&i!==o[n].value&&(o[n].value=i)},FS=o=>{o.start=(e=>{let n=!1;return(i=0,r=0,l)=>{if(n)throw vt();e.call(o,i,r,l),n=!0}})(o.start)},sh=o=>{o.start=(e=>(n=0,i=0,r)=>{if(typeof r=="number"&&r<0||i<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(o,n,i,r)})(o.start)},ih=o=>{o.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(o,n)})(o.stop)},VS=(o,e,n,i,r,l,d,f,g,m,y)=>(x,b)=>{const v=x.createBufferSource();return gt(v,b),st(v,b,"playbackRate"),et(v,b,"buffer"),et(v,b,"loop"),et(v,b,"loopEnd"),et(v,b,"loopStart"),e(n,()=>n(x))||FS(v),e(i,()=>i(x))||g(v),e(r,()=>r(x))||m(v,x),e(l,()=>l(x))||sh(v),e(d,()=>d(x))||y(v,x),e(f,()=>f(x))||ih(v),o(x,v),v},LS=o=>o===null?null:o.hasOwnProperty("AudioContext")?o.AudioContext:o.hasOwnProperty("webkitAudioContext")?o.webkitAudioContext:null,US=(o,e)=>(n,i,r)=>{const l=n.destination;if(l.channelCount!==i)try{l.channelCount=i}catch{}r&&l.channelCountMode!=="explicit"&&(l.channelCountMode="explicit"),l.maxChannelCount===0&&Object.defineProperty(l,"maxChannelCount",{value:i});const d=o(n,{channelCount:i,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:1});return e(d,"channelCount",f=>()=>f.call(d),f=>g=>{f.call(d,g);try{l.channelCount=g}catch(m){if(g>l.maxChannelCount)throw m}}),e(d,"channelCountMode",f=>()=>f.call(d),f=>g=>{f.call(d,g),l.channelCountMode=g}),e(d,"channelInterpretation",f=>()=>f.call(d),f=>g=>{f.call(d,g),l.channelInterpretation=g}),Object.defineProperty(d,"maxChannelCount",{get:()=>l.maxChannelCount}),d.connect(l),d},qS=o=>o===null?null:o.hasOwnProperty("AudioWorkletNode")?o.AudioWorkletNode:null,PS=o=>{const{port1:e}=new MessageChannel;try{e.postMessage(o)}finally{e.close()}},HS=(o,e,n,i,r)=>(l,d,f,g,m,y)=>{if(f!==null)try{const x=new f(l,g,y),b=new Map;let v=null;if(Object.defineProperties(x,{channelCount:{get:()=>y.channelCount,set:()=>{throw o()}},channelCountMode:{get:()=>"explicit",set:()=>{throw o()}},onprocessorerror:{get:()=>v,set:_=>{typeof v=="function"&&x.removeEventListener("processorerror",v),v=typeof _=="function"?_:null,typeof v=="function"&&x.addEventListener("processorerror",v)}}}),x.addEventListener=(_=>(...w)=>{if(w[0]==="processorerror"){const T=typeof w[1]=="function"?w[1]:typeof w[1]=="object"&&w[1]!==null&&typeof w[1].handleEvent=="function"?w[1].handleEvent:null;if(T!==null){const C=b.get(w[1]);C!==void 0?w[1]=C:(w[1]=N=>{N.type==="error"?(Object.defineProperties(N,{type:{value:"processorerror"}}),T(N)):T(new ErrorEvent(w[0],{...N}))},b.set(T,w[1]))}}return _.call(x,"error",w[1],w[2]),_.call(x,...w)})(x.addEventListener),x.removeEventListener=(_=>(...w)=>{if(w[0]==="processorerror"){const T=b.get(w[1]);T!==void 0&&(b.delete(w[1]),w[1]=T)}return _.call(x,"error",w[1],w[2]),_.call(x,w[0],w[1],w[2])})(x.removeEventListener),y.numberOfOutputs!==0){const _=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return x.connect(_).connect(l.destination),r(x,()=>_.disconnect(),()=>_.connect(l.destination))}return x}catch(x){throw x.code===11?i():x}if(m===void 0)throw i();return PS(y),e(l,d,m,y)},F0=(o,e)=>o===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(o*e))))),GS=o=>new Promise((e,n)=>{const{port1:i,port2:r}=new MessageChannel;i.onmessage=({data:l})=>{i.close(),r.close(),e(l)},i.onmessageerror=({data:l})=>{i.close(),r.close(),n(l)},r.postMessage(o)}),YS=async(o,e)=>{const n=await GS(e);return new o(n)},WS=(o,e,n,i)=>{let r=Ld.get(o);r===void 0&&(r=new WeakMap,Ld.set(o,r));const l=YS(n,i);return r.set(e,l),l},QS=(o,e,n,i,r,l,d,f,g,m,y,x,b)=>(v,_,w,T)=>{if(T.numberOfInputs===0&&T.numberOfOutputs===0)throw g();const C=Array.isArray(T.outputChannelCount)?T.outputChannelCount:Array.from(T.outputChannelCount);if(C.some(ee=>ee<1))throw g();if(C.length!==T.numberOfOutputs)throw e();if(T.channelCountMode!=="explicit")throw g();const N=T.channelCount*T.numberOfInputs,A=C.reduce((ee,he)=>ee+he,0),D=w.parameterDescriptors===void 0?0:w.parameterDescriptors.length;if(N+D>6||A>6)throw g();const M=new MessageChannel,E=[],k=[];for(let ee=0;ee<T.numberOfInputs;ee+=1)E.push(d(v,{channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation,gain:1})),k.push(r(v,{channelCount:T.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:T.channelCount}));const R=[];if(w.parameterDescriptors!==void 0)for(const{defaultValue:ee,maxValue:he,minValue:Ie,name:Ae}of w.parameterDescriptors){const we=l(v,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:T.parameterData[Ae]!==void 0?T.parameterData[Ae]:ee===void 0?0:ee});Object.defineProperties(we.offset,{defaultValue:{get:()=>ee===void 0?0:ee},maxValue:{get:()=>he===void 0?Bt:he},minValue:{get:()=>Ie===void 0?Yt:Ie}}),R.push(we)}const O=i(v,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,N+D)}),L=F0(_,v.sampleRate),q=f(v,L,N+D,Math.max(1,A)),P=r(v,{channelCount:Math.max(1,A),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,A)}),te=[];for(let ee=0;ee<T.numberOfOutputs;ee+=1)te.push(i(v,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:C[ee]}));for(let ee=0;ee<T.numberOfInputs;ee+=1){E[ee].connect(k[ee]);for(let he=0;he<T.channelCount;he+=1)k[ee].connect(O,he,ee*T.channelCount+he)}const se=new z0(w.parameterDescriptors===void 0?[]:w.parameterDescriptors.map(({name:ee},he)=>{const Ie=R[he];return Ie.connect(O,0,N+he),Ie.start(0),[ee,Ie.offset]}));O.connect(q);let de=T.channelInterpretation,B=null;const Q=T.numberOfOutputs===0?[q]:te,ne={get bufferSize(){return L},get channelCount(){return T.channelCount},set channelCount(ee){throw n()},get channelCountMode(){return T.channelCountMode},set channelCountMode(ee){throw n()},get channelInterpretation(){return de},set channelInterpretation(ee){for(const he of E)he.channelInterpretation=ee;de=ee},get context(){return q.context},get inputs(){return E},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},get onprocessorerror(){return B},set onprocessorerror(ee){typeof B=="function"&&ne.removeEventListener("processorerror",B),B=typeof ee=="function"?ee:null,typeof B=="function"&&ne.addEventListener("processorerror",B)},get parameters(){return se},get port(){return M.port2},addEventListener(...ee){return q.addEventListener(ee[0],ee[1],ee[2])},connect:o.bind(null,Q),disconnect:m.bind(null,Q),dispatchEvent(...ee){return q.dispatchEvent(ee[0])},removeEventListener(...ee){return q.removeEventListener(ee[0],ee[1],ee[2])}},ae=new Map;M.port1.addEventListener=(ee=>(...he)=>{if(he[0]==="message"){const Ie=typeof he[1]=="function"?he[1]:typeof he[1]=="object"&&he[1]!==null&&typeof he[1].handleEvent=="function"?he[1].handleEvent:null;if(Ie!==null){const Ae=ae.get(he[1]);Ae!==void 0?he[1]=Ae:(he[1]=we=>{y(v.currentTime,v.sampleRate,()=>Ie(we))},ae.set(Ie,he[1]))}}return ee.call(M.port1,he[0],he[1],he[2])})(M.port1.addEventListener),M.port1.removeEventListener=(ee=>(...he)=>{if(he[0]==="message"){const Ie=ae.get(he[1]);Ie!==void 0&&(ae.delete(he[1]),he[1]=Ie)}return ee.call(M.port1,he[0],he[1],he[2])})(M.port1.removeEventListener);let ue=null;Object.defineProperty(M.port1,"onmessage",{get:()=>ue,set:ee=>{typeof ue=="function"&&M.port1.removeEventListener("message",ue),ue=typeof ee=="function"?ee:null,typeof ue=="function"&&(M.port1.addEventListener("message",ue),M.port1.start())}}),w.prototype.port=M.port1;let z=null;WS(v,ne,w,T).then(ee=>z=ee);const ie=Fl(T.numberOfInputs,T.channelCount),le=Fl(T.numberOfOutputs,C),oe=w.parameterDescriptors===void 0?[]:w.parameterDescriptors.reduce((ee,{name:he})=>({...ee,[he]:new Float32Array(128)}),{});let me=!0;const be=()=>{T.numberOfOutputs>0&&q.disconnect(P);for(let ee=0,he=0;ee<T.numberOfOutputs;ee+=1){const Ie=te[ee];for(let Ae=0;Ae<C[ee];Ae+=1)P.disconnect(Ie,he+Ae,Ae);he+=C[ee]}},fe=new Map;q.onaudioprocess=({inputBuffer:ee,outputBuffer:he})=>{if(z!==null){const Ie=x(ne);for(let Ae=0;Ae<L;Ae+=128){for(let we=0;we<T.numberOfInputs;we+=1)for(let Ye=0;Ye<T.channelCount;Ye+=1)Il(ee,ie[we],Ye,Ye,Ae);w.parameterDescriptors!==void 0&&w.parameterDescriptors.forEach(({name:we},Ye)=>{Il(ee,oe,we,N+Ye,Ae)});for(let we=0;we<T.numberOfInputs;we+=1)for(let Ye=0;Ye<C[we];Ye+=1)le[we][Ye].byteLength===0&&(le[we][Ye]=new Float32Array(128));try{const we=ie.map((Mt,Rn)=>{if(Ie[Rn].size>0)return fe.set(Rn,L/128),Mt;const _t=fe.get(Rn);return _t===void 0?[]:(Mt.every(lc=>lc.every(io=>io===0))&&(_t===1?fe.delete(Rn):fe.set(Rn,_t-1)),Mt)});me=y(v.currentTime+Ae/v.sampleRate,v.sampleRate,()=>z.process(we,le,oe));for(let Mt=0,Rn=0;Mt<T.numberOfOutputs;Mt+=1){for(let Qs=0;Qs<C[Mt];Qs+=1)B0(he,le[Mt],Qs,Rn+Qs,Ae);Rn+=C[Mt]}}catch(we){me=!1,ne.dispatchEvent(new ErrorEvent("processorerror",{colno:we.colno,filename:we.filename,lineno:we.lineno,message:we.message}))}if(!me){for(let we=0;we<T.numberOfInputs;we+=1){E[we].disconnect(k[we]);for(let Ye=0;Ye<T.channelCount;Ye+=1)k[Ae].disconnect(O,Ye,we*T.channelCount+Ye)}if(w.parameterDescriptors!==void 0){const we=w.parameterDescriptors.length;for(let Ye=0;Ye<we;Ye+=1){const Mt=R[Ye];Mt.disconnect(O,0,N+Ye),Mt.stop()}}O.disconnect(q),q.onaudioprocess=null,ze?be():cn();break}}}};let ze=!1;const Nt=d(v,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Zt=()=>q.connect(Nt).connect(v.destination),cn=()=>{q.disconnect(Nt),Nt.disconnect()},Ot=()=>{if(me){cn(),T.numberOfOutputs>0&&q.connect(P);for(let ee=0,he=0;ee<T.numberOfOutputs;ee+=1){const Ie=te[ee];for(let Ae=0;Ae<C[ee];Ae+=1)P.connect(Ie,he+Ae,Ae);he+=C[ee]}}ze=!0},re=()=>{me&&(Zt(),be()),ze=!1};return Zt(),b(ne,Ot,re)},V0=(o,e)=>{const n=o.createBiquadFilter();return gt(n,e),st(n,e,"Q"),st(n,e,"detune"),st(n,e,"frequency"),st(n,e,"gain"),et(n,e,"type"),n},XS=(o,e)=>(n,i)=>{const r=n.createChannelMerger(i.numberOfInputs);return o!==null&&o.name==="webkitAudioContext"&&e(n,r),gt(r,i),r},ZS=o=>{const e=o.numberOfOutputs;Object.defineProperty(o,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw vt()}}),Object.defineProperty(o,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw vt()}}),Object.defineProperty(o,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw vt()}})},$r=(o,e)=>{const n=o.createChannelSplitter(e.numberOfOutputs);return gt(n,e),ZS(n),n},KS=(o,e,n,i,r)=>(l,d)=>{if(l.createConstantSource===void 0)return n(l,d);const f=l.createConstantSource();return gt(f,d),st(f,d,"offset"),e(i,()=>i(l))||sh(f),e(r,()=>r(l))||ih(f),o(l,f),f},Aa=(o,e)=>(o.connect=e.connect.bind(e),o.disconnect=e.disconnect.bind(e),o),$S=(o,e,n,i)=>(r,{offset:l,...d})=>{const f=r.createBuffer(1,2,44100),g=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),m=n(r,{...d,gain:l}),y=f.getChannelData(0);y[0]=1,y[1]=1,g.buffer=f,g.loop=!0;const x={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(_){m.channelCount=_},get channelCountMode(){return m.channelCountMode},set channelCountMode(_){m.channelCountMode=_},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(_){m.channelInterpretation=_},get context(){return m.context},get inputs(){return[]},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get offset(){return m.gain},get onended(){return g.onended},set onended(_){g.onended=_},addEventListener(..._){return g.addEventListener(_[0],_[1],_[2])},dispatchEvent(..._){return g.dispatchEvent(_[0])},removeEventListener(..._){return g.removeEventListener(_[0],_[1],_[2])},start(_=0){g.start.call(g,_)},stop(_=0){g.stop.call(g,_)}},b=()=>g.connect(m),v=()=>g.disconnect(m);return o(r,g),i(Aa(x,m),b,v)},JS=(o,e)=>(n,i)=>{const r=n.createConvolver();if(gt(r,i),i.disableNormalization===r.normalize&&(r.normalize=!i.disableNormalization),et(r,i,"buffer"),i.channelCount>2||(e(r,"channelCount",l=>()=>l.call(r),l=>d=>{if(d>2)throw o();return l.call(r,d)}),i.channelCountMode==="max"))throw o();return e(r,"channelCountMode",l=>()=>l.call(r),l=>d=>{if(d==="max")throw o();return l.call(r,d)}),r},L0=(o,e)=>{const n=o.createDelay(e.maxDelayTime);return gt(n,e),st(n,e,"delayTime"),n},e2=o=>(e,n)=>{const i=e.createDynamicsCompressor();if(gt(i,n),n.channelCount>2||n.channelCountMode==="max")throw o();return st(i,n,"attack"),st(i,n,"knee"),st(i,n,"ratio"),st(i,n,"release"),st(i,n,"threshold"),i},Xt=(o,e)=>{const n=o.createGain();return gt(n,e),st(n,e,"gain"),n},t2=o=>(e,n,i)=>{if(e.createIIRFilter===void 0)return o(e,n,i);const r=e.createIIRFilter(i.feedforward,i.feedback);return gt(r,i),r};function n2(o,e){const n=e[0]*e[0]+e[1]*e[1];return[(o[0]*e[0]+o[1]*e[1])/n,(o[1]*e[0]-o[0]*e[1])/n]}function s2(o,e){return[o[0]*e[0]-o[1]*e[1],o[0]*e[1]+o[1]*e[0]]}function Qg(o,e){let n=[0,0];for(let i=o.length-1;i>=0;i-=1)n=s2(n,e),n[0]+=o[i];return n}const i2=(o,e,n,i)=>(r,l,{channelCount:d,channelCountMode:f,channelInterpretation:g,feedback:m,feedforward:y})=>{const x=F0(l,r.sampleRate),b=m instanceof Float64Array?m:new Float64Array(m),v=y instanceof Float64Array?y:new Float64Array(y),_=b.length,w=v.length,T=Math.min(_,w);if(_===0||_>20)throw i();if(b[0]===0)throw e();if(w===0||w>20)throw i();if(v[0]===0)throw e();if(b[0]!==1){for(let R=0;R<w;R+=1)v[R]/=b[0];for(let R=1;R<_;R+=1)b[R]/=b[0]}const C=n(r,x,d,d);C.channelCount=d,C.channelCountMode=f,C.channelInterpretation=g;const N=32,A=[],D=[],M=[];for(let R=0;R<d;R+=1){A.push(0);const O=new Float32Array(N),L=new Float32Array(N);O.fill(0),L.fill(0),D.push(O),M.push(L)}C.onaudioprocess=R=>{const O=R.inputBuffer,L=R.outputBuffer,q=O.numberOfChannels;for(let P=0;P<q;P+=1){const te=O.getChannelData(P),se=L.getChannelData(P);A[P]=I0(b,_,v,w,T,D[P],M[P],A[P],N,te,se)}};const E=r.sampleRate/2;return Aa({get bufferSize(){return x},get channelCount(){return C.channelCount},set channelCount(R){C.channelCount=R},get channelCountMode(){return C.channelCountMode},set channelCountMode(R){C.channelCountMode=R},get channelInterpretation(){return C.channelInterpretation},set channelInterpretation(R){C.channelInterpretation=R},get context(){return C.context},get inputs(){return[C]},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},addEventListener(...R){return C.addEventListener(R[0],R[1],R[2])},dispatchEvent(...R){return C.dispatchEvent(R[0])},getFrequencyResponse(R,O,L){if(R.length!==O.length||O.length!==L.length)throw o();const q=R.length;for(let P=0;P<q;P+=1){const te=-Math.PI*(R[P]/E),se=[Math.cos(te),Math.sin(te)],de=Qg(v,se),B=Qg(b,se),Q=n2(de,B);O[P]=Math.sqrt(Q[0]*Q[0]+Q[1]*Q[1]),L[P]=Math.atan2(Q[1],Q[0])}},removeEventListener(...R){return C.removeEventListener(R[0],R[1],R[2])}},C)},a2=(o,e)=>o.createMediaElementSource(e.mediaElement),r2=(o,e)=>{const n=o.createMediaStreamDestination();return gt(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},o2=(o,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((l,d)=>l.id<d.id?-1:l.id>d.id?1:0);const i=n.slice(0,1),r=o.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(r,"mediaStream",{value:e}),r},l2=(o,e)=>(n,{mediaStreamTrack:i})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(i);const r=new MediaStream([i]),l=n.createMediaStreamSource(r);if(i.kind!=="audio")throw o();if(e(n))throw new TypeError;return l},c2=o=>o===null?null:o.hasOwnProperty("OfflineAudioContext")?o.OfflineAudioContext:o.hasOwnProperty("webkitOfflineAudioContext")?o.webkitOfflineAudioContext:null,u2=(o,e,n,i,r,l)=>(d,f)=>{const g=d.createOscillator();return gt(g,f),st(g,f,"detune"),st(g,f,"frequency"),f.periodicWave!==void 0?g.setPeriodicWave(f.periodicWave):et(g,f,"type"),e(n,()=>n(d))||sh(g),e(i,()=>i(d))||l(g,d),e(r,()=>r(d))||ih(g),o(d,g),g},d2=o=>(e,n)=>{const i=e.createPanner();return i.orientationX===void 0?o(e,n):(gt(i,n),st(i,n,"orientationX"),st(i,n,"orientationY"),st(i,n,"orientationZ"),st(i,n,"positionX"),st(i,n,"positionY"),st(i,n,"positionZ"),et(i,n,"coneInnerAngle"),et(i,n,"coneOuterAngle"),et(i,n,"coneOuterGain"),et(i,n,"distanceModel"),et(i,n,"maxDistance"),et(i,n,"panningModel"),et(i,n,"refDistance"),et(i,n,"rolloffFactor"),i)},h2=(o,e,n,i,r,l,d,f,g,m)=>(y,{coneInnerAngle:x,coneOuterAngle:b,coneOuterGain:v,distanceModel:_,maxDistance:w,orientationX:T,orientationY:C,orientationZ:N,panningModel:A,positionX:D,positionY:M,positionZ:E,refDistance:k,rolloffFactor:R,...O})=>{const L=y.createPanner();if(O.channelCount>2||O.channelCountMode==="max")throw d();gt(L,O);const q={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},P=n(y,{...q,channelInterpretation:"speakers",numberOfInputs:6}),te=i(y,{...O,gain:1}),se=i(y,{...q,gain:1}),de=i(y,{...q,gain:0}),B=i(y,{...q,gain:0}),Q=i(y,{...q,gain:0}),ne=i(y,{...q,gain:0}),ae=i(y,{...q,gain:0}),ue=r(y,256,6,1),z=l(y,{...q,curve:new Float32Array([1,1]),oversample:"none"});let X=[T,C,N],ie=[D,M,E];const le=new Float32Array(1);ue.onaudioprocess=({inputBuffer:fe})=>{const ze=[g(fe,le,0),g(fe,le,1),g(fe,le,2)];ze.some((Zt,cn)=>Zt!==X[cn])&&(L.setOrientation(...ze),X=ze);const Nt=[g(fe,le,3),g(fe,le,4),g(fe,le,5)];Nt.some((Zt,cn)=>Zt!==ie[cn])&&(L.setPosition(...Nt),ie=Nt)},Object.defineProperty(de.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ne.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ae.gain,"defaultValue",{get:()=>0});const oe={get bufferSize(){},get channelCount(){return L.channelCount},set channelCount(fe){if(fe>2)throw d();te.channelCount=fe,L.channelCount=fe},get channelCountMode(){return L.channelCountMode},set channelCountMode(fe){if(fe==="max")throw d();te.channelCountMode=fe,L.channelCountMode=fe},get channelInterpretation(){return L.channelInterpretation},set channelInterpretation(fe){te.channelInterpretation=fe,L.channelInterpretation=fe},get coneInnerAngle(){return L.coneInnerAngle},set coneInnerAngle(fe){L.coneInnerAngle=fe},get coneOuterAngle(){return L.coneOuterAngle},set coneOuterAngle(fe){L.coneOuterAngle=fe},get coneOuterGain(){return L.coneOuterGain},set coneOuterGain(fe){if(fe<0||fe>1)throw e();L.coneOuterGain=fe},get context(){return L.context},get distanceModel(){return L.distanceModel},set distanceModel(fe){L.distanceModel=fe},get inputs(){return[te]},get maxDistance(){return L.maxDistance},set maxDistance(fe){if(fe<0)throw new RangeError;L.maxDistance=fe},get numberOfInputs(){return L.numberOfInputs},get numberOfOutputs(){return L.numberOfOutputs},get orientationX(){return se.gain},get orientationY(){return de.gain},get orientationZ(){return B.gain},get panningModel(){return L.panningModel},set panningModel(fe){L.panningModel=fe},get positionX(){return Q.gain},get positionY(){return ne.gain},get positionZ(){return ae.gain},get refDistance(){return L.refDistance},set refDistance(fe){if(fe<0)throw new RangeError;L.refDistance=fe},get rolloffFactor(){return L.rolloffFactor},set rolloffFactor(fe){if(fe<0)throw new RangeError;L.rolloffFactor=fe},addEventListener(...fe){return te.addEventListener(fe[0],fe[1],fe[2])},dispatchEvent(...fe){return te.dispatchEvent(fe[0])},removeEventListener(...fe){return te.removeEventListener(fe[0],fe[1],fe[2])}};x!==oe.coneInnerAngle&&(oe.coneInnerAngle=x),b!==oe.coneOuterAngle&&(oe.coneOuterAngle=b),v!==oe.coneOuterGain&&(oe.coneOuterGain=v),_!==oe.distanceModel&&(oe.distanceModel=_),w!==oe.maxDistance&&(oe.maxDistance=w),T!==oe.orientationX.value&&(oe.orientationX.value=T),C!==oe.orientationY.value&&(oe.orientationY.value=C),N!==oe.orientationZ.value&&(oe.orientationZ.value=N),A!==oe.panningModel&&(oe.panningModel=A),D!==oe.positionX.value&&(oe.positionX.value=D),M!==oe.positionY.value&&(oe.positionY.value=M),E!==oe.positionZ.value&&(oe.positionZ.value=E),k!==oe.refDistance&&(oe.refDistance=k),R!==oe.rolloffFactor&&(oe.rolloffFactor=R),(X[0]!==1||X[1]!==0||X[2]!==0)&&L.setOrientation(...X),(ie[0]!==0||ie[1]!==0||ie[2]!==0)&&L.setPosition(...ie);const me=()=>{te.connect(L),o(te,z,0,0),z.connect(se).connect(P,0,0),z.connect(de).connect(P,0,1),z.connect(B).connect(P,0,2),z.connect(Q).connect(P,0,3),z.connect(ne).connect(P,0,4),z.connect(ae).connect(P,0,5),P.connect(ue).connect(y.destination)},be=()=>{te.disconnect(L),f(te,z,0,0),z.disconnect(se),se.disconnect(P),z.disconnect(de),de.disconnect(P),z.disconnect(B),B.disconnect(P),z.disconnect(Q),Q.disconnect(P),z.disconnect(ne),ne.disconnect(P),z.disconnect(ae),ae.disconnect(P),P.disconnect(ue),ue.disconnect(y.destination)};return m(Aa(oe,L),me,be)},f2=o=>(e,{disableNormalization:n,imag:i,real:r})=>{const l=i instanceof Float32Array?i:new Float32Array(i),d=r instanceof Float32Array?r:new Float32Array(r),f=e.createPeriodicWave(d,l,{disableNormalization:n});if(Array.from(i).length<2)throw o();return f},Jr=(o,e,n,i)=>o.createScriptProcessor(e,n,i),p2=(o,e)=>(n,i)=>{const r=i.channelCountMode;if(r==="clamped-max")throw e();if(n.createStereoPanner===void 0)return o(n,i);const l=n.createStereoPanner();return gt(l,i),st(l,i,"pan"),Object.defineProperty(l,"channelCountMode",{get:()=>r,set:d=>{if(d!==r)throw e()}}),l},m2=(o,e,n,i,r,l)=>{const f=new Float32Array([1,1]),g=Math.PI/2,m={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},y={...m,oversample:"none"},x=(_,w,T,C)=>{const N=new Float32Array(16385),A=new Float32Array(16385);for(let O=0;O<16385;O+=1){const L=O/16384*g;N[O]=Math.cos(L),A[O]=Math.sin(L)}const D=n(_,{...m,gain:0}),M=i(_,{...y,curve:N}),E=i(_,{...y,curve:f}),k=n(_,{...m,gain:0}),R=i(_,{...y,curve:A});return{connectGraph(){w.connect(D),w.connect(E.inputs===void 0?E:E.inputs[0]),w.connect(k),E.connect(T),T.connect(M.inputs===void 0?M:M.inputs[0]),T.connect(R.inputs===void 0?R:R.inputs[0]),M.connect(D.gain),R.connect(k.gain),D.connect(C,0,0),k.connect(C,0,1)},disconnectGraph(){w.disconnect(D),w.disconnect(E.inputs===void 0?E:E.inputs[0]),w.disconnect(k),E.disconnect(T),T.disconnect(M.inputs===void 0?M:M.inputs[0]),T.disconnect(R.inputs===void 0?R:R.inputs[0]),M.disconnect(D.gain),R.disconnect(k.gain),D.disconnect(C,0,0),k.disconnect(C,0,1)}}},b=(_,w,T,C)=>{const N=new Float32Array(16385),A=new Float32Array(16385),D=new Float32Array(16385),M=new Float32Array(16385),E=Math.floor(16385/2);for(let Q=0;Q<16385;Q+=1)if(Q>E){const ne=(Q-E)/(16384-E)*g;N[Q]=Math.cos(ne),A[Q]=Math.sin(ne),D[Q]=0,M[Q]=1}else{const ne=Q/(16384-E)*g;N[Q]=1,A[Q]=0,D[Q]=Math.cos(ne),M[Q]=Math.sin(ne)}const k=e(_,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),R=n(_,{...m,gain:0}),O=i(_,{...y,curve:N}),L=n(_,{...m,gain:0}),q=i(_,{...y,curve:A}),P=i(_,{...y,curve:f}),te=n(_,{...m,gain:0}),se=i(_,{...y,curve:D}),de=n(_,{...m,gain:0}),B=i(_,{...y,curve:M});return{connectGraph(){w.connect(k),w.connect(P.inputs===void 0?P:P.inputs[0]),k.connect(R,0),k.connect(L,0),k.connect(te,1),k.connect(de,1),P.connect(T),T.connect(O.inputs===void 0?O:O.inputs[0]),T.connect(q.inputs===void 0?q:q.inputs[0]),T.connect(se.inputs===void 0?se:se.inputs[0]),T.connect(B.inputs===void 0?B:B.inputs[0]),O.connect(R.gain),q.connect(L.gain),se.connect(te.gain),B.connect(de.gain),R.connect(C,0,0),te.connect(C,0,0),L.connect(C,0,1),de.connect(C,0,1)},disconnectGraph(){w.disconnect(k),w.disconnect(P.inputs===void 0?P:P.inputs[0]),k.disconnect(R,0),k.disconnect(L,0),k.disconnect(te,1),k.disconnect(de,1),P.disconnect(T),T.disconnect(O.inputs===void 0?O:O.inputs[0]),T.disconnect(q.inputs===void 0?q:q.inputs[0]),T.disconnect(se.inputs===void 0?se:se.inputs[0]),T.disconnect(B.inputs===void 0?B:B.inputs[0]),O.disconnect(R.gain),q.disconnect(L.gain),se.disconnect(te.gain),B.disconnect(de.gain),R.disconnect(C,0,0),te.disconnect(C,0,0),L.disconnect(C,0,1),de.disconnect(C,0,1)}}},v=(_,w,T,C,N)=>{if(w===1)return x(_,T,C,N);if(w===2)return b(_,T,C,N);throw r()};return(_,{channelCount:w,channelCountMode:T,pan:C,...N})=>{if(T==="max")throw r();const A=o(_,{...N,channelCount:1,channelCountMode:T,numberOfInputs:2}),D=n(_,{...N,channelCount:w,channelCountMode:T,gain:1}),M=n(_,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:C});let{connectGraph:E,disconnectGraph:k}=v(_,w,D,M,A);Object.defineProperty(M.gain,"defaultValue",{get:()=>0}),Object.defineProperty(M.gain,"maxValue",{get:()=>1}),Object.defineProperty(M.gain,"minValue",{get:()=>-1});const R={get bufferSize(){},get channelCount(){return D.channelCount},set channelCount(P){D.channelCount!==P&&(O&&k(),{connectGraph:E,disconnectGraph:k}=v(_,P,D,M,A),O&&E()),D.channelCount=P},get channelCountMode(){return D.channelCountMode},set channelCountMode(P){if(P==="clamped-max"||P==="max")throw r();D.channelCountMode=P},get channelInterpretation(){return D.channelInterpretation},set channelInterpretation(P){D.channelInterpretation=P},get context(){return D.context},get inputs(){return[D]},get numberOfInputs(){return D.numberOfInputs},get numberOfOutputs(){return D.numberOfOutputs},get pan(){return M.gain},addEventListener(...P){return D.addEventListener(P[0],P[1],P[2])},dispatchEvent(...P){return D.dispatchEvent(P[0])},removeEventListener(...P){return D.removeEventListener(P[0],P[1],P[2])}};let O=!1;const L=()=>{E(),O=!0},q=()=>{k(),O=!1};return l(Aa(R,A),L,q)}},g2=(o,e,n,i,r,l,d)=>(f,g)=>{const m=f.createWaveShaper();if(l!==null&&l.name==="webkitAudioContext"&&f.createGain().gain.automationRate===void 0)return n(f,g);gt(m,g);const y=g.curve===null||g.curve instanceof Float32Array?g.curve:new Float32Array(g.curve);if(y!==null&&y.length<2)throw e();et(m,{curve:y},"curve"),et(m,g,"oversample");let x=null,b=!1;return d(m,"curve",w=>()=>w.call(m),w=>T=>(w.call(m,T),b&&(i(T)&&x===null?x=o(f,m):!i(T)&&x!==null&&(x(),x=null)),T)),r(m,()=>{b=!0,i(m.curve)&&(x=o(f,m))},()=>{b=!1,x!==null&&(x(),x=null)})},y2=(o,e,n,i,r)=>(l,{curve:d,oversample:f,...g})=>{const m=l.createWaveShaper(),y=l.createWaveShaper();gt(m,g),gt(y,g);const x=n(l,{...g,gain:1}),b=n(l,{...g,gain:-1}),v=n(l,{...g,gain:1}),_=n(l,{...g,gain:-1});let w=null,T=!1,C=null;const N={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(M){x.channelCount=M,b.channelCount=M,m.channelCount=M,v.channelCount=M,y.channelCount=M,_.channelCount=M},get channelCountMode(){return m.channelCountMode},set channelCountMode(M){x.channelCountMode=M,b.channelCountMode=M,m.channelCountMode=M,v.channelCountMode=M,y.channelCountMode=M,_.channelCountMode=M},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(M){x.channelInterpretation=M,b.channelInterpretation=M,m.channelInterpretation=M,v.channelInterpretation=M,y.channelInterpretation=M,_.channelInterpretation=M},get context(){return m.context},get curve(){return C},set curve(M){if(M!==null&&M.length<2)throw e();if(M===null)m.curve=M,y.curve=M;else{const E=M.length,k=new Float32Array(E+2-E%2),R=new Float32Array(E+2-E%2);k[0]=M[0],R[0]=-M[E-1];const O=Math.ceil((E+1)/2),L=(E+1)/2-1;for(let q=1;q<O;q+=1){const P=q/O*L,te=Math.floor(P),se=Math.ceil(P);k[q]=te===se?M[te]:(1-(P-te))*M[te]+(1-(se-P))*M[se],R[q]=te===se?-M[E-1-te]:-((1-(P-te))*M[E-1-te])-(1-(se-P))*M[E-1-se]}k[O]=E%2===1?M[O-1]:(M[O-2]+M[O-1])/2,m.curve=k,y.curve=R}C=M,T&&(i(C)&&w===null?w=o(l,x):w!==null&&(w(),w=null))},get inputs(){return[x]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get oversample(){return m.oversample},set oversample(M){m.oversample=M,y.oversample=M},addEventListener(...M){return x.addEventListener(M[0],M[1],M[2])},dispatchEvent(...M){return x.dispatchEvent(M[0])},removeEventListener(...M){return x.removeEventListener(M[0],M[1],M[2])}};d!==null&&(N.curve=d instanceof Float32Array?d:new Float32Array(d)),f!==N.oversample&&(N.oversample=f);const A=()=>{x.connect(m).connect(v),x.connect(b).connect(y).connect(_).connect(v),T=!0,i(C)&&(w=o(l,x))},D=()=>{x.disconnect(m),m.disconnect(v),x.disconnect(b),b.disconnect(y),y.disconnect(_),_.disconnect(v),T=!1,w!==null&&(w(),w=null)};return r(Aa(N,v),A,D)},Ft=()=>new DOMException("","NotSupportedError"),x2={numberOfChannels:1},b2=(o,e,n,i,r)=>class extends o{constructor(d,f,g){let m;if(typeof d=="number"&&f!==void 0&&g!==void 0)m={length:f,numberOfChannels:d,sampleRate:g};else if(typeof d=="object")m=d;else throw new Error("The given parameters are not valid.");const{length:y,numberOfChannels:x,sampleRate:b}={...x2,...m},v=i(x,y,b);e(zr,()=>zr(v))||v.addEventListener("statechange",(()=>{let _=0;const w=T=>{this._state==="running"&&(_>0?(v.removeEventListener("statechange",w),T.stopImmediatePropagation(),this._waitForThePromiseToSettle(T)):_+=1)};return w})()),super(v,x),this._length=y,this._nativeOfflineAudioContext=v,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,E0(this)}))}_waitForThePromiseToSettle(d){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(d):setTimeout(()=>this._waitForThePromiseToSettle(d))}},v2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},S2=(o,e,n,i,r,l,d)=>class extends o{constructor(g,m){const y=r(g),x={...v2,...m},b=n(y,x),v=l(y),_=v?i():null,w=g.sampleRate/2;super(g,!1,b,_),this._detune=e(this,v,b.detune,153600,-153600),this._frequency=e(this,v,b.frequency,w,-w),this._nativeOscillatorNode=b,this._onended=null,this._oscillatorNodeRenderer=_,this._oscillatorNodeRenderer!==null&&x.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=x.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(g){const m=typeof g=="function"?d(this,g):null;this._nativeOscillatorNode.onended=m;const y=this._nativeOscillatorNode.onended;this._onended=y!==null&&y===m?g:y}get type(){return this._nativeOscillatorNode.type}set type(g){this._nativeOscillatorNode.type=g,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(g){this._nativeOscillatorNode.setPeriodicWave(g),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=g)}start(g=0){if(this._nativeOscillatorNode.start(g),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=g),this.context.state!=="closed"){va(this);const m=()=>{this._nativeOscillatorNode.removeEventListener("ended",m),os(this)&&Xr(this)};this._nativeOscillatorNode.addEventListener("ended",m)}}stop(g=0){this._nativeOscillatorNode.stop(g),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=g)}},_2=(o,e,n,i,r)=>()=>{const l=new WeakMap;let d=null,f=null,g=null;const m=async(y,x)=>{let b=n(y);const v=Dt(b,x);if(!v){const _={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,detune:b.detune.value,frequency:b.frequency.value,periodicWave:d===null?void 0:d,type:b.type};b=e(x,_),f!==null&&b.start(f),g!==null&&b.stop(g)}return l.set(x,b),v?(await o(x,y.detune,b.detune),await o(x,y.frequency,b.frequency)):(await i(x,y.detune,b.detune),await i(x,y.frequency,b.frequency)),await r(y,x,b),b};return{set periodicWave(y){d=y},set start(y){f=y},set stop(y){g=y},render(y,x){const b=l.get(x);return b!==void 0?Promise.resolve(b):m(y,x)}}},T2={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},C2=(o,e,n,i,r,l,d)=>class extends o{constructor(g,m){const y=r(g),x={...T2,...m},b=n(y,x),v=l(y),_=v?i():null;super(g,!1,b,_),this._nativePannerNode=b,this._orientationX=e(this,v,b.orientationX,Bt,Yt),this._orientationY=e(this,v,b.orientationY,Bt,Yt),this._orientationZ=e(this,v,b.orientationZ,Bt,Yt),this._positionX=e(this,v,b.positionX,Bt,Yt),this._positionY=e(this,v,b.positionY,Bt,Yt),this._positionZ=e(this,v,b.positionZ,Bt,Yt),d(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(g){this._nativePannerNode.coneInnerAngle=g}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(g){this._nativePannerNode.coneOuterAngle=g}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(g){this._nativePannerNode.coneOuterGain=g}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(g){this._nativePannerNode.distanceModel=g}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(g){this._nativePannerNode.maxDistance=g}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(g){this._nativePannerNode.panningModel=g}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(g){this._nativePannerNode.refDistance=g}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(g){this._nativePannerNode.rolloffFactor=g}},w2=(o,e,n,i,r,l,d,f,g,m)=>()=>{const y=new WeakMap;let x=null;const b=async(v,_)=>{let w=null,T=l(v);const C={channelCount:T.channelCount,channelCountMode:T.channelCountMode,channelInterpretation:T.channelInterpretation},N={...C,coneInnerAngle:T.coneInnerAngle,coneOuterAngle:T.coneOuterAngle,coneOuterGain:T.coneOuterGain,distanceModel:T.distanceModel,maxDistance:T.maxDistance,panningModel:T.panningModel,refDistance:T.refDistance,rolloffFactor:T.rolloffFactor},A=Dt(T,_);if("bufferSize"in T)w=i(_,{...C,gain:1});else if(!A){const D={...N,orientationX:T.orientationX.value,orientationY:T.orientationY.value,orientationZ:T.orientationZ.value,positionX:T.positionX.value,positionY:T.positionY.value,positionZ:T.positionZ.value};T=r(_,D)}if(y.set(_,w===null?T:w),w!==null){if(x===null){if(d===null)throw new Error("Missing the native OfflineAudioContext constructor.");const q=new d(6,v.context.length,_.sampleRate),P=e(q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});P.connect(q.destination),x=(async()=>{const te=await Promise.all([v.orientationX,v.orientationY,v.orientationZ,v.positionX,v.positionY,v.positionZ].map(async(se,de)=>{const B=n(q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:de===0?1:0});return await f(q,se,B.offset),B}));for(let se=0;se<6;se+=1)te[se].connect(P,0,se),te[se].start(0);return m(q)})()}const D=await x,M=i(_,{...C,gain:1});await g(v,_,M);const E=[];for(let q=0;q<D.numberOfChannels;q+=1)E.push(D.getChannelData(q));let k=[E[0][0],E[1][0],E[2][0]],R=[E[3][0],E[4][0],E[5][0]],O=i(_,{...C,gain:1}),L=r(_,{...N,orientationX:k[0],orientationY:k[1],orientationZ:k[2],positionX:R[0],positionY:R[1],positionZ:R[2]});M.connect(O).connect(L.inputs[0]),L.connect(w);for(let q=128;q<D.length;q+=128){const P=[E[0][q],E[1][q],E[2][q]],te=[E[3][q],E[4][q],E[5][q]];if(P.some((se,de)=>se!==k[de])||te.some((se,de)=>se!==R[de])){k=P,R=te;const se=q/_.sampleRate;O.gain.setValueAtTime(0,se),O=i(_,{...C,gain:0}),L=r(_,{...N,orientationX:k[0],orientationY:k[1],orientationZ:k[2],positionX:R[0],positionY:R[1],positionZ:R[2]}),O.gain.setValueAtTime(1,se),M.connect(O).connect(L.inputs[0]),L.connect(w)}}return w}return A?(await o(_,v.orientationX,T.orientationX),await o(_,v.orientationY,T.orientationY),await o(_,v.orientationZ,T.orientationZ),await o(_,v.positionX,T.positionX),await o(_,v.positionY,T.positionY),await o(_,v.positionZ,T.positionZ)):(await f(_,v.orientationX,T.orientationX),await f(_,v.orientationY,T.orientationY),await f(_,v.orientationZ,T.orientationZ),await f(_,v.positionX,T.positionX),await f(_,v.positionY,T.positionY),await f(_,v.positionZ,T.positionZ)),ja(T)?await g(v,_,T.inputs[0]):await g(v,_,T),T};return{render(v,_){const w=y.get(_);return w!==void 0?Promise.resolve(w):b(v,_)}}},k2={disableNormalization:!1},j2=(o,e,n,i)=>class U0{constructor(l,d){const f=e(l),g=i({...k2,...d}),m=o(f,g);return n.add(m),m}static[Symbol.hasInstance](l){return l!==null&&typeof l=="object"&&Object.getPrototypeOf(l)===U0.prototype||n.has(l)}},A2=(o,e)=>(n,i,r)=>(o(i).replay(r),e(i,n,r)),M2=(o,e,n)=>async(i,r,l)=>{const d=o(i);await Promise.all(d.activeInputs.map((f,g)=>Array.from(f).map(async([m,y])=>{const b=await e(m).render(m,r),v=i.context.destination;!n(m)&&(i!==v||!n(i))&&b.connect(l,y,g)})).reduce((f,g)=>[...f,...g],[]))},R2=(o,e,n)=>async(i,r,l)=>{const d=e(i);await Promise.all(Array.from(d.activeInputs).map(async([f,g])=>{const y=await o(f).render(f,r);n(f)||y.connect(l,g)}))},E2=(o,e,n,i)=>r=>o(zr,()=>zr(r))?Promise.resolve(o(i,i)).then(l=>{if(!l){const d=n(r,512,0,1);r.oncomplete=()=>{d.onaudioprocess=null,d.disconnect()},d.onaudioprocess=()=>r.currentTime,d.connect(r.destination)}return r.startRendering()}):new Promise(l=>{const d=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=f=>{d.disconnect(),l(f.renderedBuffer)},d.connect(r.destination),r.startRendering()}),D2=o=>(e,n)=>{o.set(e,n)},N2=o=>(e,n)=>o.set(e,n),O2=(o,e,n,i,r,l,d,f)=>(g,m)=>n(g).render(g,m).then(()=>Promise.all(Array.from(i(m)).map(y=>n(y).render(y,m)))).then(()=>r(m)).then(y=>(typeof y.copyFromChannel!="function"?(d(y),eh(y)):e(l,()=>l(y))||f(y),o.add(y),y)),z2={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},B2=(o,e,n,i,r,l)=>class extends o{constructor(f,g){const m=r(f),y={...z2,...g},x=n(m,y),b=l(m),v=b?i():null;super(f,!1,x,v),this._pan=e(this,b,x.pan)}get pan(){return this._pan}},I2=(o,e,n,i,r)=>()=>{const l=new WeakMap,d=async(f,g)=>{let m=n(f);const y=Dt(m,g);if(!y){const x={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,pan:m.pan.value};m=e(g,x)}return l.set(g,m),y?await o(g,f.pan,m.pan):await i(g,f.pan,m.pan),ja(m)?await r(f,g,m.inputs[0]):await r(f,g,m),m};return{render(f,g){const m=l.get(g);return m!==void 0?Promise.resolve(m):d(f,g)}}},F2=o=>()=>{if(o===null)return!1;try{new o({length:1,sampleRate:44100})}catch{return!1}return!0},V2=(o,e)=>async()=>{if(o===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new e(1,128,44100),r=URL.createObjectURL(n);let l=!1,d=!1;try{await i.audioWorklet.addModule(r);const f=new o(i,"a",{numberOfOutputs:0}),g=i.createOscillator();f.port.onmessage=()=>l=!0,f.onprocessorerror=()=>d=!0,g.connect(f),g.start(0),await i.startRendering(),await new Promise(m=>setTimeout(m))}catch{}finally{URL.revokeObjectURL(r)}return l&&!d},L2=(o,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),i=o(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{n.oncomplete=()=>{i.disconnect(),r(n.currentTime!==0)},n.startRendering()})},U2=()=>new DOMException("","UnknownError"),q2={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},P2=(o,e,n,i,r,l,d)=>class extends o{constructor(g,m){const y=r(g),x={...q2,...m},b=n(y,x),_=l(y)?i():null;super(g,!0,b,_),this._isCurveNullified=!1,this._nativeWaveShaperNode=b,d(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(g){if(g===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(g.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=g}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(g){this._nativeWaveShaperNode.oversample=g}},H2=(o,e,n)=>()=>{const i=new WeakMap,r=async(l,d)=>{let f=e(l);if(!Dt(f,d)){const m={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,curve:f.curve,oversample:f.oversample};f=o(d,m)}return i.set(d,f),ja(f)?await n(l,d,f.inputs[0]):await n(l,d,f),f};return{render(l,d){const f=i.get(d);return f!==void 0?Promise.resolve(f):r(l,d)}}},G2=()=>typeof window>"u"?null:window,Y2=(o,e)=>n=>{n.copyFromChannel=(i,r,l=0)=>{const d=o(l),f=o(r);if(f>=n.numberOfChannels)throw e();const g=n.length,m=n.getChannelData(f),y=i.length;for(let x=d<0?-d:0;x+d<g&&x<y;x+=1)i[x]=m[x+d]},n.copyToChannel=(i,r,l=0)=>{const d=o(l),f=o(r);if(f>=n.numberOfChannels)throw e();const g=n.length,m=n.getChannelData(f),y=i.length;for(let x=d<0?-d:0;x+d<g&&x<y;x+=1)m[x+d]=i[x]}},W2=o=>e=>{e.copyFromChannel=(n=>(i,r,l=0)=>{const d=o(l),f=o(r);if(d<e.length)return n.call(e,i,f,d)})(e.copyFromChannel),e.copyToChannel=(n=>(i,r,l=0)=>{const d=o(l),f=o(r);if(d<e.length)return n.call(e,i,f,d)})(e.copyToChannel)},Q2=o=>(e,n)=>{const i=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=i),o(e,"buffer",r=>()=>{const l=r.call(e);return l===i?null:l},r=>l=>r.call(e,l===null?i:l))},X2=(o,e)=>(n,i)=>{i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:()=>1,set:()=>{throw o()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:()=>{throw o()}});const r=n.createBufferSource();e(i,()=>{const f=i.numberOfInputs;for(let g=0;g<f;g+=1)r.connect(i,0,g)},()=>r.disconnect(i))},q0=(o,e,n)=>o.copyFromChannel===void 0?o.getChannelData(n)[0]:(o.copyFromChannel(e,n),e[0]),P0=o=>{if(o===null)return!1;const e=o.length;return e%2!==0?o[Math.floor(e/2)]!==0:o[e/2-1]+o[e/2]!==0},eo=(o,e,n,i)=>{let r=o;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:l,set:d}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(o,e,{get:n(l),set:i(d)})},Z2=o=>({...o,outputChannelCount:o.outputChannelCount!==void 0?o.outputChannelCount:o.numberOfInputs===1&&o.numberOfOutputs===1?[o.channelCount]:Array.from({length:o.numberOfOutputs},()=>1)}),K2=o=>({...o,channelCount:o.numberOfOutputs}),$2=o=>{const{imag:e,real:n}=o;return e===void 0?n===void 0?{...o,imag:[0,0],real:[0,0]}:{...o,imag:Array.from(n,()=>0),real:n}:n===void 0?{...o,imag:e,real:Array.from(e,()=>0)}:{...o,imag:e,real:n}},H0=(o,e,n)=>{try{o.setValueAtTime(e,n)}catch(i){if(i.code!==9)throw i;H0(o,e,n+1e-7)}},J2=o=>{const e=o.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},e_=o=>{const e=o.createBufferSource(),n=o.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},t_=o=>{const e=o.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},ah=o=>{const e=o.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},G0=o=>{const e=o.createBuffer(1,1,44100),n=o.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},rh=o=>{const e=o.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},n_=o=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(o)}finally{e.close(),n.close()}},s_=o=>{o.start=(e=>(n=0,i=0,r)=>{const l=o.buffer,d=l===null?i:Math.min(l.duration,i);l!==null&&d>l.duration-.5/o.context.sampleRate?e.call(o,n,0,0):e.call(o,n,d,r)})(o.start)},Y0=(o,e)=>{const n=e.createGain();o.connect(n);const i=(r=>()=>{r.call(o,n),o.removeEventListener("ended",i)})(o.disconnect);o.addEventListener("ended",i),Aa(o,n),o.stop=(r=>{let l=!1;return(d=0)=>{if(l)try{r.call(o,d)}catch{n.gain.setValueAtTime(0,d)}else r.call(o,d),l=!0}})(o.stop)},Ma=(o,e)=>n=>{const i={value:o};return Object.defineProperties(n,{currentTarget:i,target:i}),typeof e=="function"?e.call(o,n):e.handleEvent.call(o,n)},i_=Cv(ji),a_=Rv(ji),r_=q1(Jl),W0=new WeakMap,o_=rS(W0),jn=x1(new Map,new WeakMap),In=G2(),Q0=BS(jn,Fn),oh=aS(It),At=M2(It,oh,Ti),l_=zv(Q0,Ke,At),We=cS($l),ds=c2(In),He=kS(ds),X0=new WeakMap,Z0=$1(Ma),to=LS(In),lh=_S(to),ch=TS(In),K0=CS(In),Br=qS(In),ct=r1(wv(C0),Mv(i_,a_,Ol,r_,zl,It,o_,Qr,Ke,ji,os,Ti,Al),jn,yS(Fd,zl,It,Ke,Or,os),Fn,ec,Ft,F1(Ol,Fd,It,Ke,Or,We,os,He),G1(X0,It,kn),Z0,We,lh,ch,K0,He,Br),c_=Ov(ct,l_,Fn,Q0,We,He),uh=new WeakSet,Xg=IS(In),$0=E1(new Uint32Array(1)),dh=Y2($0,Fn),hh=W2($0),J0=Iv(uh,jn,Ft,Xg,ds,F2(Xg),dh,hh),tc=Ev(Xt),ey=R2(oh,Zr,Ti),Vn=w1(ey),Ra=VS(tc,jn,J2,e_,t_,ah,G0,rh,s_,Q2(eo),Y0),Ln=A2(oS(Zr),ey),u_=Lv(Vn,Ra,Ke,Ln,At),An=o1(kv(w0),X0,Jd,l1,xv,bv,vv,Sv,_v,zd,_0,to,H0),d_=Vv(ct,u_,An,vt,Ra,We,He,Ma),h_=Xv(ct,Zv,Fn,vt,US(Xt,eo),We,He,At),f_=y1(Vn,V0,Ke,Ln,At),Ai=N2(W0),p_=g1(ct,An,f_,ec,V0,We,He,Ai),Ys=OS(ji,ch),m_=X2(vt,Ys),Ws=XS(to,m_),g_=S1(Ws,Ke,At),y_=v1(ct,g_,Ws,We,He),x_=C1($r,Ke,At),b_=T1(ct,x_,$r,We,He,K2),v_=$S(tc,Ra,Xt,Ys),Ea=KS(tc,jn,v_,ah,rh),S_=R1(Vn,Ea,Ke,Ln,At),__=M1(ct,An,S_,Ea,We,He,Ma),ty=JS(Ft,eo),T_=O1(ty,Ke,At),C_=N1(ct,T_,ty,We,He,Ai),w_=U1(Vn,L0,Ke,Ln,At),k_=L1(ct,An,w_,L0,We,He,Ai),ny=e2(Ft),j_=X1(Vn,ny,Ke,Ln,At),A_=Q1(ct,An,j_,ny,Ft,We,He,Ai),M_=sS(Vn,Xt,Ke,Ln,At),R_=nS(ct,An,M_,Xt,We,He),E_=i2(ec,vt,Jr,Ft),nc=E2(jn,Xt,Jr,L2(Xt,ds)),D_=gS(Ra,Ke,ds,At,nc),N_=t2(E_),O_=pS(ct,N_,D_,We,He,Ai),z_=Kv(An,Ws,Ea,Jr,Ft,q0,He,eo),sy=new WeakMap,B_=NS(h_,z_,Z0,He,sy,Ma),iy=u2(tc,jn,ah,G0,rh,Y0),I_=_2(Vn,iy,Ke,Ln,At),F_=S2(ct,An,iy,I_,We,He,Ma),ay=j1(Ra),V_=y2(ay,vt,Xt,P0,Ys),sc=g2(ay,vt,V_,P0,Ys,to,eo),L_=h2(Ol,vt,Ws,Xt,Jr,sc,Ft,zl,q0,Ys),ry=d2(L_),U_=w2(Vn,Ws,Ea,Xt,ry,Ke,ds,Ln,At,nc),q_=C2(ct,An,ry,U_,We,He,Ai),P_=f2(Fn),H_=j2(P_,We,new WeakSet,$2),G_=m2(Ws,$r,Xt,sc,Ft,Ys),oy=p2(G_,Ft),Y_=I2(Vn,oy,Ke,Ln,At),W_=B2(ct,An,oy,Y_,We,He),Q_=H2(sc,Ke,At),X_=P2(ct,vt,sc,Q_,We,He,Ai),ly=jS(In),fh=J1(In),cy=new WeakMap,Z_=uS(cy,ds),K_=ly?Av(jn,Ft,K1(In),fh,eS(Tv),We,Z_,He,Br,new WeakMap,new WeakMap,V2(Br,ds),In):void 0,$_=wS(lh,He),J_=I1(uh,jn,B1,Z1,new WeakSet,We,$_,Dl,zr,dh,hh),uy=p1(K_,c_,J0,d_,p_,y_,b_,__,C_,J_,k_,A_,R_,O_,B_,F_,q_,H_,W_,X_),e5=AS(ct,a2,We,He),t5=RS(ct,r2,We,He),n5=ES(ct,o2,We,He),s5=l2(vt,He),i5=DS(ct,s5,We),a5=Qv(uy,vt,Ft,U2,e5,t5,n5,i5,to),ph=dS(sy),r5=Dv(ph),dy=k1(Fn),o5=P1(ph),hy=Y1(Fn),fy=new WeakMap,l5=iS(fy,kn),c5=QS(dy,Fn,vt,Ws,$r,Ea,Xt,Jr,Ft,hy,fh,l5,Ys),u5=HS(vt,c5,Xt,Ft,Ys),d5=f1(Vn,dy,Ra,Ws,$r,Ea,Xt,o5,hy,fh,Ke,Br,ds,Ln,At,nc),h5=lS(cy),f5=D2(fy),Zg=ly?u1(r5,ct,An,d5,u5,It,h5,We,He,Br,Z2,f5,n_,Ma):void 0,p5=z1(Ft,ds),m5=O2(uh,jn,oh,ph,nc,Dl,dh,hh),g5=b2(uy,jn,vt,p5,m5),y5=xS($l,lh),x5=bS($d,ch),b5=vS(Jd,K0),v5=SS($l,He);function vn(o){return o===void 0}function Ee(o){return o!==void 0}function S5(o){return typeof o=="function"}function qs(o){return typeof o=="number"}function bi(o){return Object.prototype.toString.call(o)==="[object Object]"&&o.constructor===Object}function _5(o){return typeof o=="boolean"}function on(o){return Array.isArray(o)}function ls(o){return typeof o=="string"}function wl(o){return ls(o)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(o)}function ve(o,e){if(!o)throw new Error(e)}function cs(o,e,n=1/0){if(!(e<=o&&o<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${o}`)}function py(o){!o.isOffline&&o.state!=="running"&&ic('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let my=!1,Kg=!1;function $g(o){my=o}function T5(o){vn(o)&&my&&!Kg&&(Kg=!0,ic("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let gy=console;function C5(...o){gy.log(...o)}function ic(...o){gy.warn(...o)}function w5(o){return new a5(o)}function k5(o,e,n){return new g5(o,e,n)}const vi=typeof self=="object"?self:null,j5=vi&&(vi.hasOwnProperty("AudioContext")||vi.hasOwnProperty("webkitAudioContext"));function A5(o,e,n){return ve(Ee(Zg),"This node only works in a secure context (https or localhost)"),new Zg(o,e,n)}function Mn(o,e,n,i){var r=arguments.length,l=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(o,e,n,i);else for(var f=o.length-1;f>=0;f--)(d=o[f])&&(l=(r<3?d(l):r>3?d(e,n,l):d(e,n))||l);return r>3&&l&&Object.defineProperty(e,n,l),l}function pt(o,e,n,i){function r(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function f(y){try{m(i.next(y))}catch(x){d(x)}}function g(y){try{m(i.throw(y))}catch(x){d(x)}}function m(y){y.done?l(y.value):r(y.value).then(f,g)}m((i=i.apply(o,e||[])).next())})}class M5{constructor(e,n,i,r){this._callback=e,this._type=n,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=i,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),i=new Worker(n);i.onmessage=this._callback.bind(this),this._worker=i}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var n;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function Ci(o){return b5(o)}function Us(o){return x5(o)}function Ml(o){return v5(o)}function pa(o){return y5(o)}function R5(o){return o instanceof J0}function E5(o,e){return o==="value"||Ci(e)||Us(e)||R5(e)}function Si(o,...e){if(!e.length)return o;const n=e.shift();if(bi(o)&&bi(n))for(const i in n)E5(i,n[i])?o[i]=n[i]:bi(n[i])?(o[i]||Object.assign(o,{[i]:{}}),Si(o[i],n[i])):Object.assign(o,{[i]:n[i]});return Si(o,...e)}function D5(o,e){return o.length===e.length&&o.every((n,i)=>e[i]===n)}function ce(o,e,n=[],i){const r={},l=Array.from(e);if(bi(l[0])&&i&&!Reflect.has(l[0],i)&&(Object.keys(l[0]).some(f=>Reflect.has(o,f))||(Si(r,{[i]:l[0]}),n.splice(n.indexOf(i),1),l.shift())),l.length===1&&bi(l[0]))Si(r,l[0]);else for(let d=0;d<n.length;d++)Ee(l[d])&&(r[n[d]]=l[d]);return Si(o,r)}function N5(o){return o.constructor.getDefaults()}function xa(o,e){return vn(o)?e:o}function Pd(o,e){return e.forEach(n=>{Reflect.has(o,n)&&delete o[n]}),o}class hs{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||vi&&this.toString()===vi.TONE_DEBUG_CLASS)&&C5(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}hs.version=S0;const mh=1e-6;function Sa(o,e){return o>e+mh}function Hd(o,e){return Sa(o,e)||Cn(o,e)}function Vl(o,e){return o+mh<e}function Cn(o,e){return Math.abs(o-e)<mh}function O5(o,e,n){return Math.max(Math.min(o,n),e)}let Bn=class yy extends hs{constructor(){super(),this.name="Timeline",this._timeline=[];const e=ce(yy.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(ve(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];ve(Hd(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const i=this._search(e,n);return i!==-1?this._timeline[i]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const i=this._search(e,n);return i+1<this._timeline.length?this._timeline[i+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const i=this._search(e);return i-1>=0?this._timeline[i-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(Cn(this._timeline[n].time,e)){for(let i=n;i>=0&&Cn(this._timeline[i].time,e);i--)n=i;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&Hd(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let i=0;const r=this._timeline.length;let l=r;if(r>0&&this._timeline[r-1][n]<=e)return r-1;for(;i<l;){let d=Math.floor(i+(l-i)/2);const f=this._timeline[d],g=this._timeline[d+1];if(Cn(f[n],e)){for(let m=d;m<this._timeline.length;m++){const y=this._timeline[m];if(Cn(y[n],e))d=m;else break}return d}else{if(Vl(f[n],e)&&Sa(g[n],e))return d;Sa(f[n],e)?l=d:i=d+1}}return-1}_iterate(e,n=0,i=this._timeline.length-1){this._timeline.slice(n,i+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const i=this._search(e);return i!==-1&&this._iterate(n,0,i),this}forEachAfter(e,n){const i=this._search(e);return this._iterate(n,i+1),this}forEachBetween(e,n,i){let r=this._search(e),l=this._search(n);return r!==-1&&l!==-1?(this._timeline[r].time!==e&&(r+=1),this._timeline[l].time===n&&(l-=1),this._iterate(i,r,l)):r===-1&&this._iterate(i,0,l),this}forEachFrom(e,n){let i=this._search(e);for(;i>=0&&this._timeline[i].time>=e;)i--;return this._iterate(n,i+1),this}forEachAtTime(e,n){const i=this._search(e);if(i!==-1&&Cn(this._timeline[i].time,e)){let r=i;for(let l=i;l>=0&&Cn(this._timeline[l].time,e);l--)r=l;this._iterate(l=>{n(l)},r,i)}return this}dispose(){return super.dispose(),this._timeline=[],this}};const xy=[];function ac(o){xy.push(o)}function z5(o){xy.forEach(e=>e(o))}const by=[];function rc(o){by.push(o)}function B5(o){by.forEach(e=>e(o))}class no extends hs{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(r=>{vn(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(n)}),this}once(e,n){const i=(...r)=>{n(...r),this.off(e,i)};return this.on(e,i),this}off(e,n){return e.split(/\W+/).forEach(r=>{if(vn(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(vn(n))this._events[r]=[];else{const l=this._events[r];for(let d=l.length-1;d>=0;d--)l[d]===n&&l.splice(d,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const i=this._events[e].slice(0);for(let r=0,l=i.length;r<l;r++)i[r].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const i=Object.getOwnPropertyDescriptor(no.prototype,n);Object.defineProperty(e.prototype,n,i)})}dispose(){return super.dispose(),this._events=void 0,this}}class vy extends no{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class so extends vy{constructor(){var e,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new Bn,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const i=ce(so.getDefaults(),arguments,["context"]);i.context?(this._context=i.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=w5({latencyHint:i.latencyHint}),this._latencyHint=i.latencyHint),this._ticker=new M5(this.emit.bind(this,"tick"),i.clockSource,i.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=i.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(z5(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,i){return this._context.createBuffer(e,n,i)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,i){return this._context.createPeriodicWave(e,n,i)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return ve(pa(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return ve(pa(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return ve(pa(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){ve(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){ve(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){ve(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){ve(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return A5(this.rawContext,e,n)}addAudioWorkletModule(e){return pt(this,void 0,void 0,function*(){ve(Ee(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return pt(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return pa(this._context)?this._context.resume():Promise.resolve()}close(){return pt(this,void 0,void 0,function*(){pa(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&B5(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),i=n.getChannelData(0);for(let l=0;l<i.length;l++)i[l]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=n,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();let n=this._timeouts.peek();for(;this._timeouts.length&&n&&n.time<=e;)n.callback(),this._timeouts.shift(),n=this._timeouts.peek()}setTimeout(e,n){this._timeoutIds++;const i=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:i+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const i=++this._timeoutIds,r=()=>{const l=this.now();this._timeouts.add({callback:()=>{e(),r()},id:i,time:l+n})};return r(),i}}class I5 extends vy{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,i){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,i){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return pt(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function it(o,e){on(e)?e.forEach(n=>it(o,n)):Object.defineProperty(o,e,{enumerable:!0,writable:!1})}function Sy(o,e){on(e)?e.forEach(n=>Sy(o,n)):Object.defineProperty(o,e,{writable:!0})}const Pe=()=>{};class Ze extends hs{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Pe;const e=ce(Ze.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,ls(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:Pe,onload:Pe,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Et().sampleRate}set(e){return e instanceof Ze?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return pt(this,void 0,void 0,function*(){const n=Ze.load(e).then(i=>{this.set(i),this.onload(this)});Ze.downloads.push(n);try{yield n}finally{const i=Ze.downloads.indexOf(n);Ze.downloads.splice(i,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=on(e)&&e[0].length>0,i=n?e.length:1,r=n?e[0].length:e.length,l=Et(),d=l.createBuffer(i,r,l.sampleRate),f=!n&&i===1?[e]:e;for(let g=0;g<i;g++)d.copyToChannel(f[g],g);return this._buffer=d,this}toMono(e){if(qs(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const i=this.numberOfChannels;for(let r=0;r<i;r++){const l=this.toArray(r);for(let d=0;d<l.length;d++)n[d]+=l[d]}n=n.map(r=>r/i),this.fromArray(n)}return this}toArray(e){if(qs(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let i=0;i<this.numberOfChannels;i++)n[i]=this.getChannelData(i);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){ve(this.loaded,"Buffer is not loaded");const i=Math.floor(e*this.sampleRate),r=Math.floor(n*this.sampleRate);ve(i<r,"The start time must be less than the end time");const l=r-i,d=Et().createBuffer(this.numberOfChannels,l,this.sampleRate);for(let f=0;f<this.numberOfChannels;f++)d.copyToChannel(this.getChannelData(f).subarray(i,r),f);return new Ze(d)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Ze().fromArray(e)}static fromUrl(e){return pt(this,void 0,void 0,function*(){return yield new Ze().load(e)})}static load(e){return pt(this,void 0,void 0,function*(){const n=e.match(/\[([^\]\[]+\|.+)\]$/);if(n){const g=n[1].split("|");let m=g[0];for(const y of g)if(Ze.supportsType(y)){m=y;break}e=e.replace(n[0],m)}const i=Ze.baseUrl===""||Ze.baseUrl.endsWith("/")?Ze.baseUrl:Ze.baseUrl+"/",r=document.createElement("a");r.href=i+e,r.pathname=(r.pathname+r.hash).split("/").map(encodeURIComponent).join("/");const l=yield fetch(r.href);if(!l.ok)throw new Error(`could not load url: ${e}`);const d=yield l.arrayBuffer();return yield Et().decodeAudioData(d)})}static supportsType(e){const n=e.split("."),i=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+i)!==""}static loaded(){return pt(this,void 0,void 0,function*(){for(yield Promise.resolve();Ze.downloads.length;)yield Ze.downloads[0]})}}Ze.baseUrl="";Ze.downloads=[];class gh extends so{constructor(){super({clockSource:"offline",context:Ml(arguments[0])?arguments[0]:k5(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Ml(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Ml(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return pt(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const i=Math.floor(this.sampleRate/128);e&&n%i===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(e=!0){return pt(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new Ze(n)})}close(){return Promise.resolve()}}const _y=new I5;let yi=_y;function Et(){return yi===_y&&j5&&F5(new so),yi}function F5(o,e=!1){e&&yi.dispose(),pa(o)?yi=new so(o):Ml(o)?yi=new gh(o):yi=o}function Da(){return yi.resume()}if(vi&&!vi.TONE_SILENCE_LOGGING){const e=` * Tone.js v${S0} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function V5(o){return Math.pow(10,o/20)}function Ty(o){return 20*(Math.log(o)/Math.LN10)}function Cy(o){return Math.pow(2,o/12)}let oc=440;function L5(){return oc}function U5(o){oc=o}function xi(o){return Math.round(wy(o))}function wy(o){return 69+12*Math.log2(o/oc)}function ky(o){return oc*Math.pow(2,(o-69)/12)}class yh extends hs{constructor(e,n,i){super(),this.defaultUnits="s",this._val=n,this._units=i,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const i=parseInt(e,10),r=n==="."?1.5:1;return i===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/i)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,i)=>{let r=0;return e&&e!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(r+=this._beatsToUnits(parseFloat(n))),i&&i!=="0"&&(r+=this._beatsToUnits(parseFloat(i)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof yh&&this.fromType(this._val),vn(this._val))return this._noArg();if(ls(this._val)&&vn(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(bi(this._val)){let e=0;for(const n in this._val)if(Ee(this._val[n])){const i=this._val[n],r=new this.constructor(this.context,n).valueOf()*i;e+=r}return e}if(Ee(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return ls(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class wn extends yh{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new wn(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const i=new this.constructor(this.context,e).valueOf(),r=this.valueOf(),f=Math.round(r/i)*i-r;return r+f*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let l=1;l<9;l++){const d=Math.pow(2,l);n.push(d+"n."),n.push(d+"n"),n.push(d+"t")}n.push("0");let i=n[0],r=new wn(this.context,n[0]).toSeconds();return n.forEach(l=>{const d=new wn(this.context,l).toSeconds();Math.abs(d-e)<Math.abs(r-e)&&(i=l,r=d)}),i}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const i=Math.floor(n/this._getTimeSignature());let r=n%1*4;n=Math.floor(n)%this._getTimeSignature();const l=r.toString();return l.length>3&&(r=parseFloat(parseFloat(l).toFixed(3))),[i,n,r].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return xi(this.toFrequency())}_now(){return this.context.now()}}class Wt extends wn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return L5()}static set A4(e){U5(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:Wt.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,n){const r=q5[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?r:Wt.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,i){let r=1;return e&&e!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(r*=this._beatsToUnits(parseFloat(n))),i&&i!=="0"&&(r*=this._beatsToUnits(parseFloat(i)/4)),r}}})}transpose(e){return new Wt(this.context,this.valueOf()*Cy(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return xi(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/Wt.A4);let i=Math.round(12*n)+57;const r=Math.floor(i/12);return r<0&&(i+=-12*r),P5[i%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return ky(e)}static ftom(e){return xi(e)}}const q5={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},P5=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Jg(o,e){return new Wt(Et(),o,e)}class Nr extends wn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Qt extends hs{constructor(){super();const e=ce(Qt.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Et()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return T5(e),new wn(this.context,e).toSeconds()}toFrequency(e){return new Wt(this.context,e).toFrequency()}toTicks(e){return new Nr(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(i=>{vn(e[i])&&delete n[i]}),n}get(){const e=N5(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const i=this[n];Ee(i)&&Ee(i.value)&&Ee(i.setValueAtTime)?e[n]=i.value:i instanceof Qt?e[n]=i._getPartialProperties(e[n]):on(i)||qs(i)||ls(i)||_5(i)?e[n]=i:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&Ee(this[n])&&(this[n]&&Ee(this[n].value)&&Ee(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof Qt?this[n].set(e[n]):this[n]=e[n])}),this}}class xh extends Bn{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,i){return cs(n,0),this.add(Object.assign({},i,{state:e,time:n})),this}getLastState(e,n){const i=this._search(n);for(let r=i;r>=0;r--){const l=this._timeline[r];if(l.state===e)return l}}getNextState(e,n){const i=this._search(n);if(i!==-1)for(let r=i;r<this._timeline.length;r++){const l=this._timeline[r];if(l.state===e)return l}}}class Je extends Qt{constructor(){super(ce(Je.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=ce(Je.getDefaults(),arguments,["param","units","convert"]);for(ve(Ee(e.param)&&(Ci(e.param)||e.param instanceof Je),"param must be an AudioParam");!Ci(e.param);)e.param=e.param._param;this._swappable=Ee(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Bn(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Ee(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Qt.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Ee(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return Ee(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return Ee(this.maxValue)&&Ee(this.minValue)&&cs(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?V5(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?Ty(e):e}setValueAtTime(e,n){const i=this.toSeconds(n),r=this._fromType(e);return ve(isFinite(r)&&isFinite(i),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,i),this._events.add({time:i,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,i),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),i=this._events.getAfter(n),r=this._events.get(n);let l=this._initialValue;if(r===null)l=this._initialValue;else if(r.type==="setTargetAtTime"&&(i===null||i.type==="setValueAtTime")){const d=this._events.getBefore(r.time);let f;d===null?f=this._initialValue:f=d.value,r.type==="setTargetAtTime"&&(l=this._exponentialApproach(r.time,f,r.value,r.constant,n))}else if(i===null)l=r.value;else if(i.type==="linearRampToValueAtTime"||i.type==="exponentialRampToValueAtTime"){let d=r.value;if(r.type==="setTargetAtTime"){const f=this._events.getBefore(r.time);f===null?d=this._initialValue:d=f.value}i.type==="linearRampToValueAtTime"?l=this._linearInterpolate(r.time,d,i.time,i.value,n):l=this._exponentialInterpolate(r.time,d,i.time,i.value,n)}else l=r.value;return this._toType(l)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const i=this._fromType(e),r=this.toSeconds(n);return ve(isFinite(i)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(i),this._events.add({time:r,type:"linearRampToValueAtTime",value:i}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(i,r),this}exponentialRampToValueAtTime(e,n){let i=this._fromType(e);i=Cn(i,0)?this._minOutput:i,this._assertRange(i);const r=this.toSeconds(n);return ve(isFinite(i)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:i}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(i,r),this}exponentialRampTo(e,n,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(e,i+this.toSeconds(n)),this}linearRampTo(e,n,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(e,i+this.toSeconds(n)),this}targetRampTo(e,n,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialApproachValueAtTime(e,i,n),this}exponentialApproachValueAtTime(e,n,i){n=this.toSeconds(n),i=this.toSeconds(i);const r=Math.log(i+1)/Math.log(200);return this.setTargetAtTime(e,n,r),this.cancelAndHoldAtTime(n+i*.9),this.linearRampToValueAtTime(e,n+i),this}setTargetAtTime(e,n,i){const r=this._fromType(e);ve(isFinite(i)&&i>0,"timeConstant must be a number greater than 0");const l=this.toSeconds(n);return this._assertRange(r),ve(isFinite(r)&&isFinite(l),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:i,time:l,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,l,i),this._param.setTargetAtTime(r,l,i),this}setValueCurveAtTime(e,n,i,r=1){i=this.toSeconds(i),n=this.toSeconds(n);const l=this._fromType(e[0])*r;this.setValueAtTime(this._toType(l),n);const d=i/(e.length-1);for(let f=1;f<e.length;f++){const g=this._fromType(e[f])*r;this.linearRampToValueAtTime(this._toType(g),n+f*d)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return ve(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),i=this._fromType(this.getValueAtTime(n));ve(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+i);const r=this._events.get(n),l=this._events.getAfter(n);return r&&Cn(r.time,n)?l?(this._param.cancelScheduledValues(l.time),this._events.cancel(l.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):l&&(this._param.cancelScheduledValues(l.time),this._events.cancel(l.time),l.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(i),n):l.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(i),n)),this._events.add({time:n,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,n),this}rampTo(e,n=.1,i){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,i):this.linearRampTo(e,n,i),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const i=this._events.get(n);if(i&&i.type==="setTargetAtTime"){const r=this._events.getAfter(i.time),l=r?r.time:n+2,d=(l-n)/10;for(let f=n;f<l;f+=d)e.linearRampToValueAtTime(this.getValueAtTime(f),f)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?e.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){ve(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,i,r,l){return i+(n-i)*Math.exp(-(l-e)/r)}_linearInterpolate(e,n,i,r,l){return n+(r-n)*((l-e)/(i-e))}_exponentialInterpolate(e,n,i,r,l){return n*Math.pow(r/n,(l-e)/(i-e))}}class Ce extends Qt{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return Ee(this.input)?Ci(this.input)||this.input instanceof Je?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Ee(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Ee(e)&&(e instanceof Ce||Us(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(i=>{i.channelCount=e.channelCount,i.channelCountMode=e.channelCountMode,i.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();ve(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,i=0){return Na(this,e,n,i),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return ic("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,i=0){return H5(this,e,n,i),this}chain(...e){return Gd(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),Ee(this.input)&&(this.input instanceof Ce?this.input.dispose():Us(this.input)&&this.input.disconnect()),Ee(this.output)&&(this.output instanceof Ce?this.output.dispose():Us(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Gd(...o){const e=o.shift();o.reduce((n,i)=>(n instanceof Ce?n.connect(i):Us(n)&&Na(n,i),i),e)}function Na(o,e,n=0,i=0){for(ve(Ee(o),"Cannot connect from undefined node"),ve(Ee(e),"Cannot connect to undefined node"),(e instanceof Ce||Us(e))&&ve(e.numberOfInputs>0,"Cannot connect to node with no inputs"),ve(o.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof Ce||e instanceof Je;)Ee(e.input)&&(e=e.input);for(;o instanceof Ce;)Ee(o.output)&&(o=o.output);Ci(e)?o.connect(e,n):o.connect(e,n,i)}function H5(o,e,n=0,i=0){if(Ee(e))for(;e instanceof Ce;)e=e.input;for(;!Us(o);)Ee(o.output)&&(o=o.output);Ci(e)?o.disconnect(e,n):Us(e)?o.disconnect(e,n,i):o.disconnect()}class St extends Ce{constructor(){super(ce(St.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=ce(St.getDefaults(),arguments,["gain","units"]);this.gain=new Je({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),it(this,"gain")}static getDefaults(){return Object.assign(Ce.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class _a extends Ce{constructor(e){super(e),this.onended=Pe,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new St({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const i=this.toSeconds(n);return this._startTime!==-1&&i>=this._startTime&&(this._stopTime===-1||i<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(Ce.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Pe})}_startGain(e,n=1){ve(this._startTime===-1,"Source cannot be started more than once");const i=this.toSeconds(this._fadeIn);return this._startTime=e+i,this._startTime=Math.max(this._startTime,this.context.currentTime),i>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+i):this._gainNode.gain.exponentialApproachValueAtTime(n,e,i)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){ve(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const i=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+i),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Pe&&(this.onended(this),this.onended=Pe,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),ve(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Pe,this}}class Ll extends _a{constructor(){super(ce(Ll.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=ce(Ll.getDefaults(),arguments,["offset"]);Na(this._source,this._gainNode),this.offset=new Je({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(_a.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class yt extends Ce{constructor(){super(ce(yt.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=ce(yt.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Ll({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Ce.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,i=0){return bh(this,e,n,i),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,i){return this._param.exponentialRampTo(e,n,i),this}linearRampTo(e,n,i){return this._param.linearRampTo(e,n,i),this}targetRampTo(e,n,i){return this._param.targetRampTo(e,n,i),this}exponentialApproachValueAtTime(e,n,i){return this._param.exponentialApproachValueAtTime(e,n,i),this}setTargetAtTime(e,n,i){return this._param.setTargetAtTime(e,n,i),this}setValueCurveAtTime(e,n,i,r){return this._param.setValueCurveAtTime(e,n,i,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,i){return this._param.rampTo(e,n,i),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function bh(o,e,n,i){(e instanceof Je||Ci(e)||e instanceof yt&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof yt&&(e.overridden=!0)),Na(o,e,n,i)}class Ul extends Je{constructor(){super(ce(Ul.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Bn(1/0),this._multiplier=1;const e=ce(Ul.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Je.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,i){n=this.toSeconds(n),this.setRampPoint(n);const r=this._fromType(e),l=this._events.get(n),d=Math.round(Math.max(1/i,1));for(let f=0;f<=d;f++){const g=i*f+n,m=this._exponentialApproach(l.time,l.value,r,i,g);this.linearRampToValueAtTime(this._toType(m),g)}return this}setValueAtTime(e,n){const i=this.toSeconds(n);super.setValueAtTime(e,n);const r=this._events.get(i),l=this._events.previousEvent(r),d=this._getTicksUntilEvent(l,i);return r.ticks=Math.max(d,0),this}linearRampToValueAtTime(e,n){const i=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const r=this._events.get(i),l=this._events.previousEvent(r),d=this._getTicksUntilEvent(l,i);return r.ticks=Math.max(d,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const i=this._fromType(e),r=this._events.get(n),l=Math.round(Math.max((n-r.time)*10,1)),d=(n-r.time)/l;for(let f=0;f<=l;f++){const g=d*f+r.time,m=this._exponentialInterpolate(r.time,r.value,n,i,g);this.linearRampToValueAtTime(this._toType(m),g)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(vn(e.ticks)){const d=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(d,e.time)}const i=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(n));const l=this._events.get(n);return l&&l.time===n&&l.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(i+r)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),i=this._events.get(n);return Math.max(this._getTicksUntilEvent(i,n),0)}getDurationOfTicks(e,n){const i=this.toSeconds(n),r=this.getTicksAtTime(n);return this.getTimeOfTick(r+e)-i}getTimeOfTick(e){const n=this._events.get(e,"ticks"),i=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&i&&i.type==="linearRampToValueAtTime"&&n.value!==i.value){const r=this._fromType(this.getValueAtTime(n.time)),d=(this._fromType(this.getValueAtTime(i.time))-r)/(i.time-n.time),f=Math.sqrt(Math.pow(r,2)-2*d*(n.ticks-e)),g=(-r+f)/d,m=(-r-f)/d;return(g>0?g:m)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const i=this.toSeconds(n),r=this.toSeconds(e),l=this.getTicksAtTime(i);return this.getTicksAtTime(i+r)-l}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class ql extends yt{constructor(){super(ce(ql.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=ce(ql.getDefaults(),arguments,["value"]);this.input=this._param=new Ul({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(yt.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Pl extends Qt{constructor(){super(ce(Pl.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new xh,this._tickOffset=new Bn,this._ticksAtTime=new Bn,this._secondsAtTime=new Bn;const e=ce(Pl.getDefaults(),arguments,["frequency"]);this.frequency=new ql({context:this.context,units:e.units,value:e.frequency}),it(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Qt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const i=this.toSeconds(e);return this._state.getValueAtTime(i)!=="started"&&(this._state.setStateAtTime("started",i),Ee(n)&&this.setTicksAtTime(n,i),this._ticksAtTime.cancel(i),this._secondsAtTime.cancel(i)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const i=this._state.get(n);i&&i.time>0&&(this._tickOffset.cancel(i.time),this._state.cancel(i.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),i=this._state.getLastState("stopped",n),r=this._ticksAtTime.get(n),l={state:"paused",time:n};this._state.add(l);let d=r||i,f=r?r.ticks:0,g=null;return this._state.forEachBetween(d.time,n+this.sampleTime,m=>{let y=d.time;const x=this._tickOffset.get(m.time);x&&x.time>=d.time&&(f=x.ticks,y=x.time),d.state==="started"&&m.state!=="started"&&(f+=this.frequency.getTicksAtTime(m.time)-this.frequency.getTicksAtTime(y),m.time!==l.time&&(g={state:m.state,time:m.time,ticks:f})),d=m}),this._state.remove(l),g&&this._ticksAtTime.add(g),f}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),i=this.frequency.timeToTicks(e,n);this.setTicksAtTime(i,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),i={state:"paused",time:e};this._state.add(i);const r=this._secondsAtTime.get(e);let l=r||n,d=r?r.seconds:0,f=null;return this._state.forEachBetween(l.time,e+this.sampleTime,g=>{let m=l.time;const y=this._tickOffset.get(g.time);y&&y.time>=l.time&&(d=y.seconds,m=y.time),l.state==="started"&&g.state!=="started"&&(d+=g.time-m,g.time!==i.time&&(f={state:g.state,time:g.time,seconds:d})),l=g}),this._state.remove(i),f&&this._secondsAtTime.add(f),d}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const i=this._tickOffset.get(n),r=this._state.get(n),l=Math.max(i.time,r.time),d=this.frequency.getTicksAtTime(l)+e-i.ticks;return this.frequency.getTimeOfTick(d)}forEachTickBetween(e,n,i){let r=this._state.get(e);this._state.forEachBetween(e,n,d=>{r&&r.state==="started"&&d.state!=="started"&&this.forEachTickBetween(Math.max(r.time,e),d.time-this.sampleTime,i),r=d});let l=null;if(r&&r.state==="started"){const d=Math.max(r.time,e),f=this.frequency.getTicksAtTime(d),g=this.frequency.getTicksAtTime(r.time),m=f-g;let y=Math.ceil(m)-m;y=Cn(y,1)?0:y;let x=this.frequency.getTimeOfTick(f+y);for(;x<n;){try{i(x,Math.round(this.getTicksAtTime(x)))}catch(b){l=b;break}x+=this.frequency.getDurationOfTicks(1,x)}}if(l)throw l;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Ir extends Qt{constructor(){super(ce(Ir.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Pe,this._lastUpdate=0,this._state=new xh("stopped"),this._boundLoop=this._loop.bind(this);const e=ce(Ir.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new Pl({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,it(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Qt.getDefaults(),{callback:Pe,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){py(this.context);const i=this.toSeconds(e);return this.log("start",i),this._state.getValueAtTime(i)!=="started"&&(this._state.setStateAtTime("started",i),this._tickSource.start(i,n),i<this._lastUpdate&&this.emit("start",i,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const i=this.toSeconds(n),r=this.getTicksAtTime(i);return this._tickSource.getTimeOfTick(r+e,i)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,i=>{switch(i.state){case"started":const r=this._tickSource.getTicksAtTime(i.time);this.emit("start",i.time,r);break;case"stopped":i.time!==0&&this.emit("stop",i.time);break;case"paused":this.emit("pause",i.time);break}}),this._tickSource.forEachTickBetween(e,n,(i,r)=>{this.callback(i,r)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}no.mixin(Ir);class vh extends hs{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=ce(vh.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const i=e.urls[n];this.add(n,i,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Pe,onload:Pe,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return ve(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,i=Pe,r=Pe){return ls(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Ze(this.baseUrl+n,i,r))):this._buffers.set(e.toString(),new Ze(n,i,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Hl extends Wt{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return xi(super._frequencyToUnits(e))}_ticksToUnits(e){return xi(super._ticksToUnits(e))}_beatsToUnits(e){return xi(super._beatsToUnits(e))}_secondsToUnits(e){return xi(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return ky(this.toMidi())}transpose(e){return new Hl(this.context,this.toMidi()+e)}}class ga extends Nr{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class G5 extends Qt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Bn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const n=this._events.shift();n&&e-n.time<=this.expiration&&n.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}ac(o=>{o.draw=new G5({context:o})});rc(o=>{o.draw.dispose()});class Y5 extends hs{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){ve(Ee(e.time),"Events must have a time property"),ve(Ee(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new W5(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const i of n)if(i.event===e){this._removeNode(i),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let i,r=null;if(n>0)if(e.left.right===null)i=e.left,i.right=e.right,r=i;else{for(i=e.left.right;i.right!==null;)i=i.right;i.parent&&(i.parent.right=i.left,r=i.parent,i.left=e.left,i.right=e.right)}else if(e.right.left===null)i=e.right,i.left=e.left,r=i;else{for(i=e.right.left;i.left!==null;)i=i.left;i.parent&&(i.parent.left=i.right,r=i.parent,i.left=e.left,i.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=i:e.parent.right=i:this._setRoot(i),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const n=e.parent,i=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),n!==null?i?n.left=r:n.right=r:this._setRoot(r)}_rotateRight(e){const n=e.parent,i=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),n!==null?i?n.left=r:n.right=r:this._setRoot(r)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let i=n[0];for(let r=1;r<n.length;r++)n[r].low>i.low&&(i=n[r]);return i.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(i=>n.push(i)),n.forEach(i=>{i.event&&e(i.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const i=[];this._root.search(e,i),i.forEach(r=>{r.event&&n(r.event)})}return this}forEachFrom(e,n){if(this._root!==null){const i=[];this._root.searchAfter(e,i),i.forEach(r=>{r.event&&n(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class W5{constructor(e,n,i){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=i,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class wi extends Ce{constructor(){super(ce(wi.getDefaults(),arguments,["volume"])),this.name="Volume";const e=ce(wi.getDefaults(),arguments,["volume"]);this.input=this.output=new St({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,it(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(Ce.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Gl extends Ce{constructor(){super(ce(Gl.getDefaults(),arguments)),this.name="Destination",this.input=new wi({context:this.context}),this.output=new St({context:this.context}),this.volume=this.input.volume;const e=ce(Gl.getDefaults(),arguments);Gd(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Ce.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Gd(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}ac(o=>{o.destination=new Gl({context:o})});rc(o=>{o.destination.dispose()});class Q5 extends hs{constructor(e){super(),this.name="TimelineValue",this._timeline=new Bn({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class Ta extends Ce{constructor(){super(Object.assign(ce(Ta.getDefaults(),arguments,["context"])))}connect(e,n=0,i=0){return bh(this,e,n,i),this}}class Ca extends Ta{constructor(){super(Object.assign(ce(Ca.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=ce(Ca.getDefaults(),arguments,["mapping","length"]);on(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):S5(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(yt.getDefaults(),{length:1024})}setMap(e,n=1024){const i=new Float32Array(n);for(let r=0,l=n;r<l;r++){const d=r/(l-1)*2-1;i[r]=e(d,r)}return this.curve=i,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(i=>i.includes(e));ve(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Yl extends Ta{constructor(){super(Object.assign(ce(Yl.getDefaults(),arguments,["value"]))),this.name="Pow";const e=ce(Yl.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new Ca({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Ta.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Ps{constructor(e,n){this.id=Ps._eventId++,this._remainderTime=0;const i=Object.assign(Ps.getDefaults(),n);this.transport=e,this.callback=i.callback,this._once=i.once,this.time=Math.floor(i.time),this._remainderTime=i.time-this.time}static getDefaults(){return{callback:Pe,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const n=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*n),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Ps._eventId=0;class Sh extends Ps{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const i=Object.assign(Sh.getDefaults(),n);this.duration=i.duration,this._interval=i.interval,this._nextTick=i.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Ps.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return Vl(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new ga(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){Vl(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ga(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(e);Sa(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Fr extends Qt{constructor(){super(ce(Fr.getDefaults(),arguments)),this.name="Transport",this._loop=new Q5(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Bn,this._repeatedEvents=new Y5,this._syncedSignals=[],this._swingAmount=0;const e=ce(Fr.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new Ir({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),it(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Qt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const i=n%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(i*Math.PI)*this._swingAmount;e+=new ga(this.context,this._swingTicks*2/3).toSeconds()*r}$g(!0),this._timeline.forEachAtTime(n,i=>i.invoke(e)),$g(!1)}schedule(e,n){const i=new Ps(this,{callback:e,time:new Nr(this.context,n).toTicks()});return this._addEvent(i,this._timeline)}scheduleRepeat(e,n,i,r=1/0){const l=new Sh(this,{callback:e,duration:new wn(this.context,r).toTicks(),interval:new wn(this.context,n).toTicks(),time:new Nr(this.context,i).toTicks()});return this._addEvent(l,this._repeatedEvents)}scheduleOnce(e,n){const i=new Ps(this,{callback:e,once:!0,time:new Nr(this.context,n).toTicks()});return this._addEvent(i,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,i=>this.clear(i.id)),this._repeatedEvents.forEachFrom(n,i=>this.clear(i.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new ga(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){this.context.resume();let i;return Ee(n)&&(i=this.toTicks(n)),this._clock.start(e,i),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){on(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new wn(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new wn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new ga(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new ga(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),i=this._clock.frequency.timeToTicks(e,n);this.ticks=i}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const i=this._clock.getTicksAtTime(n),r=this._clock.frequency.getDurationOfTicks(Math.ceil(i)-i,n),l=n+r;this.emit("stop",l),this._clock.setTicksAtTime(e,l),this.emit("start",l,this._clock.getSecondsAtTime(l))}else this.emit("ticks",n),this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),i=this.getTicksAtTime(n),r=e-i%e;return this._clock.nextTickTime(r,n)}}syncSignal(e,n){const i=this.now();let r=this.bpm,l=1/(60/r.getValueAtTime(i)/this.PPQ),d=[];if(e.units==="time"){const g=.015625/l,m=new St(g),y=new Yl(-1),x=new St(g);r.chain(m,y,x),r=x,l=1/l,d=[m,y,x]}n||(e.getValueAtTime(i)!==0?n=e.getValueAtTime(i)/l:n=0);const f=new St(n);return r.connect(f),f.connect(e._param),d.push(f),this._syncedSignals.push({initial:e.value,nodes:d,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const i=this._syncedSignals[n];i.signal===e&&(i.nodes.forEach(r=>r.dispose()),i.signal.value=i.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Sy(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}no.mixin(Fr);ac(o=>{o.transport=new Fr({context:o})});rc(o=>{o.transport.dispose()});class ln extends Ce{constructor(e){super(e),this.input=void 0,this._state=new xh("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Pe,this._syncedStop=Pe,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new wi({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,it(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(Ce.getDefaults(),{mute:!1,onstop:Pe,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,i){let r=vn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")ve(Sa(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,n,i);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const l=this._state.get(r);l&&(l.offset=this.toSeconds(xa(n,0)),l.duration=i?this.toSeconds(i):void 0);const d=this.context.transport.schedule(f=>{this._start(f,n,i)},r);this._scheduled.push(d),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else py(this.context),this._start(r,n,i);return this}stop(e){let n=vn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||Ee(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const i=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(i)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,i){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,i)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(Sa(n,0)){const i=this._state.get(n);if(i&&i.state==="started"&&i.time!==n){const r=n-this.toSeconds(i.time);let l;i.duration&&(l=this.toSeconds(i.duration)-r),this._start(e,this.toSeconds(i.offset)+r,l)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Pe,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Vr extends _a{constructor(){super(ce(Vr.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=ce(Vr.getDefaults(),arguments,["url","onload"]);Na(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Je({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Ze(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(_a.getDefaults(),{url:new Ze,loop:!1,loopEnd:0,loopStart:0,onload:Pe,onerror:Pe,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,i,r=1){ve(this.buffer.loaded,"buffer is either not set or not loaded");const l=this.toSeconds(e);this._startGain(l,r),this.loop?n=xa(n,this.loopStart):n=xa(n,0);let d=Math.max(this.toSeconds(n),0);if(this.loop){const f=this.toSeconds(this.loopEnd)||this.buffer.duration,g=this.toSeconds(this.loopStart),m=f-g;Hd(d,f)&&(d=(d-g)%m+g),Cn(d,this.buffer.duration)&&(d=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Vl(d,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(l,d)),Ee(i)){let f=this.toSeconds(i);f=Math.max(f,0),this.stop(l+f)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Mi(o,e){return pt(this,void 0,void 0,function*(){const n=e/o.context.sampleRate,i=new gh(1,n,o.context.sampleRate);return new o.constructor(Object.assign(o.get(),{frequency:2/n,detune:0,context:i})).toDestination().start(0),(yield i.render()).getChannelData(0)})}class Wl extends _a{constructor(){super(ce(Wl.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=ce(Wl.getDefaults(),arguments,["frequency","type"]);Na(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Je({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Je({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),it(this,["frequency","detune"])}static getDefaults(){return Object.assign(_a.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class lt extends ln{constructor(){super(ce(lt.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const e=ce(lt.getDefaults(),arguments,["frequency","type"]);this.frequency=new yt({context:this.context,units:"frequency",value:e.frequency}),it(this,"frequency"),this.detune=new yt({context:this.context,units:"cents",value:e.detune}),it(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(ln.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),i=new Wl({context:this.context,onended:()=>this.onstop(this)});this._oscillator=i,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return lt._periodicWaveCache.find(n=>n.phase===this._phase&&D5(n.partials,this._partials));{const e=lt._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const i=this._getCachedPeriodicWave();if(Ee(i)){const{partials:r,wave:l}=i;this._wave=l,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,l]=this._getRealImaginary(e,this._phase),d=this.context.createPeriodicWave(r,l);this._wave=d,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),lt._periodicWaveCache.push({imag:l,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),lt._periodicWaveCache.length>100&&lt._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){cs(e,0);let n=this._type;const i=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(i&&(n=i[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const r=new Float32Array(e);this._partials.forEach((l,d)=>r[d]=l),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(e,n){let r=2048;const l=new Float32Array(r),d=new Float32Array(r);let f=1;if(e==="custom"){if(f=this._partials.length+1,this._partialCount=this._partials.length,r=f,this._partials.length===0)return[l,d]}else{const g=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);g?(f=parseInt(g[2],10)+1,this._partialCount=parseInt(g[2],10),e=g[1],f=Math.max(f,2),r=f):this._partialCount=0,this._partials=[]}for(let g=1;g<r;++g){const m=2/(g*Math.PI);let y;switch(e){case"sine":y=g<=f?1:0,this._partials[g-1]=y;break;case"square":y=g&1?2*m:0,this._partials[g-1]=y;break;case"sawtooth":y=m*(g&1?1:-1),this._partials[g-1]=y;break;case"triangle":g&1?y=2*(m*m)*(g-1>>1&1?-1:1):y=0,this._partials[g-1]=y;break;case"custom":y=this._partials[g-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}y!==0?(l[g]=-y*Math.sin(n*g),d[g]=y*Math.cos(n*g)):(l[g]=0,d[g]=0)}return[l,d]}_inverseFFT(e,n,i){let r=0;const l=e.length;for(let d=0;d<l;d++)r+=e[d]*Math.cos(d*i)+n[d]*Math.sin(d*i);return r}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let i=0;const r=Math.PI*2,l=32;for(let d=0;d<l;d++)i=Math.max(this._inverseFFT(e,n,d/l*r),i);return O5(-this._inverseFFT(e,n,this._phase)/i,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(e=1024){return pt(this,void 0,void 0,function*(){return Mi(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}lt._periodicWaveCache=[];class X5 extends Ta{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Ca({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ki extends yt{constructor(){super(Object.assign(ce(ki.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=ce(ki.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new St({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(yt.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Lr extends ln{constructor(){super(ce(Lr.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new X5({context:this.context}),this._modulationNode=new St({context:this.context});const e=ce(Lr.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new lt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new lt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new ki({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),it(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(lt.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return pt(this,void 0,void 0,function*(){return Mi(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Ur extends ln{constructor(){super(ce(Ur.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new St({context:this.context,gain:0});const e=ce(Ur.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new lt({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new yt({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new lt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new ki({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new ki({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),it(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(lt.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return pt(this,void 0,void 0,function*(){return Mi(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class wa extends ln{constructor(){super(ce(wa.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new St({context:this.context,gain:0}),this._thresh=new Ca({context:this.context,mapping:n=>n<=0?-1:1});const e=ce(wa.getDefaults(),arguments,["frequency","width"]);this.width=new yt({context:this.context,units:"audioRange",value:e.width}),this._triangle=new lt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),it(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(ln.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return pt(this,void 0,void 0,function*(){return Mi(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class qr extends ln{constructor(){super(ce(qr.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=ce(qr.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new yt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new yt({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,it(this,["frequency","detune"])}static getDefaults(){return Object.assign(lt.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,i=e/(this._oscillators.length-1);this._forEach((r,l)=>r.detune.value=n+i*l)}}get count(){return this._oscillators.length}set count(e){if(cs(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const i=new lt({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):Pe});this.type==="custom"&&(i.partials=this._partials),this.frequency.connect(i.frequency),this.detune.connect(i.detune),i.detune.overridden=!1,i.connect(this.output),this._oscillators[n]=i}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,i)=>n.phase=this._phase+i/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return pt(this,void 0,void 0,function*(){return Mi(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Pr extends ln{constructor(){super(ce(Pr.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new ki({context:this.context,value:2});const e=ce(Pr.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new wa({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new lt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),it(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(ln.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return pt(this,void 0,void 0,function*(){return Mi(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const e0={am:Lr,fat:qr,fm:Ur,oscillator:lt,pulse:wa,pwm:Pr};class Hr extends ln{constructor(){super(ce(Hr.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=ce(Hr.getDefaults(),arguments,["frequency","type"]);this.frequency=new yt({context:this.context,units:"frequency",value:e.frequency}),this.detune=new yt({context:this.context,units:"cents",value:e.detune}),it(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(lt.getDefaults(),Ur.getDefaults(),Lr.getDefaults(),qr.getDefaults(),wa.getDefaults(),Pr.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=e0[e],i=this.now();if(this._oscillator){const r=this._oscillator;r.stop(i),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(i)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof e0[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&qs(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&qs(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&ls(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return pt(this,void 0,void 0,function*(){return Mi(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function jy(o,e=1/0){const n=new WeakMap;return function(i,r){Reflect.defineProperty(i,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(l){cs(l,o,e),n.set(this,l)}})}}function fs(o,e=1/0){const n=new WeakMap;return function(i,r){Reflect.defineProperty(i,r,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(l){cs(this.toSeconds(l),o,e),n.set(this,l)}})}}class Gr extends ln{constructor(){super(ce(Gr.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=ce(Gr.getDefaults(),arguments,["url","onload"]);this._buffer=new Ze({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(ln.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Pe,onerror:Pe,playbackRate:1,reverse:!1})}load(e){return pt(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=Pe){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,i){return super.start(e,n,i),this}_start(e,n,i){this._loop?n=xa(n,this._loopStart):n=xa(n,0);const r=this.toSeconds(n),l=i;i=xa(i,Math.max(this._buffer.duration-r,0));let d=this.toSeconds(i);d=d/this._playbackRate,e=this.toSeconds(e);const f=new Vr({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+d),this._state.setStateAtTime("stopped",e+d,{implicitEnd:!0})),this._activeSources.add(f),this._loop&&vn(l)?f.start(e,r):f.start(e,r,d-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(i=>i.stop(n))}restart(e,n,i){return super.restart(e,n,i),this}_restart(e,n,i){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(e),this._start(e,n,i)}seek(e,n){const i=this.toSeconds(n);if(this._state.getValueAtTime(i)==="started"){const r=this.toSeconds(e);this._stop(i),this._start(i,r)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&cs(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&cs(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),i=this._state.getNextState("stopped",n);i&&i.implicitEnd&&(this._state.cancel(i.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}Mn([fs(0)],Gr.prototype,"fadeIn",void 0);Mn([fs(0)],Gr.prototype,"fadeOut",void 0);class us extends Ce{constructor(){super(ce(us.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new yt({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=ce(us.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(Ce.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(ls(e))return e;{let i;for(i in kl)if(kl[i][n]===e)return i;return e}}_setCurve(e,n,i){if(ls(i)&&Reflect.has(kl,i)){const r=kl[i];bi(r)?e!=="_decayCurve"&&(this[e]=r[n]):this[e]=r}else if(on(i)&&e!=="_decayCurve")this[e]=i;else throw new Error("Envelope: invalid curve: "+i)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const l=this.toSeconds(this.decay),d=this.getValueAtTime(e);if(d>0){const f=1/r;r=(1-d)/f}if(r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,r,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,r,e);else{this._sig.cancelAndHoldAtTime(e);let f=this._attackCurve;for(let g=1;g<f.length;g++)if(f[g-1]<=d&&d<=f[g]){f=this._attackCurve.slice(g),f[0]=d;break}this._sig.setValueCurveAtTime(f,e,r,n)}if(l&&this.sustain<1){const f=n*this.sustain,g=e+r;this.log("decay",g),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(f,l+g):this._sig.exponentialApproachValueAtTime(f,g,l)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const i=this.toSeconds(this.release);i<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,i,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,i,e):(ve(on(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,i,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,i=1){return n=this.toSeconds(n),this.triggerAttack(n,i),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,i=0){return bh(this,e,n,i),this}asArray(e=1024){return pt(this,void 0,void 0,function*(){const n=e/this.context.sampleRate,i=new gh(1,n,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),l=r+this.toSeconds(this.release),d=l*.1,f=l+d,g=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/f,decay:n*this.toSeconds(this.decay)/f,release:n*this.toSeconds(this.release)/f,context:i}));return g._sig.toDestination(),g.triggerAttackRelease(n*(r+d)/f,0),(yield i.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}Mn([fs(0)],us.prototype,"attack",void 0);Mn([fs(0)],us.prototype,"decay",void 0);Mn([jy(0,1)],us.prototype,"sustain",void 0);Mn([fs(0)],us.prototype,"release",void 0);const kl=(()=>{let e,n;const i=[];for(e=0;e<128;e++)i[e]=Math.sin(e/127*(Math.PI/2));const r=[],l=6.4;for(e=0;e<127;e++){n=e/127;const b=Math.sin(n*(Math.PI*2)*l-Math.PI/2)+1;r[e]=b/10+n*.83}r[127]=1;const d=[],f=5;for(e=0;e<128;e++)d[e]=Math.ceil(e/127*f)/f;const g=[];for(e=0;e<128;e++)n=e/127,g[e]=.5*(1-Math.cos(Math.PI*n));const m=[];for(e=0;e<128;e++){n=e/127;const b=Math.pow(n,3)*4+.2,v=Math.cos(b*Math.PI*2*n);m[e]=Math.abs(v*(1-n))}function y(b){const v=new Array(b.length);for(let _=0;_<b.length;_++)v[_]=1-b[_];return v}function x(b){return b.slice(0).reverse()}return{bounce:{In:y(m),Out:m},cosine:{In:i,Out:x(i)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:y(r)},sine:{In:g,Out:y(g)},step:{In:d,Out:y(d)}}})();let ka=class Yd extends Ce{constructor(){super(ce(Yd.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n);const e=ce(Yd.getDefaults(),arguments);this._volume=this.output=new wi({context:this.context,volume:e.volume}),this.volume=this._volume.volume,it(this,"volume")}static getDefaults(){return Object.assign(Ce.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const i=this["_original_"+e]=this[e];this[e]=(...r)=>{const l=r[n],d=this.context.transport.schedule(f=>{r[n]=f,i.apply(this,r)},l);this._scheduledEvents.push(d)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,n,i,r){const l=this.toSeconds(i),d=this.toSeconds(n);return this.triggerAttack(e,l,r),this.triggerRelease(l+d),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}};class Hs extends ka{constructor(){super(ce(Hs.getDefaults(),arguments));const e=ce(Hs.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(ka.getDefaults(),{detune:0,onsilence:Pe,portamento:0})}triggerAttack(e,n,i=1){this.log("triggerAttack",e,n,i);const r=this.toSeconds(n);return this._triggerEnvelopeAttack(r,i),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const i=this.toSeconds(n),r=e instanceof Wt?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(i)>.05){const l=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,l,i)}else this.frequency.setValueAtTime(r,i);return this}}Mn([fs(0)],Hs.prototype,"portamento",void 0);class _h extends us{constructor(){super(ce(_h.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new St({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Gs extends Hs{constructor(){super(ce(Gs.getDefaults(),arguments)),this.name="Synth";const e=ce(Gs.getDefaults(),arguments);this.oscillator=new Hr(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new _h(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),it(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Hs.getDefaults(),{envelope:Object.assign(Pd(us.getDefaults(),Object.keys(Ce.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Pd(Hr.getDefaults(),[...Object.keys(ln.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const i=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+i+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Yr extends Gs{constructor(){super(ce(Yr.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=ce(Yr.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,it(this,["oscillator","envelope"])}static getDefaults(){return Si(Hs.getDefaults(),Gs.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const i=this.toSeconds(n),r=this.toFrequency(e instanceof Wt?e.toFrequency():e),l=r*this.octaves;return this.oscillator.frequency.setValueAtTime(l,i),this.oscillator.frequency.exponentialRampToValueAtTime(r,i+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}Mn([jy(0)],Yr.prototype,"octaves",void 0);Mn([fs(0)],Yr.prototype,"pitchDecay",void 0);const Ay=new Set;function Th(o){Ay.add(o)}function My(o,e){const n=`registerProcessor("${o}", ${e})`;Ay.add(n)}const Z5=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;Th(Z5);const K5=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;Th(K5);const $5=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;Th($5);const J5="feedback-comb-filter",eT=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;My(J5,eT);class _i extends ka{constructor(){super(ce(_i.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=r=>this.releaseAll(r);const e=ce(_i.getDefaults(),arguments,["voice","options"]);ve(!qs(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const n=e.voice.getDefaults();this.options=Object.assign(n,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const i=this._voices.indexOf(this._dummyVoice);this._voices.splice(i,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(ka.getDefaults(),{maxPolyphony:32,options:{},voice:Gs})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const n=this._activeVoices.findIndex(i=>i.voice===e);this._activeVoices.splice(n,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return ve(e instanceof Hs,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else ic("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),n=this._voices.indexOf(e);this._voices.splice(n,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,n,i){e.forEach(r=>{const l=new Hl(this.context,r).toMidi(),d=this._getNextAvailableVoice();d&&(d.triggerAttack(r,n,i),this._activeVoices.push({midi:l,voice:d,released:!1}),this.log("triggerAttack",r,n))})}_triggerRelease(e,n){e.forEach(i=>{const r=new Hl(this.context,i).toMidi(),l=this._activeVoices.find(({midi:d,released:f})=>d===r&&!f);l&&(l.voice.triggerRelease(n),l.released=!0,this.log("triggerRelease",i,n))})}_scheduleEvent(e,n,i,r){ve(!this.disposed,"Synth was already disposed"),i<=this.now()?e==="attack"?this._triggerAttack(n,i,r):this._triggerRelease(n,i):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,n,i,r)},i-this.now())}triggerAttack(e,n,i){Array.isArray(e)||(e=[e]);const r=this.toSeconds(n);return this._scheduleEvent("attack",e,r,i),this}triggerRelease(e,n){Array.isArray(e)||(e=[e]);const i=this.toSeconds(n);return this._scheduleEvent("release",e,i),this}triggerAttackRelease(e,n,i,r){const l=this.toSeconds(i);if(this.triggerAttack(e,l,r),on(n)){ve(on(e),"If the duration is an array, the notes must also be an array"),e=e;for(let d=0;d<e.length;d++){const f=n[Math.min(d,n.length-1)],g=this.toSeconds(f);ve(g>0,"The duration must be greater than 0"),this.triggerRelease(e[d],l+g)}}else{const d=this.toSeconds(n);ve(d>0,"The duration must be greater than 0"),this.triggerRelease(e,l+d)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const n=Pd(e,["onsilence","context"]);return this.options=Si(this.options,n),this._voices.forEach(i=>i.set(n)),this._dummyVoice.set(n),this}get(){return this._dummyVoice.get()}releaseAll(e){const n=this.toSeconds(e);return this._activeVoices.forEach(({voice:i})=>{i.triggerRelease(n)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Wr extends ka{constructor(){super(ce(Wr.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=ce(Wr.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),n={};Object.keys(e.urls).forEach(i=>{const r=parseInt(i,10);if(ve(wl(i)||qs(r)&&isFinite(r),`url key is neither a note or midi pitch: ${i}`),wl(i)){const l=new Wt(this.context,i).toMidi();n[l]=e.urls[i]}else qs(r)&&isFinite(r)&&(n[r]=e.urls[r])}),this._buffers=new vh({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(ka.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Pe,onerror:Pe,release:.1,urls:{}})}_findClosest(e){let i=0;for(;i<96;){if(this._buffers.has(e+i))return-i;if(this._buffers.has(e-i))return i;i++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,i=1){return this.log("triggerAttack",e,n,i),Array.isArray(e)||(e=[e]),e.forEach(r=>{const l=wy(new Wt(this.context,r).toFrequency()),d=Math.round(l),f=l-d,g=this._findClosest(d),m=d-g,y=this._buffers.get(m),x=Cy(g+f),b=new Vr({url:y,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:x}).connect(this.output);b.start(n,0,y.duration/x,i),on(this._activeSources.get(d))||this._activeSources.set(d,[]),this._activeSources.get(d).push(b),b.onended=()=>{if(this._activeSources&&this._activeSources.has(d)){const v=this._activeSources.get(d),_=v.indexOf(b);_!==-1&&v.splice(_,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(i=>{const r=new Wt(this.context,i).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const l=this._activeSources.get(r);n=this.toSeconds(n),l.forEach(d=>{d.stop(n)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(i=>{for(;i.length;)i.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,i,r=1){const l=this.toSeconds(i);return this.triggerAttack(e,l,r),on(n)?(ve(on(e),"notes must be an array when duration is array"),e.forEach((d,f)=>{const g=n[Math.min(f,n.length-1)];this.triggerRelease(d,l+this.toSeconds(g))})):this.triggerRelease(e,l+this.toSeconds(n)),this}add(e,n,i){if(ve(wl(e)||isFinite(e),`note must be a pitch or midi: ${e}`),wl(e)){const r=new Wt(this.context,e).toMidi();this._buffers.add(r,n,i)}else this._buffers.add(e,n,i);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}Mn([fs(0)],Wr.prototype,"attack",void 0);Mn([fs(0)],Wr.prototype,"release",void 0);class Ql extends Ce{constructor(){super(Object.assign(ce(Ql.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=ce(Ql.getDefaults(),arguments,["pan"]);this.pan=new Je({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",it(this,"pan")}static getDefaults(){return Object.assign(Ce.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const tT="bit-crusher",nT=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;My(tT,nT);class Xl extends Ce{constructor(){super(ce(Xl.getDefaults(),arguments,["channels"])),this.name="Split";const e=ce(Xl.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(Ce.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Zl extends Ce{constructor(){super(ce(Zl.getDefaults(),arguments,["type","size"])),this.name="Analyser",this._analysers=[],this._buffers=[];const e=ce(Zl.getDefaults(),arguments,["type","size"]);this.input=this.output=this._gain=new St({context:this.context}),this._split=new Xl({context:this.context,channels:e.channels}),this.input.connect(this._split),cs(e.channels,1);for(let n=0;n<e.channels;n++)this._analysers[n]=this.context.createAnalyser(),this._split.connect(this._analysers[n],n,0);this.size=e.size,this.type=e.type,this.smoothing=e.smoothing}static getDefaults(){return Object.assign(Ce.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((e,n)=>{const i=this._buffers[n];this._type==="fft"?e.getFloatFrequencyData(i):this._type==="waveform"&&e.getFloatTimeDomainData(i)}),this.channels===1?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(e){this._analysers.forEach((n,i)=>{n.fftSize=e*2,this._buffers[i]=new Float32Array(e)})}get channels(){return this._analysers.length}get type(){return this._type}set type(e){ve(e==="waveform"||e==="fft",`Analyser: invalid type: ${e}`),this._type=e}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(e){this._analysers.forEach(n=>n.smoothingTimeConstant=e)}dispose(){return super.dispose(),this._analysers.forEach(e=>e.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class ot extends Ce{constructor(){super(ce(ot.getDefaults(),arguments,["solo"])),this.name="Solo";const e=ce(ot.getDefaults(),arguments,["solo"]);this.input=this.output=new St({context:this.context}),ot._allSolos.has(this.context)||ot._allSolos.set(this.context,new Set),ot._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(Ce.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),ot._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){ot._soloed.has(this.context)||ot._soloed.set(this.context,new Set),ot._soloed.get(this.context).add(this)}_removeSolo(){ot._soloed.has(this.context)&&ot._soloed.get(this.context).delete(this)}_isSoloed(){return ot._soloed.has(this.context)&&ot._soloed.get(this.context).has(this)}_noSolos(){return!ot._soloed.has(this.context)||ot._soloed.has(this.context)&&ot._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),ot._allSolos.get(this.context).delete(this),this._removeSolo(),this}}ot._allSolos=new Map;ot._soloed=new Map;class Kl extends Ce{constructor(){super(ce(Kl.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=ce(Kl.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Ql({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new wi({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,it(this,["pan","volume"])}static getDefaults(){return Object.assign(Ce.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class gi extends Ce{constructor(){super(ce(gi.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=ce(gi.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new ot({solo:e.solo,context:this.context}),this._panVol=this.output=new Kl({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),it(this,["pan","volume"])}static getDefaults(){return Object.assign(Ce.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return gi.buses.has(e)||gi.buses.set(e,new St({context:this.context})),gi.buses.get(e)}send(e,n=0){const i=this._getBus(e),r=new St({context:this.context,units:"decibels",gain:n});return this.connect(r),r.connect(i),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}gi.buses=new Map;class sT extends Ce{constructor(){super(...arguments),this.name="Listener",this.positionX=new Je({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Je({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Je({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Je({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Je({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Je({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Je({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Je({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Je({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Ce.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}ac(o=>{o.listener=new sT({context:o})});rc(o=>{o.listener.dispose()});function t0(){return Et().now()}const zn=Et().transport;Et().destination;Et().destination;function iT(){return Et().destination}Et().listener;Et().draw;const Wd=Et();var fi={},jl={},Md,n0;function aT(){if(n0)return Md;n0=1;function o(r){var l=new i(r),d=l.readChunk();if(d.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+d.id+"'";for(var f=e(d.data),g=[],m=0;!l.eof()&&m<f.numTracks;m++){var y=l.readChunk();if(y.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+y.id+"'";var x=n(y.data);g.push(x)}return{header:f,tracks:g}}function e(r){var l=new i(r),d=l.readUInt16(),f=l.readUInt16(),g={format:d,numTracks:f},m=l.readUInt16();return m&32768?(g.framesPerSecond=256-(m>>8),g.ticksPerFrame=m&255):g.ticksPerBeat=m,g}function n(r){for(var l=new i(r),d=[];!l.eof();){var f=m();d.push(f)}return d;var g;function m(){var y={};y.deltaTime=l.readVarInt();var x=l.readUInt8();if((x&240)===240)if(x===255){y.meta=!0;var b=l.readUInt8(),v=l.readVarInt();switch(b){case 0:if(y.type="sequenceNumber",v!==2)throw"Expected length for sequenceNumber event is 2, got "+v;return y.number=l.readUInt16(),y;case 1:return y.type="text",y.text=l.readString(v),y;case 2:return y.type="copyrightNotice",y.text=l.readString(v),y;case 3:return y.type="trackName",y.text=l.readString(v),y;case 4:return y.type="instrumentName",y.text=l.readString(v),y;case 5:return y.type="lyrics",y.text=l.readString(v),y;case 6:return y.type="marker",y.text=l.readString(v),y;case 7:return y.type="cuePoint",y.text=l.readString(v),y;case 32:if(y.type="channelPrefix",v!=1)throw"Expected length for channelPrefix event is 1, got "+v;return y.channel=l.readUInt8(),y;case 33:if(y.type="portPrefix",v!=1)throw"Expected length for portPrefix event is 1, got "+v;return y.port=l.readUInt8(),y;case 47:if(y.type="endOfTrack",v!=0)throw"Expected length for endOfTrack event is 0, got "+v;return y;case 81:if(y.type="setTempo",v!=3)throw"Expected length for setTempo event is 3, got "+v;return y.microsecondsPerBeat=l.readUInt24(),y;case 84:if(y.type="smpteOffset",v!=5)throw"Expected length for smpteOffset event is 5, got "+v;var _=l.readUInt8(),w={0:24,32:25,64:29,96:30};return y.frameRate=w[_&96],y.hour=_&31,y.min=l.readUInt8(),y.sec=l.readUInt8(),y.frame=l.readUInt8(),y.subFrame=l.readUInt8(),y;case 88:if(y.type="timeSignature",v!=2&&v!=4)throw"Expected length for timeSignature event is 4 or 2, got "+v;return y.numerator=l.readUInt8(),y.denominator=1<<l.readUInt8(),v===4?(y.metronome=l.readUInt8(),y.thirtyseconds=l.readUInt8()):(y.metronome=36,y.thirtyseconds=8),y;case 89:if(y.type="keySignature",v!=2)throw"Expected length for keySignature event is 2, got "+v;return y.key=l.readInt8(),y.scale=l.readUInt8(),y;case 127:return y.type="sequencerSpecific",y.data=l.readBytes(v),y;default:return y.type="unknownMeta",y.data=l.readBytes(v),y.metatypeByte=b,y}}else if(x==240){y.type="sysEx";var v=l.readVarInt();return y.data=l.readBytes(v),y}else if(x==247){y.type="endSysEx";var v=l.readVarInt();return y.data=l.readBytes(v),y}else throw"Unrecognised MIDI event type byte: "+x;else{var T;if((x&128)===0){if(g===null)throw"Running status byte encountered before status byte";T=x,x=g,y.running=!0}else T=l.readUInt8(),g=x;var C=x>>4;switch(y.channel=x&15,C){case 8:return y.type="noteOff",y.noteNumber=T,y.velocity=l.readUInt8(),y;case 9:var N=l.readUInt8();return y.type=N===0?"noteOff":"noteOn",y.noteNumber=T,y.velocity=N,N===0&&(y.byte9=!0),y;case 10:return y.type="noteAftertouch",y.noteNumber=T,y.amount=l.readUInt8(),y;case 11:return y.type="controller",y.controllerType=T,y.value=l.readUInt8(),y;case 12:return y.type="programChange",y.programNumber=T,y;case 13:return y.type="channelAftertouch",y.amount=T,y;case 14:return y.type="pitchBend",y.value=T+(l.readUInt8()<<7)-8192,y;default:throw"Unrecognised MIDI event type: "+C}}}}function i(r){this.buffer=r,this.bufferLen=this.buffer.length,this.pos=0}return i.prototype.eof=function(){return this.pos>=this.bufferLen},i.prototype.readUInt8=function(){var r=this.buffer[this.pos];return this.pos+=1,r},i.prototype.readInt8=function(){var r=this.readUInt8();return r&128?r-256:r},i.prototype.readUInt16=function(){var r=this.readUInt8(),l=this.readUInt8();return(r<<8)+l},i.prototype.readInt16=function(){var r=this.readUInt16();return r&32768?r-65536:r},i.prototype.readUInt24=function(){var r=this.readUInt8(),l=this.readUInt8(),d=this.readUInt8();return(r<<16)+(l<<8)+d},i.prototype.readInt24=function(){var r=this.readUInt24();return r&8388608?r-16777216:r},i.prototype.readUInt32=function(){var r=this.readUInt8(),l=this.readUInt8(),d=this.readUInt8(),f=this.readUInt8();return(r<<24)+(l<<16)+(d<<8)+f},i.prototype.readBytes=function(r){var l=this.buffer.slice(this.pos,this.pos+r);return this.pos+=r,l},i.prototype.readString=function(r){var l=this.readBytes(r);return String.fromCharCode.apply(null,l)},i.prototype.readVarInt=function(){for(var r=0;!this.eof();){var l=this.readUInt8();if(l&128)r+=l&127,r<<=7;else return r+l}return r},i.prototype.readChunk=function(){var r=this.readString(4),l=this.readUInt32(),d=this.readBytes(l);return{id:r,length:l,data:d}},Md=o,Md}var Rd,s0;function rT(){if(s0)return Rd;s0=1;function o(l,d){if(typeof l!="object")throw"Invalid MIDI data";d=d||{};var f=l.header||{},g=l.tracks||[],m,y=g.length,x=new r;for(e(x,f,y),m=0;m<y;m++)n(x,g[m],d);return x.buffer}function e(l,d,f){var g=d.format==null?1:d.format,m=128;d.timeDivision?m=d.timeDivision:d.ticksPerFrame&&d.framesPerSecond?m=-(d.framesPerSecond&255)<<8|d.ticksPerFrame&255:d.ticksPerBeat&&(m=d.ticksPerBeat&32767);var y=new r;y.writeUInt16(g),y.writeUInt16(f),y.writeUInt16(m),l.writeChunk("MThd",y.buffer)}function n(l,d,f){var g=new r,m,y=d.length,x=null;for(m=0;m<y;m++)(f.running===!1||!f.running&&!d[m].running)&&(x=null),x=i(g,d[m],x,f.useByte9ForNoteOff);l.writeChunk("MTrk",g.buffer)}function i(l,d,f,g){var m=d.type,y=d.deltaTime,x=d.text||"",b=d.data||[],v=null;switch(l.writeVarInt(y),m){case"sequenceNumber":l.writeUInt8(255),l.writeUInt8(0),l.writeVarInt(2),l.writeUInt16(d.number);break;case"text":l.writeUInt8(255),l.writeUInt8(1),l.writeVarInt(x.length),l.writeString(x);break;case"copyrightNotice":l.writeUInt8(255),l.writeUInt8(2),l.writeVarInt(x.length),l.writeString(x);break;case"trackName":l.writeUInt8(255),l.writeUInt8(3),l.writeVarInt(x.length),l.writeString(x);break;case"instrumentName":l.writeUInt8(255),l.writeUInt8(4),l.writeVarInt(x.length),l.writeString(x);break;case"lyrics":l.writeUInt8(255),l.writeUInt8(5),l.writeVarInt(x.length),l.writeString(x);break;case"marker":l.writeUInt8(255),l.writeUInt8(6),l.writeVarInt(x.length),l.writeString(x);break;case"cuePoint":l.writeUInt8(255),l.writeUInt8(7),l.writeVarInt(x.length),l.writeString(x);break;case"channelPrefix":l.writeUInt8(255),l.writeUInt8(32),l.writeVarInt(1),l.writeUInt8(d.channel);break;case"portPrefix":l.writeUInt8(255),l.writeUInt8(33),l.writeVarInt(1),l.writeUInt8(d.port);break;case"endOfTrack":l.writeUInt8(255),l.writeUInt8(47),l.writeVarInt(0);break;case"setTempo":l.writeUInt8(255),l.writeUInt8(81),l.writeVarInt(3),l.writeUInt24(d.microsecondsPerBeat);break;case"smpteOffset":l.writeUInt8(255),l.writeUInt8(84),l.writeVarInt(5);var _={24:0,25:32,29:64,30:96},w=d.hour&31|_[d.frameRate];l.writeUInt8(w),l.writeUInt8(d.min),l.writeUInt8(d.sec),l.writeUInt8(d.frame),l.writeUInt8(d.subFrame);break;case"timeSignature":l.writeUInt8(255),l.writeUInt8(88),l.writeVarInt(4),l.writeUInt8(d.numerator);var T=Math.floor(Math.log(d.denominator)/Math.LN2)&255;l.writeUInt8(T),l.writeUInt8(d.metronome),l.writeUInt8(d.thirtyseconds||8);break;case"keySignature":l.writeUInt8(255),l.writeUInt8(89),l.writeVarInt(2),l.writeInt8(d.key),l.writeUInt8(d.scale);break;case"sequencerSpecific":l.writeUInt8(255),l.writeUInt8(127),l.writeVarInt(b.length),l.writeBytes(b);break;case"unknownMeta":d.metatypeByte!=null&&(l.writeUInt8(255),l.writeUInt8(d.metatypeByte),l.writeVarInt(b.length),l.writeBytes(b));break;case"sysEx":l.writeUInt8(240),l.writeVarInt(b.length),l.writeBytes(b);break;case"endSysEx":l.writeUInt8(247),l.writeVarInt(b.length),l.writeBytes(b);break;case"noteOff":var C=g!==!1&&d.byte9||g&&d.velocity==0?144:128;v=C|d.channel,v!==f&&l.writeUInt8(v),l.writeUInt8(d.noteNumber),l.writeUInt8(d.velocity);break;case"noteOn":v=144|d.channel,v!==f&&l.writeUInt8(v),l.writeUInt8(d.noteNumber),l.writeUInt8(d.velocity);break;case"noteAftertouch":v=160|d.channel,v!==f&&l.writeUInt8(v),l.writeUInt8(d.noteNumber),l.writeUInt8(d.amount);break;case"controller":v=176|d.channel,v!==f&&l.writeUInt8(v),l.writeUInt8(d.controllerType),l.writeUInt8(d.value);break;case"programChange":v=192|d.channel,v!==f&&l.writeUInt8(v),l.writeUInt8(d.programNumber);break;case"channelAftertouch":v=208|d.channel,v!==f&&l.writeUInt8(v),l.writeUInt8(d.amount);break;case"pitchBend":v=224|d.channel,v!==f&&l.writeUInt8(v);var N=8192+d.value,A=N&127,D=N>>7&127;l.writeUInt8(A),l.writeUInt8(D);break;default:throw"Unrecognized event type: "+m}return v}function r(){this.buffer=[]}return r.prototype.writeUInt8=function(l){this.buffer.push(l&255)},r.prototype.writeInt8=r.prototype.writeUInt8,r.prototype.writeUInt16=function(l){var d=l>>8&255,f=l&255;this.writeUInt8(d),this.writeUInt8(f)},r.prototype.writeInt16=r.prototype.writeUInt16,r.prototype.writeUInt24=function(l){var d=l>>16&255,f=l>>8&255,g=l&255;this.writeUInt8(d),this.writeUInt8(f),this.writeUInt8(g)},r.prototype.writeInt24=r.prototype.writeUInt24,r.prototype.writeUInt32=function(l){var d=l>>24&255,f=l>>16&255,g=l>>8&255,m=l&255;this.writeUInt8(d),this.writeUInt8(f),this.writeUInt8(g),this.writeUInt8(m)},r.prototype.writeInt32=r.prototype.writeUInt32,r.prototype.writeBytes=function(l){this.buffer=this.buffer.concat(Array.prototype.slice.call(l,0))},r.prototype.writeString=function(l){var d,f=l.length,g=[];for(d=0;d<f;d++)g.push(l.codePointAt(d));this.writeBytes(g)},r.prototype.writeVarInt=function(l){if(l<0)throw"Cannot write negative variable-length integer";if(l<=127)this.writeUInt8(l);else{var d=l,f=[];for(f.push(d&127),d>>=7;d;){var g=d&127|128;f.push(g),d>>=7}this.writeBytes(f.reverse())}},r.prototype.writeChunk=function(l,d){this.writeString(l),this.writeUInt32(d.length),this.writeBytes(d)},Rd=o,Rd}var i0;function Ry(){return i0||(i0=1,jl.parseMidi=aT(),jl.writeMidi=rT()),jl}var Ed={},pi={},a0;function Ey(){if(a0)return pi;a0=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.insert=pi.search=void 0;function o(n,i,r){r===void 0&&(r="ticks");var l=0,d=n.length,f=d;if(d>0&&n[d-1][r]<=i)return d-1;for(;l<f;){var g=Math.floor(l+(f-l)/2),m=n[g],y=n[g+1];if(m[r]===i){for(var x=g;x<n.length;x++){var b=n[x];b[r]===i&&(g=x)}return g}else{if(m[r]<i&&y[r]>i)return g;m[r]>i?f=g:m[r]<i&&(l=g+1)}}return-1}pi.search=o;function e(n,i,r){if(r===void 0&&(r="ticks"),n.length){var l=o(n,i[r],r);n.splice(l+1,0,i)}else n.push(i)}return pi.insert=e,pi}var r0;function Qd(){return r0||(r0=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Header=o.keySignatureKeys=void 0;var e=Ey(),n=new WeakMap;o.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var i=(function(){function r(l){var d=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",n.set(this,480),l){n.set(this,l.header.ticksPerBeat),l.tracks.forEach(function(g){g.forEach(function(m){m.meta&&(m.type==="timeSignature"?d.timeSignatures.push({ticks:m.absoluteTime,timeSignature:[m.numerator,m.denominator]}):m.type==="setTempo"?d.tempos.push({bpm:6e7/m.microsecondsPerBeat,ticks:m.absoluteTime}):m.type==="keySignature"&&d.keySignatures.push({key:o.keySignatureKeys[m.key+7],scale:m.scale===0?"major":"minor",ticks:m.absoluteTime}))})});var f=0;l.tracks[0].forEach(function(g){f+=g.deltaTime,g.meta&&(g.type==="trackName"?d.name=g.text:(g.type==="text"||g.type==="cuePoint"||g.type==="marker"||g.type==="lyrics")&&d.meta.push({text:g.text,ticks:f,type:g.type}))}),this.update()}}return r.prototype.update=function(){var l=this,d=0,f=0;this.tempos.sort(function(g,m){return g.ticks-m.ticks}),this.tempos.forEach(function(g,m){var y=m>0?l.tempos[m-1].bpm:l.tempos[0].bpm,x=g.ticks/l.ppq-f,b=60/y*x;g.time=b+d,d=g.time,f+=x}),this.timeSignatures.sort(function(g,m){return g.ticks-m.ticks}),this.timeSignatures.forEach(function(g,m){var y=m>0?l.timeSignatures[m-1]:l.timeSignatures[0],x=(g.ticks-y.ticks)/l.ppq,b=x/y.timeSignature[0]/(y.timeSignature[1]/4);y.measures=y.measures||0,g.measures=b+y.measures})},r.prototype.ticksToSeconds=function(l){var d=(0,e.search)(this.tempos,l);if(d!==-1){var f=this.tempos[d],g=f.time,m=(l-f.ticks)/this.ppq;return g+60/f.bpm*m}else{var y=l/this.ppq;return 60/120*y}},r.prototype.ticksToMeasures=function(l){var d=(0,e.search)(this.timeSignatures,l);if(d!==-1){var f=this.timeSignatures[d],g=(l-f.ticks)/this.ppq;return f.measures+g/(f.timeSignature[0]/f.timeSignature[1])/4}else return l/this.ppq/4},Object.defineProperty(r.prototype,"ppq",{get:function(){return n.get(this)},enumerable:!1,configurable:!0}),r.prototype.secondsToTicks=function(l){var d=(0,e.search)(this.tempos,l,"time");if(d!==-1){var f=this.tempos[d],g=f.time,m=l-g,y=m/(60/f.bpm);return Math.round(f.ticks+y*this.ppq)}else{var x=l/.5;return Math.round(x*this.ppq)}},r.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(l){return{bpm:l.bpm,ticks:l.ticks}}),timeSignatures:this.timeSignatures}},r.prototype.fromJSON=function(l){this.name=l.name,this.tempos=l.tempos.map(function(d){return Object.assign({},d)}),this.timeSignatures=l.timeSignatures.map(function(d){return Object.assign({},d)}),this.keySignatures=l.keySignatures.map(function(d){return Object.assign({},d)}),this.meta=l.meta.map(function(d){return Object.assign({},d)}),n.set(this,l.ppq),this.update()},r.prototype.setTempo=function(l){this.tempos=[{bpm:l,ticks:0}],this.update()},r})();o.Header=i})(Ed)),Ed}var Ar={},Dd={},o0;function Dy(){return o0||(o0=1,(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.ControlChange=o.controlChangeIds=o.controlChangeNames=void 0,o.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},o.controlChangeIds=Object.keys(o.controlChangeNames).reduce(function(r,l){return r[o.controlChangeNames[l]]=l,r},{});var e=new WeakMap,n=new WeakMap,i=(function(){function r(l,d){e.set(this,d),n.set(this,l.controllerType),this.ticks=l.absoluteTime,this.value=l.value}return Object.defineProperty(r.prototype,"number",{get:function(){return n.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return o.controlChangeNames[this.number]?o.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"time",{get:function(){var l=e.get(this);return l.ticksToSeconds(this.ticks)},set:function(l){var d=e.get(this);this.ticks=d.secondsToTicks(l)},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},r})();o.ControlChange=i})(Dd)),Dd}var Mr={},l0;function oT(){if(l0)return Mr;l0=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.createControlChanges=void 0;var o=Dy();function e(){return new Proxy({},{get:function(n,i){if(n[i])return n[i];if(o.controlChangeIds.hasOwnProperty(i))return n[o.controlChangeIds[i]]},set:function(n,i,r){return o.controlChangeIds.hasOwnProperty(i)?n[o.controlChangeIds[i]]=r:n[i]=r,!0}})}return Mr.createControlChanges=e,Mr}var Rr={},c0;function lT(){if(c0)return Rr;c0=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.PitchBend=void 0;var o=new WeakMap,e=(function(){function n(i,r){o.set(this,r),this.ticks=i.absoluteTime,this.value=i.value}return Object.defineProperty(n.prototype,"time",{get:function(){var i=o.get(this);return i.ticksToSeconds(this.ticks)},set:function(i){var r=o.get(this);this.ticks=r.secondsToTicks(i)},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},n})();return Rr.PitchBend=e,Rr}var Er={},as={},u0;function cT(){return u0||(u0=1,Object.defineProperty(as,"__esModule",{value:!0}),as.DrumKitByPatchID=as.InstrumentFamilyByID=as.instrumentByPatchID=void 0,as.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"],as.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"],as.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"}),as}var d0;function uT(){if(d0)return Er;d0=1,Object.defineProperty(Er,"__esModule",{value:!0}),Er.Instrument=void 0;var o=cT(),e=new WeakMap,n=(function(){function i(r,l){if(this.number=0,e.set(this,l),this.number=0,r){var d=r.find(function(f){return f.type==="programChange"});d&&(this.number=d.programNumber)}}return Object.defineProperty(i.prototype,"name",{get:function(){return this.percussion?o.DrumKitByPatchID[this.number]:o.instrumentByPatchID[this.number]},set:function(r){var l=o.instrumentByPatchID.indexOf(r);l!==-1&&(this.number=l)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"family",{get:function(){return this.percussion?"drums":o.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"percussion",{get:function(){var r=e.get(this);return r.channel===9},enumerable:!1,configurable:!0}),i.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},i.prototype.fromJSON=function(r){this.number=r.number},i})();return Er.Instrument=n,Er}var Dr={},h0;function dT(){if(h0)return Dr;h0=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.Note=void 0;function o(d){var f=Math.floor(d/12)-1;return e(d)+f.toString()}function e(d){var f=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],g=d%12;return f[g]}function n(d){var f=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return f.indexOf(d)}var i=(function(){var d=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,f={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(g){var m=d.exec(g),y=m[1],x=m[2],b=f[y.toLowerCase()];return b+(parseInt(x,10)+1)*12}})(),r=new WeakMap,l=(function(){function d(f,g,m){r.set(this,m),this.midi=f.midi,this.velocity=f.velocity,this.noteOffVelocity=g.velocity,this.ticks=f.ticks,this.durationTicks=g.ticks-f.ticks}return Object.defineProperty(d.prototype,"name",{get:function(){return o(this.midi)},set:function(f){this.midi=i(f)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(f){var g=f-this.octave;this.midi+=g*12},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"pitch",{get:function(){return e(this.midi)},set:function(f){this.midi=12*(this.octave+1)+n(f)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"duration",{get:function(){var f=r.get(this);return f.ticksToSeconds(this.ticks+this.durationTicks)-f.ticksToSeconds(this.ticks)},set:function(f){var g=r.get(this),m=g.secondsToTicks(this.time+f);this.durationTicks=m-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"time",{get:function(){var f=r.get(this);return f.ticksToSeconds(this.ticks)},set:function(f){var g=r.get(this);this.ticks=g.secondsToTicks(f)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"bars",{get:function(){var f=r.get(this);return f.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),d.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},d})();return Dr.Note=l,Dr}var f0;function p0(){if(f0)return Ar;f0=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.Track=void 0;var o=Ey(),e=Dy(),n=oT(),i=lT(),r=uT(),l=dT(),d=new WeakMap,f=(function(){function g(m,y){var x=this;if(this.name="",this.notes=[],this.controlChanges=(0,n.createControlChanges)(),this.pitchBends=[],d.set(this,y),m){var b=m.find(function(D){return D.type==="trackName"});this.name=b?b.text:""}if(this.instrument=new r.Instrument(m,this),this.channel=0,m){for(var v=m.filter(function(D){return D.type==="noteOn"}),_=m.filter(function(D){return D.type==="noteOff"}),w=function(){var D=v.shift();T.channel=D.channel;var M=_.findIndex(function(k){return k.noteNumber===D.noteNumber&&k.absoluteTime>=D.absoluteTime});if(M!==-1){var E=_.splice(M,1)[0];T.addNote({durationTicks:E.absoluteTime-D.absoluteTime,midi:D.noteNumber,noteOffVelocity:E.velocity/127,ticks:D.absoluteTime,velocity:D.velocity/127})}},T=this;v.length;)w();var C=m.filter(function(D){return D.type==="controller"});C.forEach(function(D){x.addCC({number:D.controllerType,ticks:D.absoluteTime,value:D.value/127})});var N=m.filter(function(D){return D.type==="pitchBend"});N.forEach(function(D){x.addPitchBend({ticks:D.absoluteTime,value:D.value/Math.pow(2,13)})});var A=m.find(function(D){return D.type==="endOfTrack"});this.endOfTrackTicks=A!==void 0?A.absoluteTime:void 0}}return g.prototype.addNote=function(m){var y=d.get(this),x=new l.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},y);return Object.assign(x,m),(0,o.insert)(this.notes,x,"ticks"),this},g.prototype.addCC=function(m){var y=d.get(this),x=new e.ControlChange({controllerType:m.number},y);return delete m.number,Object.assign(x,m),Array.isArray(this.controlChanges[x.number])||(this.controlChanges[x.number]=[]),(0,o.insert)(this.controlChanges[x.number],x,"ticks"),this},g.prototype.addPitchBend=function(m){var y=d.get(this),x=new i.PitchBend({},y);return Object.assign(x,m),(0,o.insert)(this.pitchBends,x,"ticks"),this},Object.defineProperty(g.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var m=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,y=0;y<this.notes.length-1;y++){var x=this.notes[y].time+this.notes[y].duration;m<x&&(m=x)}return m},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var m=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,y=0;y<this.notes.length-1;y++){var x=this.notes[y].ticks+this.notes[y].durationTicks;m<x&&(m=x)}return m},enumerable:!1,configurable:!0}),g.prototype.fromJSON=function(m){var y=this;this.name=m.name,this.channel=m.channel,this.instrument=new r.Instrument(void 0,this),this.instrument.fromJSON(m.instrument),m.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=m.endOfTrackTicks);for(var x in m.controlChanges)m.controlChanges[x]&&m.controlChanges[x].forEach(function(b){y.addCC({number:b.number,ticks:b.ticks,value:b.value})});m.notes.forEach(function(b){y.addNote({durationTicks:b.durationTicks,midi:b.midi,ticks:b.ticks,velocity:b.velocity})})},g.prototype.toJSON=function(){for(var m={},y=0;y<127;y++)this.controlChanges.hasOwnProperty(y)&&(m[y]=this.controlChanges[y].map(function(b){return b.toJSON()}));var x={channel:this.channel,controlChanges:m,pitchBends:this.pitchBends.map(function(b){return b.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(b){return b.toJSON()})};return this.endOfTrackTicks!==void 0&&(x.endOfTrackTicks=this.endOfTrackTicks),x},g})();return Ar.Track=f,Ar}var mi={};function hT(o){var e=[];return Ny(o,e),e}function Ny(o,e){for(var n=0;n<o.length;n++){var i=o[n];Array.isArray(i)?Ny(i,e):e.push(i)}}const fT=Object.freeze(Object.defineProperty({__proto__:null,flatten:hT},Symbol.toStringTag,{value:"Module"})),pT=tv(fT);var m0;function mT(){if(m0)return mi;m0=1;var o=mi&&mi.__spreadArray||function(C,N,A){if(A||arguments.length===2)for(var D=0,M=N.length,E;D<M;D++)(E||!(D in N))&&(E||(E=Array.prototype.slice.call(N,0,D)),E[D]=N[D]);return C.concat(E||Array.prototype.slice.call(N))};Object.defineProperty(mi,"__esModule",{value:!0}),mi.encode=void 0;var e=Ry(),n=Qd(),i=pT;function r(C,N){return[{absoluteTime:C.ticks,channel:N,deltaTime:0,noteNumber:C.midi,type:"noteOn",velocity:Math.floor(C.velocity*127)},{absoluteTime:C.ticks+C.durationTicks,channel:N,deltaTime:0,noteNumber:C.midi,type:"noteOff",velocity:Math.floor(C.noteOffVelocity*127)}]}function l(C){return(0,i.flatten)(C.notes.map(function(N){return r(N,C.channel)}))}function d(C,N){return{absoluteTime:C.ticks,channel:N,controllerType:C.number,deltaTime:0,type:"controller",value:Math.floor(C.value*127)}}function f(C){for(var N=[],A=0;A<127;A++)C.controlChanges.hasOwnProperty(A)&&C.controlChanges[A].forEach(function(D){N.push(d(D,C.channel))});return N}function g(C,N){return{absoluteTime:C.ticks,channel:N,deltaTime:0,type:"pitchBend",value:C.value}}function m(C){var N=[];return C.pitchBends.forEach(function(A){N.push(g(A,C.channel))}),N}function y(C){return{absoluteTime:0,channel:C.channel,deltaTime:0,programNumber:C.instrument.number,type:"programChange"}}function x(C){return{absoluteTime:0,deltaTime:0,meta:!0,text:C,type:"trackName"}}function b(C){return{absoluteTime:C.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/C.bpm),type:"setTempo"}}function v(C){return{absoluteTime:C.ticks,deltaTime:0,denominator:C.timeSignature[1],meta:!0,metronome:24,numerator:C.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function _(C){var N=n.keySignatureKeys.indexOf(C.key);return{absoluteTime:C.ticks,deltaTime:0,key:N+7,meta:!0,scale:C.scale==="major"?0:1,type:"keySignature"}}function w(C){return{absoluteTime:C.ticks,deltaTime:0,meta:!0,text:C.text,type:C.type}}function T(C){var N={header:{format:1,numTracks:C.tracks.length+1,ticksPerBeat:C.header.ppq},tracks:o([o(o(o(o([{absoluteTime:0,deltaTime:0,meta:!0,text:C.header.name,type:"trackName"}],C.header.keySignatures.map(function(A){return _(A)}),!0),C.header.meta.map(function(A){return w(A)}),!0),C.header.tempos.map(function(A){return b(A)}),!0),C.header.timeSignatures.map(function(A){return v(A)}),!0)],C.tracks.map(function(A){return o(o(o([x(A.name),y(A)],l(A),!0),f(A),!0),m(A),!0)}),!0)};return N.tracks=N.tracks.map(function(A){A=A.sort(function(M,E){return M.absoluteTime-E.absoluteTime});var D=0;return A.forEach(function(M){M.deltaTime=M.absoluteTime-D,D=M.absoluteTime,delete M.absoluteTime}),A.push({deltaTime:0,meta:!0,type:"endOfTrack"}),A}),new Uint8Array((0,e.writeMidi)(N))}return mi.encode=T,mi}var g0;function gT(){return g0||(g0=1,(function(o){var e=fi&&fi.__awaiter||function(x,b,v,_){function w(T){return T instanceof v?T:new v(function(C){C(T)})}return new(v||(v=Promise))(function(T,C){function N(M){try{D(_.next(M))}catch(E){C(E)}}function A(M){try{D(_.throw(M))}catch(E){C(E)}}function D(M){M.done?T(M.value):w(M.value).then(N,A)}D((_=_.apply(x,b||[])).next())})},n=fi&&fi.__generator||function(x,b){var v={label:0,sent:function(){if(T[0]&1)throw T[1];return T[1]},trys:[],ops:[]},_,w,T,C;return C={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function N(D){return function(M){return A([D,M])}}function A(D){if(_)throw new TypeError("Generator is already executing.");for(;v;)try{if(_=1,w&&(T=D[0]&2?w.return:D[0]?w.throw||((T=w.return)&&T.call(w),0):w.next)&&!(T=T.call(w,D[1])).done)return T;switch(w=0,T&&(D=[D[0]&2,T.value]),D[0]){case 0:case 1:T=D;break;case 4:return v.label++,{value:D[1],done:!1};case 5:v.label++,w=D[1],D=[0];continue;case 7:D=v.ops.pop(),v.trys.pop();continue;default:if(T=v.trys,!(T=T.length>0&&T[T.length-1])&&(D[0]===6||D[0]===2)){v=0;continue}if(D[0]===3&&(!T||D[1]>T[0]&&D[1]<T[3])){v.label=D[1];break}if(D[0]===6&&v.label<T[1]){v.label=T[1],T=D;break}if(T&&v.label<T[2]){v.label=T[2],v.ops.push(D);break}T[2]&&v.ops.pop(),v.trys.pop();continue}D=b.call(x,v)}catch(M){D=[6,M],w=0}finally{_=T=0}if(D[0]&5)throw D[1];return{value:D[0]?D[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.Header=o.Track=o.Midi=void 0;var i=Ry(),r=Qd(),l=p0(),d=mT(),f=(function(){function x(b){var v=this,_=null;if(b){var w=b instanceof ArrayBuffer?new Uint8Array(b):b;_=(0,i.parseMidi)(w),_.tracks.forEach(function(T){var C=0;T.forEach(function(N){C+=N.deltaTime,N.absoluteTime=C})}),_.tracks=y(_.tracks)}this.header=new r.Header(_),this.tracks=[],b&&(this.tracks=_.tracks.map(function(T){return new l.Track(T,v.header)}),_.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return x.fromUrl=function(b){return e(this,void 0,void 0,function(){var v,_;return n(this,function(w){switch(w.label){case 0:return[4,fetch(b)];case 1:return v=w.sent(),v.ok?[4,v.arrayBuffer()]:[3,3];case 2:return _=w.sent(),[2,new x(_)];case 3:throw new Error("Could not load '".concat(b,"'"))}})})},Object.defineProperty(x.prototype,"name",{get:function(){return this.header.name},set:function(b){this.header.name=b},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"duration",{get:function(){var b=this.tracks.map(function(v){return v.duration});return Math.max.apply(Math,b)},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"durationTicks",{get:function(){var b=this.tracks.map(function(v){return v.durationTicks});return Math.max.apply(Math,b)},enumerable:!1,configurable:!0}),x.prototype.addTrack=function(){var b=new l.Track(void 0,this.header);return this.tracks.push(b),b},x.prototype.toArray=function(){return(0,d.encode)(this)},x.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(b){return b.toJSON()})}},x.prototype.fromJSON=function(b){var v=this;this.header=new r.Header,this.header.fromJSON(b.header),this.tracks=b.tracks.map(function(_){var w=new l.Track(void 0,v.header);return w.fromJSON(_),w})},x.prototype.clone=function(){var b=new x;return b.fromJSON(this.toJSON()),b},x})();o.Midi=f;var g=p0();Object.defineProperty(o,"Track",{enumerable:!0,get:function(){return g.Track}});var m=Qd();Object.defineProperty(o,"Header",{enumerable:!0,get:function(){return m.Header}});function y(x){for(var b=[],v=0;v<x.length;v++)for(var _=b.length,w=new Map,T=Array(16).fill(0),C=0,N=x[v];C<N.length;C++){var A=N[C],D=_,M=A.channel;if(M!==void 0){A.type==="programChange"&&(T[M]=A.programNumber);var E=T[M],k="".concat(E," ").concat(M);w.has(k)?D=w.get(k):(D=_+w.size,w.set(k,D))}b[D]||b.push([]),b[D].push(A)}return b}})(fi)),fi}var yT=gT();const xT=({midiData:o,onError:e})=>{const[n,i]=I.useState(!1),[r,l]=I.useState(!1),[d,f]=I.useState(null),[g,m]=I.useState(0),y=I.useRef(null),x=I.useRef([]),b=I.useRef(null),v=I.useRef(null);I.useEffect(()=>()=>{_()},[]);const _=()=>{y.current&&y.current.releaseAll(),x.current.forEach(N=>{zn.clear(N)}),x.current=[],zn.stop(),zn.cancel(),i(!1),m(0),b.current&&(cancelAnimationFrame(b.current),b.current=null),v.current=null},w=()=>{if(v.current&&d){const N=(t0()-v.current)*1e3;m(Math.min(N,d)),N<d?b.current=requestAnimationFrame(w):(i(!1),m(0))}},T=async()=>{if(!o){e?.("No MIDI data available");return}if(n){_();return}try{l(!0),Wd.state!=="running"&&await Da();const N=atob(o),A=new Uint8Array(N.length);for(let k=0;k<N.length;k++)A[k]=N.charCodeAt(k);const D=new yT.Midi(A),M=D.duration*1e3;f(M),y.current||(y.current=new _i(Gs,{oscillator:{type:"sawtooth"},envelope:{attack:.02,decay:.1,sustain:.3,release:.3}}).toDestination());const E=y.current;D.tracks.forEach(k=>{k.notes.forEach(R=>{const O=R.time,L=R.velocity||.8,q=zn.schedule(P=>{E.triggerAttackRelease(R.name,R.duration,P,L)},O);x.current.push(q)})}),zn.start(),v.current=t0(),i(!0),l(!1),w(),zn.schedule(()=>{_()},D.duration)}catch(N){console.error("Error playing MIDI:",N),e?.(`Failed to play MIDI: ${N instanceof Error?N.message:"Unknown error"}`),l(!1),i(!1)}},C=N=>{const A=Math.floor(N/1e3),D=Math.floor(A/60),M=A%60;return`${D}:${M.toString().padStart(2,"0")}`};return o?u.jsxs("div",{style:{marginTop:"15px",padding:"15px",backgroundColor:"rgba(33, 150, 243, 0.1)",borderRadius:"4px",border:"1px solid #2196f3"},children:[u.jsx("div",{style:{marginBottom:"10px"},children:u.jsx("strong",{children:" Audio Preview"})}),u.jsx("div",{style:{marginBottom:"10px"},children:u.jsx("button",{onClick:T,disabled:r,style:{padding:"10px 20px",backgroundColor:n?"#f44336":"#2196f3",color:"white",border:"none",borderRadius:"4px",cursor:r?"not-allowed":"pointer",fontSize:"0.9em",fontWeight:"bold",opacity:r?.6:1},children:r?"Loading...":n?" Stop":" Play"})}),d!==null&&u.jsxs("div",{style:{fontSize:"0.85em",color:"#666"},children:[u.jsxs("div",{children:[C(g)," / ",C(d)]}),u.jsx("div",{style:{width:"100%",height:"4px",backgroundColor:"#ddd",borderRadius:"2px",marginTop:"5px",overflow:"hidden"},children:u.jsx("div",{style:{width:`${d?g/d*100:0}%`,height:"100%",backgroundColor:"#2196f3",transition:"width 0.1s linear"}})})]}),u.jsx("div",{style:{marginTop:"10px",fontSize:"0.8em",color:"#666",fontStyle:"italic"},children:"Note: Preview uses basic synthesis. For best quality, download and open in your DAW."})]}):null},bT=({midiData:o,midiPath:e,musicConfig:n})=>{if(!o&&!e)return null;const i=o?`${Math.round(o.length*3/4/1024)} KB`:"Unknown",r=e&&e.split("/").pop()||"generated_music.mid";return u.jsxs("div",{style:{marginTop:"10px",padding:"15px",backgroundColor:"rgba(76, 175, 80, 0.1)",borderRadius:"4px",border:"1px solid #4caf50"},children:[u.jsx("div",{style:{marginBottom:"10px"},children:u.jsx("strong",{children:" MIDI Generated"})}),u.jsxs("div",{style:{fontSize:"0.9em",marginBottom:"8px"},children:[u.jsxs("div",{children:[u.jsx("strong",{children:"Filename:"})," ",r]}),u.jsxs("div",{children:[u.jsx("strong",{children:"Size:"})," ",i]}),n&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{children:[u.jsx("strong",{children:"Key:"})," ",n.key||"N/A"," ",n.mode||""]}),u.jsxs("div",{children:[u.jsx("strong",{children:"Tempo:"})," ",n.tempo||"N/A"," BPM"]}),n.progression&&u.jsxs("div",{children:[u.jsx("strong",{children:"Progression:"})," ",n.progression]})]})]}),e&&u.jsxs("div",{style:{marginTop:"5px",fontSize:"0.8em",fontFamily:"monospace",wordBreak:"break-all",color:"#666"},children:["Path: ",e]}),o&&u.jsx("div",{style:{marginTop:"15px"},children:u.jsx(xT,{midiData:o})})]})},ya=({value:o,min:e=0,max:n=1,step:i=.01,label:r,unit:l="",orientation:d="vertical",onChange:f,onDragStart:g,onDragEnd:m,color:y="#6366f1",showValue:x=!0,logarithmic:b=!1,width:v=30,height:_=200})=>{const[w,T]=I.useState(!1),[C,N]=I.useState(o),A=I.useRef(null);I.useEffect(()=>{N(o)},[o]);const D=P=>{if(b){const te=Math.log(e||.001),se=Math.log(n);return(Math.log(P)-te)/(se-te)}return(P-e)/(n-e)},M=P=>{if(b){const te=Math.log(e||.001),se=Math.log(n),de=te+P*(se-te);return Math.exp(de)}return e+P*(n-e)},E=P=>{T(!0),g?.(),k(P)},k=P=>{if(!w&&P.type!=="mousedown"||!A.current)return;const te=A.current.getBoundingClientRect();let se;if(d==="vertical"){const ne=P.clientY-te.top;se=1-Math.max(0,Math.min(1,ne/te.height))}else{const ne=P.clientX-te.left;se=Math.max(0,Math.min(1,ne/te.width))}const de=M(se),B=Math.round(de/i)*i,Q=Math.max(e,Math.min(n,B));N(Q),f?.(Q)},R=()=>{w&&(T(!1),m?.())};I.useEffect(()=>{if(w){const P=se=>k(se),te=()=>R();return window.addEventListener("mousemove",P),window.addEventListener("mouseup",te),()=>{window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",te)}}},[w]);const O=D(C),L=O*100,q=P=>l==="dB"?P<=0?"-":`${P.toFixed(1)}${l}`:l==="%"?`${Math.round(P*100)}${l}`:l==="Hz"||l==="ms"||l==="s"?`${P.toFixed(1)}${l}`:P.toFixed(2);return u.jsxs("div",{style:{display:"flex",flexDirection:d==="vertical"?"column":"row",alignItems:"center",gap:"8px",width:d==="vertical"?v:"auto",height:d==="vertical"?"auto":_},children:[r&&u.jsx("div",{style:{fontSize:"0.75em",color:"#fff",fontWeight:"bold",textAlign:"center",width:d==="vertical"?"100%":"60px"},children:r}),u.jsxs("div",{ref:A,style:{position:"relative",width:d==="vertical"?v:_,height:d==="vertical"?_:v,backgroundColor:"#0f0f0f",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",cursor:"pointer",boxShadow:w?`0 0 10px ${y}`:"none",transition:"box-shadow 0.2s"},onMouseDown:E,children:[d==="vertical"?u.jsx("div",{style:{position:"absolute",bottom:0,width:"100%",height:`${L}%`,backgroundColor:y,opacity:.3,borderRadius:"2px 2px 0 0",transition:w?"none":"height 0.1s"}}):u.jsx("div",{style:{position:"absolute",left:0,width:`${L}%`,height:"100%",backgroundColor:y,opacity:.3,borderRadius:"2px 0 0 2px",transition:w?"none":"width 0.1s"}}),d==="vertical"&&u.jsxs("div",{style:{position:"absolute",right:"-25px",top:0,bottom:0,width:"20px",fontSize:"0.65em",color:"#888",display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"4px 0"},children:[u.jsx("span",{children:q(n)}),u.jsx("span",{children:q((n+e)/2)}),u.jsx("span",{children:q(e)})]}),d==="vertical"?u.jsx("div",{style:{position:"absolute",bottom:`${L}%`,left:"50%",transform:"translate(-50%, 50%)",width:v+8,height:"12px",backgroundColor:y,border:"2px solid rgba(255, 255, 255, 0.3)",borderRadius:"4px",cursor:"grab",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.5)",transition:w?"none":"bottom 0.1s"}}):u.jsx("div",{style:{position:"absolute",left:`${L}%`,top:"50%",transform:"translate(-50%, -50%)",width:"12px",height:_+8,backgroundColor:y,border:"2px solid rgba(255, 255, 255, 0.3)",borderRadius:"4px",cursor:"grab",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.5)",transition:w?"none":"left 0.1s"}}),w&&u.jsx("div",{style:{position:"absolute",inset:"-4px",borderRadius:"8px",boxShadow:`0 0 20px ${y}`,pointerEvents:"none",animation:"pulse 1s ease-in-out infinite"}})]}),x&&u.jsx("div",{style:{fontSize:"0.7em",color:"#888",minWidth:"50px",textAlign:"center",fontFamily:"monospace"},children:q(C)})]})},Ch=({level:o,peak:e,label:n})=>{const[i,r]=I.useState(0);I.useEffect(()=>{if(e!==void 0&&e>i){r(e);const f=setTimeout(()=>r(0),1e3);return()=>clearTimeout(f)}},[e,i]);const l=f=>f<.6?"#4caf50":f<.8?"#ffeb3b":"#f44336",d=Math.min(1,Math.max(0,o));return u.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",width:"20px"},children:[n&&u.jsx("span",{style:{fontSize:"0.7em",color:"#888"},children:n}),u.jsxs("div",{style:{width:"20px",height:"120px",backgroundColor:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"2px",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",bottom:0,width:"100%",height:`${d*100}%`,backgroundColor:l(d),transition:"height 0.05s linear",boxShadow:`0 0 4px ${l(d)}`}}),i>0&&u.jsx("div",{style:{position:"absolute",bottom:`${i*100}%`,width:"100%",height:"2px",backgroundColor:"#fff",boxShadow:"0 0 2px #fff"}}),d>=1&&u.jsx("div",{style:{position:"absolute",top:0,width:"100%",height:"4px",backgroundColor:"#f44336",animation:"blink 0.5s infinite"}})]})]})},Oy=({audioSource:o,width:e=800,height:n=200,color:i="#6366f1",syncToPlayback:r=!0,isPlaying:l=!1})=>{const d=I.useRef(null),f=I.useRef(null),g=I.useRef(null),[m,y]=I.useState(new Float32Array(1024));return I.useEffect(()=>{if(!d.current)return;const x=d.current,b=x.getContext("2d");if(!b)return;o&&(f.current=new Zl("waveform",1024),o.connect(f.current));const v=()=>{if(!b||!x)return;b.fillStyle="#0a0a0a",b.fillRect(0,0,x.width,x.height);let _=m;f.current&&l&&(_=f.current.getValue(),y(_)),b.strokeStyle=i,b.lineWidth=2,b.beginPath();const w=x.width/_.length;let T=0;for(let C=0;C<_.length;C++){const A=(_[C]*.5+.5)*x.height;C===0?b.moveTo(T,A):b.lineTo(T,A),T+=w}b.stroke(),b.strokeStyle="rgba(255, 255, 255, 0.2)",b.lineWidth=1,b.beginPath(),b.moveTo(0,x.height/2),b.lineTo(x.width,x.height/2),b.stroke(),b.strokeStyle="rgba(255, 255, 255, 0.05)";for(let C=0;C<10;C++){const N=x.height/10*C;b.beginPath(),b.moveTo(0,N),b.lineTo(x.width,N),b.stroke()}b.shadowBlur=10,b.shadowColor=i,b.stroke(),r&&l&&(g.current=requestAnimationFrame(v))};return v(),()=>{g.current&&cancelAnimationFrame(g.current),f.current&&f.current.dispose()}},[o,l,r,i,m]),u.jsxs("div",{style:{position:"relative",width:e,height:n},children:[u.jsx("canvas",{ref:d,width:e,height:n,style:{width:"100%",height:"100%",backgroundColor:"#0a0a0a",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"}}),!l&&u.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#666",fontSize:"0.9em",fontStyle:"italic"},children:"Waveform will appear during playback"})]})},vT=({channels:o=[],onChannelChange:e,showWaveform:n=!0})=>{const[i,r]=I.useState(.8),[l,d]=I.useState(.3),f=[{id:"1",name:"Drums",volume:.8,pan:0,mute:!1,solo:!1,send1:0,send2:0,lowCut:20,highCut:2e4},{id:"2",name:"Bass",volume:.75,pan:0,mute:!1,solo:!1,send1:0,send2:0,lowCut:20,highCut:2e4},{id:"3",name:"Chords",volume:.7,pan:0,mute:!1,solo:!1,send1:.3,send2:0,lowCut:20,highCut:2e4},{id:"4",name:"Melody",volume:.75,pan:0,mute:!1,solo:!1,send1:.2,send2:0,lowCut:20,highCut:2e4},{id:"5",name:"Vocal",volume:.8,pan:0,mute:!1,solo:!1,send1:.4,send2:.2,lowCut:80,highCut:15e3}],g=o.length>0?o:f;return I.useEffect(()=>{const m=setInterval(()=>{d(.2+Math.random()*.6)},100);return()=>clearInterval(m)},[]),u.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#1a1a1a"},children:[n&&u.jsx("div",{style:{padding:"10px",borderBottom:"1px solid rgba(255,255,255,0.1)"},children:u.jsx(Oy,{width:800,height:120,color:"#6366f1",syncToPlayback:!0,isPlaying:!0})}),u.jsx("div",{style:{flex:1,display:"flex",overflowX:"auto",overflowY:"hidden",padding:"10px",gap:"8px"},children:g.map(m=>u.jsx(ST,{channel:m,onChange:y=>e?.(m.id,y)},m.id))}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderTop:"2px solid rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",gap:"20px"},children:[u.jsx("div",{style:{fontSize:"0.9em",color:"#fff",fontWeight:"bold",minWidth:"60px"},children:"Master"}),u.jsx(Ch,{level:l}),u.jsx(ya,{value:i,min:0,max:1,step:.01,orientation:"vertical",width:40,height:150,onChange:r,showValue:!0,unit:"%",color:"#4caf50"}),u.jsxs("div",{style:{flex:1,display:"flex",justifyContent:"space-between",alignItems:"center",color:"#888",fontSize:"0.85em"},children:[u.jsxs("div",{children:["Output: ",Math.round(i*100),"%"]}),u.jsxs("div",{children:["Peak: ",Math.round(l*100),"%"]})]})]})]})},ST=({channel:o,onChange:e})=>{const[n,i]=I.useState(.3+Math.random()*.4);return I.useEffect(()=>{const r=setInterval(()=>{i(.2+Math.random()*.6)},100);return()=>clearInterval(r)},[]),u.jsxs("div",{style:{width:"80px",height:"100%",backgroundColor:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px",padding:"10px 8px",display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},children:[u.jsx("div",{style:{fontSize:"0.75em",color:"#fff",fontWeight:"bold",textAlign:"center",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o.name}),u.jsx(Ch,{level:n,label:o.id}),u.jsx(ya,{value:o.volume,min:0,max:1,step:.01,orientation:"vertical",width:30,height:200,onChange:r=>e({volume:r}),showValue:!0,unit:"%",color:o.mute?"#666":"#6366f1"}),u.jsxs("div",{style:{width:"100%"},children:[u.jsx("div",{style:{fontSize:"0.7em",color:"#888",marginBottom:"4px",textAlign:"center"},children:"Pan"}),u.jsx(ya,{value:o.pan,min:-1,max:1,step:.01,orientation:"horizontal",width:60,height:30,onChange:r=>e({pan:r}),showValue:!1,color:"#888"}),u.jsxs("div",{style:{fontSize:"0.65em",color:"#666",display:"flex",justifyContent:"space-between",padding:"0 4px",marginTop:"2px"},children:[u.jsx("span",{children:"L"}),u.jsx("span",{children:"C"}),u.jsx("span",{children:"R"})]})]}),u.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"4px"},children:[u.jsx("div",{style:{fontSize:"0.65em",color:"#888",textAlign:"center"},children:"Sends"}),u.jsx(ya,{value:o.send1,min:0,max:1,step:.01,orientation:"vertical",width:20,height:60,onChange:r=>e({send1:r}),showValue:!1,color:"#ff9800"}),u.jsx(ya,{value:o.send2,min:0,max:1,step:.01,orientation:"vertical",width:20,height:60,onChange:r=>e({send2:r}),showValue:!1,color:"#9c27b0"})]}),u.jsxs("div",{style:{display:"flex",gap:"4px",width:"100%"},children:[u.jsx("button",{onClick:()=>e({mute:!o.mute}),style:{flex:1,padding:"6px",backgroundColor:o.mute?"#f44336":"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.7em",fontWeight:"bold"},title:"Mute",children:"M"}),u.jsx("button",{onClick:()=>e({solo:!o.solo}),style:{flex:1,padding:"6px",backgroundColor:o.solo?"#ffeb3b":"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:o.solo?"#000":"#fff",cursor:"pointer",fontSize:"0.7em",fontWeight:"bold"},title:"Solo",children:"S"})]})]})},_T=({tracks:o=[],tempo:e=120,timeSignature:n=[4,4],onRegionClick:i})=>{const[r,l]=I.useState(1),[d,f]=I.useState(0),[g,m]=I.useState(0),y=I.useRef(null),[x,b]=I.useState(!1),v=80*r,_=Math.max(32,...o.flatMap(N=>N.regions.map(A=>A.start+A.length))),w=N=>{l(A=>Math.max(.5,Math.min(4,A+N)))},T=N=>{N.shiftKey?(N.preventDefault(),w(N.deltaY>0?-.1:.1)):f(A=>{const D=Math.max(0,_*v-(y.current?.clientWidth||0));return Math.max(0,Math.min(D,A+N.deltaY))})},C=N=>N*v;return u.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#1a1a1a",color:"#fff",overflow:"hidden"},children:[u.jsx("div",{style:{height:"30px",backgroundColor:"#0f0f0f",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",position:"relative",overflow:"hidden"},children:u.jsx("div",{style:{position:"absolute",left:`${-d}px`,display:"flex",height:"100%"},children:Array.from({length:_+1}).map((N,A)=>u.jsx("div",{style:{width:`${v}px`,borderLeft:"1px solid rgba(255, 255, 255, 0.2)",paddingLeft:"4px",fontSize:"0.75em",color:"#888",display:"flex",alignItems:"center"},children:A%4===0&&u.jsx("span",{children:A})},A))})}),u.jsxs("div",{ref:y,onWheel:T,style:{flex:1,overflow:"auto",position:"relative",backgroundColor:"#1a1a1a"},children:[u.jsx("div",{style:{position:"absolute",top:0,left:`${-d}px`,width:`${_*v}px`,height:"100%",backgroundImage:`
              repeating-linear-gradient(
                to right,
                transparent,
                transparent ${v-1}px,
                rgba(255, 255, 255, 0.05) ${v-1}px,
                rgba(255, 255, 255, 0.05) ${v}px
              )
            `,pointerEvents:"none"}}),u.jsx("div",{style:{position:"absolute",left:`${C(g)-d}px`,top:0,bottom:0,width:"2px",backgroundColor:"#4caf50",zIndex:10,pointerEvents:"none",boxShadow:"0 0 4px #4caf50"},children:u.jsx("div",{style:{position:"absolute",top:0,left:"-6px",width:"14px",height:"14px",backgroundColor:"#4caf50",borderRadius:"50%",border:"2px solid #1a1a1a"}})}),u.jsx("div",{style:{position:"relative",zIndex:1},children:o.length===0?u.jsx("div",{style:{padding:"40px",textAlign:"center",color:"#666",fontSize:"0.9em"},children:"No tracks yet. Generate music to see it here."}):o.map((N,A)=>u.jsxs("div",{style:{height:"80px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",position:"relative"},children:[u.jsx("div",{style:{width:"150px",padding:"10px",backgroundColor:"#0f0f0f",borderRight:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",alignItems:"center",fontSize:"0.85em",flexShrink:0},children:N.name}),u.jsx("div",{style:{flex:1,position:"relative",overflow:"hidden"},children:N.regions.map(D=>u.jsx("div",{onClick:()=>i?.(D),style:{position:"absolute",left:`${C(D.start)-d}px`,top:"10px",width:`${C(D.length)}px`,height:"60px",backgroundColor:D.color||"#6366f1",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.3)",cursor:"pointer",display:"flex",alignItems:"center",padding:"0 8px",fontSize:"0.8em",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.3)",transition:"transform 0.1s"},onMouseEnter:M=>{M.currentTarget.style.transform="scale(1.02)"},onMouseLeave:M=>{M.currentTarget.style.transform="scale(1)"},children:D.name},D.id))})]},N.id))})]}),u.jsxs("div",{style:{padding:"8px",backgroundColor:"#0f0f0f",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.85em"},children:[u.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[u.jsx("button",{onClick:()=>w(-.1),style:{padding:"4px 8px",backgroundColor:"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:""}),u.jsxs("span",{style:{minWidth:"60px",textAlign:"center"},children:[Math.round(r*100),"%"]}),u.jsx("button",{onClick:()=>w(.1),style:{padding:"4px 8px",backgroundColor:"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:"+"})]}),u.jsxs("div",{style:{color:"#888"},children:[_," bars"]})]})]})},TT=({onReady:o,onSendMessage:e,initialMessage:n})=>{const[i,r]=I.useState([]),[l,d]=I.useState(""),[f,g]=I.useState(!1),[m,y]=I.useState(),[x,b]=I.useState(!1),[v,_]=I.useState(null),w=I.useRef(null),T=I.useRef(null);I.useEffect(()=>{n&&i.length===0&&N(n)},[n]),I.useEffect(()=>{C()},[i]);const C=()=>{w.current?.scrollIntoView({behavior:"smooth"})},N=async E=>{const k=E||l.trim();if(!k||f)return;const R={role:"user",content:k,timestamp:new Date};r(O=>[...O,R]),d(""),g(!0);try{const O=await(e||A)(k,m);if(O.session_id&&y(O.session_id),O.ready){b(!0),_(O.intent),o&&O.intent&&o(O.intent);const L={role:"system",content:O.message||"Ready to generate music!",timestamp:new Date};r(q=>[...q,L])}else if(O.question){const L={role:"system",content:O.question,timestamp:new Date};r(q=>[...q,L])}}catch(O){console.error("Error sending message:",O);const L={role:"system",content:`Error: ${O instanceof Error?O.message:"Unknown error"}`,timestamp:new Date};r(q=>[...q,L])}finally{g(!1),T.current?.focus()}},A=async(E,k)=>(await fetch("http://localhost:8000/interrogate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:E,session_id:k})})).json(),D=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),N())},M=E=>E.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return u.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"500px",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#fff",overflow:"hidden"},children:[u.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"15px",backgroundColor:"#f9f9f9"},children:[i.length===0&&u.jsx("div",{style:{textAlign:"center",color:"#666",fontStyle:"italic",marginTop:"20px"},children:"Start a conversation about how you're feeling..."}),i.map((E,k)=>u.jsx("div",{style:{marginBottom:"15px",display:"flex",flexDirection:E.role==="user"?"row-reverse":"row"},children:u.jsxs("div",{style:{maxWidth:"70%",padding:"10px 15px",borderRadius:"12px",backgroundColor:E.role==="user"?"#2196f3":"#e0e0e0",color:E.role==="user"?"#fff":"#000",wordWrap:"break-word"},children:[u.jsx("div",{children:E.content}),u.jsx("div",{style:{fontSize:"0.7em",opacity:.7,marginTop:"5px"},children:M(E.timestamp)})]})},k)),f&&u.jsx("div",{style:{display:"flex",justifyContent:"flex-start",marginBottom:"15px"},children:u.jsx("div",{style:{padding:"10px 15px",borderRadius:"12px",backgroundColor:"#e0e0e0",color:"#666"},children:u.jsx("span",{style:{animation:"pulse 1.5s ease-in-out infinite"},children:"..."})})}),u.jsx("div",{ref:w})]}),u.jsxs("div",{style:{borderTop:"1px solid #ddd",padding:"15px",backgroundColor:"#fff"},children:[x&&v&&u.jsxs("div",{style:{marginBottom:"10px",padding:"10px",backgroundColor:"#4caf50",color:"white",borderRadius:"4px",fontSize:"0.9em"},children:[" Ready to generate! Emotion: ",v.base_emotion," (",v.intensity,"): ",v.specific_emotion]}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[u.jsx("input",{ref:T,type:"text",value:l,onChange:E=>d(E.target.value),onKeyPress:D,placeholder:x?"Type to continue conversation...":"Describe how you're feeling...",disabled:f,style:{flex:1,padding:"10px",border:"1px solid #ddd",borderRadius:"4px",fontSize:"0.9em"}}),u.jsx("button",{onClick:()=>N(),disabled:f||!l.trim(),style:{padding:"10px 20px",backgroundColor:"#2196f3",color:"white",border:"none",borderRadius:"4px",cursor:f?"not-allowed":"pointer",opacity:f||!l.trim()?.6:1},children:"Send"})]})]})]})},CT=({selectedEmotion:o,onRuleSelected:e})=>{const[n,i]=I.useState(null),[r,l]=I.useState(!1),[d,f]=I.useState(null),[g,m]=I.useState([]),[y,x]=I.useState(new Set),[b,v]=I.useState(null);I.useEffect(()=>{_()},[]),I.useEffect(()=>{o&&w(o)},[o]);const _=async()=>{l(!0);try{const D=await(await fetch("http://localhost:8000/rules/breaking")).json();D.success&&i(D.rules)}catch(A){f("Failed to load rule-breaking options"),console.error(A)}finally{l(!1)}},w=async A=>{try{const M=await(await fetch("http://localhost:8000/rules/suggest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emotion:A})})).json();M.success&&m(M.suggestions)}catch(D){console.error("Failed to get suggestions:",D)}},T=(A,D,M)=>{const E=`${A}:${D}`,k=new Set(y);k.has(E)?k.delete(E):(k.add(E),e?.({category:A,technique:D,effect:M})),x(k)},C={harmony:"#6366f1",rhythm:"#f59e0b",arrangement:"#10b981",production:"#ec4899"},N={harmony:"",rhythm:"",arrangement:"",production:""};return r?u.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"Loading rule-breaking options..."}):d?u.jsxs("div",{style:{padding:"20px",color:"#f44336"},children:[d,u.jsx("button",{onClick:_,style:{marginLeft:"10px"},children:"Retry"})]}):u.jsxs("div",{style:{padding:"15px"},children:[u.jsxs("div",{style:{marginBottom:"15px"},children:[u.jsx("h4",{style:{margin:"0 0 10px 0",color:"#333"},children:"Rule-Breaking Techniques"}),u.jsx("p",{style:{margin:0,fontSize:"0.85em",color:"#666"},children:"Sometimes breaking the rules creates the most emotional impact."})]}),g.length>0&&u.jsxs("div",{style:{marginBottom:"15px",padding:"10px",backgroundColor:"rgba(99, 102, 241, 0.1)",borderRadius:"8px",border:"1px solid rgba(99, 102, 241, 0.3)"},children:[u.jsxs("div",{style:{fontSize:"0.85em",fontWeight:"bold",marginBottom:"8px"},children:['Suggested for "',o,'":']}),u.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:g.map(A=>u.jsx("span",{style:{padding:"4px 8px",backgroundColor:"#6366f1",color:"white",borderRadius:"4px",fontSize:"0.8em"},children:A.replace(/_/g," ")},A))})]}),n&&Object.entries(n).map(([A,D])=>u.jsxs("div",{style:{marginBottom:"10px",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden"},children:[u.jsxs("div",{onClick:()=>v(b===A?null:A),style:{padding:"12px 15px",backgroundColor:C[A]||"#888",color:"white",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",fontWeight:"bold"},children:[u.jsxs("span",{children:[N[A]," ",A.charAt(0).toUpperCase()+A.slice(1)]}),u.jsx("span",{children:b===A?"":""})]}),b===A&&u.jsx("div",{style:{padding:"10px"},children:Object.entries(D).map(([M,E])=>{const k=`${A}:${M}`,R=y.has(k),O=g.includes(M);return u.jsxs("div",{onClick:()=>T(A,M,E),style:{padding:"10px",marginBottom:"6px",backgroundColor:R?"rgba(99, 102, 241, 0.2)":O?"rgba(245, 158, 11, 0.1)":"#f9f9f9",border:`2px solid ${R?"#6366f1":O?"#f59e0b":"transparent"}`,borderRadius:"6px",cursor:"pointer",transition:"all 0.2s"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("span",{style:{fontWeight:500},children:M.replace(/_/g," ")}),R&&u.jsx("span",{children:""}),O&&!R&&u.jsx("span",{style:{fontSize:"0.75em",color:"#f59e0b"},children:"suggested"})]}),u.jsx("div",{style:{fontSize:"0.85em",color:"#666",marginTop:"4px"},children:E})]},M)})})]},A)),y.size>0&&u.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#e8f5e9",borderRadius:"8px",border:"1px solid #4caf50"},children:[u.jsxs("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:["Selected Rules (",y.size,"):"]}),u.jsx("div",{style:{fontSize:"0.85em"},children:Array.from(y).map(A=>u.jsx("span",{style:{display:"inline-block",padding:"2px 6px",margin:"2px",backgroundColor:"#4caf50",color:"white",borderRadius:"3px"},children:A.split(":")[1].replace(/_/g," ")},A))})]})]})},wT=[{id:1,frequency:80,gain:0,q:.7,type:"lowshelf",enabled:!0},{id:2,frequency:250,gain:0,q:1,type:"peaking",enabled:!0},{id:3,frequency:1e3,gain:0,q:1,type:"peaking",enabled:!0},{id:4,frequency:4e3,gain:0,q:1,type:"peaking",enabled:!0},{id:5,frequency:12e3,gain:0,q:.7,type:"highshelf",enabled:!0}],kT={flat:[{gain:0},{gain:0},{gain:0},{gain:0},{gain:0}],warmth:[{gain:3},{gain:1},{gain:-1},{gain:0},{gain:-2}],brightness:[{gain:-2},{gain:0},{gain:1},{gain:3},{gain:4}],vocal_presence:[{gain:-2},{gain:-1},{gain:2},{gain:4},{gain:1}],bass_boost:[{gain:6},{gain:3},{gain:0},{gain:0},{gain:0}],telephone:[{gain:-12},{gain:0},{gain:6},{gain:0},{gain:-12}],air:[{gain:0},{gain:0},{gain:0},{gain:2},{gain:5}],mud_cut:[{gain:0},{gain:-4},{gain:0},{gain:0},{gain:0}]},zy=({channelId:o,channelName:e="Master",onEQChange:n})=>{const[i,r]=I.useState(wT),[l,d]=I.useState(null),[f,g]=I.useState(!1),m=(v,_)=>{const w=i.map(T=>T.id===v?{...T,..._}:T);r(w),n?.(w)},y=v=>{const _=kT[v];if(!_)return;const w=i.map((T,C)=>({...T,..._[C]}));r(w),n?.(w)},x=v=>(Math.log10(v)-Math.log10(20))/(Math.log10(2e4)-Math.log10(20))*100,b=v=>50-v/12*50;return u.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",padding:"15px",color:"#fff"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[u.jsxs("span",{style:{fontWeight:"bold"},children:["EQ - ",e]}),u.jsx("button",{onClick:()=>g(!f),style:{padding:"4px 8px",backgroundColor:f?"#f44336":"#4caf50",border:"none",borderRadius:"4px",color:"#fff",fontSize:"0.75em",cursor:"pointer"},children:f?"BYPASSED":"ACTIVE"})]}),u.jsxs("select",{onChange:v=>y(v.target.value),style:{padding:"4px 8px",backgroundColor:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff",fontSize:"0.85em"},children:[u.jsx("option",{value:"",children:"Presets..."}),u.jsx("option",{value:"flat",children:"Flat"}),u.jsx("option",{value:"warmth",children:"Warmth"}),u.jsx("option",{value:"brightness",children:"Brightness"}),u.jsx("option",{value:"vocal_presence",children:"Vocal Presence"}),u.jsx("option",{value:"bass_boost",children:"Bass Boost"}),u.jsx("option",{value:"telephone",children:"Telephone"}),u.jsx("option",{value:"air",children:"Air"}),u.jsx("option",{value:"mud_cut",children:"Mud Cut"})]})]}),u.jsxs("div",{style:{position:"relative",height:"150px",backgroundColor:"#0f0f0f",borderRadius:"4px",marginBottom:"15px",overflow:"hidden",opacity:f?.5:1},children:[u.jsxs("svg",{width:"100%",height:"100%",style:{position:"absolute"},children:[[-12,-6,0,6,12].map(v=>u.jsxs("g",{children:[u.jsx("line",{x1:"0",y1:`${b(v)}%`,x2:"100%",y2:`${b(v)}%`,stroke:v===0?"#444":"#222",strokeWidth:v===0?2:1}),u.jsxs("text",{x:"5",y:`${b(v)}%`,fill:"#666",fontSize:"10",dominantBaseline:"middle",children:[v>0?"+":"",v,"dB"]})]},v)),[100,1e3,1e4].map(v=>u.jsxs("g",{children:[u.jsx("line",{x1:`${x(v)}%`,y1:"0",x2:`${x(v)}%`,y2:"100%",stroke:"#222",strokeWidth:"1"}),u.jsx("text",{x:`${x(v)}%`,y:"95%",fill:"#666",fontSize:"10",textAnchor:"middle",children:v>=1e3?`${v/1e3}k`:v})]},v))]}),i.map(v=>u.jsx("div",{onClick:()=>d(l===v.id?null:v.id),style:{position:"absolute",left:`${x(v.frequency)}%`,top:`${b(v.gain)}%`,width:"16px",height:"16px",borderRadius:"50%",backgroundColor:l===v.id?"#6366f1":v.enabled?"#4caf50":"#666",border:"2px solid #fff",transform:"translate(-50%, -50%)",cursor:"pointer",zIndex:10,boxShadow:l===v.id?"0 0 10px #6366f1":"none"}},v.id))]}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"10px"},children:i.map(v=>u.jsxs("div",{onClick:()=>d(v.id),style:{padding:"10px",backgroundColor:l===v.id?"#2a2a4a":"#222",borderRadius:"4px",border:l===v.id?"2px solid #6366f1":"2px solid transparent",cursor:"pointer"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[u.jsxs("span",{style:{fontSize:"0.75em",color:"#888"},children:["Band ",v.id]}),u.jsx("button",{onClick:_=>{_.stopPropagation(),m(v.id,{enabled:!v.enabled})},style:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:v.enabled?"#4caf50":"#666",border:"none",cursor:"pointer"}})]}),u.jsxs("div",{style:{marginBottom:"6px"},children:[u.jsx("label",{style:{fontSize:"0.7em",color:"#888"},children:"Freq"}),u.jsx("input",{type:"range",min:"20",max:"20000",value:v.frequency,onChange:_=>m(v.id,{frequency:Number(_.target.value)}),style:{width:"100%",height:"4px"}}),u.jsxs("div",{style:{fontSize:"0.75em",textAlign:"center"},children:[v.frequency>=1e3?`${(v.frequency/1e3).toFixed(1)}k`:v.frequency,"Hz"]})]}),u.jsxs("div",{style:{marginBottom:"6px"},children:[u.jsx("label",{style:{fontSize:"0.7em",color:"#888"},children:"Gain"}),u.jsx("input",{type:"range",min:"-12",max:"12",step:"0.5",value:v.gain,onChange:_=>m(v.id,{gain:Number(_.target.value)}),style:{width:"100%",height:"4px"}}),u.jsxs("div",{style:{fontSize:"0.75em",textAlign:"center"},children:[v.gain>0?"+":"",v.gain,"dB"]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"0.7em",color:"#888"},children:"Q"}),u.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:v.q,onChange:_=>m(v.id,{q:Number(_.target.value)}),style:{width:"100%",height:"4px"}}),u.jsx("div",{style:{fontSize:"0.75em",textAlign:"center"},children:v.q.toFixed(1)})]})]},v.id))})]})},Nd={natural:{name:"Natural",pitch:0,formant:0,breathiness:20,vibrato:30,warmth:50},intimate:{name:"Intimate",pitch:-2,formant:-1,breathiness:40,vibrato:15,warmth:70},powerful:{name:"Powerful",pitch:2,formant:1,breathiness:10,vibrato:40,warmth:40},ethereal:{name:"Ethereal",pitch:5,formant:3,breathiness:50,vibrato:60,warmth:60},raspy:{name:"Raspy",pitch:-3,formant:-2,breathiness:60,vibrato:20,warmth:30},robotic:{name:"Robotic",pitch:0,formant:0,breathiness:0,vibrato:0,warmth:20}},Od={grief:{description:"Fragile, breaking voice with catch in throat",adjustments:{breathiness:50,vibrato:15,warmth:60,pitch:-1}},anger:{description:"Tight, controlled tension with sharp edges",adjustments:{breathiness:10,vibrato:5,warmth:20,pitch:2}},joy:{description:"Bright, lifted tone with natural energy",adjustments:{breathiness:20,vibrato:40,warmth:70,pitch:3}},longing:{description:"Distant, reaching quality with ache",adjustments:{breathiness:35,vibrato:25,warmth:55,pitch:0}},peace:{description:"Settled, grounded with gentle flow",adjustments:{breathiness:30,vibrato:20,warmth:65,pitch:-1}}},jT=({onVoiceChange:o,onGenerate:e})=>{const[n,i]=I.useState(Nd.natural),[r,l]=I.useState(""),[d,f]=I.useState(null),[g,m]=I.useState(!1),[y,x]=I.useState(null),b=T=>{const C={...n,...T};i(C),o?.(C)},v=T=>{const C=Nd[T];C&&(i(C),o?.(C))},_=T=>{const C=Od[T];C&&(f(T),b(C.adjustments))},w=async()=>{if(r.trim()){m(!0);try{const T=await fetch("http://localhost:8000/voice/synthesize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:r,profile:n,emotion:d})});if(T.ok){const C=await T.json();x(C.audio_url||null),e?.(r,n)}}catch(T){console.error("Vocal synthesis error:",T)}finally{m(!1)}}};return u.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",padding:"20px",color:"#fff"},children:[u.jsxs("h3",{style:{margin:"0 0 15px 0",display:"flex",alignItems:"center",gap:"10px"},children:[u.jsx("span",{children:"Vocal Synth"}),u.jsx("span",{style:{fontSize:"0.6em",color:"#888"},children:"AI Voice Generation"})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{style:{fontSize:"0.85em",color:"#888",marginBottom:"8px",display:"block"},children:"Voice Character"}),u.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:Object.entries(Nd).map(([T,C])=>u.jsx("button",{onClick:()=>v(T),style:{padding:"8px 16px",backgroundColor:n.name===C.name?"#6366f1":"#333",border:"none",borderRadius:"20px",color:"#fff",cursor:"pointer",fontSize:"0.85em",transition:"all 0.2s"},children:C.name},T))})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{style:{fontSize:"0.85em",color:"#888",marginBottom:"8px",display:"block"},children:"Emotional Style"}),u.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:Object.entries(Od).map(([T,C])=>u.jsx("button",{onClick:()=>_(T),title:C.description,style:{padding:"8px 16px",backgroundColor:d===T?"#ec4899":"#333",border:"none",borderRadius:"20px",color:"#fff",cursor:"pointer",fontSize:"0.85em",transition:"all 0.2s"},children:T.charAt(0).toUpperCase()+T.slice(1)},T))}),d&&u.jsx("div",{style:{marginTop:"8px",padding:"8px 12px",backgroundColor:"rgba(236, 72, 153, 0.1)",borderRadius:"4px",fontSize:"0.8em",color:"#ec4899"},children:Od[d].description})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"15px",marginBottom:"20px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"0.8em",color:"#888"},children:"Pitch"}),u.jsx("input",{type:"range",min:"-12",max:"12",value:n.pitch,onChange:T=>b({pitch:Number(T.target.value)}),style:{width:"100%"}}),u.jsxs("div",{style:{fontSize:"0.75em",textAlign:"center"},children:[n.pitch>0?"+":"",n.pitch," semitones"]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"0.8em",color:"#888"},children:"Formant"}),u.jsx("input",{type:"range",min:"-5",max:"5",value:n.formant,onChange:T=>b({formant:Number(T.target.value)}),style:{width:"100%"}}),u.jsxs("div",{style:{fontSize:"0.75em",textAlign:"center"},children:[n.formant>0?"+":"",n.formant]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"0.8em",color:"#888"},children:"Breathiness"}),u.jsx("input",{type:"range",min:"0",max:"100",value:n.breathiness,onChange:T=>b({breathiness:Number(T.target.value)}),style:{width:"100%"}}),u.jsxs("div",{style:{fontSize:"0.75em",textAlign:"center"},children:[n.breathiness,"%"]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"0.8em",color:"#888"},children:"Vibrato"}),u.jsx("input",{type:"range",min:"0",max:"100",value:n.vibrato,onChange:T=>b({vibrato:Number(T.target.value)}),style:{width:"100%"}}),u.jsxs("div",{style:{fontSize:"0.75em",textAlign:"center"},children:[n.vibrato,"%"]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"0.8em",color:"#888"},children:"Warmth"}),u.jsx("input",{type:"range",min:"0",max:"100",value:n.warmth,onChange:T=>b({warmth:Number(T.target.value)}),style:{width:"100%"}}),u.jsxs("div",{style:{fontSize:"0.75em",textAlign:"center"},children:[n.warmth,"%"]})]})]}),u.jsxs("div",{style:{marginBottom:"15px"},children:[u.jsx("label",{style:{fontSize:"0.85em",color:"#888",marginBottom:"8px",display:"block"},children:"Lyrics / Text to Sing"}),u.jsx("textarea",{value:r,onChange:T=>l(T.target.value),placeholder:"Enter lyrics or phrases to synthesize...",style:{width:"100%",height:"100px",padding:"12px",backgroundColor:"#222",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"0.9em",resize:"vertical"}})]}),u.jsx("button",{onClick:w,disabled:g||!r.trim(),style:{width:"100%",padding:"12px",backgroundColor:g?"#666":"#6366f1",border:"none",borderRadius:"8px",color:"#fff",fontSize:"1em",fontWeight:"bold",cursor:g||!r.trim()?"not-allowed":"pointer",opacity:r.trim()?1:.5},children:g?"Generating...":"Generate Vocal"}),y&&u.jsxs("div",{style:{marginTop:"15px",padding:"15px",backgroundColor:"#222",borderRadius:"8px"},children:[u.jsx("div",{style:{marginBottom:"10px",fontWeight:"bold"},children:"Generated Audio"}),u.jsx("audio",{controls:!0,style:{width:"100%"},children:u.jsx("source",{src:y,type:"audio/wav"})})]}),u.jsxs("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"8px"},children:[u.jsx("div",{style:{fontSize:"0.85em",color:"#888",marginBottom:"10px"},children:"Voice Character Preview"}),u.jsx("div",{style:{display:"flex",height:"60px",alignItems:"flex-end",gap:"4px"},children:[{label:"Pitch",value:(n.pitch+12)/24,color:"#6366f1"},{label:"Formant",value:(n.formant+5)/10,color:"#ec4899"},{label:"Breath",value:n.breathiness/100,color:"#10b981"},{label:"Vibrato",value:n.vibrato/100,color:"#f59e0b"},{label:"Warmth",value:n.warmth/100,color:"#ef4444"}].map((T,C)=>u.jsxs("div",{style:{flex:1,textAlign:"center"},children:[u.jsx("div",{style:{height:`${Math.max(5,T.value*50)}px`,backgroundColor:T.color,borderRadius:"2px 2px 0 0",margin:"0 auto",width:"80%",transition:"height 0.2s"}}),u.jsx("div",{style:{fontSize:"0.65em",color:"#666",marginTop:"4px"},children:T.label})]},C))})]})]})},AT={mastering:{compressor:{threshold:-6,ratio:2,attack:30,release:200,makeup:2},limiter:{ceiling:-.3,release:50}},vocals:{compressor:{threshold:-18,ratio:4,attack:10,release:100,makeup:4},limiter:{ceiling:-1,release:100}},drums:{compressor:{threshold:-12,ratio:6,attack:5,release:50,makeup:3},limiter:{ceiling:-.5,release:30}},bass:{compressor:{threshold:-15,ratio:4,attack:20,release:150,makeup:3},limiter:{ceiling:-1,release:80}},gentle:{compressor:{threshold:-20,ratio:2,attack:50,release:300,makeup:1},limiter:{ceiling:-.5,release:150}}},MT=({channelName:o="Master",onSettingsChange:e})=>{const[n,i]=I.useState("dynamics"),[r,l]=I.useState({threshold:-12,ratio:4,attack:20,release:150,makeup:0,enabled:!0}),[d,f]=I.useState({ceiling:-.3,release:50,enabled:!0}),[g,m]=I.useState({roomSize:50,damping:50,wetDry:20,enabled:!1}),[y,x]=I.useState(0),b=T=>{const C={...r,...T};l(C),e?.({compressor:C,limiter:d,reverb:g})},v=T=>{const C={...d,...T};f(C),e?.({compressor:r,limiter:C,reverb:g})},_=T=>{const C={...g,...T};m(C),e?.({compressor:r,limiter:d,reverb:C})},w=T=>{const C=AT[T];C&&(l({...r,...C.compressor}),f({...d,...C.limiter}))};return v0.useEffect(()=>{if(r.enabled){const T=setInterval(()=>{x(Math.random()*6)},100);return()=>clearInterval(T)}else x(0)},[r.enabled]),u.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"8px",overflow:"hidden",color:"#fff"},children:[u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderBottom:"1px solid #333",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("span",{style:{fontWeight:"bold"},children:["Mix Console - ",o]}),u.jsxs("select",{onChange:T=>w(T.target.value),style:{padding:"4px 8px",backgroundColor:"#333",border:"1px solid #555",borderRadius:"4px",color:"#fff",fontSize:"0.85em"},children:[u.jsx("option",{value:"",children:"Presets..."}),u.jsx("option",{value:"mastering",children:"Mastering"}),u.jsx("option",{value:"vocals",children:"Vocals"}),u.jsx("option",{value:"drums",children:"Drums"}),u.jsx("option",{value:"bass",children:"Bass"}),u.jsx("option",{value:"gentle",children:"Gentle"})]})]}),u.jsx("div",{style:{display:"flex",borderBottom:"1px solid #333"},children:[{id:"eq",label:"EQ"},{id:"dynamics",label:"Dynamics"},{id:"reverb",label:"Reverb"}].map(T=>u.jsx("button",{onClick:()=>i(T.id),style:{flex:1,padding:"10px",backgroundColor:n===T.id?"#2a2a2a":"transparent",border:"none",borderBottom:n===T.id?"2px solid #6366f1":"2px solid transparent",color:n===T.id?"#fff":"#888",cursor:"pointer",fontWeight:n===T.id?"bold":"normal"},children:T.label},T.id))}),u.jsxs("div",{style:{padding:"20px"},children:[n==="eq"&&u.jsx(zy,{channelName:o}),n==="dynamics"&&u.jsxs("div",{children:[u.jsxs("div",{style:{marginBottom:"25px"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[u.jsx("span",{style:{fontWeight:"bold"},children:"Compressor"}),u.jsx("button",{onClick:()=>b({enabled:!r.enabled}),style:{padding:"4px 12px",backgroundColor:r.enabled?"#4caf50":"#666",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.8em"},children:r.enabled?"ON":"OFF"})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"15px",opacity:r.enabled?1:.5},children:[u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"0.75em",color:"#888"},children:"Threshold"}),u.jsx("input",{type:"range",min:"-40",max:"0",value:r.threshold,onChange:T=>b({threshold:Number(T.target.value)}),disabled:!r.enabled,style:{width:"100%"}}),u.jsxs("div",{style:{fontSize:"0.75em",textAlign:"center"},children:[r.threshold,"dB"]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"0.75em",color:"#888"},children:"Ratio"}),u.jsx("input",{type:"range",min:"1",max:"20",value:r.ratio,onChange:T=>b({ratio:Number(T.target.value)}),disabled:!r.enabled,style:{width:"100%"}}),u.jsxs("div",{style:{fontSize:"0.75em",textAlign:"center"},children:[r.ratio,":1"]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"0.75em",color:"#888"},children:"Attack"}),u.jsx("input",{type:"range",min:"0.1",max:"100",value:r.attack,onChange:T=>b({attack:Number(T.target.value)}),disabled:!r.enabled,style:{width:"100%"}}),u.jsxs("div",{style:{fontSize:"0.75em",textAlign:"center"},children:[r.attack,"ms"]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"0.75em",color:"#888"},children:"Release"}),u.jsx("input",{type:"range",min:"10",max:"1000",value:r.release,onChange:T=>b({release:Number(T.target.value)}),disabled:!r.enabled,style:{width:"100%"}}),u.jsxs("div",{style:{fontSize:"0.75em",textAlign:"center"},children:[r.release,"ms"]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"0.75em",color:"#888"},children:"Makeup"}),u.jsx("input",{type:"range",min:"0",max:"24",value:r.makeup,onChange:T=>b({makeup:Number(T.target.value)}),disabled:!r.enabled,style:{width:"100%"}}),u.jsxs("div",{style:{fontSize:"0.75em",textAlign:"center"},children:["+",r.makeup,"dB"]})]})]}),u.jsxs("div",{style:{marginTop:"15px"},children:[u.jsx("label",{style:{fontSize:"0.75em",color:"#888"},children:"Gain Reduction"}),u.jsx("div",{style:{height:"8px",backgroundColor:"#333",borderRadius:"4px",overflow:"hidden",marginTop:"4px"},children:u.jsx("div",{style:{width:`${y/12*100}%`,height:"100%",backgroundColor:y>6?"#f44336":"#f59e0b",transition:"width 0.05s"}})}),u.jsxs("div",{style:{fontSize:"0.7em",textAlign:"right",color:"#888"},children:["-",y.toFixed(1),"dB"]})]})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#222",borderRadius:"8px"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[u.jsx("span",{style:{fontWeight:"bold"},children:"Limiter"}),u.jsx("button",{onClick:()=>v({enabled:!d.enabled}),style:{padding:"4px 12px",backgroundColor:d.enabled?"#4caf50":"#666",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.8em"},children:d.enabled?"ON":"OFF"})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"20px",opacity:d.enabled?1:.5},children:[u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"0.75em",color:"#888"},children:"Ceiling"}),u.jsx("input",{type:"range",min:"-6",max:"0",step:"0.1",value:d.ceiling,onChange:T=>v({ceiling:Number(T.target.value)}),disabled:!d.enabled,style:{width:"100%"}}),u.jsxs("div",{style:{fontSize:"0.75em",textAlign:"center"},children:[d.ceiling,"dB"]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"0.75em",color:"#888"},children:"Release"}),u.jsx("input",{type:"range",min:"10",max:"500",value:d.release,onChange:T=>v({release:Number(T.target.value)}),disabled:!d.enabled,style:{width:"100%"}}),u.jsxs("div",{style:{fontSize:"0.75em",textAlign:"center"},children:[d.release,"ms"]})]})]})]})]}),n==="reverb"&&u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[u.jsx("span",{style:{fontWeight:"bold"},children:"Reverb"}),u.jsx("button",{onClick:()=>_({enabled:!g.enabled}),style:{padding:"4px 12px",backgroundColor:g.enabled?"#4caf50":"#666",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.8em"},children:g.enabled?"ON":"OFF"})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px",opacity:g.enabled?1:.5},children:[u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"0.75em",color:"#888"},children:"Room Size"}),u.jsx("input",{type:"range",min:"0",max:"100",value:g.roomSize,onChange:T=>_({roomSize:Number(T.target.value)}),disabled:!g.enabled,style:{width:"100%"}}),u.jsxs("div",{style:{fontSize:"0.75em",textAlign:"center"},children:[g.roomSize,"%"]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"0.75em",color:"#888"},children:"Damping"}),u.jsx("input",{type:"range",min:"0",max:"100",value:g.damping,onChange:T=>_({damping:Number(T.target.value)}),disabled:!g.enabled,style:{width:"100%"}}),u.jsxs("div",{style:{fontSize:"0.75em",textAlign:"center"},children:[g.damping,"%"]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"0.75em",color:"#888"},children:"Wet/Dry"}),u.jsx("input",{type:"range",min:"0",max:"100",value:g.wetDry,onChange:T=>_({wetDry:Number(T.target.value)}),disabled:!g.enabled,style:{width:"100%"}}),u.jsxs("div",{style:{fontSize:"0.75em",textAlign:"center"},children:[g.wetDry,"%"]})]})]}),u.jsxs("div",{style:{marginTop:"20px"},children:[u.jsx("label",{style:{fontSize:"0.8em",color:"#888",marginBottom:"8px",display:"block"},children:"Quick Presets"}),u.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[{name:"Room",size:30,damp:60,wet:15},{name:"Hall",size:70,damp:40,wet:25},{name:"Plate",size:50,damp:30,wet:20},{name:"Cathedral",size:90,damp:20,wet:35},{name:"Ambient",size:80,damp:50,wet:40}].map(T=>u.jsx("button",{onClick:()=>_({roomSize:T.size,damping:T.damp,wetDry:T.wet,enabled:!0}),style:{padding:"6px 12px",backgroundColor:"#333",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.8em"},children:T.name},T.name))})]})]})]})]})},RT={grief:["I'm writing about the weight of loss","This song is about what I couldn't say","I need to express the ache of missing someone","I want to capture the silence after goodbye","This is about the memories that won't fade"],joy:["I'm writing about that moment everything clicked","This song captures pure happiness","I want to express overwhelming gratitude","This is about finding light in darkness","I'm celebrating a breakthrough moment"],anger:["I'm writing about being pushed too far","This song is about standing up for myself","I need to express this burning frustration","I want to capture the fire of injustice","This is about breaking free from control"],fear:["I'm writing about the anxiety that won't leave","This song is about facing the unknown","I need to express this overwhelming worry","I want to capture the feeling of being trapped","This is about the fear of losing everything"],love:["I'm writing about that first moment I knew","This song captures deep connection","I want to express how they make me feel","This is about finding home in someone","I'm celebrating this beautiful bond"],longing:["I'm writing about what I can't have","This song is about waiting for something","I need to express this deep yearning","I want to capture the ache of distance","This is about hoping for what's missing"]},ET={low:["gently","softly","quietly","subtly","lightly"],moderate:["clearly","directly","honestly","openly","sincerely"],high:["intensely","powerfully","deeply","urgently","desperately"]},DT=(o,e,n)=>{const i=RT[o.toLowerCase()]||[`I'm writing about ${o.toLowerCase()}`],r=ET[e.toLowerCase()]||["honestly"],l=i[Math.floor(Math.random()*i.length)],d=r[Math.floor(Math.random()*r.length)],f=[`${l}, ${d} expressing ${n.toLowerCase()}.`,`I want to ${d} write about ${n.toLowerCase()}.`,`This song ${d} explores ${n.toLowerCase()}.`,`I'm ${d} trying to capture ${n.toLowerCase()}.`];return f[Math.floor(Math.random()*f.length)]},NT=({selectedEmotion:o,onPromptGenerated:e,autoGenerate:n=!0})=>{const[i,r]=I.useState(""),[l,d]=I.useState(!1),[f,g]=I.useState([]),m=I.useRef(null);I.useEffect(()=>(n&&o&&(y(),m.current=setInterval(()=>{y()},3e4)),()=>{m.current&&clearInterval(m.current)}),[o,n]);const y=()=>{o&&(d(!0),setTimeout(()=>{const x=DT(o.base,o.intensity,o.sub);r(x),g(b=>[x,...b.slice(0,4)]),e?.(x),d(!1)},500))};return o?u.jsxs("div",{style:{padding:"20px",backgroundColor:"rgba(99, 102, 241, 0.1)",borderRadius:"8px",border:"1px solid rgba(99, 102, 241, 0.3)"},children:[u.jsxs("div",{style:{marginBottom:"15px"},children:[u.jsx("h4",{style:{margin:"0 0 10px 0",color:"#fff"},children:"Auto-Generated Prompt"}),u.jsx("div",{style:{padding:"15px",backgroundColor:"rgba(0, 0, 0, 0.3)",borderRadius:"6px",minHeight:"60px",display:"flex",alignItems:"center",position:"relative"},children:l?u.jsxs("div",{style:{color:"#888",fontStyle:"italic",display:"flex",alignItems:"center",gap:"10px"},children:[u.jsx("span",{style:{display:"inline-block",width:"20px",height:"20px",border:"2px solid #6366f1",borderTopColor:"transparent",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),"Generating..."]}):u.jsx("p",{style:{margin:0,color:"#fff",fontSize:"1em",lineHeight:"1.5"},children:i||"Click generate to create a prompt"})})]}),u.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"15px"},children:[u.jsx("button",{onClick:y,disabled:l,style:{flex:1,padding:"10px",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"4px",cursor:l?"not-allowed":"pointer",fontWeight:"bold",opacity:l?.6:1},children:l?"Generating...":" Generate New"}),i&&u.jsx("button",{onClick:()=>{navigator.clipboard.writeText(i)},style:{padding:"10px 15px",backgroundColor:"#333",color:"white",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",cursor:"pointer"},title:"Copy prompt",children:""})]}),f.length>0&&u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"0.85em",color:"#888",marginBottom:"8px"},children:"Recent prompts:"}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:f.slice(0,3).map((x,b)=>u.jsx("button",{onClick:()=>{r(x),e?.(x)},style:{padding:"8px 12px",backgroundColor:"rgba(0, 0, 0, 0.2)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px",color:"#ccc",fontSize:"0.85em",textAlign:"left",cursor:"pointer",transition:"background-color 0.2s"},onMouseEnter:v=>{v.currentTarget.style.backgroundColor="rgba(99, 102, 241, 0.2)"},onMouseLeave:v=>{v.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.2)"},children:x},b))})]}),u.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]}):u.jsx("div",{style:{padding:"20px",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",textAlign:"center",color:"#888",fontStyle:"italic"},children:"Select an emotion to generate prompts"})},OT=({width:o=800,height:e=400,intensity:n=.5,color:i="#6366f1",syncToAudio:r=!1,audioLevel:l=0})=>{const d=I.useRef(null),f=I.useRef(null),g=I.useRef(0),m=I.useRef([]);return I.useEffect(()=>{if(!d.current)return;const y=d.current,x=y.getContext("2d");if(!x)return;const b=20;m.current=Array.from({length:b},()=>({x:Math.random()*o,y:Math.random()*e,angle:Math.random()*Math.PI*2,length:50+Math.random()*100,width:2+Math.random()*8,opacity:.3+Math.random()*.7,speed:.5+Math.random()*2}));const v=(w,T,C,N,A,D)=>{x.save(),x.globalAlpha=D,x.strokeStyle=i,x.lineWidth=A,x.lineCap="round",x.lineJoin="round",x.beginPath();const M=10;let E=w,k=T;x.moveTo(E,k);for(let R=1;R<=M;R++){const O=N/M,L=Math.sin(g.current*2+R)*2,q=C+Math.PI/2,P=Math.cos(q)*L,te=Math.sin(q)*L;E+=Math.cos(C)*O+P,k+=Math.sin(C)*O+te,x.lineTo(E,k)}x.stroke(),x.globalAlpha=D*.3;for(let R=0;R<5;R++){const O=(R-2)*2,L=C+Math.PI/2,q=Math.cos(L)*O,P=Math.sin(L)*O;x.beginPath(),x.moveTo(w+q,T+P);let te=w,se=T;for(let de=1;de<=M;de++){const B=N/M,Q=Math.sin(g.current*2+de)*1,ne=C+Math.PI/2,ae=Math.cos(ne)*Q,ue=Math.sin(ne)*Q;te+=Math.cos(C)*B+ae,se+=Math.sin(C)*B+ue,x.lineTo(te+q,se+P)}x.stroke()}x.restore()},_=()=>{x&&(x.fillStyle="rgba(10, 10, 10, 0.1)",x.fillRect(0,0,y.width,y.height),g.current+=.016,m.current.forEach(w=>{w.x+=Math.cos(w.angle)*w.speed*n,w.y+=Math.sin(w.angle)*w.speed*n,w.x<0&&(w.x=o),w.x>o&&(w.x=0),w.y<0&&(w.y=e),w.y>e&&(w.y=0);let T=n,C=w.opacity;r&&l>0&&(T*=1+l*2,C*=1+l,w.angle+=l*.1),v(w.x,w.y,w.angle,w.length*T,w.width*(1+l),Math.min(1,C))}),f.current=requestAnimationFrame(_))};return _(),()=>{f.current&&cancelAnimationFrame(f.current)}},[o,e,n,i,r,l]),u.jsx("canvas",{ref:d,width:o,height:e,style:{width:"100%",height:"100%",backgroundColor:"#0a0a0a",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"}})},zT=({width:o=800,height:e=400,color:n="#6366f1",lineWidth:i=3,enabled:r=!0,onDoodleComplete:l})=>{const d=I.useRef(null),[f,g]=I.useState(!1),[m,y]=I.useState([]),[x,b]=I.useState([]),[v,_]=I.useState(0),w=I.useCallback(()=>{const M=d.current;if(!M)return;const E=M.getContext("2d");if(!E)return;E.fillStyle="#0a0a0a",E.fillRect(0,0,M.width,M.height),E.strokeStyle="rgba(99, 102, 241, 0.1)",E.lineWidth=1;const k=20;for(let R=0;R<M.width;R+=k)E.beginPath(),E.moveTo(R,0),E.lineTo(R,M.height),E.stroke();for(let R=0;R<M.height;R+=k)E.beginPath(),E.moveTo(0,R),E.lineTo(M.width,R),E.stroke();if(x.forEach(R=>{if(!(R.length<2)){E.strokeStyle=n,E.lineWidth=i,E.lineCap="round",E.lineJoin="round",E.beginPath(),E.moveTo(R[0].x,R[0].y);for(let O=1;O<R.length;O++){const L=Math.sin(v+O*.1)*.5,q=Math.cos(v+O*.1)*.5;E.lineTo(R[O].x+L,R[O].y+q)}E.stroke()}}),m.length>1){E.strokeStyle=n,E.lineWidth=i,E.lineCap="round",E.lineJoin="round",E.globalAlpha=.8,E.beginPath(),E.moveTo(m[0].x,m[0].y);for(let R=1;R<m.length;R++){const O=Math.sin(v+R*.1)*.5,L=Math.cos(v+R*.1)*.5;E.lineTo(m[R].x+O,m[R].y+L)}E.stroke(),E.globalAlpha=1}},[x,m,n,i,v]);I.useEffect(()=>{w()},[w]),I.useEffect(()=>{const M=setInterval(()=>{_(E=>E+.1)},100);return()=>clearInterval(M)},[]);const T=M=>{const E=d.current;if(!E)return null;const k=E.getBoundingClientRect();return{x:M.clientX-k.left,y:M.clientY-k.top}},C=M=>{if(!r)return;const E=T(M);E&&(g(!0),y([E]))},N=M=>{if(!r||!f)return;const E=T(M);E&&y(k=>[...k,E])},A=()=>{if(!(!r||!f)){if(m.length>0){const M=[...x,m];b(M),y([]),l?.(M)}g(!1)}},D=()=>{b([]),y([])};return u.jsxs("div",{style:{position:"relative"},children:[u.jsx("canvas",{ref:d,width:o,height:e,onMouseDown:C,onMouseMove:N,onMouseUp:A,onMouseLeave:A,style:{width:"100%",height:"100%",backgroundColor:"#0a0a0a",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",cursor:r?"crosshair":"default"}}),r&&u.jsx("div",{style:{position:"absolute",top:"10px",right:"10px",display:"flex",gap:"8px"},children:u.jsx("button",{onClick:D,style:{padding:"6px 12px",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",cursor:"pointer",fontSize:"0.85em"},children:"Clear"})}),!r&&u.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#666",fontSize:"0.9em",fontStyle:"italic"},children:"Click to enable doodling"})]})},BT=({shaderSource:o,width:e=800,height:n=400,uniforms:i={},animated:r=!0})=>{const l=I.useRef(null),d=I.useRef(null),f=I.useRef(null),g=I.useRef(null),m=I.useRef(0),y=`
    attribute vec2 a_position;
    varying vec2 fragTexCoord;
    
    void main() {
      fragTexCoord = a_position * 0.5 + 0.5;
      gl_Position = vec4(a_position, 0.0, 1.0);
    }
  `;return I.useEffect(()=>{const x=l.current;if(!x)return;const b=x.getContext("webgl")||x.getContext("webgl2");if(!b){console.error("WebGL not supported");return}d.current=b;const v=(D,M)=>{const E=b.createShader(M);return E?(b.shaderSource(E,D),b.compileShader(E),b.getShaderParameter(E,b.COMPILE_STATUS)?E:(console.error("Shader compile error:",b.getShaderInfoLog(E)),b.deleteShader(E),null)):null},_=v(y,b.VERTEX_SHADER),w=v(o,b.FRAGMENT_SHADER);if(!_||!w)return;const T=b.createProgram();if(!T)return;if(b.attachShader(T,_),b.attachShader(T,w),b.linkProgram(T),!b.getProgramParameter(T,b.LINK_STATUS)){console.error("Program link error:",b.getProgramInfoLog(T));return}f.current=T;const C=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,C),b.bufferData(b.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),b.STATIC_DRAW);const N=b.getAttribLocation(T,"a_position");b.enableVertexAttribArray(N),b.vertexAttribPointer(N,2,b.FLOAT,!1,0,0);const A=()=>{if(!b||!T)return;m.current+=.016,b.useProgram(T),b.viewport(0,0,x.width,x.height);const D=b.getUniformLocation(T,"time");D!==null&&b.uniform1f(D,m.current);const M=b.getUniformLocation(T,"resolution");M!==null&&b.uniform2f(M,x.width,x.height),Object.entries(i).forEach(([E,k])=>{const R=b.getUniformLocation(T,E);R!==null&&(Array.isArray(k)?k.length===2?b.uniform2f(R,k[0],k[1]):k.length===4&&b.uniform4f(R,k[0],k[1],k[2],k[3]):b.uniform1f(R,k))}),b.drawArrays(b.TRIANGLE_STRIP,0,4),r&&(g.current=requestAnimationFrame(A))};return A(),()=>{g.current&&cancelAnimationFrame(g.current),T&&b.deleteProgram(T),_&&b.deleteShader(_),w&&b.deleteShader(w)}},[o,i,r]),u.jsx("canvas",{ref:l,width:e,height:n,style:{width:"100%",height:"100%",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"}})},y0=({shaderName:o,width:e=800,height:n=400,animated:i=!0,intensity:r=.5})=>{const[l,d]=I.useState(""),[f,g]=I.useState(!0);if(I.useEffect(()=>{o==="brushstroke"?d(IT()):o==="handdrawn"&&d(FT()),g(!1)},[o]),f)return u.jsx("div",{style:{width:e,height:n,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#0a0a0a",borderRadius:"8px",color:"#888"},children:"Loading shader..."});const m=o==="brushstroke"?{strokePosition:.5+Math.sin(Date.now()/1e3)*.2,strokeWidth:.1,strokeIntensity:r,strokeAngle:Date.now()/1e3,wetness:.3,bristleSpread:.5}:{lineColor:[0,1,1,.5],backgroundColor:[.05,.1,.2,1],wobbleIntensity:r,gridSpacing:50};return u.jsx(BT,{shaderSource:l,width:e,height:n,uniforms:m,animated:i})},IT=()=>`
precision mediump float;
varying vec2 fragTexCoord;
uniform float time;
uniform vec2 resolution;
uniform float strokePosition;
uniform float strokeWidth;
uniform float strokeIntensity;
uniform float strokeAngle;
uniform float wetness;
uniform float bristleSpread;

float hash(vec2 p) {
    return fract(sin(dot(p, vec2(127.1, 311.7))) * 43758.5453);
}

float noise(vec2 p) {
    vec2 i = floor(p);
    vec2 f = fract(p);
    f = f * f * (3.0 - 2.0 * f);
    float a = hash(i);
    float b = hash(i + vec2(1.0, 0.0));
    float c = hash(i + vec2(0.0, 1.0));
    float d = hash(i + vec2(1.0, 1.0));
    return mix(mix(a, b, f.x), mix(c, d, f.x), f.y);
}

void main() {
    vec2 uv = fragTexCoord;
    vec3 canvasColor = vec3(0.95, 0.93, 0.9);
    float paperTex = noise(uv * 100.0) * 0.03;
    canvasColor -= paperTex;
    
    float c = cos(strokeAngle * 0.1);
    float s = sin(strokeAngle * 0.1);
    vec2 ruv = vec2(
        (uv.x - 0.5) * c - (uv.y - 0.5) * s + 0.5,
        (uv.x - 0.5) * s + (uv.y - 0.5) * c + 0.5
    );
    
    float yPos = strokePosition;
    float dist = abs(ruv.y - yPos);
    float stroke = smoothstep(strokeWidth * 0.5, strokeWidth * 0.2, dist);
    stroke *= 0.8 + 0.2 * noise(ruv * 30.0);
    
    vec3 paintColor = vec3(0.2, 0.4, 0.8);
    paintColor.r += strokeIntensity * 0.3;
    
    vec3 finalColor = mix(canvasColor, paintColor, stroke);
    float glow = stroke * strokeIntensity * 0.5;
    finalColor += vec3(0.8, 0.6, 1.0) * glow;
    
    float vignette = 1.0 - length(uv - 0.5) * 0.4;
    finalColor *= vignette;
    
    gl_FragColor = vec4(finalColor, 1.0);
}
  `,FT=()=>`
precision mediump float;
varying vec2 fragTexCoord;
uniform float time;
uniform vec2 resolution;
uniform float wobbleIntensity;
uniform float gridSpacing;

float hash(vec2 p) {
    return fract(sin(dot(p, vec2(127.1, 311.7))) * 43758.5453);
}

float noise(vec2 p) {
    vec2 i = floor(p);
    vec2 f = fract(p);
    vec2 u = f * f * (3.0 - 2.0 * f);
    float a = hash(i);
    float b = hash(i + vec2(1.0, 0.0));
    float c = hash(i + vec2(0.0, 1.0));
    float d = hash(i + vec2(1.0, 1.0));
    return mix(a, b, u.x) + (c - a) * u.y * (1.0 - u.x) + (d - b) * u.x * u.y;
}

float fbm(vec2 p) {
    float value = 0.0;
    float amplitude = 0.5;
    float frequency = 1.0;
    for (int i = 0; i < 4; i++) {
        value += amplitude * noise(p * frequency);
        amplitude *= 0.5;
        frequency *= 2.0;
    }
    return value;
}

void main() {
    vec2 uv = fragTexCoord;
    vec3 color = vec3(0.05, 0.1, 0.2);
    
    float wobbleX = fbm(vec2(uv.y * 5.0, time * 0.3)) * wobbleIntensity * 0.02;
    float wobbleY = fbm(vec2(uv.x * 5.0, time * 0.3 + 100.0)) * wobbleIntensity * 0.02;
    vec2 wobbledUV = uv + vec2(wobbleX, wobbleY);
    
    float gridSize = gridSpacing / resolution.x;
    float vLine = mod(wobbledUV.x, gridSize);
    float vLineAlpha = 1.0 - smoothstep(0.0, 0.003, min(vLine, gridSize - vLine));
    float hLine = mod(wobbledUV.y, gridSize);
    float hLineAlpha = 1.0 - smoothstep(0.0, 0.003, min(hLine, gridSize - hLine));
    float lineAlpha = max(vLineAlpha, hLineAlpha);
    lineAlpha *= 0.3 + 0.1 * noise(wobbledUV * 100.0);
    
    color = mix(color, vec3(0.0, 1.0, 1.0), lineAlpha);
    
    float vignette = 1.0 - length(uv - 0.5) * 0.5;
    color *= vignette;
    
    float paperNoise = noise(uv * 200.0) * 0.02;
    color += vec3(paperNoise);
    
    float pulse = sin(time * 0.5) * 0.1 + 0.9;
    color *= pulse;
    
    gl_FragColor = vec4(color, 1.0);
}
  `;class VT{recorder=null;audioContext=null;mediaStream=null;state;audioChunks=[];loopInterval=null;retrospectiveBuffer=[];retrospectiveMaxDuration=30;constructor(e){this.state={isRecording:!1,isPunching:!1,punchInTime:null,punchOutTime:null,autoPunch:!1,preRoll:2,postRoll:1,loopRecording:!1,loopStart:0,loopEnd:0,takeIncrement:1,tracks:[],currentTime:0,retrospectiveBuffer:null,retrospectiveEnabled:!0,...e}}async initialize(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.mediaStream=await navigator.mediaDevices.getUserMedia({audio:{channelCount:{ideal:2},sampleRate:{ideal:44100},echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}})}catch(e){throw console.error("Failed to initialize recording:",e),e}}async startRecording(e,n={}){(!this.mediaStream||!this.audioContext)&&await this.initialize();const i=this.state.tracks.find(l=>l.id===e);if(!i)throw new Error(`Track ${e} not found`);if(i.recordSafe)throw new Error(`Track ${e} is record-safe`);if(!i.armed)throw new Error(`Track ${e} is not armed`);const r={channels:n.channels||2,sampleRate:n.sampleRate||44100,bitDepth:n.bitDepth||24,format:n.format||"wav"};try{const l={mimeType:"audio/webm;codecs=opus",audioBitsPerSecond:r.bitDepth*44100};this.recorder=new MediaRecorder(this.mediaStream,l),this.audioChunks=[],this.recorder.ondataavailable=d=>{d.data.size>0&&this.audioChunks.push(d.data)},this.recorder.onstop=async()=>{const d=new Blob(this.audioChunks,{type:"audio/webm"}),f=await this.blobToAudioBuffer(d);this.finishRecording(e,f)},this.recorder.start(),this.state.isRecording=!0,this.state.retrospectiveEnabled&&this.startRetrospectiveBuffer()}catch(l){throw console.error("Failed to start recording:",l),l}}stopRecording(){this.recorder&&this.state.isRecording&&(this.recorder.stop(),this.state.isRecording=!1,this.stopRetrospectiveBuffer())}async punchIn(e,n){this.state.punchInTime=n,this.state.isPunching=!0,this.state.preRoll>0&&await this.startPreRoll(n-this.state.preRoll),await this.startRecording(e)}punchOut(e){this.state.punchOutTime=e,this.stopRecording(),this.state.isPunching=!1}setAutoPunch(e,n){this.state.autoPunch=!0,this.state.punchInTime=e,this.state.punchOutTime=n}startLoopRecording(e,n,i,r=!0){this.state.loopRecording=!0,this.state.loopStart=n,this.state.loopEnd=i;const l=async()=>{this.state.currentTime>=n&&this.state.currentTime<i?this.state.isRecording||await this.startRecording(e):this.state.currentTime>=i&&(this.stopRecording(),r&&this.state.takeIncrement++,this.createNewTake(e))};this.loopInterval=setInterval(l,100)}createNewTake(e){const n=this.state.tracks.find(r=>r.id===e);if(!n)return;const i={id:`take-${Date.now()}`,startTime:this.state.loopStart,endTime:this.state.loopEnd,audioBuffer:null,selected:!1};n.takes.push(i),n.currentTake=n.takes.length-1}createComp(e,n,i){const r=this.state.tracks.find(m=>m.id===e);if(!r)throw new Error(`Track ${e} not found`);const l=Math.max(...i.map(m=>m.end)),d=this.audioContext?.sampleRate||44100,f=Math.ceil(l*d),g=this.audioContext.createBuffer(2,f,d);return i.forEach(m=>{const y=r.takes.find(x=>x.id===m.takeId);if(y&&y.audioBuffer){const x=Math.floor(m.start*d),v=Math.floor(m.end*d)-x;for(let _=0;_<Math.min(y.audioBuffer.numberOfChannels,2);_++){const w=y.audioBuffer.getChannelData(_),T=g.getChannelData(_);for(let C=0;C<v&&x+C<f;C++)T[x+C]+=w[C]}}}),g}startRetrospectiveBuffer(){if(!this.audioContext||!this.mediaStream)return;const e=this.audioContext.createMediaStreamSource(this.mediaStream),n=4096,i=this.audioContext.sampleRate,r=this.retrospectiveMaxDuration*i,l=this.audioContext.createScriptProcessor(n,2,2);this.retrospectiveBuffer=[],l.onaudioprocess=d=>{const f=d.inputBuffer.getChannelData(0),g=new Float32Array(f.length);g.set(f),this.retrospectiveBuffer.push(g);const m=this.retrospectiveBuffer.reduce((y,x)=>y+x.length,0);if(m>r){const y=m-r;let x=0;for(;x<y&&this.retrospectiveBuffer.length>0;)x+=this.retrospectiveBuffer[0].length,this.retrospectiveBuffer.shift()}},e.connect(l),l.connect(this.audioContext.destination)}stopRetrospectiveBuffer(){if(this.retrospectiveBuffer.length>0&&this.audioContext){const e=this.retrospectiveBuffer.reduce((d,f)=>d+f.length,0),n=this.audioContext.sampleRate,i=this.audioContext.createBuffer(1,e,n),r=i.getChannelData(0);let l=0;this.retrospectiveBuffer.forEach(d=>{r.set(d,l),l+=d.length}),this.state.retrospectiveBuffer=i}}captureRetrospective(e){if(!this.state.retrospectiveBuffer)return null;const n=this.audioContext?.sampleRate||44100,i=Math.floor(e*n),r=this.state.retrospectiveBuffer.length,l=Math.max(0,r-i),d=this.audioContext.createBuffer(this.state.retrospectiveBuffer.numberOfChannels,i,n);for(let f=0;f<this.state.retrospectiveBuffer.numberOfChannels;f++){const g=this.state.retrospectiveBuffer.getChannelData(f);d.getChannelData(f).set(g.subarray(l))}return d}async startAutoRecord(e,n=.01){(!this.audioContext||!this.mediaStream)&&await this.initialize();const i=this.audioContext.createMediaStreamSource(this.mediaStream),r=this.audioContext.createAnalyser();r.fftSize=2048,i.connect(r);const l=new Uint8Array(r.frequencyBinCount);setInterval(()=>{r.getByteTimeDomainData(l);const g=(l.reduce((m,y)=>m+y,0)/l.length-128)/128;Math.abs(g)>n&&!this.state.isRecording&&this.startRecording(e)},100)}async startVoiceActivated(e,n=.02){await this.startAutoRecord(e,n)}async blobToAudioBuffer(e){const n=await e.arrayBuffer();return await this.audioContext.decodeAudioData(n)}finishRecording(e,n){const i=this.state.tracks.find(l=>l.id===e);if(!i)return;const r=i.takes[i.currentTake];r&&(r.audioBuffer=n,r.endTime=this.audioContext.currentTime)}async startPreRoll(e){}getState(){return{...this.state}}getTracks(){return[...this.state.tracks]}setTrackArmed(e,n){const i=this.state.tracks.find(r=>r.id===e);i&&(i.armed=n)}setRecordSafe(e,n){const i=this.state.tracks.find(r=>r.id===e);i&&(i.recordSafe=n)}setInputMonitoring(e,n){const i=this.state.tracks.find(r=>r.id===e);i&&(i.inputMonitoring=n)}cleanup(){this.recorder&&this.recorder.stop(),this.mediaStream&&this.mediaStream.getTracks().forEach(e=>e.stop()),this.loopInterval&&clearInterval(this.loopInterval),this.audioContext&&this.audioContext.close()}}class LT{state;toneInstruments;audioContext=null;constructor(e){this.state={samplers:new Map,activeSampler:null,synthesizers:new Map,activeSynth:null,synthPresets:new Map,drumMachines:new Map,activeDrumMachine:null,drumKits:["808","909","Acoustic","Electronic","Lo-Fi","Trap","Jazz","Rock"],orchestralInstruments:new Map,activeOrchestral:null,masterVolume:1,globalTranspose:0,globalTuning:440,midiLearn:!1,midiLearnTarget:null,...e},this.toneInstruments=new Map}async initialize(){await Da(),this.audioContext=Et().rawContext}createSampler(e,n="multi-sample"){const i={id:`sampler-${Date.now()}`,name:e,type:n,samples:new Map,velocityLayers:new Map,roundRobinGroups:new Map,keyZones:[],adsr:{attack:.01,decay:.1,sustain:.8,release:.3},filter:{type:"lowpass",frequency:2e4,Q:1},pitchBend:{range:2,enabled:!0},modWheel:{target:"filter",amount:.5},polyphony:64,voiceSteal:"oldest",legatoMode:!1,portamentoTime:0};return this.state.samplers.set(i.id,i),i}loadSampleToKey(e,n,i){const r=this.state.samplers.get(e);r&&r.samples.set(n,i)}addVelocityLayer(e,n,i){const r=this.state.samplers.get(e);if(r){const l=r.velocityLayers.get(n)||[];l.push(i),r.velocityLayers.set(n,l)}}addRoundRobinSample(e,n,i){const r=this.state.samplers.get(e);if(r){const l=r.roundRobinGroups.get(n)||{samples:[],currentIndex:0};l.samples.push(i),r.roundRobinGroups.set(n,l)}}createKeyZone(e,n,i,r,l){const d=this.state.samplers.get(e);d&&d.keyZones.push({startNote:n,endNote:i,rootNote:r,sample:l})}setSamplerADSR(e,n){const i=this.state.samplers.get(e);i&&(i.adsr=n)}setSamplerFilter(e,n){const i=this.state.samplers.get(e);i&&(i.filter=n)}setSamplerPolyphony(e,n){const i=this.state.samplers.get(e);i&&(i.polyphony=Math.min(128,Math.max(1,n)))}setVoiceStealMode(e,n){const i=this.state.samplers.get(e);i&&(i.voiceSteal=n)}enableLegatoMode(e,n){const i=this.state.samplers.get(e);i&&(i.legatoMode=n)}setPortamentoTime(e,n){const i=this.state.samplers.get(e);i&&(i.portamentoTime=n)}setPitchBendRange(e,n){const i=this.state.samplers.get(e);i&&(i.pitchBend.range=n)}setModWheelTarget(e,n,i){const r=this.state.samplers.get(e);r&&(r.modWheel={target:n,amount:i})}createSynthesizer(e,n="subtractive"){const i={id:`synth-${Date.now()}`,name:e,type:n,voices:{oscillators:[this.createDefaultOscillator(1),this.createDefaultOscillator(2)],filter:{type:"lowpass",frequency:8e3,Q:1,keyTracking:0,envelopeAmount:0},envelopes:[this.createDefaultEnvelope("amplitude"),this.createDefaultEnvelope("filter")],lfos:[this.createDefaultLFO(1)]},polyphony:16,unisonVoices:1,unisonDetune:0,unisonSpread:0,portamento:0,pitchBendRange:2,modMatrix:[],effects:[]};this.state.synthesizers.set(i.id,i);const r=new _i(Gs).toDestination();return this.toneInstruments.set(i.id,r),i}createDefaultOscillator(e){return{id:`osc-${e}`,waveform:e===1?"sawtooth":"square",detune:0,octave:0,semitone:0,fine:0,pan:0,volume:e===1?1:.5,phase:0,pulseWidth:.5,wavetablePosition:0,enabled:!0}}createDefaultEnvelope(e){return{id:`env-${e}`,attack:e==="amplitude"?.01:.1,decay:.3,sustain:e==="amplitude"?.7:.5,release:.5,attackCurve:"exponential",decayCurve:"exponential",releaseCurve:"exponential",destination:e,amount:1}}createDefaultLFO(e){return{id:`lfo-${e}`,waveform:"sine",rate:2,depth:0,phase:0,destination:"pitch",sync:!1,retrigger:!1,fade:0}}addOscillator(e){const n=this.state.synthesizers.get(e);if(n&&n.voices.oscillators.length<8){const i=this.createDefaultOscillator(n.voices.oscillators.length+1);return n.voices.oscillators.push(i),i}return null}setOscillatorWaveform(e,n,i){const r=this.state.synthesizers.get(e);if(r){const l=r.voices.oscillators.find(d=>d.id===n);l&&(l.waveform=i)}}setOscillatorDetune(e,n,i){const r=this.state.synthesizers.get(e);if(r){const l=r.voices.oscillators.find(d=>d.id===n);l&&(l.detune=i)}}setOscillatorVolume(e,n,i){const r=this.state.synthesizers.get(e);if(r){const l=r.voices.oscillators.find(d=>d.id===n);l&&(l.volume=i)}}setSynthFilter(e,n){const i=this.state.synthesizers.get(e);i&&(i.voices.filter={...i.voices.filter,...n})}setSynthEnvelope(e,n,i){const r=this.state.synthesizers.get(e);if(r){const l=r.voices.envelopes.find(d=>d.id===n);l&&Object.assign(l,i)}}addLFO(e){const n=this.state.synthesizers.get(e);if(n&&n.voices.lfos.length<4){const i=this.createDefaultLFO(n.voices.lfos.length+1);return n.voices.lfos.push(i),i}return null}setLFOParams(e,n,i){const r=this.state.synthesizers.get(e);if(r){const l=r.voices.lfos.find(d=>d.id===n);l&&Object.assign(l,i)}}setUnison(e,n,i,r){const l=this.state.synthesizers.get(e);l&&(l.unisonVoices=Math.min(16,Math.max(1,n)),l.unisonDetune=i,l.unisonSpread=r)}addModMatrixConnection(e,n,i,r){const l=this.state.synthesizers.get(e);l&&l.modMatrix.push({source:n,destination:i,amount:r})}removeModMatrixConnection(e,n,i){const r=this.state.synthesizers.get(e);r&&(r.modMatrix=r.modMatrix.filter(l=>!(l.source===n&&l.destination===i)))}saveSynthPreset(e,n){const i=this.state.synthesizers.get(e);if(i){const r=JSON.parse(JSON.stringify(i));r.id=`preset-${n}`,r.name=n,this.state.synthPresets.set(n,r)}}loadSynthPreset(e,n){const i=this.state.synthesizers.get(e),r=this.state.synthPresets.get(n);if(i&&r){const l=i.id;Object.assign(i,JSON.parse(JSON.stringify(r))),i.id=l}}createFMSynth(e){const n=this.createSynthesizer(e,"fm");return n.modMatrix.push({source:"osc-2",destination:"osc-1-freq",amount:.5}),n}createWavetableSynth(e){const n=this.createSynthesizer(e,"wavetable");return n.voices.oscillators.forEach(i=>{i.wavetablePosition=0}),n}createGranularSynth(e){return this.createSynthesizer(e,"granular")}createDrumMachine(e,n="808"){const i={id:`drum-${Date.now()}`,name:e,kit:n,pads:this.createDefaultDrumPads(),swing:0,pattern:new Array(16).fill(0),tempo:120,steps:16,currentStep:0,playing:!1,masterVolume:1,masterTune:0,sends:[]};return this.state.drumMachines.set(i.id,i),i}createDefaultDrumPads(){return["Kick","Snare","Closed HH","Open HH","Low Tom","Mid Tom","High Tom","Crash","Ride","Clap","Rim","Cowbell","Conga Low","Conga High","Shaker","Perc"].map((n,i)=>({id:`pad-${i}`,name:n,note:36+i,sample:"",volume:1,pan:0,pitch:0,decay:1,reverb:0,muted:!1,soloed:!1,muteGroup:0,chokeGroup:i===2||i===3?1:0,velocityCurve:"linear",layers:[]}))}setPadSample(e,n,i){const r=this.state.drumMachines.get(e);if(r){const l=r.pads.find(d=>d.id===n);l&&(l.sample=i)}}setPadVolume(e,n,i){const r=this.state.drumMachines.get(e);if(r){const l=r.pads.find(d=>d.id===n);l&&(l.volume=i)}}setPadPan(e,n,i){const r=this.state.drumMachines.get(e);if(r){const l=r.pads.find(d=>d.id===n);l&&(l.pan=i)}}setPadPitch(e,n,i){const r=this.state.drumMachines.get(e);if(r){const l=r.pads.find(d=>d.id===n);l&&(l.pitch=i)}}setPadDecay(e,n,i){const r=this.state.drumMachines.get(e);if(r){const l=r.pads.find(d=>d.id===n);l&&(l.decay=i)}}setMuteGroup(e,n,i){const r=this.state.drumMachines.get(e);if(r){const l=r.pads.find(d=>d.id===n);l&&(l.muteGroup=i)}}setChokeGroup(e,n,i){const r=this.state.drumMachines.get(e);if(r){const l=r.pads.find(d=>d.id===n);l&&(l.chokeGroup=i)}}setPatternStep(e,n,i){const r=this.state.drumMachines.get(e);r&&n>=0&&n<r.pattern.length&&(r.pattern[n]=i)}setSwing(e,n){const i=this.state.drumMachines.get(e);i&&(i.swing=Math.max(0,Math.min(100,n)))}loadKit(e,n){const i=this.state.drumMachines.get(e);i&&(i.kit=n)}triggerPad(e,n,i=1){const r=this.state.drumMachines.get(e);if(r){const l=r.pads.find(d=>d.id===n);l&&!l.muted&&(l.chokeGroup>0&&r.pads.forEach(d=>{d.chokeGroup===l.chokeGroup&&d.id}),console.log(`Triggering pad ${l.name} with velocity ${i}`))}}startPattern(e){const n=this.state.drumMachines.get(e);n&&(n.playing=!0,n.currentStep=0)}stopPattern(e){const n=this.state.drumMachines.get(e);n&&(n.playing=!1)}createOrchestralInstrument(e,n){const i={id:`orch-${Date.now()}`,name:e,category:n,articulations:this.getDefaultArticulations(n),currentArticulation:"sustain",expressionCC:11,dynamicsCC:1,vibratoCC:21,legato:!0,portamento:.1,divisi:!1,sectionSize:n==="strings"?16:n==="choir"?24:4};return this.state.orchestralInstruments.set(i.id,i),i}getDefaultArticulations(e){const n=[{id:"sustain",name:"Sustain",keyswitch:24,samples:new Map,velocityLayers:4,roundRobin:2},{id:"staccato",name:"Staccato",keyswitch:25,samples:new Map,velocityLayers:4,roundRobin:3},{id:"marcato",name:"Marcato",keyswitch:26,samples:new Map,velocityLayers:3,roundRobin:2}];return e==="strings"?[...n,{id:"tremolo",name:"Tremolo",keyswitch:27,samples:new Map,velocityLayers:3,roundRobin:2},{id:"pizzicato",name:"Pizzicato",keyswitch:28,samples:new Map,velocityLayers:4,roundRobin:4},{id:"spiccato",name:"Spiccato",keyswitch:29,samples:new Map,velocityLayers:4,roundRobin:4},{id:"col-legno",name:"Col Legno",keyswitch:30,samples:new Map,velocityLayers:2,roundRobin:2},{id:"sul-tasto",name:"Sul Tasto",keyswitch:31,samples:new Map,velocityLayers:3,roundRobin:2},{id:"sul-pont",name:"Sul Ponticello",keyswitch:32,samples:new Map,velocityLayers:3,roundRobin:2},{id:"harmonics",name:"Harmonics",keyswitch:33,samples:new Map,velocityLayers:2,roundRobin:2}]:e==="brass"?[...n,{id:"sfz",name:"Sforzando",keyswitch:27,samples:new Map,velocityLayers:3,roundRobin:2},{id:"falls",name:"Falls",keyswitch:28,samples:new Map,velocityLayers:2,roundRobin:2},{id:"rips",name:"Rips",keyswitch:29,samples:new Map,velocityLayers:2,roundRobin:2},{id:"muted",name:"Muted",keyswitch:30,samples:new Map,velocityLayers:4,roundRobin:2}]:e==="woodwinds"?[...n,{id:"flutter",name:"Flutter Tongue",keyswitch:27,samples:new Map,velocityLayers:3,roundRobin:2},{id:"trill-half",name:"Trill Half",keyswitch:28,samples:new Map,velocityLayers:2,roundRobin:2},{id:"trill-whole",name:"Trill Whole",keyswitch:29,samples:new Map,velocityLayers:2,roundRobin:2}]:e==="choir"?[{id:"ah",name:"Ah",keyswitch:24,samples:new Map,velocityLayers:4,roundRobin:2},{id:"oh",name:"Oh",keyswitch:25,samples:new Map,velocityLayers:4,roundRobin:2},{id:"ee",name:"Ee",keyswitch:26,samples:new Map,velocityLayers:4,roundRobin:2},{id:"oo",name:"Oo",keyswitch:27,samples:new Map,velocityLayers:4,roundRobin:2},{id:"mm",name:"Mm",keyswitch:28,samples:new Map,velocityLayers:3,roundRobin:2},{id:"staccato",name:"Staccato",keyswitch:29,samples:new Map,velocityLayers:4,roundRobin:3}]:n}setArticulation(e,n){const i=this.state.orchestralInstruments.get(e);i&&i.articulations.find(l=>l.id===n)&&(i.currentArticulation=n)}setExpressionCC(e,n){const i=this.state.orchestralInstruments.get(e);i&&(i.expressionCC=n)}setDynamicsCC(e,n){const i=this.state.orchestralInstruments.get(e);i&&(i.dynamicsCC=n)}setOrchestralLegato(e,n){const i=this.state.orchestralInstruments.get(e);i&&(i.legato=n)}setOrchestralPortamento(e,n){const i=this.state.orchestralInstruments.get(e);i&&(i.portamento=n)}enableDivisi(e,n){const i=this.state.orchestralInstruments.get(e);i&&(i.divisi=n)}setSectionSize(e,n){const i=this.state.orchestralInstruments.get(e);i&&(i.sectionSize=n)}playNote(e,n,i=1,r){const l=this.toneInstruments.get(e);if(l instanceof _i){const d=Jg(n,"midi").toFrequency();r?l.triggerAttackRelease(d,r,void 0,i):l.triggerAttack(d,void 0,i)}}releaseNote(e,n){const i=this.toneInstruments.get(e);if(i instanceof _i){const r=Jg(n,"midi").toFrequency();i.triggerRelease(r)}}setMasterVolume(e){this.state.masterVolume=Math.max(0,Math.min(1,e)),iT().volume.value=Ty(this.state.masterVolume)}setGlobalTranspose(e){this.state.globalTranspose=e}setGlobalTuning(e){this.state.globalTuning=e}enableMIDILearn(e){this.state.midiLearn=e}setMIDILearnTarget(e){this.state.midiLearnTarget=e}getState(){return{...this.state}}getSampler(e){return this.state.samplers.get(e)}getSynthesizer(e){return this.state.synthesizers.get(e)}getDrumMachine(e){return this.state.drumMachines.get(e)}getOrchestralInstrument(e){return this.state.orchestralInstruments.get(e)}getAllSamplers(){return Array.from(this.state.samplers.values())}getAllSynthesizers(){return Array.from(this.state.synthesizers.values())}getAllDrumMachines(){return Array.from(this.state.drumMachines.values())}getAllOrchestralInstruments(){return Array.from(this.state.orchestralInstruments.values())}cleanup(){this.toneInstruments.forEach(e=>{"dispose"in e&&e.dispose()}),this.toneInstruments.clear()}}const UT=({engine:o,onInstrumentChange:e})=>{const[n,i]=I.useState("synth"),[r,l]=I.useState([]),[d,f]=I.useState([]),[g,m]=I.useState([]),[y,x]=I.useState([]),[b,v]=I.useState(null);I.useEffect(()=>{_()},[o]);const _=()=>{l(o.getAllSynthesizers()),f(o.getAllSamplers()),m(o.getAllDrumMachines()),x(o.getAllOrchestralInstruments())},w=k=>{let R;switch(k){case"fm":R=o.createFMSynth(`FM Synth ${r.length+1}`);break;case"wavetable":R=o.createWavetableSynth(`Wavetable ${r.length+1}`);break;case"granular":R=o.createGranularSynth(`Granular ${r.length+1}`);break;default:R=o.createSynthesizer(`Synth ${r.length+1}`,k)}v(R.id),_(),e?.()},T=k=>{const R=o.createSampler(`Sampler ${d.length+1}`,k);v(R.id),_(),e?.()},C=k=>{const R=o.createDrumMachine(`Drums ${g.length+1}`,k);v(R.id),_(),e?.()},N=k=>{const R={strings:"Strings",woodwinds:"Woodwinds",brass:"Brass",percussion:"Percussion",keyboards:"Keys",choir:"Choir"},O=o.createOrchestralInstrument(`${R[k]} ${y.length+1}`,k);v(O.id),_(),e?.()},A=k=>u.jsxs("div",{style:Y.instrumentPanel,children:[u.jsx("h4",{style:Y.panelTitle,children:k.name}),u.jsxs("div",{style:Y.paramSection,children:[u.jsx("h5",{style:Y.sectionTitle,children:"Oscillators"}),k.voices.oscillators.map((R,O)=>u.jsxs("div",{style:Y.oscRow,children:[u.jsxs("span",{style:Y.label,children:["OSC ",O+1]}),u.jsxs("select",{value:R.waveform,onChange:L=>{o.setOscillatorWaveform(k.id,R.id,L.target.value),_()},style:Y.select,children:[u.jsx("option",{value:"sine",children:"Sine"}),u.jsx("option",{value:"triangle",children:"Triangle"}),u.jsx("option",{value:"sawtooth",children:"Sawtooth"}),u.jsx("option",{value:"square",children:"Square"}),u.jsx("option",{value:"pulse",children:"Pulse"})]}),u.jsx("input",{type:"range",min:"-100",max:"100",value:R.detune,onChange:L=>{o.setOscillatorDetune(k.id,R.id,parseInt(L.target.value)),_()},style:Y.slider}),u.jsxs("span",{style:Y.value,children:[R.detune,"ct"]})]},R.id)),u.jsx("button",{onClick:()=>{o.addOscillator(k.id),_()},style:Y.addButton,disabled:k.voices.oscillators.length>=8,children:"+ Add Oscillator"})]}),u.jsxs("div",{style:Y.paramSection,children:[u.jsx("h5",{style:Y.sectionTitle,children:"Filter"}),u.jsxs("div",{style:Y.paramRow,children:[u.jsx("span",{style:Y.label,children:"Type"}),u.jsxs("select",{value:k.voices.filter.type,onChange:R=>{o.setSynthFilter(k.id,{type:R.target.value}),_()},style:Y.select,children:[u.jsx("option",{value:"lowpass",children:"Lowpass"}),u.jsx("option",{value:"highpass",children:"Highpass"}),u.jsx("option",{value:"bandpass",children:"Bandpass"}),u.jsx("option",{value:"notch",children:"Notch"})]})]}),u.jsxs("div",{style:Y.paramRow,children:[u.jsx("span",{style:Y.label,children:"Cutoff"}),u.jsx("input",{type:"range",min:"20",max:"20000",value:k.voices.filter.frequency,onChange:R=>{o.setSynthFilter(k.id,{frequency:parseInt(R.target.value)}),_()},style:Y.slider}),u.jsxs("span",{style:Y.value,children:[k.voices.filter.frequency,"Hz"]})]}),u.jsxs("div",{style:Y.paramRow,children:[u.jsx("span",{style:Y.label,children:"Resonance"}),u.jsx("input",{type:"range",min:"0.1",max:"20",step:"0.1",value:k.voices.filter.Q,onChange:R=>{o.setSynthFilter(k.id,{Q:parseFloat(R.target.value)}),_()},style:Y.slider}),u.jsx("span",{style:Y.value,children:k.voices.filter.Q.toFixed(1)})]})]}),u.jsxs("div",{style:Y.paramSection,children:[u.jsx("h5",{style:Y.sectionTitle,children:"Amp Envelope"}),k.voices.envelopes.filter(R=>R.destination==="amplitude").map(R=>u.jsxs("div",{style:Y.envelopeGrid,children:[u.jsxs("div",{children:[u.jsx("span",{style:Y.label,children:"A"}),u.jsx("input",{type:"range",min:"0",max:"2",step:"0.01",value:R.attack,onChange:O=>{o.setSynthEnvelope(k.id,R.id,{attack:parseFloat(O.target.value)}),_()},style:Y.sliderVertical}),u.jsx("span",{style:Y.valueSmall,children:R.attack.toFixed(2)})]}),u.jsxs("div",{children:[u.jsx("span",{style:Y.label,children:"D"}),u.jsx("input",{type:"range",min:"0",max:"2",step:"0.01",value:R.decay,onChange:O=>{o.setSynthEnvelope(k.id,R.id,{decay:parseFloat(O.target.value)}),_()},style:Y.sliderVertical}),u.jsx("span",{style:Y.valueSmall,children:R.decay.toFixed(2)})]}),u.jsxs("div",{children:[u.jsx("span",{style:Y.label,children:"S"}),u.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:R.sustain,onChange:O=>{o.setSynthEnvelope(k.id,R.id,{sustain:parseFloat(O.target.value)}),_()},style:Y.sliderVertical}),u.jsx("span",{style:Y.valueSmall,children:R.sustain.toFixed(2)})]}),u.jsxs("div",{children:[u.jsx("span",{style:Y.label,children:"R"}),u.jsx("input",{type:"range",min:"0",max:"5",step:"0.01",value:R.release,onChange:O=>{o.setSynthEnvelope(k.id,R.id,{release:parseFloat(O.target.value)}),_()},style:Y.sliderVertical}),u.jsx("span",{style:Y.valueSmall,children:R.release.toFixed(2)})]})]},R.id))]}),u.jsxs("div",{style:Y.paramSection,children:[u.jsx("h5",{style:Y.sectionTitle,children:"Unison"}),u.jsxs("div",{style:Y.paramRow,children:[u.jsx("span",{style:Y.label,children:"Voices"}),u.jsx("input",{type:"range",min:"1",max:"16",value:k.unisonVoices,onChange:R=>{o.setUnison(k.id,parseInt(R.target.value),k.unisonDetune,k.unisonSpread),_()},style:Y.slider}),u.jsx("span",{style:Y.value,children:k.unisonVoices})]}),u.jsxs("div",{style:Y.paramRow,children:[u.jsx("span",{style:Y.label,children:"Detune"}),u.jsx("input",{type:"range",min:"0",max:"100",value:k.unisonDetune,onChange:R=>{o.setUnison(k.id,k.unisonVoices,parseInt(R.target.value),k.unisonSpread),_()},style:Y.slider}),u.jsxs("span",{style:Y.value,children:[k.unisonDetune,"ct"]})]})]})]}),D=k=>u.jsxs("div",{style:Y.instrumentPanel,children:[u.jsxs("h4",{style:Y.panelTitle,children:[k.name," (",k.kit,")"]}),u.jsx("div",{style:Y.drumGrid,children:k.pads.slice(0,16).map((R,O)=>u.jsxs("div",{style:{...Y.drumPad,backgroundColor:R.muted?"#333":R.soloed?"#f59e0b":"#6366f1"},onClick:()=>o.triggerPad(k.id,R.id,1),children:[u.jsx("span",{style:Y.padLabel,children:R.name}),u.jsxs("span",{style:Y.padNote,children:["C",Math.floor((36+O)/12)-1]})]},R.id))}),u.jsxs("div",{style:Y.paramSection,children:[u.jsxs("div",{style:Y.paramRow,children:[u.jsx("span",{style:Y.label,children:"Swing"}),u.jsx("input",{type:"range",min:"0",max:"100",value:k.swing,onChange:R=>{o.setSwing(k.id,parseInt(R.target.value)),_()},style:Y.slider}),u.jsxs("span",{style:Y.value,children:[k.swing,"%"]})]}),u.jsxs("div",{style:Y.paramRow,children:[u.jsx("span",{style:Y.label,children:"Master"}),u.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:k.masterVolume,onChange:()=>_(),style:Y.slider}),u.jsxs("span",{style:Y.value,children:[Math.round(k.masterVolume*100),"%"]})]})]}),u.jsx("div",{style:Y.transportRow,children:u.jsx("button",{onClick:()=>{k.playing?o.stopPattern(k.id):o.startPattern(k.id),_()},style:k.playing?Y.stopButton:Y.playButton,children:k.playing?"Stop":"Play"})})]}),M=k=>u.jsxs("div",{style:Y.instrumentPanel,children:[u.jsx("h4",{style:Y.panelTitle,children:k.name}),u.jsxs("div",{style:Y.paramSection,children:[u.jsx("h5",{style:Y.sectionTitle,children:"Articulations"}),u.jsx("div",{style:Y.articulationGrid,children:k.articulations.map(R=>u.jsx("button",{onClick:()=>{o.setArticulation(k.id,R.id),_()},style:{...Y.articulationButton,backgroundColor:k.currentArticulation===R.id?"#6366f1":"#333"},children:R.name},R.id))})]}),u.jsxs("div",{style:Y.paramSection,children:[u.jsxs("div",{style:Y.paramRow,children:[u.jsx("span",{style:Y.label,children:"Legato"}),u.jsx("input",{type:"checkbox",checked:k.legato,onChange:R=>{o.setOrchestralLegato(k.id,R.target.checked),_()}})]}),u.jsxs("div",{style:Y.paramRow,children:[u.jsx("span",{style:Y.label,children:"Portamento"}),u.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:k.portamento,onChange:R=>{o.setOrchestralPortamento(k.id,parseFloat(R.target.value)),_()},style:Y.slider}),u.jsxs("span",{style:Y.value,children:[k.portamento.toFixed(2),"s"]})]}),u.jsxs("div",{style:Y.paramRow,children:[u.jsx("span",{style:Y.label,children:"Divisi"}),u.jsx("input",{type:"checkbox",checked:k.divisi,onChange:R=>{o.enableDivisi(k.id,R.target.checked),_()}})]}),u.jsxs("div",{style:Y.paramRow,children:[u.jsx("span",{style:Y.label,children:"Section Size"}),u.jsx("input",{type:"range",min:"1",max:"32",value:k.sectionSize,onChange:R=>{o.setSectionSize(k.id,parseInt(R.target.value)),_()},style:Y.slider}),u.jsx("span",{style:Y.value,children:k.sectionSize})]})]})]}),E=k=>u.jsxs("div",{style:Y.instrumentPanel,children:[u.jsx("h4",{style:Y.panelTitle,children:k.name}),u.jsxs("div",{style:Y.paramSection,children:[u.jsx("h5",{style:Y.sectionTitle,children:"ADSR"}),u.jsxs("div",{style:Y.envelopeGrid,children:[u.jsxs("div",{children:[u.jsx("span",{style:Y.label,children:"A"}),u.jsx("input",{type:"range",min:"0",max:"2",step:"0.01",value:k.adsr.attack,onChange:R=>{o.setSamplerADSR(k.id,{...k.adsr,attack:parseFloat(R.target.value)}),_()},style:Y.sliderVertical}),u.jsx("span",{style:Y.valueSmall,children:k.adsr.attack.toFixed(2)})]}),u.jsxs("div",{children:[u.jsx("span",{style:Y.label,children:"D"}),u.jsx("input",{type:"range",min:"0",max:"2",step:"0.01",value:k.adsr.decay,onChange:R=>{o.setSamplerADSR(k.id,{...k.adsr,decay:parseFloat(R.target.value)}),_()},style:Y.sliderVertical}),u.jsx("span",{style:Y.valueSmall,children:k.adsr.decay.toFixed(2)})]}),u.jsxs("div",{children:[u.jsx("span",{style:Y.label,children:"S"}),u.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:k.adsr.sustain,onChange:R=>{o.setSamplerADSR(k.id,{...k.adsr,sustain:parseFloat(R.target.value)}),_()},style:Y.sliderVertical}),u.jsx("span",{style:Y.valueSmall,children:k.adsr.sustain.toFixed(2)})]}),u.jsxs("div",{children:[u.jsx("span",{style:Y.label,children:"R"}),u.jsx("input",{type:"range",min:"0",max:"5",step:"0.01",value:k.adsr.release,onChange:R=>{o.setSamplerADSR(k.id,{...k.adsr,release:parseFloat(R.target.value)}),_()},style:Y.sliderVertical}),u.jsx("span",{style:Y.valueSmall,children:k.adsr.release.toFixed(2)})]})]})]}),u.jsxs("div",{style:Y.paramSection,children:[u.jsx("h5",{style:Y.sectionTitle,children:"Settings"}),u.jsxs("div",{style:Y.paramRow,children:[u.jsx("span",{style:Y.label,children:"Polyphony"}),u.jsx("input",{type:"range",min:"1",max:"128",value:k.polyphony,onChange:R=>{o.setSamplerPolyphony(k.id,parseInt(R.target.value)),_()},style:Y.slider}),u.jsx("span",{style:Y.value,children:k.polyphony})]}),u.jsxs("div",{style:Y.paramRow,children:[u.jsx("span",{style:Y.label,children:"Legato"}),u.jsx("input",{type:"checkbox",checked:k.legatoMode,onChange:R=>{o.enableLegatoMode(k.id,R.target.checked),_()}})]}),u.jsxs("div",{style:Y.paramRow,children:[u.jsx("span",{style:Y.label,children:"Portamento"}),u.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:k.portamentoTime,onChange:R=>{o.setPortamentoTime(k.id,parseFloat(R.target.value)),_()},style:Y.slider}),u.jsxs("span",{style:Y.value,children:[k.portamentoTime.toFixed(2),"s"]})]})]})]});return u.jsxs("div",{style:Y.container,children:[u.jsx("h3",{style:Y.title,children:"Virtual Instruments"}),u.jsxs("div",{style:Y.tabs,children:[u.jsxs("button",{onClick:()=>i("synth"),style:n==="synth"?Y.activeTab:Y.tab,children:["Synthesizers (",r.length,")"]}),u.jsxs("button",{onClick:()=>i("sampler"),style:n==="sampler"?Y.activeTab:Y.tab,children:["Samplers (",d.length,")"]}),u.jsxs("button",{onClick:()=>i("drums"),style:n==="drums"?Y.activeTab:Y.tab,children:["Drums (",g.length,")"]}),u.jsxs("button",{onClick:()=>i("orchestral"),style:n==="orchestral"?Y.activeTab:Y.tab,children:["Orchestral (",y.length,")"]})]}),u.jsxs("div",{style:Y.content,children:[n==="synth"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:Y.createSection,children:[u.jsx("span",{style:Y.createLabel,children:"Create:"}),u.jsx("button",{onClick:()=>w("subtractive"),style:Y.createButton,children:"Subtractive"}),u.jsx("button",{onClick:()=>w("fm"),style:Y.createButton,children:"FM"}),u.jsx("button",{onClick:()=>w("wavetable"),style:Y.createButton,children:"Wavetable"}),u.jsx("button",{onClick:()=>w("granular"),style:Y.createButton,children:"Granular"})]}),u.jsx("div",{style:Y.instrumentList,children:r.map(k=>u.jsxs("div",{children:[u.jsxs("button",{onClick:()=>v(b===k.id?null:k.id),style:b===k.id?Y.selectedInstrument:Y.instrumentButton,children:[k.name," (",k.type,")"]}),b===k.id&&A(k)]},k.id))})]}),n==="sampler"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:Y.createSection,children:[u.jsx("span",{style:Y.createLabel,children:"Create:"}),u.jsx("button",{onClick:()=>T("multi-sample"),style:Y.createButton,children:"Multi-Sample"}),u.jsx("button",{onClick:()=>T("wavetable"),style:Y.createButton,children:"Wavetable"}),u.jsx("button",{onClick:()=>T("granular"),style:Y.createButton,children:"Granular"})]}),u.jsx("div",{style:Y.instrumentList,children:d.map(k=>u.jsxs("div",{children:[u.jsxs("button",{onClick:()=>v(b===k.id?null:k.id),style:b===k.id?Y.selectedInstrument:Y.instrumentButton,children:[k.name," (",k.type,")"]}),b===k.id&&E(k)]},k.id))})]}),n==="drums"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:Y.createSection,children:[u.jsx("span",{style:Y.createLabel,children:"Create Kit:"}),["808","909","Acoustic","Electronic","Lo-Fi","Trap"].map(k=>u.jsx("button",{onClick:()=>C(k),style:Y.createButton,children:k},k))]}),u.jsx("div",{style:Y.instrumentList,children:g.map(k=>u.jsxs("div",{children:[u.jsx("button",{onClick:()=>v(b===k.id?null:k.id),style:b===k.id?Y.selectedInstrument:Y.instrumentButton,children:k.name}),b===k.id&&D(k)]},k.id))})]}),n==="orchestral"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:Y.createSection,children:[u.jsx("span",{style:Y.createLabel,children:"Create:"}),["strings","woodwinds","brass","percussion","choir"].map(k=>u.jsx("button",{onClick:()=>N(k),style:Y.createButton,children:k.charAt(0).toUpperCase()+k.slice(1)},k))]}),u.jsx("div",{style:Y.instrumentList,children:y.map(k=>u.jsxs("div",{children:[u.jsxs("button",{onClick:()=>v(b===k.id?null:k.id),style:b===k.id?Y.selectedInstrument:Y.instrumentButton,children:[k.name," (",k.category,")"]}),b===k.id&&M(k)]},k.id))})]})]})]})},Y={container:{backgroundColor:"#1a1a1a",borderRadius:"8px",padding:"15px",color:"#fff"},title:{margin:"0 0 15px 0",fontSize:"1.2em",color:"#6366f1"},tabs:{display:"flex",gap:"5px",marginBottom:"15px"},tab:{padding:"8px 16px",backgroundColor:"#333",border:"none",borderRadius:"4px",color:"#aaa",cursor:"pointer",fontSize:"0.9em"},activeTab:{padding:"8px 16px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.9em"},content:{minHeight:"200px"},createSection:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"15px",flexWrap:"wrap"},createLabel:{color:"#aaa",fontSize:"0.9em"},createButton:{padding:"6px 12px",backgroundColor:"#333",border:"1px solid #444",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em"},instrumentList:{display:"flex",flexDirection:"column",gap:"10px"},instrumentButton:{width:"100%",padding:"10px",backgroundColor:"#222",border:"1px solid #333",borderRadius:"4px",color:"#fff",cursor:"pointer",textAlign:"left"},selectedInstrument:{width:"100%",padding:"10px",backgroundColor:"#333",border:"1px solid #6366f1",borderRadius:"4px",color:"#fff",cursor:"pointer",textAlign:"left"},instrumentPanel:{backgroundColor:"#222",borderRadius:"0 0 4px 4px",padding:"15px",marginTop:"-1px"},panelTitle:{margin:"0 0 15px 0",color:"#6366f1"},paramSection:{marginBottom:"15px"},sectionTitle:{margin:"0 0 10px 0",color:"#aaa",fontSize:"0.9em"},oscRow:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},paramRow:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},label:{width:"80px",color:"#aaa",fontSize:"0.85em"},select:{padding:"4px 8px",backgroundColor:"#333",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"0.85em"},slider:{flex:1,height:"4px"},sliderVertical:{width:"100%",height:"4px"},value:{width:"60px",color:"#6366f1",fontSize:"0.85em",textAlign:"right"},valueSmall:{color:"#6366f1",fontSize:"0.75em",textAlign:"center",display:"block"},envelopeGrid:{display:"flex",gap:"20px",justifyContent:"center"},addButton:{marginTop:"10px",padding:"6px 12px",backgroundColor:"#333",border:"1px dashed #555",borderRadius:"4px",color:"#aaa",cursor:"pointer",fontSize:"0.85em"},drumGrid:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px",marginBottom:"15px"},drumPad:{aspectRatio:"1",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",border:"2px solid rgba(255,255,255,0.1)"},padLabel:{fontSize:"0.7em",fontWeight:"bold"},padNote:{fontSize:"0.6em",color:"rgba(255,255,255,0.6)"},transportRow:{display:"flex",justifyContent:"center",gap:"10px"},playButton:{padding:"10px 30px",backgroundColor:"#22c55e",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontWeight:"bold"},stopButton:{padding:"10px 30px",backgroundColor:"#ef4444",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontWeight:"bold"},articulationGrid:{display:"flex",flexWrap:"wrap",gap:"5px"},articulationButton:{padding:"6px 12px",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.8em"}};class qT{state;transport=null;constructor(e){this.state={automationLanes:new Map,globalAutomationMode:"read",automationRecording:!1,automationPlayback:!0,automationSnap:!0,automationSnapResolution:.25,tracks:new Map,trackOrder:[],markers:[],tempoChanges:[{id:"default",time:0,tempo:120,curve:"step",duration:0}],timeSignatureChanges:[{id:"default",time:0,numerator:4,denominator:4}],selection:{tracks:[],regions:[],automationPoints:[],timeRange:null},clipboard:[],undoStack:[],redoStack:[],liveSet:{tracks:[],scenes:[],globalQuantize:"bar",tempo:120,playing:!1,recording:!1,currentScene:0},sessionView:!1,followPlayhead:!0,clipRecording:!1,overdubbing:!1,...e}}async initialize(e){this.transport=e||zn,await Da()}setAutomationMode(e){this.state.globalAutomationMode=e,this.state.automationLanes.forEach(n=>{n.mode=e})}startAutomationRecording(){this.state.automationRecording=!0,this.state.globalAutomationMode="write"}stopAutomationRecording(){this.state.automationRecording=!1,this.state.globalAutomationMode==="write"&&(this.state.globalAutomationMode="read")}enableTouchMode(){this.state.globalAutomationMode="touch"}enableLatchMode(){this.state.globalAutomationMode="latch"}enableTrimMode(){this.state.globalAutomationMode="trim"}createAutomationLane(e,n,i="#6366f1"){const r={id:`auto-${Date.now()}`,trackId:e,parameter:n,points:[],mode:this.state.globalAutomationMode,enabled:!0,visible:!0,color:i,range:{min:0,max:1},defaultValue:.5,recording:!1,snapping:this.state.automationSnap,snapResolution:this.state.automationSnapResolution};this.state.automationLanes.set(r.id,r);const l=this.state.tracks.get(e);return l&&l.automationLanes.push(r),r}addAutomationPoint(e,n,i,r="linear"){const l=this.state.automationLanes.get(e);if(!l)return null;const d=l.snapping?this.snapToGrid(n,l.snapResolution):n,f={id:`point-${Date.now()}`,time:d,value:Math.max(0,Math.min(1,i)),curve:r,tension:.5,selected:!1};return l.points.push(f),l.points.sort((g,m)=>g.time-m.time),f}removeAutomationPoint(e,n){const i=this.state.automationLanes.get(e);i&&(i.points=i.points.filter(r=>r.id!==n))}moveAutomationPoint(e,n,i,r){const l=this.state.automationLanes.get(e);if(l){const d=l.points.find(f=>f.id===n);d&&(d.time=l.snapping?this.snapToGrid(i,l.snapResolution):i,d.value=Math.max(0,Math.min(1,r)),l.points.sort((f,g)=>f.time-g.time))}}setAutomationCurve(e,n,i){const r=this.state.automationLanes.get(e);if(r){const l=r.points.find(d=>d.id===n);l&&(l.curve=i)}}thinAutomation(e,n=.01){const i=this.state.automationLanes.get(e);if(!i||i.points.length<3)return;const r=[i.points[0]];for(let l=1;l<i.points.length-1;l++){const d=r[r.length-1],f=i.points[l],g=i.points[l+1],m=d.value+(g.value-d.value)*((f.time-d.time)/(g.time-d.time));Math.abs(f.value-m)>n&&r.push(f)}r.push(i.points[i.points.length-1]),i.points=r}getAutomationValue(e,n){const i=this.state.automationLanes.get(e);if(!i||i.points.length===0)return i?.defaultValue||0;let r=i.points[0],l=i.points[i.points.length-1];for(let f=0;f<i.points.length;f++)if(i.points[f].time<=n)r=i.points[f],f+1<i.points.length&&(l=i.points[f+1]);else{l=i.points[f];break}if(r.time>=n||l.time<=r.time)return r.value;const d=(n-r.time)/(l.time-r.time);return this.interpolate(r.value,l.value,d,r.curve)}interpolate(e,n,i,r){switch(r){case"step":return e;case"exponential":return e+(n-e)*(1-Math.pow(1-i,3));case"logarithmic":return e+(n-e)*Math.pow(i,3);case"s-curve":return e+(n-e)*(i<.5?2*i*i:1-Math.pow(-2*i+2,2)/2);case"linear":default:return e+(n-e)*i}}createTrack(e,n,i="#6366f1"){const r={id:`track-${Date.now()}`,name:e,type:n,color:i,height:80,minimized:!1,locked:!1,frozen:!1,regions:[],children:[],parentId:null,automationLanes:[],inputSource:null,outputDestination:"master"};return this.state.tracks.set(r.id,r),this.state.trackOrder.push(r.id),r}deleteTrack(e){this.state.tracks.delete(e),this.state.trackOrder=this.state.trackOrder.filter(n=>n!==e),this.state.automationLanes.forEach((n,i)=>{n.trackId===e&&this.state.automationLanes.delete(i)})}duplicateTrack(e){const n=this.state.tracks.get(e);if(!n)return null;const i=this.createTrack(`${n.name} Copy`,n.type,n.color);return i.height=n.height,i.regions=n.regions.map(r=>({...r,id:`region-${Date.now()}-${Math.random()}`})),i}moveTrack(e,n){const i=this.state.trackOrder.indexOf(e);i!==-1&&(this.state.trackOrder.splice(i,1),this.state.trackOrder.splice(n,0,e))}createFolderTrack(e,n){const i=this.createTrack(e,"folder","#888888");return i.children=n,n.forEach(r=>{const l=this.state.tracks.get(r);l&&(l.parentId=i.id)}),i}createRegion(e,n,i,r="audio"){const l={id:`region-${Date.now()}`,trackId:e,type:r,name:"New Region",startTime:n,duration:i,color:"#6366f1",muted:!1,locked:!1,looped:!1,loopStart:0,loopEnd:i,fadeIn:0,fadeOut:0,gain:1,pitch:0,timeStretch:1,reverse:!1,data:null},d=this.state.tracks.get(e);return d&&d.regions.push(l),l}moveRegion(e,n,i){let r;if(this.state.tracks.forEach(l=>{const d=l.regions.findIndex(f=>f.id===e);d!==-1&&(r=l.regions[d],l.regions.splice(d,1))}),r){r.trackId=n,r.startTime=i;const l=this.state.tracks.get(n);l&&l.regions.push(r)}}resizeRegion(e,n,i="start"){this.state.tracks.forEach(r=>{const l=r.regions.find(d=>d.id===e);l&&(i==="end"&&(l.startTime=l.startTime+l.duration-n),l.duration=n)})}splitRegion(e,n){let i,r;if(this.state.tracks.forEach(m=>{const y=m.regions.find(x=>x.id===e);y&&(i=y,r=m)}),!i||!r)return null;const l=n-i.startTime;if(l<=0||l>=i.duration)return null;const d={...i,id:`region-${Date.now()}-left`,duration:l},f={...i,id:`region-${Date.now()}-right`,startTime:n,duration:i.duration-l},g=r.regions.indexOf(i);return r.regions.splice(g,1,d,f),[d,f]}joinRegions(e){if(e.length<2)return null;const n=[];let i;if(this.state.tracks.forEach(l=>{e.forEach(d=>{const f=l.regions.find(g=>g.id===d);f&&(n.push(f),i=l)})}),n.length<2||!i)return null;n.sort((l,d)=>l.startTime-d.startTime);const r={...n[0],id:`region-${Date.now()}-joined`,duration:n[n.length-1].startTime+n[n.length-1].duration-n[0].startTime};return i.regions=i.regions.filter(l=>!e.includes(l.id)),i.regions.push(r),r}addMarker(e,n,i="marker",r="#f59e0b"){const l={id:`marker-${Date.now()}`,time:e,name:n,color:r,type:i};return this.state.markers.push(l),this.state.markers.sort((d,f)=>d.time-f.time),l}removeMarker(e){this.state.markers=this.state.markers.filter(n=>n.id!==e)}moveMarker(e,n){const i=this.state.markers.find(r=>r.id===e);i&&(i.time=n,this.state.markers.sort((r,l)=>r.time-l.time))}setLoopPoints(e,n){this.state.markers=this.state.markers.filter(i=>i.type!=="loop-start"&&i.type!=="loop-end"),this.addMarker(e,"Loop Start","loop-start","#22c55e"),this.addMarker(n,"Loop End","loop-end","#ef4444")}addTempoChange(e,n,i="step",r=0){const l={id:`tempo-${Date.now()}`,time:e,tempo:n,curve:i,duration:r};return this.state.tempoChanges.push(l),this.state.tempoChanges.sort((d,f)=>d.time-f.time),l}addTimeSignatureChange(e,n,i){const r={id:`timesig-${Date.now()}`,time:e,numerator:n,denominator:i};return this.state.timeSignatureChanges.push(r),this.state.timeSignatureChanges.sort((l,d)=>l.time-d.time),r}createSessionTrack(e,n,i="#6366f1"){const r={id:`session-track-${Date.now()}`,name:e,type:n,color:i,clips:[],arm:!1,mute:!1,solo:!1,volume:1,pan:0};return this.state.liveSet.tracks.push(r),r}createClip(e,n,i){const r={id:`clip-${Date.now()}`,name:n,color:"#6366f1",type:i,data:null,playing:!1,queued:!1,looping:!0,followAction:{action:"none",time:0,probability:1},launchMode:"trigger",quantize:this.state.liveSet.globalQuantize,warp:!0,tempo:this.state.liveSet.tempo},l=this.state.liveSet.tracks.find(d=>d.id===e);return l&&l.clips.push(r),r}launchClip(e,n){const i=this.state.liveSet.tracks.find(r=>r.id===e);if(i){i.clips.forEach(l=>{l.id!==n&&(l.playing=!1,l.queued=!1)});const r=i.clips.find(l=>l.id===n);r&&(r.quantize==="none"?r.playing=!0:r.queued=!0)}}stopClip(e,n){const i=this.state.liveSet.tracks.find(r=>r.id===e);if(i){const r=i.clips.find(l=>l.id===n);r&&(r.playing=!1,r.queued=!1)}}stopAllClips(){this.state.liveSet.tracks.forEach(e=>{e.clips.forEach(n=>{n.playing=!1,n.queued=!1})})}createScene(e,n="#888888"){const i={id:`scene-${Date.now()}`,name:e,color:n,tempo:null,timeSignature:null};return this.state.liveSet.scenes.push(i),i}launchScene(e){const n=this.state.liveSet.scenes[e];n&&(this.state.liveSet.currentScene=e,this.state.liveSet.tracks.forEach(i=>{i.clips[e]?this.launchClip(i.id,i.clips[e].id):i.clips.forEach(r=>{r.playing=!1,r.queued=!1})}),n.tempo!==null&&this.transport&&(this.transport.bpm.value=n.tempo),n.timeSignature!==null&&this.transport&&(this.transport.timeSignature=n.timeSignature))}setGlobalQuantize(e){this.state.liveSet.globalQuantize=e}setFollowAction(e,n){this.state.liveSet.tracks.forEach(i=>{const r=i.clips.find(l=>l.id===e);r&&(r.followAction=n)})}setLaunchMode(e,n){this.state.liveSet.tracks.forEach(i=>{const r=i.clips.find(l=>l.id===e);r&&(r.launchMode=n)})}armTrack(e,n){const i=this.state.liveSet.tracks.find(r=>r.id===e);i&&(i.arm=n)}startRecording(){this.state.liveSet.recording=!0,this.state.clipRecording=!0}stopRecording(){this.state.liveSet.recording=!1,this.state.clipRecording=!1}enableOverdub(e){this.state.overdubbing=e}toggleSessionView(){this.state.sessionView=!this.state.sessionView}snapToGrid(e,n){return Math.round(e/n)*n}selectTrack(e,n=!1){n?this.state.selection.tracks.includes(e)||this.state.selection.tracks.push(e):this.state.selection.tracks=[e]}selectRegion(e,n=!1){n?this.state.selection.regions.includes(e)||this.state.selection.regions.push(e):this.state.selection.regions=[e]}clearSelection(){this.state.selection={tracks:[],regions:[],automationPoints:[],timeRange:null}}copySelection(){const e=[];this.state.tracks.forEach(n=>{n.regions.forEach(i=>{this.state.selection.regions.includes(i.id)&&e.push({...i})})}),this.state.clipboard=e}paste(e){if(this.state.clipboard.length===0)return;const n=Math.min(...this.state.clipboard.map(r=>r.startTime)),i=e-n;this.state.clipboard.forEach(r=>{const l={...r,id:`region-${Date.now()}-${Math.random()}`,startTime:r.startTime+i},d=this.state.tracks.get(r.trackId);d&&d.regions.push(l)})}getState(){return{...this.state}}getTrack(e){return this.state.tracks.get(e)}getAllTracks(){return this.state.trackOrder.map(e=>this.state.tracks.get(e)).filter(Boolean)}getAutomationLane(e){return this.state.automationLanes.get(e)}getMarkers(){return[...this.state.markers]}getLiveSet(){return{...this.state.liveSet}}isSessionView(){return this.state.sessionView}}class PT{state;analyser=null;audioContext=null;constructor(e){this.state={themes:this.createDefaultThemes(),currentTheme:"dark",keyCommands:this.createDefaultKeyCommands(),workspaces:this.createDefaultWorkspaces(),currentWorkspace:"default",preferences:new Map,analysisEnabled:!0,analysisData:this.createEmptyAnalysisData(),frequencyBands:this.createDefaultFrequencyBands(),analyzerFFTSize:2048,analyzerSmoothing:.8,referenceTrackEnabled:!1,referenceTrackPath:null,masteringChain:this.createDefaultMasteringChain(),dither:{enabled:!1,type:"triangular",bitDepth:16,noiseShaping:"light",autoblack:!0},targetLoudness:-14,ceilingLevel:-.3,midSideEnabled:!1,referenceTracks:[],accessibility:{highContrast:!1,colorBlindMode:"none",fontSize:"medium",reducedMotion:!1,focusHighlight:!0,screenReaderSupport:!1,audioDescriptions:!1,hapticFeedback:!0,keyboardNavigation:!0,stickyKeys:!1,slowKeys:!1,mouseKeys:!1},cloud:{enabled:!1,autoSync:!1,syncInterval:5,provider:"internal",maxStorageGB:10,usedStorageGB:0},cloudProjects:[],...e}}async initialize(){await Da(),this.audioContext=Et().rawContext,this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.state.analyzerFFTSize,this.analyser.smoothingTimeConstant=this.state.analyzerSmoothing}createDefaultThemes(){const e=new Map;return e.set("dark",{name:"Dark",primary:"#6366f1",secondary:"#8b5cf6",background:"#0a0a0a",surface:"#1a1a1a",text:"#ffffff",accent:"#22c55e",waveformColor:"#6366f1",meterColor:"#22c55e",gridColor:"rgba(255, 255, 255, 0.1)"}),e.set("light",{name:"Light",primary:"#4f46e5",secondary:"#7c3aed",background:"#ffffff",surface:"#f5f5f5",text:"#1a1a1a",accent:"#16a34a",waveformColor:"#4f46e5",meterColor:"#16a34a",gridColor:"rgba(0, 0, 0, 0.1)"}),e.set("high-contrast",{name:"High Contrast",primary:"#ffffff",secondary:"#ffff00",background:"#000000",surface:"#1a1a1a",text:"#ffffff",accent:"#00ff00",waveformColor:"#ffffff",meterColor:"#00ff00",gridColor:"rgba(255, 255, 255, 0.3)"}),e}setTheme(e){this.state.themes.has(e)&&(this.state.currentTheme=e)}createCustomTheme(e,n){this.state.themes.set(e,n)}getCurrentTheme(){return this.state.themes.get(this.state.currentTheme)||this.state.themes.get("dark")}createDefaultKeyCommands(){const e=new Map;return[{id:"play",name:"Play/Stop",key:"Space",modifiers:[],action:"transport.toggle",category:"Transport",enabled:!0},{id:"record",name:"Record",key:"r",modifiers:[],action:"transport.record",category:"Transport",enabled:!0},{id:"undo",name:"Undo",key:"z",modifiers:["meta"],action:"edit.undo",category:"Edit",enabled:!0},{id:"redo",name:"Redo",key:"z",modifiers:["meta","shift"],action:"edit.redo",category:"Edit",enabled:!0},{id:"copy",name:"Copy",key:"c",modifiers:["meta"],action:"edit.copy",category:"Edit",enabled:!0},{id:"paste",name:"Paste",key:"v",modifiers:["meta"],action:"edit.paste",category:"Edit",enabled:!0},{id:"cut",name:"Cut",key:"x",modifiers:["meta"],action:"edit.cut",category:"Edit",enabled:!0},{id:"delete",name:"Delete",key:"Backspace",modifiers:[],action:"edit.delete",category:"Edit",enabled:!0},{id:"selectAll",name:"Select All",key:"a",modifiers:["meta"],action:"edit.selectAll",category:"Edit",enabled:!0},{id:"save",name:"Save",key:"s",modifiers:["meta"],action:"file.save",category:"File",enabled:!0},{id:"saveAs",name:"Save As",key:"s",modifiers:["meta","shift"],action:"file.saveAs",category:"File",enabled:!0},{id:"open",name:"Open",key:"o",modifiers:["meta"],action:"file.open",category:"File",enabled:!0},{id:"new",name:"New",key:"n",modifiers:["meta"],action:"file.new",category:"File",enabled:!0},{id:"zoomIn",name:"Zoom In",key:"=",modifiers:["meta"],action:"view.zoomIn",category:"View",enabled:!0},{id:"zoomOut",name:"Zoom Out",key:"-",modifiers:["meta"],action:"view.zoomOut",category:"View",enabled:!0},{id:"mute",name:"Mute Track",key:"m",modifiers:[],action:"track.mute",category:"Track",enabled:!0},{id:"solo",name:"Solo Track",key:"s",modifiers:[],action:"track.solo",category:"Track",enabled:!0},{id:"arm",name:"Arm Track",key:"r",modifiers:["shift"],action:"track.arm",category:"Track",enabled:!0}].forEach(i=>e.set(i.id,i)),e}setKeyCommand(e,n,i){const r=this.state.keyCommands.get(e);r&&(r.key=n,r.modifiers=i)}createKeyCommand(e){this.state.keyCommands.set(e.id,e)}removeKeyCommand(e){this.state.keyCommands.delete(e)}createDefaultWorkspaces(){const e=new Map;return e.set("default",{id:"default",name:"Default",layout:{panels:[{id:"timeline",type:"timeline",position:{x:0,y:0,width:100,height:60},visible:!0,docked:!0},{id:"mixer",type:"mixer",position:{x:0,y:60,width:100,height:40},visible:!0,docked:!0}]},toolbars:["transport","tools","view"],menus:["file","edit","view","track","audio","midi","help"]}),e.set("mixing",{id:"mixing",name:"Mixing",layout:{panels:[{id:"mixer",type:"mixer",position:{x:0,y:0,width:100,height:100},visible:!0,docked:!0}]},toolbars:["transport","mixing"],menus:["file","edit","view","track","audio","help"]}),e.set("editing",{id:"editing",name:"Editing",layout:{panels:[{id:"timeline",type:"timeline",position:{x:0,y:0,width:70,height:100},visible:!0,docked:!0},{id:"inspector",type:"inspector",position:{x:70,y:0,width:30,height:100},visible:!0,docked:!0}]},toolbars:["transport","tools","edit"],menus:["file","edit","view","track","audio","midi","help"]}),e}setWorkspace(e){this.state.workspaces.has(e)&&(this.state.currentWorkspace=e)}createWorkspace(e){this.state.workspaces.set(e.id,e)}setPreference(e,n){this.state.preferences.set(e,n)}getPreference(e,n){return this.state.preferences.has(e)?this.state.preferences.get(e):n}createEmptyAnalysisData(){return{peak:-1/0,rms:-1/0,lufs:{integrated:-1/0,shortTerm:-1/0,momentary:-1/0,range:0,truePeak:-1/0},spectrum:new Float32Array(1024),phase:0,stereoCorrelation:1,dynamicRange:0,crestFactor:0,dcOffset:0}}createDefaultFrequencyBands(){return[{label:"Sub",minFreq:20,maxFreq:60,level:0},{label:"Bass",minFreq:60,maxFreq:250,level:0},{label:"Low Mid",minFreq:250,maxFreq:500,level:0},{label:"Mid",minFreq:500,maxFreq:2e3,level:0},{label:"High Mid",minFreq:2e3,maxFreq:4e3,level:0},{label:"Presence",minFreq:4e3,maxFreq:6e3,level:0},{label:"Brilliance",minFreq:6e3,maxFreq:2e4,level:0}]}enableAnalysis(e){this.state.analysisEnabled=e}getPeakLevel(){if(!this.analyser)return-1/0;const e=new Float32Array(this.analyser.frequencyBinCount);this.analyser.getFloatTimeDomainData(e);let n=0;for(let i=0;i<e.length;i++){const r=Math.abs(e[i]);r>n&&(n=r)}return this.state.analysisData.peak=20*Math.log10(n||1e-4),this.state.analysisData.peak}getRMSLevel(){if(!this.analyser)return-1/0;const e=new Float32Array(this.analyser.frequencyBinCount);this.analyser.getFloatTimeDomainData(e);let n=0;for(let r=0;r<e.length;r++)n+=e[r]*e[r];const i=Math.sqrt(n/e.length);return this.state.analysisData.rms=20*Math.log10(i||1e-4),this.state.analysisData.rms}getSpectrumData(){if(!this.analyser)return new Float32Array(1024);const e=new Float32Array(this.analyser.frequencyBinCount);return this.analyser.getFloatFrequencyData(e),this.state.analysisData.spectrum=e,e}calculateLUFS(e){const n=e.getChannelData(0);e.sampleRate;let i=0;for(let d=0;d<n.length;d++)i+=n[d]*n[d];const r=i/n.length,l=-.691+10*Math.log10(r);return this.state.analysisData.lufs.integrated=l,l}getFrequencyBands(){const e=this.getSpectrumData(),i=(this.audioContext?.sampleRate||44100)/(this.state.analyzerFFTSize*2);return this.state.frequencyBands.forEach(r=>{const l=Math.floor(r.minFreq/i),d=Math.floor(r.maxFreq/i);let f=0,g=0;for(let m=l;m<=d&&m<e.length;m++)f+=Math.pow(10,e[m]/20),g++;r.level=g>0?20*Math.log10(f/g):-1/0}),this.state.frequencyBands}calculateDynamicRange(e){const n=e.getChannelData(0);let i=0,r=0;for(let g=0;g<n.length;g++){const m=Math.abs(n[g]);m>i&&(i=m),r+=n[g]*n[g]}const l=Math.sqrt(r/n.length),d=i/(l||1e-4),f=20*Math.log10(d);return this.state.analysisData.crestFactor=d,this.state.analysisData.dynamicRange=f,f}calculateStereoCorrelation(e){if(e.numberOfChannels<2)return 1;const n=e.getChannelData(0),i=e.getChannelData(1);let r=0,l=0,d=0;for(let g=0;g<n.length;g++)r+=n[g]*i[g],l+=n[g]*n[g],d+=i[g]*i[g];const f=r/Math.sqrt(l*d);return this.state.analysisData.stereoCorrelation=f,f}calculateDCOffset(e){const n=e.getChannelData(0);let i=0;for(let l=0;l<n.length;l++)i+=n[l];const r=i/n.length;return this.state.analysisData.dcOffset=r,r}setFFTSize(e){this.state.analyzerFFTSize=e,this.analyser&&(this.analyser.fftSize=e)}createDefaultMasteringChain(){return{id:"master-chain",name:"Master",enabled:!0,modules:[{id:"master-eq",type:"eq",enabled:!0,bypassed:!1,parameters:new Map([["low-shelf-freq",80],["low-shelf-gain",0],["mid-freq",2e3],["mid-gain",0],["mid-q",1],["high-shelf-freq",1e4],["high-shelf-gain",0]])},{id:"master-comp",type:"compressor",enabled:!0,bypassed:!1,parameters:new Map([["threshold",-10],["ratio",2],["attack",30],["release",100],["knee",6],["makeup",0]])},{id:"master-limiter",type:"limiter",enabled:!0,bypassed:!1,parameters:new Map([["ceiling",-.3],["release",50],["lookahead",5]])}]}}enableMasteringChain(e){this.state.masteringChain.enabled=e}addMasteringModule(e,n){n!==void 0?this.state.masteringChain.modules.splice(n,0,e):this.state.masteringChain.modules.push(e)}removeMasteringModule(e){this.state.masteringChain.modules=this.state.masteringChain.modules.filter(n=>n.id!==e)}bypassModule(e,n){const i=this.state.masteringChain.modules.find(r=>r.id===e);i&&(i.bypassed=n)}setModuleParameter(e,n,i){const r=this.state.masteringChain.modules.find(l=>l.id===e);r&&r.parameters.set(n,i)}setTargetLoudness(e){this.state.targetLoudness=e}setCeilingLevel(e){this.state.ceilingLevel=e;const n=this.state.masteringChain.modules.find(i=>i.type==="limiter");n&&n.parameters.set("ceiling",e)}enableDither(e){this.state.dither.enabled=e}setDitherType(e){this.state.dither.type=e}setDitherBitDepth(e){this.state.dither.bitDepth=e}enableMidSide(e){this.state.midSideEnabled=e}addReferenceTrack(e){this.state.referenceTracks.includes(e)||this.state.referenceTracks.push(e)}removeReferenceTrack(e){this.state.referenceTracks=this.state.referenceTracks.filter(n=>n!==e)}enableHighContrast(e){this.state.accessibility.highContrast=e,e&&this.setTheme("high-contrast")}setColorBlindMode(e){this.state.accessibility.colorBlindMode=e}setFontSize(e){this.state.accessibility.fontSize=e}enableReducedMotion(e){this.state.accessibility.reducedMotion=e}enableFocusHighlight(e){this.state.accessibility.focusHighlight=e}enableScreenReaderSupport(e){this.state.accessibility.screenReaderSupport=e}enableAudioDescriptions(e){this.state.accessibility.audioDescriptions=e}enableHapticFeedback(e){this.state.accessibility.hapticFeedback=e}enableKeyboardNavigation(e){this.state.accessibility.keyboardNavigation=e}enableStickyKeys(e){this.state.accessibility.stickyKeys=e}enableCloudSync(e){this.state.cloud.enabled=e}enableAutoSync(e){this.state.cloud.autoSync=e}setSyncInterval(e){this.state.cloud.syncInterval=e}setCloudProvider(e){this.state.cloud.provider=e}createCloudProject(e,n){const i={id:`cloud-${Date.now()}`,name:e,owner:n,collaborators:[],lastModified:new Date,syncStatus:"pending",version:1,size:0};return this.state.cloudProjects.push(i),i}addCollaborator(e,n){const i=this.state.cloudProjects.find(r=>r.id===e);i&&!i.collaborators.includes(n)&&i.collaborators.push(n)}removeCollaborator(e,n){const i=this.state.cloudProjects.find(r=>r.id===e);i&&(i.collaborators=i.collaborators.filter(r=>r!==n))}async syncProject(e){const n=this.state.cloudProjects.find(i=>i.id===e);n&&(n.syncStatus="syncing",await new Promise(i=>setTimeout(i,1e3)),n.syncStatus="synced",n.lastModified=new Date,n.version++)}getStorageUsage(){return{used:this.state.cloud.usedStorageGB,max:this.state.cloud.maxStorageGB,percentage:this.state.cloud.usedStorageGB/this.state.cloud.maxStorageGB*100}}getState(){return{...this.state}}getAnalysisData(){return{...this.state.analysisData}}getMasteringChain(){return{...this.state.masteringChain}}getAccessibilitySettings(){return{...this.state.accessibility}}getCloudSettings(){return{...this.state.cloud}}getCloudProjects(){return[...this.state.cloudProjects]}}class HT{state;constructor(e){this.state={videoTracks:[],activeVideoTrack:null,timecode:{format:"smpte",frameRate:24,dropFrame:!1,offset:0,syncSource:"internal"},surroundFormats:this.createDefaultSurroundFormats(),activeSurroundFormat:null,videoPreview:!0,videoFollowPlayhead:!0,projectFiles:new Map,recentFiles:[],exportSettings:this.createDefaultExportSettings(),bounceSettings:{startTime:0,endTime:0,tail:2,normalize:!1,includeEffects:!0,includeAutomation:!0,separateTracks:!1},autoBackup:!0,backupInterval:5,lastBackup:null,staves:new Map,scoreSettings:this.createDefaultScoreSettings(),selectedNotes:[],editingMode:"select",notationZoom:1,showMIDIPiano:!0,browserItems:new Map,libraryCategories:this.createDefaultLibraryCategories(),searchFilters:{query:"",types:[],tags:[],dateRange:null,sizeRange:null,rating:null,favorites:!1},currentPath:"/",favorites:[],recentItems:[],collaborators:new Map,comments:[],versions:[],currentVersion:1,syncEnabled:!1,conflictResolution:"manual",...e}}createDefaultSurroundFormats(){return[{name:"Stereo",channels:2,layout:["L","R"],lfe:!1},{name:"LCR",channels:3,layout:["L","C","R"],lfe:!1},{name:"Quad",channels:4,layout:["L","R","Ls","Rs"],lfe:!1},{name:"5.1",channels:6,layout:["L","R","C","LFE","Ls","Rs"],lfe:!0},{name:"7.1",channels:8,layout:["L","R","C","LFE","Ls","Rs","Lss","Rss"],lfe:!0},{name:"Atmos 7.1.4",channels:12,layout:["L","R","C","LFE","Ls","Rs","Lss","Rss","Ltf","Rtf","Ltr","Rtr"],lfe:!0}]}importVideo(e,n=24){const i={id:`video-${Date.now()}`,name:e.split("/").pop()||"Video",path:e,duration:0,frameRate:n,width:1920,height:1080,position:0,volume:1,muted:!1,opacity:1,visible:!0};return this.state.videoTracks.push(i),i}removeVideo(e){this.state.videoTracks=this.state.videoTracks.filter(n=>n.id!==e),this.state.activeVideoTrack===e&&(this.state.activeVideoTrack=null)}setVideoPosition(e,n){const i=this.state.videoTracks.find(r=>r.id===e);i&&(i.position=n)}setTimecodeFormat(e){this.state.timecode.format=e}setFrameRate(e){this.state.timecode.frameRate=e}setDropFrame(e){this.state.timecode.dropFrame=e}setTimecodeOffset(e){this.state.timecode.offset=e}setSyncSource(e){this.state.timecode.syncSource=e}timeToTimecode(e){const{frameRate:n,dropFrame:i}=this.state.timecode;let r=Math.floor(e*n)+this.state.timecode.offset;if(i&&(n===29.97||n===59.94)){const b=n===29.97?2:4,v=n===29.97?1798:3596,_=n===29.97?17982:35964,w=Math.floor(r/_),T=r%_,C=Math.floor(T/v);r+=w*9*b+C*b}const l=r%Math.round(n),d=Math.floor(r/Math.round(n)),f=d%60,g=Math.floor(d/60),m=g%60,y=Math.floor(g/60),x=i?";":":";return`${y.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}${x}${l.toString().padStart(2,"0")}`}timecodeToTime(e){const{frameRate:n,dropFrame:i}=this.state.timecode,r=e.split(/[:;]/);if(r.length!==4)return 0;const l=parseInt(r[0],10),d=parseInt(r[1],10),f=parseInt(r[2],10),g=parseInt(r[3],10);let m=l*3600*Math.round(n)+d*60*Math.round(n)+f*Math.round(n)+g;if(i&&(n===29.97||n===59.94)){const y=n===29.97?2:4,x=l*60+d,b=Math.floor(x/10),v=x%10;m-=b*9*y+(v>0?v*y:0)}return m-=this.state.timecode.offset,m/n}setSurroundFormat(e){this.state.surroundFormats.find(i=>i.name===e)&&(this.state.activeSurroundFormat=e)}enableVideoPreview(e){this.state.videoPreview=e}createDefaultExportSettings(){return{format:"wav",sampleRate:44100,bitDepth:24,channels:2,normalize:!1,normalizeLevel:-.3,dither:!1,ditherType:"triangular",realtime:!1,stems:!1,includeVideo:!1}}addFile(e){const n={...e,id:`file-${Date.now()}`};return this.state.projectFiles.set(n.id,n),n}removeFile(e){this.state.projectFiles.delete(e)}addToRecentFiles(e){this.state.recentFiles=this.state.recentFiles.filter(n=>n!==e),this.state.recentFiles.unshift(e),this.state.recentFiles.length>20&&(this.state.recentFiles=this.state.recentFiles.slice(0,20))}getRecentFiles(){return[...this.state.recentFiles]}setExportFormat(e){this.state.exportSettings.format=e}setExportSampleRate(e){this.state.exportSettings.sampleRate=e}setExportBitDepth(e){this.state.exportSettings.bitDepth=e}enableNormalization(e,n){this.state.exportSettings.normalize=e,n!==void 0&&(this.state.exportSettings.normalizeLevel=n)}enableStemsExport(e){this.state.exportSettings.stems=e}setBounceRange(e,n){this.state.bounceSettings.startTime=e,this.state.bounceSettings.endTime=n}enableAutoBackup(e,n){this.state.autoBackup=e,n!==void 0&&(this.state.backupInterval=n)}createBackup(){const e=this.addFile({name:`Backup_${new Date().toISOString()}`,path:"/backups/",type:"backup",size:0,created:new Date,modified:new Date,metadata:new Map});return this.state.lastBackup=new Date,e}createDefaultScoreSettings(){return{title:"Untitled Score",composer:"",arranger:"",copyright:"",pageSize:"letter",orientation:"portrait",margins:{top:1,bottom:1,left:1,right:1},staffSpacing:12,systemSpacing:20,fontSize:12,font:"Bravura",transposing:!0,showMeasureNumbers:!0,showPageNumbers:!0}}createStaff(e,n,i="treble"){const r={id:`staff-${Date.now()}`,name:e,instrument:n,clef:i,transposition:0,notes:[],measures:[{number:1,startTime:0,timeSignature:[4,4],keySignature:{key:"C",mode:"major"},clef:i,tempo:120,rehearsalMark:null,repeatStart:!1,repeatEnd:!1,repeatCount:0}],visible:!0,group:null,bracket:!1};return this.state.staves.set(r.id,r),r}deleteStaff(e){this.state.staves.delete(e)}addNote(e,n){const i=this.state.staves.get(e);if(!i)return null;const r={...n,id:`note-${Date.now()}`};return i.notes.push(r),i.notes.sort((l,d)=>l.startTime-d.startTime),r}removeNote(e,n){const i=this.state.staves.get(e);i&&(i.notes=i.notes.filter(r=>r.id!==n))}moveNote(e,n,i,r){const l=this.state.staves.get(e);if(l){const d=l.notes.find(f=>f.id===n);d&&(d.pitch=i,d.startTime=r,l.notes.sort((f,g)=>f.startTime-g.startTime))}}setNoteDuration(e,n,i){const r=this.state.staves.get(e);if(r){const l=r.notes.find(d=>d.id===n);l&&(l.duration=i)}}addArticulation(e,n,i){const r=this.state.staves.get(e);if(r){const l=r.notes.find(d=>d.id===n);l&&!l.articulation.includes(i)&&l.articulation.push(i)}}setDynamics(e,n,i){const r=this.state.staves.get(e);if(r){const l=r.notes.find(d=>d.id===n);l&&(l.dynamics=i)}}addMeasure(e,n){const i=this.state.staves.get(e);if(!i)return null;const r=i.measures[n]||i.measures[i.measures.length-1],l={number:n+2,startTime:r.startTime+this.getMeasureDuration(r.timeSignature),timeSignature:r.timeSignature,keySignature:r.keySignature,clef:r.clef,tempo:null,rehearsalMark:null,repeatStart:!1,repeatEnd:!1,repeatCount:0};return i.measures.splice(n+1,0,l),i.measures.forEach((d,f)=>{d.number=f+1}),l}getMeasureDuration(e){const[n,i]=e,r=60/120;return n/i*4*r}setTimeSignature(e,n,i,r){const l=this.state.staves.get(e);if(l){const d=l.measures.find(f=>f.number===n);d&&(d.timeSignature=[i,r])}}setKeySignature(e,n,i,r){const l=this.state.staves.get(e);if(l){const d=l.measures.find(f=>f.number===n);d&&(d.keySignature={key:i,mode:r})}}setScoreTitle(e){this.state.scoreSettings.title=e}setScoreComposer(e){this.state.scoreSettings.composer=e}setPageSize(e){this.state.scoreSettings.pageSize=e}setEditingMode(e){this.state.editingMode=e}setNotationZoom(e){this.state.notationZoom=Math.max(.25,Math.min(4,e))}createDefaultLibraryCategories(){return[{id:"loops",name:"Loops",icon:"loop",items:[],subcategories:[]},{id:"one-shots",name:"One-Shots",icon:"waveform",items:[],subcategories:[]},{id:"instruments",name:"Instruments",icon:"piano",items:[],subcategories:[]},{id:"effects",name:"Effects",icon:"effect",items:[],subcategories:[]},{id:"presets",name:"Presets",icon:"preset",items:[],subcategories:[]},{id:"projects",name:"Projects",icon:"project",items:[],subcategories:[]}]}addBrowserItem(e){const n={...e,id:`item-${Date.now()}`};return this.state.browserItems.set(n.id,n),n}removeBrowserItem(e){this.state.browserItems.delete(e)}addToFavorites(e){if(!this.state.favorites.includes(e)){this.state.favorites.push(e);const n=this.state.browserItems.get(e);n&&(n.favorite=!0)}}removeFromFavorites(e){this.state.favorites=this.state.favorites.filter(i=>i!==e);const n=this.state.browserItems.get(e);n&&(n.favorite=!1)}setItemRating(e,n){const i=this.state.browserItems.get(e);i&&(i.rating=Math.max(0,Math.min(5,n)))}addTag(e,n){const i=this.state.browserItems.get(e);i&&!i.tags.includes(n)&&i.tags.push(n)}removeTag(e,n){const i=this.state.browserItems.get(e);i&&(i.tags=i.tags.filter(r=>r!==n))}searchItems(e){const n=e.toLowerCase(),i=[];return this.state.browserItems.forEach(r=>{(r.name.toLowerCase().includes(n)||r.tags.some(l=>l.toLowerCase().includes(n)))&&i.push(r)}),i}filterItems(e){const n=[];return this.state.browserItems.forEach(i=>{let r=!0;e.types&&e.types.length>0&&!e.types.includes(i.type)&&(r=!1),e.tags&&e.tags.length>0&&(e.tags.every(d=>i.tags.includes(d))||(r=!1)),e.rating!==null&&e.rating!==void 0&&i.rating<e.rating&&(r=!1),e.favorites&&!i.favorite&&(r=!1),r&&n.push(i)}),n}navigateToPath(e){this.state.currentPath=e}addCollaborator(e){const n={...e,id:`collab-${Date.now()}`};return this.state.collaborators.set(n.id,n),n}removeCollaborator(e){this.state.collaborators.delete(e)}setCollaboratorRole(e,n){const i=this.state.collaborators.get(e);i&&(i.role=n)}addComment(e,n,i,r){const l={id:`comment-${Date.now()}`,authorId:e,timestamp:new Date,text:n,resolved:!1,replies:[],timePosition:i??null,trackId:r??null};return this.state.comments.push(l),l}replyToComment(e,n,i){const r=this.state.comments.find(d=>d.id===e);if(!r)return null;const l={id:`reply-${Date.now()}`,authorId:n,timestamp:new Date,text:i,resolved:!1,replies:[],timePosition:r.timePosition,trackId:r.trackId};return r.replies.push(l),l}resolveComment(e){const n=this.state.comments.find(i=>i.id===e);n&&(n.resolved=!0)}createVersion(e,n,i){const r={id:`version-${Date.now()}`,number:this.state.versions.length+1,timestamp:new Date,authorId:e,description:n,changes:i,size:0};return this.state.versions.push(r),this.state.currentVersion=r.number,r}restoreVersion(e){e>0&&e<=this.state.versions.length&&(this.state.currentVersion=e)}enableSync(e){this.state.syncEnabled=e}setConflictResolution(e){this.state.conflictResolution=e}updateCollaboratorCursor(e,n,i){const r=this.state.collaborators.get(e);r&&(r.cursor={x:n,y:i,color:r.cursor?.color||"#6366f1"})}getState(){return{...this.state}}getVideoTracks(){return[...this.state.videoTracks]}getProjectFiles(){return Array.from(this.state.projectFiles.values())}getStaves(){return Array.from(this.state.staves.values())}getStaff(e){return this.state.staves.get(e)}getBrowserItems(){return Array.from(this.state.browserItems.values())}getCollaborators(){return Array.from(this.state.collaborators.values())}getComments(){return[...this.state.comments]}getVersions(){return[...this.state.versions]}getTimecodeSettings(){return{...this.state.timecode}}getExportSettings(){return{...this.state.exportSettings}}getScoreSettings(){return{...this.state.scoreSettings}}}const GT=({engine:o,tracks:e,onTracksChange:n})=>{const[i,r]=I.useState(e[0]?.id||null),[l,d]=I.useState("normal"),[f,g]=I.useState(""),[m,y]=I.useState(""),[x,b]=I.useState(2),[v,_]=I.useState(1),[w,T]=I.useState(""),[C,N]=I.useState(""),[A,D]=I.useState(!0),[M,E]=I.useState(!0),[k,R]=I.useState(!1),[O,L]=I.useState(.01),q=e.find(B=>B.id===i),P=async()=>{if(i)try{const B={channels:2,sampleRate:44100,bitDepth:24,format:"wav"};switch(l){case"normal":await o.startRecording(i,B);break;case"punch":f&&await o.punchIn(i,parseFloat(f));break;case"auto-punch":f&&m&&(o.setAutoPunch(parseFloat(f),parseFloat(m)),await o.startRecording(i,B));break;case"loop":w&&C&&o.startLoopRecording(i,parseFloat(w),parseFloat(C),A);break;case"quick-punch":await o.startRecording(i,B);break;case"take":o.createNewTake(i),await o.startRecording(i,B);break}k&&await o.startVoiceActivated(i,O)}catch(B){console.error("Failed to start recording:",B),alert(`Recording failed: ${B instanceof Error?B.message:"Unknown error"}`)}},te=()=>{o.stopRecording()},se=()=>{m?o.punchOut(parseFloat(m)):o.stopRecording()},de=B=>{const Q=o.captureRetrospective(B);if(Q&&i){o.createNewTake(i);const ne=e.find(ae=>ae.id===i);if(ne){const ae=ne.takes[ne.takes.length-1];ae&&(ae.audioBuffer=Q)}n?.(o.getTracks())}};return u.jsxs("div",{style:{padding:"20px",backgroundColor:"#1a1a1a",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("h3",{style:{marginTop:0,color:"#fff"},children:"Recording Controls"}),u.jsxs("div",{style:{marginBottom:"15px"},children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.9em",display:"block",marginBottom:"5px"},children:"Track"}),u.jsx("select",{value:i||"",onChange:B=>r(B.target.value),style:{width:"100%",padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"},children:e.map(B=>u.jsxs("option",{value:B.id,children:[B.name," ",B.armed?"":""," ",B.recordSafe?"":""]},B.id))})]}),u.jsxs("div",{style:{marginBottom:"15px"},children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.9em",display:"block",marginBottom:"5px"},children:"Recording Mode"}),u.jsxs("select",{value:l,onChange:B=>d(B.target.value),style:{width:"100%",padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"},children:[u.jsx("option",{value:"normal",children:"Normal Recording"}),u.jsx("option",{value:"punch",children:"Punch In/Out (Manual)"}),u.jsx("option",{value:"auto-punch",children:"Auto Punch In/Out"}),u.jsx("option",{value:"loop",children:"Loop Recording"}),u.jsx("option",{value:"take",children:"Take Recording"}),u.jsx("option",{value:"quick-punch",children:"Quick Punch"})]})]}),(l==="punch"||l==="auto-punch")&&u.jsxs("div",{style:{marginBottom:"15px",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.9em",display:"block",marginBottom:"5px"},children:"Punch In Time (seconds)"}),u.jsx("input",{type:"number",value:f,onChange:B=>g(B.target.value),step:"0.1",style:{width:"100%",padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.9em",display:"block",marginBottom:"5px"},children:"Punch Out Time (seconds)"}),u.jsx("input",{type:"number",value:m,onChange:B=>y(B.target.value),step:"0.1",style:{width:"100%",padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"}})]})]}),l==="loop"&&u.jsxs("div",{style:{marginBottom:"15px",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.9em",display:"block",marginBottom:"5px"},children:"Loop Start (seconds)"}),u.jsx("input",{type:"number",value:w,onChange:B=>T(B.target.value),step:"0.1",style:{width:"100%",padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.9em",display:"block",marginBottom:"5px"},children:"Loop End (seconds)"}),u.jsx("input",{type:"number",value:C,onChange:B=>N(B.target.value),step:"0.1",style:{width:"100%",padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"}})]})]}),u.jsxs("div",{style:{marginBottom:"15px",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.9em",display:"block",marginBottom:"5px"},children:"Pre-Roll (seconds)"}),u.jsx("input",{type:"number",value:x,onChange:B=>b(parseFloat(B.target.value)),step:"0.1",min:"0",style:{width:"100%",padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.9em",display:"block",marginBottom:"5px"},children:"Post-Roll (seconds)"}),u.jsx("input",{type:"number",value:v,onChange:B=>_(parseFloat(B.target.value)),step:"0.1",min:"0",style:{width:"100%",padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"}})]})]}),u.jsxs("div",{style:{marginBottom:"15px"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#aaa",fontSize:"0.9em"},children:[u.jsx("input",{type:"checkbox",checked:M,onChange:B=>E(B.target.checked)}),"Retrospective Recording (Capture Buffer)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#aaa",fontSize:"0.9em",marginTop:"8px"},children:[u.jsx("input",{type:"checkbox",checked:k,onChange:B=>R(B.target.checked)}),"Voice-Activated Recording"]}),k&&u.jsxs("div",{style:{marginTop:"8px",marginLeft:"24px"},children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em",display:"block",marginBottom:"4px"},children:"Sensitivity Threshold"}),u.jsx("input",{type:"range",min:"0.001",max:"0.1",step:"0.001",value:O,onChange:B=>L(parseFloat(B.target.value)),style:{width:"100%"}}),u.jsx("span",{style:{color:"#888",fontSize:"0.8em"},children:O.toFixed(3)})]}),l==="loop"&&u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#aaa",fontSize:"0.9em",marginTop:"8px"},children:[u.jsx("input",{type:"checkbox",checked:A,onChange:B=>D(B.target.checked)}),"Auto-Increment Takes"]})]}),u.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px"},children:[u.jsx("button",{onClick:P,style:{flex:1,padding:"12px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",fontSize:"1em"},children:" Start Recording"}),u.jsx("button",{onClick:l==="punch"?se:te,style:{flex:1,padding:"12px",backgroundColor:"#333",color:"white",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",fontSize:"1em"},children:" Stop Recording"})]}),M&&u.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#2a2a2a",borderRadius:"4px"},children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.9em",display:"block",marginBottom:"5px"},children:"Capture Retrospective Recording (seconds)"}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[u.jsx("input",{type:"number",defaultValue:"5",min:"1",max:"30",step:"1",id:"retrospective-duration",style:{flex:1,padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"}}),u.jsx("button",{onClick:()=>{const B=parseFloat(document.getElementById("retrospective-duration").value);de(B)},style:{padding:"8px 16px",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Capture"})]})]}),q&&u.jsx("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#2a2a2a",borderRadius:"4px",fontSize:"0.85em"},children:u.jsxs("div",{style:{color:"#aaa"},children:[u.jsxs("div",{children:["Takes: ",q.takes.length]}),u.jsxs("div",{children:["Current Take: ",q.currentTake+1]}),u.jsxs("div",{children:["Monitoring: ",q.inputMonitoring]}),u.jsxs("div",{children:["Armed: ",q.armed?"Yes":"No"]}),u.jsxs("div",{children:["Record Safe: ",q.recordSafe?"Yes":"No"]})]})})]})},YT=({engine:o,tracks:e,onTracksChange:n,onTrackSelect:i})=>{const[r,l]=I.useState(!1),[d,f]=I.useState(""),g=()=>{const _={id:`track-${Date.now()}`,name:d||`Track ${e.length+1}`,armed:!1,recordSafe:!1,inputMonitoring:"off",takes:[],currentTake:-1,inputChannel:e.length,pan:0,volume:1},w=[...e,_];n(w),f(""),l(!1)},m=_=>{const w=e.filter(T=>T.id!==_);n(w)},y=_=>{const w=e.find(T=>T.id===_);w&&(o.setTrackArmed(_,!w.armed),n(o.getTracks()))},x=_=>{const w=e.find(T=>T.id===_);w&&(o.setRecordSafe(_,!w.recordSafe),n(o.getTracks()))},b=(_,w)=>{o.setInputMonitoring(_,w),n(o.getTracks())},v=_=>{_.forEach(w=>{o.setTrackArmed(w,!0)}),n(o.getTracks())};return u.jsxs("div",{style:{padding:"15px",backgroundColor:"#1a1a1a",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[u.jsx("h3",{style:{margin:0,color:"#fff"},children:"Tracks"}),u.jsx("button",{onClick:()=>l(!r),style:{padding:"6px 12px",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.9em"},children:"+ Add Track"})]}),r&&u.jsxs("div",{style:{marginBottom:"15px",padding:"10px",backgroundColor:"#2a2a2a",borderRadius:"4px"},children:[u.jsx("input",{type:"text",value:d,onChange:_=>f(_.target.value),placeholder:"Track name",style:{width:"100%",padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",marginBottom:"8px"}}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[u.jsx("button",{onClick:g,style:{flex:1,padding:"8px",backgroundColor:"#4caf50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Add"}),u.jsx("button",{onClick:()=>l(!1),style:{flex:1,padding:"8px",backgroundColor:"#666",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Cancel"})]})]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:e.map(_=>u.jsxs("div",{onClick:()=>i(_.id),style:{padding:"12px",backgroundColor:_.armed?"#4caf5020":"#2a2a2a",border:`2px solid ${_.armed?"#4caf50":"rgba(255, 255, 255, 0.1)"}`,borderRadius:"4px",cursor:"pointer",transition:"all 0.2s"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[u.jsx("span",{style:{color:"#fff",fontWeight:"bold"},children:_.name}),_.armed&&u.jsx("span",{style:{color:"#4caf50"},children:""}),_.recordSafe&&u.jsx("span",{style:{color:"#f44336"},children:""}),u.jsxs("span",{style:{color:"#888",fontSize:"0.85em"},children:[_.takes.length," take",_.takes.length!==1?"s":""]})]}),u.jsx("button",{onClick:w=>{w.stopPropagation(),m(_.id)},style:{padding:"4px 8px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.8em"},children:""})]}),u.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[u.jsx("button",{onClick:w=>{w.stopPropagation(),y(_.id)},style:{padding:"6px 12px",backgroundColor:_.armed?"#4caf50":"#333",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.85em"},children:_.armed?" Armed":"Arm"}),u.jsx("button",{onClick:w=>{w.stopPropagation(),x(_.id)},style:{padding:"6px 12px",backgroundColor:_.recordSafe?"#f44336":"#333",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.85em"},children:_.recordSafe?" Safe":"Record Safe"}),u.jsxs("select",{value:_.inputMonitoring,onChange:w=>{w.stopPropagation(),b(_.id,w.target.value)},onClick:w=>w.stopPropagation(),style:{padding:"6px 12px",backgroundColor:"#333",color:"white",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",cursor:"pointer",fontSize:"0.85em"},children:[u.jsx("option",{value:"off",children:"Monitoring: Off"}),u.jsx("option",{value:"software",children:"Software"}),u.jsx("option",{value:"hardware",children:"Hardware"}),u.jsx("option",{value:"direct",children:"Direct"})]})]})]},_.id))}),e.length>1&&u.jsx("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#2a2a2a",borderRadius:"4px"},children:u.jsx("button",{onClick:()=>v(e.map(_=>_.id)),style:{width:"100%",padding:"8px",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.9em"},children:"Arm All Tracks"})})]})},WT=({track:o,onTakeSelect:e,onTakeDelete:n,onCompCreate:i})=>{const[r,l]=I.useState(new Set),[d,f]=I.useState([]),g=x=>{const b=new Set(r);b.has(x)?b.delete(x):b.add(x),l(b)},m=()=>{d.length>0&&i&&(i(d),f([]))},y=x=>{const b=Math.floor(x/60),v=Math.floor(x%60),_=Math.floor(x%1*100);return`${b}:${v.toString().padStart(2,"0")}.${_.toString().padStart(2,"0")}`};return u.jsxs("div",{style:{padding:"15px",backgroundColor:"#1a1a1a",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[u.jsxs("h3",{style:{margin:0,color:"#fff"},children:["Take Lanes: ",o.name]}),r.size>0&&u.jsxs("button",{onClick:m,style:{padding:"6px 12px",backgroundColor:"#6366f1",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.9em"},children:["Create Comp (",r.size," takes)"]})]}),o.takes.length===0?u.jsx("div",{style:{padding:"20px",textAlign:"center",color:"#888"},children:"No takes recorded yet"}):u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:o.takes.map((x,b)=>u.jsxs("div",{style:{padding:"12px",backgroundColor:x.selected?"#6366f120":"#2a2a2a",border:`2px solid ${x.selected?"#6366f1":"rgba(255, 255, 255, 0.1)"}`,borderRadius:"4px",cursor:"pointer",transition:"all 0.2s"},onClick:()=>{e(x.id),g(x.id)},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[u.jsxs("span",{style:{color:"#fff",fontWeight:"bold"},children:["Take ",b+1]}),x.selected&&u.jsx("span",{style:{color:"#6366f1"},children:" Selected"}),r.has(x.id)&&u.jsx("span",{style:{color:"#4caf50"},children:" In Comp"})]}),u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[u.jsxs("span",{style:{color:"#888",fontSize:"0.85em"},children:[y(x.startTime)," - ",y(x.endTime)]}),u.jsx("button",{onClick:v=>{v.stopPropagation(),n(x.id)},style:{padding:"4px 8px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.8em"},children:"Delete"})]})]}),x.audioBuffer&&u.jsxs("div",{style:{marginTop:"8px",padding:"8px",backgroundColor:"#1a1a1a",borderRadius:"4px"},children:[u.jsxs("div",{style:{color:"#aaa",fontSize:"0.85em"},children:["Duration: ",y(x.audioBuffer.duration)," | ","Sample Rate: ",x.audioBuffer.sampleRate," Hz"," | ","Channels: ",x.audioBuffer.numberOfChannels]}),u.jsx("div",{style:{width:"100%",height:"40px",backgroundColor:"#0a0a0a",borderRadius:"2px",marginTop:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:u.jsx("div",{style:{color:"#666",fontSize:"0.75em",padding:"10px",textAlign:"center"},children:"Waveform Preview"})})]})]},x.id))}),o.takes.length>0&&u.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#2a2a2a",borderRadius:"4px",fontSize:"0.85em",color:"#aaa"},children:[u.jsxs("div",{children:["Current Take: ",o.currentTake+1," of ",o.takes.length]}),u.jsxs("div",{style:{marginTop:"4px"},children:["Selected for Comp: ",r.size," take",r.size!==1?"s":""]})]})]})};class QT{state;config;transport=null;scheduledEvents=[];audioContext=null;playbackSource=null;playbackRateNode=null;soloStates=new Map;muteStates=new Map;soloSafeTracks=new Set;cueSends=new Map;constructor(e){this.config=e,this.state={isPlaying:!1,isPaused:!1,currentTime:0,playheadPosition:0,playbackSpeed:1,isLooping:!1,loopStart:0,loopEnd:16,selectionStart:null,selectionEnd:null,startMarker:0,cursorPosition:0,isReversed:!1,frameRate:30}}async initialize(){Wd.state!=="running"&&await Da(),this.audioContext=Wd.rawContext,this.transport=zn}async togglePlayPause(){this.state.isPlaying?await this.pause():await this.play()}async play(){this.audioContext||await this.initialize(),this.state.isPaused?(this.transport?.start(),this.state.isPaused=!1):this.transport?.start(),this.state.isPlaying=!0,this.startPlaybackLoop()}async pause(){this.transport?.pause(),this.state.isPlaying=!1,this.state.isPaused=!0}stop(){this.transport?.stop(),this.transport?.cancel(),this.scheduledEvents.forEach(e=>this.transport?.clear(e)),this.scheduledEvents=[],this.state.isPlaying=!1,this.state.isPaused=!1,this.state.currentTime=0,this.state.playheadPosition=0}returnToZero(){this.stop(),this.state.playheadPosition=0,this.state.cursorPosition=0,this.state.currentTime=0}returnToStartMarker(){this.stop(),this.state.playheadPosition=this.state.startMarker,this.state.cursorPosition=this.state.startMarker,this.state.currentTime=this.barsToSeconds(this.state.startMarker)}async playFromCursor(){this.state.playheadPosition=this.state.cursorPosition,this.state.currentTime=this.barsToSeconds(this.state.cursorPosition),await this.play()}async playFromSelection(){this.state.selectionStart!==null&&(this.state.playheadPosition=this.state.selectionStart,this.state.currentTime=this.barsToSeconds(this.state.selectionStart),await this.play())}async playSelectionOnly(){this.state.selectionStart!==null&&this.state.selectionEnd!==null&&(this.state.isLooping=!0,this.state.loopStart=this.state.selectionStart,this.state.loopEnd=this.state.selectionEnd,this.state.playheadPosition=this.state.selectionStart,this.state.currentTime=this.barsToSeconds(this.state.selectionStart),await this.play())}setLooping(e,n,i){this.state.isLooping=e,n!==void 0&&(this.state.loopStart=n),i!==void 0&&(this.state.loopEnd=i)}startScrub(e){this.state.playheadPosition=e,this.state.currentTime=this.barsToSeconds(e),this.scrubAudio(e)}stopScrub(){}scrubAudio(e){}setPlaybackSpeed(e){this.state.playbackSpeed=Math.max(-2,Math.min(2,e)),this.playbackRateNode&&(this.playbackRateNode.gain.value=this.state.playbackSpeed),this.transport&&(this.transport.bpm.value=this.config.tempo*Math.abs(this.state.playbackSpeed))}setHalfSpeed(){this.setPlaybackSpeed(.5)}setDoubleSpeed(){this.setPlaybackSpeed(2)}setReverse(e){this.state.isReversed=e,e?this.setPlaybackSpeed(-1):this.setPlaybackSpeed(1)}advanceFrame(){const i=1/(this.barsToSeconds(1)*this.state.frameRate);this.state.isReversed?this.state.playheadPosition=Math.max(0,this.state.playheadPosition-i):this.state.playheadPosition+=i,this.state.currentTime=this.barsToSeconds(this.state.playheadPosition)}async preListen(e,n=2){console.log(`Pre-listening to track ${e} for ${n} seconds`)}soloInPlace(e,n){this.soloStates.set(e,n),this.updateSoloStates()}soloDefeat(){this.soloStates.clear(),this.updateSoloStates()}mute(e,n){this.muteStates.set(e,n)}setExclusiveSolo(e){this.soloStates.clear(),this.soloStates.set(e,!0),this.updateSoloStates()}setXORSolo(e){const n=this.soloStates.get(e);this.soloStates.clear(),n||this.soloStates.set(e,!0),this.updateSoloStates()}setSoloSafe(e,n){n?this.soloSafeTracks.add(e):this.soloSafeTracks.delete(e)}setListenBus(e,n){}setCueSend(e,n){this.cueSends.set(e,Math.max(0,Math.min(1,n)))}getCueSend(e){return this.cueSends.get(e)||0}updateSoloStates(){Array.from(this.soloStates.values()).some(e=>e)}startPlaybackLoop(){const e=()=>{if(this.state.isPlaying){if(this.state.isReversed){if(this.state.playheadPosition-=.01,this.state.playheadPosition<0)if(this.state.playheadPosition=0,this.state.isLooping)this.state.playheadPosition=this.state.loopEnd;else{this.stop();return}}else this.state.playheadPosition+=.01*this.state.playbackSpeed,this.state.isLooping&&this.state.playheadPosition>=this.state.loopEnd&&(this.state.playheadPosition=this.state.loopStart);this.state.currentTime=this.barsToSeconds(this.state.playheadPosition),this.state.isPlaying&&requestAnimationFrame(e)}};requestAnimationFrame(e)}barsToSeconds(e){const n=this.config.timeSignature[0],r=60/this.config.tempo;return e*n*r}getState(){return{...this.state}}getPlaybackSpeed(){return this.state.playbackSpeed}isTrackSoloed(e){return this.soloStates.get(e)||!1}isTrackMuted(e){return this.muteStates.get(e)||!1}isTrackSoloSafe(e){return this.soloSafeTracks.has(e)}setCursorPosition(e){this.state.cursorPosition=e}setSelection(e,n){this.state.selectionStart=e,this.state.selectionEnd=n}setStartMarker(e){this.state.startMarker=e}setTempo(e){this.config.tempo=e,this.transport&&(this.transport.bpm.value=e)}cleanup(){this.stop(),this.playbackSource&&this.playbackSource.disconnect(),this.audioContext&&this.audioContext.close()}}const XT=({engine:o,tempo:e=120,timeSignature:n=[4,4],onStateChange:i})=>{const[r,l]=I.useState(o.getState()),[d,f]=I.useState(!1),[g,m]=I.useState(1);I.useEffect(()=>{const b=setInterval(()=>{const v=o.getState();l(v),m(v.playbackSpeed),i?.(v)},100);return()=>clearInterval(b)},[o,i]);const y=b=>{const v=Math.floor(b/60),_=Math.floor(b%60),w=Math.floor(b%1*100);return`${v.toString().padStart(2,"0")}:${_.toString().padStart(2,"0")}.${w.toString().padStart(2,"0")}`},x=b=>{const v=Math.floor(b),_=Math.floor((b-v)*n[0]);return`${v}:${_.toString().padStart(2,"0")}`};return u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px",padding:"15px",backgroundColor:"#1a1a1a",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[u.jsx("button",{onClick:()=>o.returnToZero(),style:{padding:"8px 12px",backgroundColor:"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em"},title:"Return to Zero",children:""}),u.jsx("button",{onClick:()=>o.returnToStartMarker(),style:{padding:"8px 12px",backgroundColor:"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em"},title:"Return to Start Marker",children:""}),u.jsx("button",{onClick:()=>o.stop(),style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#333",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#fff",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Stop",children:""}),u.jsx("button",{onClick:()=>o.togglePlayPause(),style:{width:"50px",height:"50px",borderRadius:"50%",backgroundColor:r.isPlaying?"#4caf50":"#6366f1",border:"none",color:"#fff",cursor:"pointer",fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},title:r.isPlaying?"Pause":"Play",children:r.isPlaying?"":""}),u.jsx("button",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#333",border:"1px solid rgba(255, 255, 255, 0.2)",color:"#fff",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"center"},title:"Record",children:""})]}),u.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[u.jsx("button",{onClick:()=>o.playFromCursor(),style:{padding:"6px 12px",backgroundColor:"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.8em"},title:"Play from Cursor",children:" Cursor"}),u.jsx("button",{onClick:()=>o.playFromSelection(),style:{padding:"6px 12px",backgroundColor:"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.8em"},title:"Play from Selection",children:" Selection"}),u.jsx("button",{onClick:()=>o.playSelectionOnly(),style:{padding:"6px 12px",backgroundColor:"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.8em"},title:"Play Selection Only",children:" Selection"}),u.jsxs("button",{onClick:()=>o.setLooping(!r.isLooping),style:{padding:"6px 12px",backgroundColor:r.isLooping?"#6366f1":"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.8em"},title:"Toggle Loop",children:[" Loop ",r.isLooping?"ON":"OFF"]})]}),u.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",flexWrap:"wrap"},children:[u.jsxs("button",{onClick:()=>f(!d),style:{padding:"6px 12px",backgroundColor:"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.8em"},children:[" Speed: ",g.toFixed(2),"x"]}),d&&u.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[u.jsx("button",{onClick:()=>o.setHalfSpeed(),style:{padding:"4px 8px",backgroundColor:"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.75em"},title:"Half Speed",children:"0.5x"}),u.jsx("button",{onClick:()=>o.setPlaybackSpeed(1),style:{padding:"4px 8px",backgroundColor:"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.75em"},title:"Normal Speed",children:"1.0x"}),u.jsx("button",{onClick:()=>o.setDoubleSpeed(),style:{padding:"4px 8px",backgroundColor:"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.75em"},title:"Double Speed",children:"2.0x"}),u.jsx("button",{onClick:()=>o.setReverse(!r.isReversed),style:{padding:"4px 8px",backgroundColor:r.isReversed?"#f44336":"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.75em"},title:"Reverse",children:" Reverse"}),u.jsx("input",{type:"range",min:"0.25",max:"2.0",step:"0.05",value:g,onChange:b=>{const v=parseFloat(b.target.value);o.setPlaybackSpeed(v)},style:{width:"100px"}}),u.jsx("button",{onClick:()=>o.advanceFrame(),style:{padding:"4px 8px",backgroundColor:"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.75em"},title:"Frame Advance",children:" Frame"})]})]}),u.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center",fontSize:"0.9em"},children:[u.jsxs("div",{style:{color:"#aaa"},children:["Time: ",y(r.currentTime)]}),u.jsxs("div",{style:{color:"#aaa"},children:["Position: ",x(r.playheadPosition)]}),u.jsxs("div",{style:{color:"#aaa"},children:["Cursor: ",x(r.cursorPosition)]}),r.selectionStart!==null&&r.selectionEnd!==null&&u.jsxs("div",{style:{color:"#888",fontSize:"0.85em"},children:["Selection: ",x(r.selectionStart)," - ",x(r.selectionEnd)]})]}),u.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[u.jsxs("div",{style:{color:"#aaa",fontSize:"0.85em"},children:["BPM: ",e]}),u.jsxs("div",{style:{color:"#aaa",fontSize:"0.85em"},children:[n[0],"/",n[1]]})]})]})},ZT=({engine:o,trackId:e,trackName:n,onStateChange:i})=>{const[r,l]=I.useState(o.isTrackSoloed(e)),[d,f]=I.useState(o.isTrackMuted(e)),[g,m]=I.useState(o.isTrackSoloSafe(e)),[y,x]=I.useState(!1),b=T=>{switch(T){case"normal":o.soloInPlace(e,!r),l(!r);break;case"exclusive":o.setExclusiveSolo(e),l(!0);break;case"xor":o.setXORSolo(e),l(!r);break}i?.()},v=()=>{o.mute(e,!d),f(!d),i?.()},_=()=>{o.setSoloSafe(e,!g),m(!g),i?.()},w=()=>{o.soloDefeat(),l(!1),i?.()};return u.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center",padding:"8px",backgroundColor:"#2a2a2a",borderRadius:"4px"},children:[u.jsx("button",{onClick:v,style:{padding:"6px 12px",backgroundColor:d?"#f44336":"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em",fontWeight:"bold"},title:"Mute",children:"M"}),u.jsx("button",{onClick:()=>b("normal"),style:{padding:"6px 12px",backgroundColor:r?"#ffeb3b":"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:r?"#000":"#fff",cursor:"pointer",fontSize:"0.85em",fontWeight:"bold"},title:"Solo",children:"S"}),u.jsx("button",{onClick:()=>x(!y),style:{padding:"6px 8px",backgroundColor:"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.75em"},title:"Advanced Solo Options",children:""}),y&&u.jsxs("div",{style:{position:"absolute",marginTop:"40px",padding:"10px",backgroundColor:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",display:"flex",flexDirection:"column",gap:"6px",zIndex:1e3},children:[u.jsx("button",{onClick:()=>{b("exclusive"),x(!1)},style:{padding:"6px 12px",backgroundColor:"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.8em",textAlign:"left"},title:"Exclusive Solo (mute all others)",children:"Exclusive Solo"}),u.jsx("button",{onClick:()=>{b("xor"),x(!1)},style:{padding:"6px 12px",backgroundColor:"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.8em",textAlign:"left"},title:"X-OR Solo (toggle)",children:"X-OR Solo"}),u.jsxs("button",{onClick:()=>{_(),x(!1)},style:{padding:"6px 12px",backgroundColor:g?"#6366f1":"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.8em",textAlign:"left"},title:"Solo Safe (immune to solo)",children:["Solo Safe ",g?"":""]}),u.jsx("button",{onClick:()=>{w(),x(!1)},style:{padding:"6px 12px",backgroundColor:"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.8em",textAlign:"left"},title:"Solo Defeat (clear all solos)",children:"Solo Defeat"})]}),u.jsx("span",{style:{color:"#aaa",fontSize:"0.85em",marginLeft:"8px"},children:n})]})},KT=({engine:o,trackId:e,trackName:n,onStateChange:i})=>{const[r,l]=I.useState(o.getCueSend(e)),[d,f]=I.useState("off"),g=y=>{o.setCueSend(e,y),l(y),i?.()},m=y=>{o.setListenBus(y,e),f(y),i?.()};return u.jsxs("div",{style:{padding:"10px",backgroundColor:"#2a2a2a",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsxs("div",{style:{marginBottom:"8px",color:"#fff",fontSize:"0.9em",fontWeight:"bold"},children:[n," - Cue Mix"]}),u.jsxs("div",{style:{marginBottom:"10px"},children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em",display:"block",marginBottom:"4px"},children:"Cue Send Level"}),u.jsx(ya,{value:r,min:0,max:1,step:.01,orientation:"horizontal",width:200,height:30,onChange:g,showValue:!0,unit:"%",color:"#6366f1"})]}),u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[u.jsx("button",{onClick:()=>m("AFL"),style:{flex:1,padding:"6px 12px",backgroundColor:d==="AFL"?"#6366f1":"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.8em"},title:"After Fader Listen",children:"AFL"}),u.jsx("button",{onClick:()=>m("PFL"),style:{flex:1,padding:"6px 12px",backgroundColor:d==="PFL"?"#6366f1":"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.8em"},title:"Pre Fader Listen",children:"PFL"}),u.jsx("button",{onClick:()=>m("off"),style:{flex:1,padding:"6px 12px",backgroundColor:d==="off"?"#666":"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.8em"},title:"Off",children:"Off"})]}),u.jsx("button",{onClick:()=>o.preListen(e,2),style:{width:"100%",marginTop:"8px",padding:"8px",backgroundColor:"#4caf50",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em",fontWeight:"bold"},title:"Pre-listen/Audition (2 seconds)",children:" Pre-listen"})]})};class $T{config;constructor(e){this.config={sampleRate:44100,bitDepth:24,dithering:"none",noiseShaping:"none",oversampling:1,antiAliasing:!0,...e}}setSampleRate(e){this.config.sampleRate=e}getSampleRate(){return this.config.sampleRate}setBitDepth(e){this.config.bitDepth=e}getBitDepth(){return this.config.bitDepth}getBitDepthNumeric(){return typeof this.config.bitDepth=="number"?this.config.bitDepth:this.config.bitDepth==="32-float"?32:64}setDithering(e){this.config.dithering=e}getDithering(){return this.config.dithering}setNoiseShaping(e){this.config.noiseShaping=e}getNoiseShaping(){return this.config.noiseShaping}convertSampleRate(e,n,i="high-quality",r=!1){return e.sampleRate===n?e:r?this.realTimeSRC(e,n,i):this.offlineSRC(e,n,i)}realTimeSRC(e,n,i){const r=n/e.sampleRate,l=Math.round(e.length*r),d=new AudioContext().createBuffer(e.numberOfChannels,l,n);for(let f=0;f<e.numberOfChannels;f++){const g=e.getChannelData(f),m=d.getChannelData(f);for(let y=0;y<l;y++){const x=y/r,b=Math.floor(x),v=x-b;b+1<g.length?m[y]=g[b]*(1-v)+g[b+1]*v:m[y]=g[b]||0}}return d}offlineSRC(e,n,i){const r=n/e.sampleRate,l=Math.round(e.length*r),d=new AudioContext().createBuffer(e.numberOfChannels,l,n),f=i==="high-quality"?64:32;for(let g=0;g<e.numberOfChannels;g++){const m=e.getChannelData(g),y=d.getChannelData(g);for(let x=0;x<l;x++){const b=x/r;let v=0,_=0;for(let w=-f;w<=f;w++){const T=Math.round(b+w);if(T>=0&&T<m.length){const C=b-T,N=this.sinc(C),A=this.blackmanWindow(C/f),D=N*A;v+=m[T]*D,_+=D}}y[x]=_>0?v/_:0}}return d}setOversampling(e){this.config.oversampling=Math.max(1,Math.min(8,e))}getOversampling(){return this.config.oversampling}applyOversampling(e){if(this.config.oversampling===1)return e;const n=e.sampleRate*this.config.oversampling,i=this.convertSampleRate(e,n,"linear-phase");return this.convertSampleRate(i,e.sampleRate,"linear-phase")}setAntiAliasing(e){this.config.antiAliasing=e}applyAntiAliasingFilter(e,n=.45){if(!this.config.antiAliasing)return e;const i=e.sampleRate*n;return this.applyLowPassFilter(e,i)}applyLowPassFilter(e,n){const i=e.sampleRate/2,r=n/i,l=1/(2*Math.PI*r),d=1/e.sampleRate,f=d/(l+d),g=new AudioContext().createBuffer(e.numberOfChannels,e.length,e.sampleRate);for(let m=0;m<e.numberOfChannels;m++){const y=e.getChannelData(m),x=g.getChannelData(m);let b=0;for(let v=0;v<y.length;v++)b=b+f*(y[v]-b),x[v]=b}return g}applyDithering(e,n){const i=typeof n=="number"?n:n==="32-float"?32:64;if(this.config.dithering==="none"||i>=32)return e;const r=new AudioContext().createBuffer(e.numberOfChannels,e.length,e.sampleRate),l=1/Math.pow(2,i-1),d=this.generateDitherNoise(e.length,this.config.dithering);for(let f=0;f<e.numberOfChannels;f++){const g=e.getChannelData(f),m=r.getChannelData(f);for(let y=0;y<g.length;y++){let x=g[y]+d[y]*l;x=Math.round(x/l)*l,m[y]=Math.max(-1,Math.min(1,x))}}return r}generateDitherNoise(e,n){const i=new Float32Array(e);switch(n){case"rectangular":for(let l=0;l<e;l++)i[l]=Math.random()*2-1;break;case"triangular":for(let l=0;l<e;l++)i[l]=(Math.random()+Math.random()-1)*2;break;case"high-pass triangular":let r=0;for(let l=0;l<e;l++){const d=(Math.random()+Math.random()-1)*2;i[l]=d-r,r=d}break;case"shaped":case"pow-r 1":case"pow-r 2":case"pow-r 3":for(let l=0;l<e;l++)i[l]=(Math.random()+Math.random()-1)*2;this.applyNoiseShaping(i,this.config.noiseShaping);break}return i}applyNoiseShaping(e,n){let i=0;const r=n==="light"?.5:n==="moderate"?.75:n==="heavy"?.9:.95;for(let l=0;l<e.length;l++){const d=e[l]-i;e[l]=e[l]+d*r,i=d}}sinc(e){return e===0?1:Math.sin(Math.PI*e)/(Math.PI*e)}blackmanWindow(e){return .42-.5*Math.cos(2*Math.PI*e)+.08*Math.cos(4*Math.PI*e)}getConfig(){return{...this.config}}setConfig(e){this.config={...this.config,...e}}}const JT=({engine:o,onConfigChange:e})=>{const n=o.getConfig(),[i,r]=I.useState(n.sampleRate),[l,d]=I.useState(n.bitDepth),[f,g]=I.useState(n.dithering),[m,y]=I.useState(n.noiseShaping),[x,b]=I.useState(n.oversampling),[v,_]=I.useState(n.antiAliasing),w=[22050,32e3,44100,48e3,88200,96e3,176400,192e3,352800,384e3],T=[16,24,32,"32-float","64-float"],C=["none","rectangular","triangular","high-pass triangular","shaped","pow-r 1","pow-r 2","pow-r 3"],N=["none","light","moderate","heavy","ultra"],A=O=>{o.setSampleRate(O),r(O),e?.()},D=O=>{o.setBitDepth(O),d(O),e?.()},M=O=>{o.setDithering(O),g(O),e?.()},E=O=>{o.setNoiseShaping(O),y(O),e?.()},k=O=>{o.setOversampling(O),b(O),e?.()},R=O=>{o.setAntiAliasing(O),_(O),e?.()};return u.jsxs("div",{style:{padding:"20px",backgroundColor:"#1a1a1a",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("h3",{style:{marginTop:0,color:"#fff"},children:"Audio Quality Settings"}),u.jsxs("div",{style:{marginBottom:"15px"},children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.9em",display:"block",marginBottom:"5px"},children:"49. Sample Rate (kHz)"}),u.jsx("select",{value:i,onChange:O=>A(Number(O.target.value)),style:{width:"100%",padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"},children:w.map(O=>u.jsxs("option",{value:O,children:[O/1e3," kHz"]},O))})]}),u.jsxs("div",{style:{marginBottom:"15px"},children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.9em",display:"block",marginBottom:"5px"},children:"50. Bit Depth"}),u.jsx("select",{value:l,onChange:O=>D(O.target.value),style:{width:"100%",padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"},children:T.map(O=>u.jsx("option",{value:O,children:O==="32-float"?"32-bit Float":O==="64-float"?"64-bit Float":`${O}-bit`},String(O)))})]}),u.jsxs("div",{style:{marginBottom:"15px"},children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.9em",display:"block",marginBottom:"5px"},children:"51. Dithering"}),u.jsx("select",{value:f,onChange:O=>M(O.target.value),style:{width:"100%",padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"},children:C.map(O=>u.jsx("option",{value:O,children:O.charAt(0).toUpperCase()+O.slice(1).replace(/-/g," ")},O))})]}),f!=="none"&&u.jsxs("div",{style:{marginBottom:"15px"},children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.9em",display:"block",marginBottom:"5px"},children:"52. Noise Shaping"}),u.jsx("select",{value:m,onChange:O=>E(O.target.value),style:{width:"100%",padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"},children:N.map(O=>u.jsx("option",{value:O,children:O.charAt(0).toUpperCase()+O.slice(1)},O))})]}),u.jsxs("div",{style:{marginBottom:"15px"},children:[u.jsxs("label",{style:{color:"#aaa",fontSize:"0.9em",display:"block",marginBottom:"5px"},children:["56. Oversampling (x",x,")"]}),u.jsx("input",{type:"range",min:"1",max:"8",step:"1",value:x,onChange:O=>k(Number(O.target.value)),style:{width:"100%"}}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.8em",color:"#888",marginTop:"4px"},children:[u.jsx("span",{children:"1x"}),u.jsx("span",{children:"2x"}),u.jsx("span",{children:"4x"}),u.jsx("span",{children:"8x"})]})]}),u.jsx("div",{style:{marginBottom:"15px"},children:u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#aaa",fontSize:"0.9em"},children:[u.jsx("input",{type:"checkbox",checked:v,onChange:O=>R(O.target.checked)}),"57. Anti-aliasing Filters"]})}),u.jsxs("div",{style:{marginTop:"20px",padding:"10px",backgroundColor:"#2a2a2a",borderRadius:"4px",fontSize:"0.85em",color:"#aaa"},children:[u.jsx("div",{children:"Current Settings:"}),u.jsxs("div",{children:["Sample Rate: ",i/1e3," kHz"]}),u.jsxs("div",{children:["Bit Depth: ",l==="32-float"?"32-bit Float":l==="64-float"?"64-bit Float":`${l}-bit`]}),u.jsxs("div",{children:["Dithering: ",f]}),f!=="none"&&u.jsxs("div",{children:["Noise Shaping: ",m]}),u.jsxs("div",{children:["Oversampling: ",x,"x"]}),u.jsxs("div",{children:["Anti-aliasing: ",v?"Enabled":"Disabled"]})]})]})};class eC{items=new Map;collections=new Map;tags=new Set;downloadQueue=[];cloudSyncEnabled=!1;loadFactoryContent(){return Array.from(this.items.values()).filter(e=>!e.path.includes("/user/"))}addSoundPack(e,n){n.forEach(i=>{i.type="sound-pack",this.items.set(i.id,i)})}getLoops(){return Array.from(this.items.values()).filter(e=>e.type==="loop")}getOneShots(){return Array.from(this.items.values()).filter(e=>e.type==="one-shot")}getInstruments(){return Array.from(this.items.values()).filter(e=>e.type==="instrument")}getPresets(){return Array.from(this.items.values()).filter(e=>e.type==="preset")}getEffectPresets(){return Array.from(this.items.values()).filter(e=>e.type==="effect-preset")}addToDownloadQueue(e){this.downloadQueue.includes(e)||this.downloadQueue.push(e)}getDownloadQueue(){return[...this.downloadQueue]}async downloadItem(e){const n=this.items.get(e);n&&(n.downloaded=!0,this.downloadQueue=this.downloadQueue.filter(i=>i!==e))}setLicense(e,n){const i=this.items.get(e);i&&(i.license=n)}getLicense(e){return this.items.get(e)?.license}enableCloudSync(e){this.cloudSyncEnabled=e}async syncToCloud(){if(!this.cloudSyncEnabled)return;Array.from(this.items.values()).filter(n=>!n.cloudSynced).forEach(n=>{n.cloudSynced=!0})}addUserItem(e){this.items.set(e.id,e),this.updateTags(e.tags)}getUserItems(){return Array.from(this.items.values()).filter(e=>e.path.includes("/user/"))}organizeByTags(){const e=new Map;return this.items.forEach(n=>{n.tags.forEach(i=>{e.has(i)||e.set(i,[]),e.get(i).push(n)})}),e}addTag(e,n){const i=this.items.get(e);i&&(i.tags.includes(n)||(i.tags.push(n),this.updateTags([n])))}removeTag(e,n){const i=this.items.get(e);i&&(i.tags=i.tags.filter(r=>r!==n))}getAllTags(){return Array.from(this.tags)}setRating(e,n){const i=this.items.get(e);i&&(i.rating=Math.max(0,Math.min(5,n)))}getItemsByRating(e){return Array.from(this.items.values()).filter(n=>n.rating>=e)}setColor(e,n){const i=this.items.get(e);i&&(i.color=n)}getItemsByColor(e){return Array.from(this.items.values()).filter(n=>n.color===e)}createSmartCollection(e){this.collections.set(e.id,e)}getSmartCollection(e){const n=this.collections.get(e);return n?this.search(n.query):[]}search(e){let n=Array.from(this.items.values());if(e.type&&e.type.length>0&&(n=n.filter(i=>e.type.includes(i.type))),e.tags&&e.tags.length>0&&(n=n.filter(i=>e.tags.some(r=>i.tags.includes(r)))),e.minRating!==void 0&&(n=n.filter(i=>i.rating>=e.minRating)),e.bpm&&(n=n.filter(i=>{const r=i.metadata.bpm;return!(!r||e.bpm.min&&r<e.bpm.min||e.bpm.max&&r>e.bpm.max)})),e.key&&(n=n.filter(i=>i.metadata.key===e.key)),e.genre&&(n=n.filter(i=>i.metadata.genre===e.genre)),e.name){const i=e.name.toLowerCase();n=n.filter(r=>r.name.toLowerCase().includes(i))}return n}updateTags(e){e.forEach(n=>this.tags.add(n))}getItem(e){return this.items.get(e)}getAllItems(){return Array.from(this.items.values())}getCollections(){return Array.from(this.collections.values())}}class tC{versions=new Map;sessions=new Map;cloudStorageEnabled=!1;cloudSyncEnabled=!1;enableCloudStorage(e){this.cloudStorageEnabled=e}async saveToCloud(e,n){this.cloudStorageEnabled&&console.log(`Saving project ${e} to cloud`)}enableCloudSync(e){this.cloudSyncEnabled=e}async syncProject(e){this.cloudSyncEnabled&&console.log(`Syncing project ${e}`)}createVersion(e,n,i){const r=this.versions.get(e)||[],l={id:`version-${Date.now()}`,version:r.length+1,timestamp:new Date,author:n,description:i,data:{}};r.push(l),this.versions.set(e,r)}getVersions(e){return this.versions.get(e)||[]}async restoreVersion(e,n){const i=this.versions.get(e);return i&&i.find(l=>l.id===n)?.data||null}async shareProject(e,n,i){console.log(`Sharing project ${e} with users: ${n.join(", ")}`)}async inviteCollaborator(e,n,i){const r=this.sessions.get(e);r&&(r.participants.push(n),r.permissions.set(n,i))}createSession(e,n){const i=`session-${Date.now()}`,r={id:i,projectId:e,participants:[n],owner:n,permissions:new Map([[n,"admin"]]),comments:[],isActive:!0};return this.sessions.set(i,r),i}getSession(e){return this.sessions.get(e)}addComment(e,n){const i=this.sessions.get(e);if(!i)throw new Error("Session not found");const r={id:`comment-${Date.now()}`,...n,timestamp:new Date,resolved:!1};return i.comments.push(r),r.id}resolveComment(e,n){const i=this.sessions.get(e);if(!i)return;const r=i.comments.find(l=>l.id===n);r&&(r.resolved=!0)}async shareStem(e){return console.log(`Sharing stem: ${e.name}`),e.id}async shareReferenceTrack(e,n){console.log(`Sharing reference track for project ${e}`)}async createBackup(e){this.cloudStorageEnabled&&console.log(`Creating cloud backup for project ${e}`)}async exportStems(e,n){return[`stem-1.${n}`,`stem-2.${n}`]}async exportMultitracks(e){return`multitrack-${e}.zip`}async exportSessionArchive(e){return`session-${e}.zip`}async exportProjectInterchange(e,n){return`project-${e}.${n}`}async exportConsolidatedProject(e){return`consolidated-${e}.zip`}async exportPreviewMix(e){return`preview-${e}.mp3`}async exportNotes(e){return`notes-${e}.txt`}async exportTrackSheet(e){return`tracksheet-${e}.pdf`}async exportSessionInfo(e){return`sessioninfo-${e}.txt`}}const nC=({library:o,onItemSelect:e,onItemLoad:n})=>{const[i,r]=I.useState(""),[l,d]=I.useState("all"),[f,g]=I.useState([]),[m,y]=I.useState(0),[x,b]=I.useState("grid"),[v,_]=I.useState("name"),[w,T]=I.useState(!1),[C,N]=I.useState(""),A=o.getAllTags(),D=o.getCollections(),M=I.useMemo(()=>{let O=o.search({type:l!=="all"?[l]:void 0,tags:f.length>0?f:void 0,minRating:m,name:i||void 0});return O.sort((L,q)=>{switch(v){case"rating":return q.rating-L.rating;case"bpm":return(q.metadata.bpm||0)-(L.metadata.bpm||0);case"date":return 0;default:return L.name.localeCompare(q.name)}}),O},[o,i,l,f,m,v]),E=O=>{g(L=>L.includes(O)?L.filter(q=>q!==O):[...L,O])},k=()=>{if(!C.trim())return;const O={id:`collection-${Date.now()}`,name:C,query:{type:l!=="all"?[l]:void 0,tags:f.length>0?f:void 0,minRating:m>0?m:void 0}};o.createSmartCollection(O),N(""),T(!1)},R=O=>{};return u.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#1a1a1a",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",overflow:"hidden"},children:[u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[u.jsx("h3",{style:{margin:0,color:"#fff"},children:"Content Library"}),u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[u.jsx("button",{onClick:()=>b("grid"),style:{padding:"6px 12px",backgroundColor:x==="grid"?"#6366f1":"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em"},children:" Grid"}),u.jsx("button",{onClick:()=>b("list"),style:{padding:"6px 12px",backgroundColor:x==="list"?"#6366f1":"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em"},children:" List"})]})]}),u.jsx("input",{type:"text",value:i,onChange:O=>r(O.target.value),placeholder:"Search library...",style:{width:"100%",padding:"10px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",fontSize:"0.9em",marginBottom:"10px"}}),u.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[u.jsxs("select",{value:l,onChange:O=>d(O.target.value),style:{padding:"6px 12px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",fontSize:"0.85em"},children:[u.jsx("option",{value:"all",children:"All Types"}),u.jsx("option",{value:"loop",children:"Loops"}),u.jsx("option",{value:"one-shot",children:"One-Shots"}),u.jsx("option",{value:"instrument",children:"Instruments"}),u.jsx("option",{value:"preset",children:"Presets"}),u.jsx("option",{value:"effect-preset",children:"Effect Presets"}),u.jsx("option",{value:"sound-pack",children:"Sound Packs"})]}),u.jsxs("select",{value:m,onChange:O=>y(Number(O.target.value)),style:{padding:"6px 12px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",fontSize:"0.85em"},children:[u.jsx("option",{value:"0",children:"Any Rating"}),u.jsx("option",{value:"1",children:"1+ Stars"}),u.jsx("option",{value:"2",children:"2+ Stars"}),u.jsx("option",{value:"3",children:"3+ Stars"}),u.jsx("option",{value:"4",children:"4+ Stars"}),u.jsx("option",{value:"5",children:"5 Stars"})]}),u.jsxs("select",{value:v,onChange:O=>_(O.target.value),style:{padding:"6px 12px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",fontSize:"0.85em"},children:[u.jsx("option",{value:"name",children:"Sort by Name"}),u.jsx("option",{value:"rating",children:"Sort by Rating"}),u.jsx("option",{value:"bpm",children:"Sort by BPM"}),u.jsx("option",{value:"date",children:"Sort by Date"})]}),u.jsx("button",{onClick:()=>T(!w),style:{padding:"6px 12px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em"},children:" Collections"})]})]}),w&&u.jsxs("div",{style:{padding:"15px",backgroundColor:"#2a2a2a",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{marginBottom:"10px",color:"#fff",fontWeight:"bold"},children:"Smart Collections"}),u.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"10px"},children:[u.jsx("input",{type:"text",value:C,onChange:O=>N(O.target.value),placeholder:"Collection name...",style:{flex:1,padding:"6px 12px",backgroundColor:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",fontSize:"0.85em"}}),u.jsx("button",{onClick:k,style:{padding:"6px 12px",backgroundColor:"#4caf50",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em"},children:"Create"})]}),u.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:D.map(O=>u.jsx("button",{onClick:()=>R(O.id),style:{padding:"6px 12px",backgroundColor:"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em"},children:O.name},O.id))})]}),A.length>0&&u.jsxs("div",{style:{padding:"10px 15px",backgroundColor:"#2a2a2a",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{marginBottom:"8px",color:"#aaa",fontSize:"0.85em"},children:"Tags:"}),u.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:A.map(O=>u.jsx("button",{onClick:()=>E(O),style:{padding:"4px 10px",backgroundColor:f.includes(O)?"#6366f1":"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.8em"},children:O},O))})]}),u.jsx("div",{style:{flex:1,overflowY:"auto",padding:"15px"},children:M.length===0?u.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#888"},children:"No items found. Try adjusting your filters."}):x==="grid"?u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px"},children:M.map(O=>u.jsx(sC,{item:O,library:o,onSelect:e,onLoad:n},O.id))}):u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:M.map(O=>u.jsx(iC,{item:O,library:o,onSelect:e,onLoad:n},O.id))})}),u.jsxs("div",{style:{padding:"10px 15px",backgroundColor:"#0f0f0f",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"space-between",fontSize:"0.85em",color:"#aaa"},children:[u.jsxs("span",{children:[M.length," items"]}),u.jsx("span",{children:f.length>0&&`${f.length} tags selected`})]})]})},sC=({item:o,library:e,onSelect:n,onLoad:i})=>{const[r,l]=I.useState(!1);return u.jsxs("div",{onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onClick:()=>n?.(o),style:{padding:"12px",backgroundColor:r?"#2a2a2a":"#1a1a1a",border:`2px solid ${o.color||"rgba(255, 255, 255, 0.1)"}`,borderRadius:"8px",cursor:"pointer",transition:"all 0.2s",position:"relative"},children:[u.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",width:"12px",height:"12px",backgroundColor:o.color||"#6366f1",borderRadius:"50%",border:"2px solid #1a1a1a"}}),u.jsx("div",{style:{position:"absolute",top:"8px",left:"8px",padding:"2px 6px",backgroundColor:"#6366f1",borderRadius:"4px",fontSize:"0.7em",color:"#fff",textTransform:"uppercase"},children:o.type}),u.jsxs("div",{style:{width:"100%",height:"120px",backgroundColor:"#0a0a0a",borderRadius:"4px",marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"center",color:"#666",fontSize:"0.8em"},children:[o.type==="loop"&&"",o.type==="one-shot"&&"",o.type==="instrument"&&"",o.type==="preset"&&"",o.type==="effect-preset"&&"",o.type==="sound-pack"&&""]}),u.jsx("div",{style:{color:"#fff",fontWeight:"bold",fontSize:"0.9em",marginBottom:"6px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o.name}),u.jsxs("div",{style:{fontSize:"0.75em",color:"#888",marginBottom:"8px"},children:[o.metadata.bpm&&u.jsxs("div",{children:["BPM: ",o.metadata.bpm]}),o.metadata.key&&u.jsxs("div",{children:["Key: ",o.metadata.key]}),o.metadata.genre&&u.jsxs("div",{children:["Genre: ",o.metadata.genre]})]}),u.jsx("div",{style:{display:"flex",gap:"2px",marginBottom:"8px"},children:Array.from({length:5}).map((d,f)=>u.jsx("span",{style:{color:f<o.rating?"#ffeb3b":"#444",fontSize:"0.9em"},children:""},f))}),o.tags.length>0&&u.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px",marginBottom:"8px"},children:[o.tags.slice(0,3).map(d=>u.jsx("span",{style:{padding:"2px 6px",backgroundColor:"#333",borderRadius:"3px",fontSize:"0.7em",color:"#aaa"},children:d},d)),o.tags.length>3&&u.jsxs("span",{style:{fontSize:"0.7em",color:"#666"},children:["+",o.tags.length-3]})]}),u.jsxs("div",{style:{display:"flex",gap:"6px"},children:[u.jsx("button",{onClick:d=>{d.stopPropagation(),i?.(o)},style:{flex:1,padding:"6px",backgroundColor:"#4caf50",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.8em",fontWeight:"bold"},children:"Load"}),!o.downloaded&&u.jsx("button",{onClick:d=>{d.stopPropagation(),e.addToDownloadQueue(o.id)},style:{padding:"6px 12px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.8em"},title:"Add to download queue",children:""})]})]})},iC=({item:o,library:e,onSelect:n,onLoad:i})=>u.jsxs("div",{onClick:()=>n?.(o),style:{padding:"12px",backgroundColor:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"15px",transition:"background-color 0.2s"},onMouseEnter:r=>{r.currentTarget.style.backgroundColor="#2a2a2a"},onMouseLeave:r=>{r.currentTarget.style.backgroundColor="#1a1a1a"},children:[u.jsx("div",{style:{width:"4px",height:"40px",backgroundColor:o.color||"#6366f1",borderRadius:"2px"}}),u.jsxs("div",{style:{fontSize:"1.5em",width:"30px",textAlign:"center"},children:[o.type==="loop"&&"",o.type==="one-shot"&&"",o.type==="instrument"&&"",o.type==="preset"&&"",o.type==="effect-preset"&&"",o.type==="sound-pack"&&""]}),u.jsxs("div",{style:{flex:1,minWidth:0},children:[u.jsx("div",{style:{color:"#fff",fontWeight:"bold",marginBottom:"4px"},children:o.name}),u.jsxs("div",{style:{fontSize:"0.85em",color:"#888"},children:[o.metadata.bpm&&`BPM: ${o.metadata.bpm}  `,o.metadata.key&&`Key: ${o.metadata.key}  `,o.metadata.genre&&`Genre: ${o.metadata.genre}`]}),o.tags.length>0&&u.jsx("div",{style:{display:"flex",gap:"4px",marginTop:"4px",flexWrap:"wrap"},children:o.tags.map(r=>u.jsx("span",{style:{padding:"2px 6px",backgroundColor:"#333",borderRadius:"3px",fontSize:"0.75em",color:"#aaa"},children:r},r))})]}),u.jsx("div",{style:{display:"flex",gap:"2px",marginRight:"15px"},children:Array.from({length:5}).map((r,l)=>u.jsx("span",{style:{color:l<o.rating?"#ffeb3b":"#444"},children:""},l))}),u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[u.jsx("button",{onClick:r=>{r.stopPropagation(),i?.(o)},style:{padding:"6px 12px",backgroundColor:"#4caf50",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em",fontWeight:"bold"},children:"Load"}),!o.downloaded&&u.jsx("button",{onClick:r=>{r.stopPropagation(),e.addToDownloadQueue(o.id)},style:{padding:"6px 12px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em"},title:"Download",children:""})]})]}),aC=({engine:o,projectId:e,currentUser:n,onVersionRestore:i})=>{const[r,l]=I.useState("versions"),[d]=I.useState(()=>o.getVersions(e)),[f,g]=I.useState(null),[m,y]=I.useState(""),[x,b]=I.useState(!1),[v,_]=I.useState(!1),w=f?o.getSession(f):void 0,T=()=>{o.createVersion(e,n,"Manual save")},C=async M=>{const E=d.find(k=>k.id===M);E&&i&&(await o.restoreVersion(e,M),i(E))},N=()=>{const M=o.createSession(e,n);g(M),l("collaboration")},A=()=>{!f||!m.trim()||(o.addComment(f,{author:n,text:m}),y(""))},D=M=>new Date(M).toLocaleString();return u.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#1a1a1a",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",overflow:"hidden"},children:[u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("h3",{style:{margin:"0 0 15px 0",color:"#fff"},children:"Collaboration"}),u.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"15px"},children:["versions","collaboration","comments","sharing"].map(M=>u.jsx("button",{onClick:()=>l(M),style:{padding:"8px 16px",backgroundColor:r===M?"#6366f1":"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em",fontWeight:r===M?"bold":"normal",textTransform:"capitalize"},children:M},M))}),u.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#aaa",fontSize:"0.85em"},children:[u.jsx("input",{type:"checkbox",checked:x,onChange:M=>{b(M.target.checked),o.enableCloudStorage(M.target.checked)}}),"Cloud Storage"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#aaa",fontSize:"0.85em"},children:[u.jsx("input",{type:"checkbox",checked:v,onChange:M=>{_(M.target.checked),o.enableCloudSync(M.target.checked)}}),"Cloud Sync"]}),u.jsx("button",{onClick:()=>o.syncProject(e),disabled:!v,style:{padding:"6px 12px",backgroundColor:v?"#4caf50":"#666",border:"none",borderRadius:"4px",color:"#fff",cursor:v?"pointer":"not-allowed",fontSize:"0.85em"},children:"Sync Now"})]})]}),u.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"15px"},children:[r==="versions"&&u.jsx(rC,{versions:d,onCreateVersion:T,onRestoreVersion:C,formatDate:D}),r==="collaboration"&&u.jsx(oC,{engine:o,sessionId:f,session:w,currentUser:n,onStartCollaboration:N,onInvite:(M,E)=>{f&&o.inviteCollaborator(f,M,E)}}),r==="comments"&&u.jsx(lC,{engine:o,sessionId:f,session:w,currentUser:n,newComment:m,onCommentChange:y,onAddComment:A,onResolveComment:M=>{f&&o.resolveComment(f,M)},formatDate:D}),r==="sharing"&&u.jsx(cC,{engine:o,projectId:e,onShareStem:async M=>await o.shareStem(M),onExportStems:async()=>await o.exportStems(e,"wav"),onExportMultitracks:async()=>await o.exportMultitracks(e),onExportPreview:async()=>await o.exportPreviewMix(e)})]})]})},rC=({versions:o,onCreateVersion:e,onRestoreVersion:n,formatDate:i})=>u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[u.jsx("h4",{style:{margin:0,color:"#fff"},children:"Version History"}),u.jsx("button",{onClick:e,style:{padding:"8px 16px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em",fontWeight:"bold"},children:"+ Create Version"})]}),o.length===0?u.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#888"},children:"No versions saved yet. Create a version to track changes."}):u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:o.map(r=>u.jsx("div",{style:{padding:"15px",backgroundColor:"#2a2a2a",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"8px"},children:[u.jsxs("div",{children:[u.jsxs("div",{style:{color:"#fff",fontWeight:"bold",marginBottom:"4px"},children:["Version ",r.version]}),u.jsxs("div",{style:{fontSize:"0.85em",color:"#aaa"},children:[i(r.timestamp),"  ",r.author]}),r.description&&u.jsx("div",{style:{fontSize:"0.85em",color:"#888",marginTop:"4px"},children:r.description})]}),u.jsx("button",{onClick:()=>n(r.id),style:{padding:"6px 12px",backgroundColor:"#4caf50",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em"},children:"Restore"})]})},r.id))})]}),oC=({sessionId:o,session:e,currentUser:n,onStartCollaboration:i,onInvite:r})=>{const[l,d]=I.useState(""),[f,g]=I.useState("write");return!o||!e?u.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[u.jsx("div",{style:{color:"#888",marginBottom:"20px"},children:"No active collaboration session"}),u.jsx("button",{onClick:i,style:{padding:"12px 24px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"1em",fontWeight:"bold"},children:"Start Collaboration Session"})]}):u.jsxs("div",{children:[u.jsx("h4",{style:{margin:"0 0 15px 0",color:"#fff"},children:"Active Session"}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.9em",marginBottom:"10px"},children:"Participants:"}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:e.participants.map(m=>u.jsx("div",{style:{padding:"10px",backgroundColor:"#2a2a2a",borderRadius:"4px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:u.jsxs("div",{children:[u.jsx("span",{style:{color:"#fff",fontWeight:"bold"},children:m}),m===e.owner&&u.jsx("span",{style:{marginLeft:"8px",color:"#ffeb3b",fontSize:"0.85em"},children:"(Owner)"}),u.jsx("span",{style:{marginLeft:"8px",color:"#888",fontSize:"0.85em"},children:e.permissions.get(m)||"read"})]})},m))})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#2a2a2a",borderRadius:"4px"},children:[u.jsx("div",{style:{color:"#fff",fontWeight:"bold",marginBottom:"10px"},children:"Invite Collaborator"}),u.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"10px"},children:[u.jsx("input",{type:"text",value:l,onChange:m=>d(m.target.value),placeholder:"User ID or email",style:{flex:1,padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",fontSize:"0.9em"}}),u.jsxs("select",{value:f,onChange:m=>g(m.target.value),style:{padding:"8px",backgroundColor:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",fontSize:"0.9em"},children:[u.jsx("option",{value:"read",children:"Read"}),u.jsx("option",{value:"write",children:"Write"}),u.jsx("option",{value:"admin",children:"Admin"})]}),u.jsx("button",{onClick:()=>{l.trim()&&(r(l,f),d(""))},style:{padding:"8px 16px",backgroundColor:"#4caf50",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.9em",fontWeight:"bold"},children:"Invite"})]})]}),u.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#2a2a2a",borderRadius:"4px"},children:[u.jsxs("div",{style:{color:"#aaa",fontSize:"0.85em"},children:["Session ID: ",u.jsx("span",{style:{color:"#fff",fontFamily:"monospace"},children:o})]}),u.jsxs("div",{style:{color:"#aaa",fontSize:"0.85em",marginTop:"4px"},children:["Status: ",u.jsx("span",{style:{color:e.isActive?"#4caf50":"#f44336"},children:e.isActive?"Active":"Inactive"})]})]})]})},lC=({sessionId:o,session:e,currentUser:n,newComment:i,onCommentChange:r,onAddComment:l,onResolveComment:d,formatDate:f})=>{if(!o||!e)return u.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#888"},children:"Start a collaboration session to add comments"});const g=e.comments||[],m=g.filter(x=>!x.resolved),y=g.filter(x=>x.resolved);return u.jsxs("div",{children:[u.jsx("h4",{style:{margin:"0 0 15px 0",color:"#fff"},children:"Comments & Annotations"}),u.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#2a2a2a",borderRadius:"4px"},children:[u.jsx("textarea",{value:i,onChange:x=>r(x.target.value),placeholder:"Add a comment or annotation...",style:{width:"100%",minHeight:"80px",padding:"10px",backgroundColor:"#1a1a1a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",fontSize:"0.9em",resize:"vertical",marginBottom:"10px"}}),u.jsx("button",{onClick:l,disabled:!i.trim(),style:{padding:"8px 16px",backgroundColor:i.trim()?"#6366f1":"#666",border:"none",borderRadius:"4px",color:"#fff",cursor:i.trim()?"pointer":"not-allowed",fontSize:"0.9em",fontWeight:"bold"},children:"Add Comment"})]}),m.length>0&&u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsxs("div",{style:{color:"#fff",fontWeight:"bold",marginBottom:"10px"},children:["Active Comments (",m.length,")"]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:m.map(x=>u.jsx(x0,{comment:x,currentUser:n,onResolve:()=>d(x.id),formatDate:f},x.id))})]}),y.length>0&&u.jsxs("div",{children:[u.jsxs("div",{style:{color:"#888",fontSize:"0.9em",marginBottom:"10px"},children:["Resolved Comments (",y.length,")"]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:y.map(x=>u.jsx(x0,{comment:x,currentUser:n,onResolve:()=>d(x.id),formatDate:f},x.id))})]}),g.length===0&&u.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#888"},children:"No comments yet. Add a comment to start the conversation."})]})},x0=({comment:o,currentUser:e,onResolve:n,formatDate:i})=>u.jsxs("div",{style:{padding:"12px",backgroundColor:o.resolved?"#1a1a1a":"#2a2a2a",borderRadius:"4px",border:`1px solid ${o.resolved?"rgba(255, 255, 255, 0.05)":"rgba(255, 255, 255, 0.1)"}`,opacity:o.resolved?.6:1},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"8px"},children:[u.jsxs("div",{children:[u.jsx("span",{style:{color:"#fff",fontWeight:"bold"},children:o.author}),o.author===e&&u.jsx("span",{style:{marginLeft:"8px",color:"#6366f1",fontSize:"0.85em"},children:"(You)"}),u.jsx("span",{style:{marginLeft:"8px",color:"#888",fontSize:"0.85em"},children:i(o.timestamp)}),o.position&&u.jsxs("span",{style:{marginLeft:"8px",color:"#888",fontSize:"0.85em"},children:["@ ",o.position.time.toFixed(2),"s"]})]}),!o.resolved&&u.jsx("button",{onClick:n,style:{padding:"4px 8px",backgroundColor:"#4caf50",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.75em"},children:"Resolve"}),o.resolved&&u.jsx("span",{style:{color:"#4caf50",fontSize:"0.85em"},children:" Resolved"})]}),u.jsx("div",{style:{color:"#ccc",fontSize:"0.9em",lineHeight:"1.5"},children:o.text})]}),cC=({engine:o,projectId:e,onShareStem:n,onExportStems:i,onExportMultitracks:r,onExportPreview:l})=>{const[d,f]=I.useState(!1),[g,m]=I.useState(""),y=async(x,b)=>{f(!0),m(`Exporting ${b}...`);try{await x(),m(`${b} exported successfully!`),setTimeout(()=>m(""),3e3)}catch{m(`Error exporting ${b}`)}finally{f(!1)}};return u.jsxs("div",{children:[u.jsx("h4",{style:{margin:"0 0 15px 0",color:"#fff"},children:"Export & Sharing"}),g&&u.jsx("div",{style:{padding:"10px",backgroundColor:g.includes("Error")?"#f4433620":"#4caf5020",border:`1px solid ${g.includes("Error")?"#f44336":"#4caf50"}`,borderRadius:"4px",marginBottom:"15px",color:g.includes("Error")?"#f44336":"#4caf50",fontSize:"0.9em"},children:g}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[u.jsxs("div",{style:{padding:"15px",backgroundColor:"#2a2a2a",borderRadius:"4px"},children:[u.jsx("div",{style:{color:"#fff",fontWeight:"bold",marginBottom:"8px"},children:"Stem Export"}),u.jsx("div",{style:{fontSize:"0.85em",color:"#aaa",marginBottom:"10px"},children:"Export individual tracks as separate audio files"}),u.jsx("button",{onClick:()=>y(i,"stems"),disabled:d,style:{padding:"8px 16px",backgroundColor:d?"#666":"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:d?"not-allowed":"pointer",fontSize:"0.9em",fontWeight:"bold"},children:d?"Exporting...":"Export Stems"})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#2a2a2a",borderRadius:"4px"},children:[u.jsx("div",{style:{color:"#fff",fontWeight:"bold",marginBottom:"8px"},children:"Multitrack Export"}),u.jsx("div",{style:{fontSize:"0.85em",color:"#aaa",marginBottom:"10px"},children:"Export all tracks in a single archive"}),u.jsx("button",{onClick:()=>y(r,"multitracks"),disabled:d,style:{padding:"8px 16px",backgroundColor:d?"#666":"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:d?"not-allowed":"pointer",fontSize:"0.9em",fontWeight:"bold"},children:d?"Exporting...":"Export Multitracks"})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#2a2a2a",borderRadius:"4px"},children:[u.jsx("div",{style:{color:"#fff",fontWeight:"bold",marginBottom:"8px"},children:"Preview Mix"}),u.jsx("div",{style:{fontSize:"0.85em",color:"#aaa",marginBottom:"10px"},children:"Export a rough mix for review"}),u.jsx("button",{onClick:()=>y(l,"preview mix"),disabled:d,style:{padding:"8px 16px",backgroundColor:d?"#666":"#4caf50",border:"none",borderRadius:"4px",color:"#fff",cursor:d?"not-allowed":"pointer",fontSize:"0.9em",fontWeight:"bold"},children:d?"Exporting...":"Export Preview"})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#2a2a2a",borderRadius:"4px"},children:[u.jsx("div",{style:{color:"#fff",fontWeight:"bold",marginBottom:"10px"},children:"Additional Exports"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"8px"},children:[u.jsx("button",{onClick:()=>y(()=>o.exportSessionArchive(e),"session archive"),disabled:d,style:{padding:"8px 12px",backgroundColor:d?"#666":"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:d?"not-allowed":"pointer",fontSize:"0.85em"},children:"Session Archive"}),u.jsx("button",{onClick:()=>y(()=>o.exportNotes(e),"notes"),disabled:d,style:{padding:"8px 12px",backgroundColor:d?"#666":"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:d?"not-allowed":"pointer",fontSize:"0.85em"},children:"Notes"}),u.jsx("button",{onClick:()=>y(()=>o.exportTrackSheet(e),"track sheet"),disabled:d,style:{padding:"8px 12px",backgroundColor:d?"#666":"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:d?"not-allowed":"pointer",fontSize:"0.85em"},children:"Track Sheet"}),u.jsx("button",{onClick:()=>y(()=>o.exportSessionInfo(e),"session info"),disabled:d,style:{padding:"8px 12px",backgroundColor:d?"#666":"#333",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:d?"not-allowed":"pointer",fontSize:"0.85em"},children:"Session Info"})]})]})]})]})},uC=({engine:o,tracks:e,onTracksChange:n})=>{const[i,r]=I.useState(new Set),[l,d]=I.useState({channels:2,sampleRate:44100,bitDepth:24,format:"wav"}),[f,g]=I.useState("off"),[m,y]=I.useState(0),[x,b]=I.useState(16),[v,_]=I.useState(!1),[w,T]=I.useState(0),[C,N]=I.useState(0),A=I.useRef(null),D=I.useRef(null),M=I.useRef(null);I.useEffect(()=>((async()=>{try{const q=await navigator.mediaDevices.getUserMedia({audio:!0});M.current=q;const P=new(window.AudioContext||window.webkitAudioContext);A.current=P;const te=P.createAnalyser();te.fftSize=2048,P.createMediaStreamSource(q).connect(te),D.current=te}catch(q){console.error("Failed to initialize audio:",q)}})(),()=>{M.current&&M.current.getTracks().forEach(q=>q.stop())}),[]),I.useEffect(()=>{if(!v)return;const L=setInterval(()=>{N(q=>q+.1)},100);return()=>clearInterval(L)},[v]);const E=L=>{const q=new Set(i);q.has(L)?q.delete(L):q.add(L),r(q)},k=async()=>{if(i.size===0){alert("Please select at least one track to record");return}try{await o.initialize();for(const L of i){const q=e.find(P=>P.id===L);!q||q.recordSafe||!q.armed||(f==="manual"?await o.punchIn(L,m):f==="auto"?(o.setAutoPunch(m,x),await o.startRecording(L,l)):await o.startRecording(L,l))}_(!0),T(C)}catch(L){console.error("Failed to start recording:",L),alert(`Recording failed: ${L instanceof Error?L.message:"Unknown error"}`)}},R=()=>{f==="manual"?o.punchOut(x):o.stopRecording(),_(!1),n(o.getTracks())},O=L=>{const q=Math.floor(L/60),P=Math.floor(L%60),te=Math.floor(L%1*100);return`${q.toString().padStart(2,"0")}:${P.toString().padStart(2,"0")}.${te.toString().padStart(2,"0")}`};return u.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%",backgroundColor:"#1a1a1a",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",overflow:"hidden"},children:[u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("h3",{style:{margin:"0 0 15px 0",color:"#fff"},children:"Recording Studio"}),u.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"15px",flexWrap:"wrap"},children:[u.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em",display:"block",marginBottom:"5px"},children:"Recording Mode"}),u.jsxs("select",{value:f,onChange:L=>g(L.target.value),style:{width:"100%",padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",fontSize:"0.9em"},children:[u.jsx("option",{value:"off",children:"Normal Recording"}),u.jsx("option",{value:"manual",children:"Manual Punch-In/Out (Feature 4-5)"}),u.jsx("option",{value:"auto",children:"Auto Punch-In/Out (Feature 6)"})]})]}),u.jsxs("div",{style:{flex:1,minWidth:"200px"},children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em",display:"block",marginBottom:"5px"},children:"Channels (Feature 1-3)"}),u.jsxs("select",{value:l.channels,onChange:L=>d({...l,channels:Number(L.target.value)}),style:{width:"100%",padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",fontSize:"0.9em"},children:[u.jsx("option",{value:"1",children:"1. Mono Recording"}),u.jsx("option",{value:"2",children:"2. Stereo Recording"}),u.jsx("option",{value:"4",children:"3. Multi-track (4 channels)"}),u.jsx("option",{value:"8",children:"3. Multi-track (8 channels)"}),u.jsx("option",{value:"16",children:"3. Multi-track (16 channels)"})]})]})]}),f!=="off"&&u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"15px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em",display:"block",marginBottom:"5px"},children:"Punch-In Time (seconds)"}),u.jsx("input",{type:"number",value:m,onChange:L=>y(parseFloat(L.target.value)),step:"0.1",min:"0",style:{width:"100%",padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",fontSize:"0.9em"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em",display:"block",marginBottom:"5px"},children:"Punch-Out Time (seconds)"}),u.jsx("input",{type:"number",value:x,onChange:L=>b(parseFloat(L.target.value)),step:"0.1",min:"0",style:{width:"100%",padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",fontSize:"0.9em"}})]})]}),u.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[u.jsx("button",{onClick:v?R:k,style:{padding:"12px 24px",backgroundColor:v?"#f44336":"#4caf50",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"1em",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"},children:v?u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""})," Stop Recording"]}):u.jsxs(u.Fragment,{children:[u.jsx("span",{children:""})," Start Recording"]})}),v&&u.jsxs("div",{style:{padding:"8px 16px",backgroundColor:"#f4433620",border:"1px solid #f44336",borderRadius:"4px",color:"#f44336",fontSize:"0.9em",fontWeight:"bold",display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("span",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"#f44336",animation:"pulse 1s infinite"}}),"Recording: ",O(C-w)]})]})]}),D.current&&u.jsx("div",{style:{padding:"15px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:u.jsx(Oy,{audioSource:D.current,width:800,height:150,color:"#f44336",syncToPlayback:v,isPlaying:v})}),u.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"15px"},children:[u.jsxs("div",{style:{color:"#fff",fontWeight:"bold",marginBottom:"15px"},children:["Select Tracks to Record (",i.size," selected)"]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:e.map(L=>{const q=i.has(L.id),P=L.armed&&!L.recordSafe;return u.jsxs("div",{onClick:()=>E(L.id),style:{padding:"15px",backgroundColor:q?"#6366f120":"#2a2a2a",border:`2px solid ${q?"#6366f1":"rgba(255, 255, 255, 0.1)"}`,borderRadius:"4px",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"15px"},children:[u.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"4px",border:"2px solid #6366f1",backgroundColor:q?"#6366f1":"transparent",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"0.9em",fontWeight:"bold"},children:q&&""}),u.jsxs("div",{style:{flex:1},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"8px"},children:[u.jsx("span",{style:{color:"#fff",fontWeight:"bold",fontSize:"1em"},children:L.name}),L.armed&&u.jsx("span",{style:{padding:"2px 8px",backgroundColor:"#4caf50",borderRadius:"4px",fontSize:"0.75em",color:"#fff",fontWeight:"bold"},children:" ARMED"}),L.recordSafe&&u.jsx("span",{style:{padding:"2px 8px",backgroundColor:"#f44336",borderRadius:"4px",fontSize:"0.75em",color:"#fff",fontWeight:"bold"},children:" SAFE"}),!P&&u.jsx("span",{style:{color:"#f44336",fontSize:"0.85em"},children:L.recordSafe?"Record Safe":"Not Armed"})]}),u.jsxs("div",{style:{fontSize:"0.85em",color:"#aaa"},children:[l.channels===1&&"Mono (1 channel)",l.channels===2&&"Stereo (2 channels)",l.channels>2&&`Multi-track (${l.channels} channels)`,"  ",l.sampleRate/1e3,"kHz  ",l.bitDepth,"-bit"]})]}),u.jsx(Ch,{level:.3+Math.random()*.4,label:L.id}),v&&q&&u.jsxs("div",{style:{padding:"6px 12px",backgroundColor:"#f44336",borderRadius:"4px",color:"#fff",fontSize:"0.85em",fontWeight:"bold",display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#fff",animation:"pulse 1s infinite"}}),"REC"]})]},L.id)})}),e.length===0&&u.jsx("div",{style:{textAlign:"center",padding:"40px",color:"#888"},children:"No tracks available. Add tracks to start recording."})]}),u.jsxs("div",{style:{padding:"10px 15px",backgroundColor:"#0f0f0f",borderTop:"1px solid rgba(255, 255, 255, 0.1)",fontSize:"0.85em",color:"#aaa",display:"flex",justifyContent:"space-between"},children:[u.jsxs("div",{children:["Mode: ",f==="off"?"Normal":f==="manual"?"Manual Punch":"Auto Punch"]}),u.jsxs("div",{children:["Channels: ",l.channels," (",l.channels===1?"Mono":l.channels===2?"Stereo":"Multi-track",")"]}),u.jsxs("div",{children:["Selected: ",i.size," track",i.size!==1?"s":""]})]}),u.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
      `})]})};class dC{state;transport;updateInterval=null;tempoMap=new Map;constructor(e){this.state={isPlaying:!1,isRecording:!1,isPaused:!1,position:this.createTimePosition(0),loopStart:null,loopEnd:null,cycleEnabled:!1,shuttleSpeed:0,scrubEnabled:!1,scrubPosition:null,variableSpeed:1,halfSpeed:!1,doubleSpeed:!1,reverse:!1,frameByFrame:!1,frameAdvance:0,syncSource:"internal",syncEnabled:!1,primaryTimeFormat:"bars-beats",secondaryTimeFormat:null,displayFormat:"bars-beats",sampleRate:44100,ticksPerQuarter:960,tempo:120,timeSignature:[4,4],tempoTrack:[],tempoMapEnabled:!0,tempoRampEnabled:!1,timeSignatureTrack:[],globalTempo:120,masterTempo:!0,markers:[],locators:[],selectedMarker:null,selectedLocator:null,...e},this.buildTempoMap()}async initialize(e){this.transport=e,this.startUpdateLoop()}startUpdateLoop(){this.updateInterval&&clearInterval(this.updateInterval),this.updateInterval=setInterval(()=>{if(this.transport&&this.state.isPlaying){const e=this.transport.seconds;this.state.position=this.secondsToTimePosition(e)}},10)}play(){this.transport&&(this.transport.start(),this.state.isPlaying=!0,this.state.isPaused=!1)}stop(){this.transport&&(this.transport.stop(),this.state.isPlaying=!1,this.state.isPaused=!1,this.state.position=this.createTimePosition(0))}record(){this.state.isRecording=!0,this.play()}returnToZero(){this.stop(),this.state.position=this.createTimePosition(0),this.transport&&(this.transport.cancel(),this.transport.seconds=0)}returnToStartMarker(){const e=this.state.locators.find(n=>n.type==="start");e?this.seekToPosition(e.position):this.returnToZero()}playFromCursor(e){e&&this.seekToPosition(e),this.play()}playFromSelection(e,n){this.seekToPosition(e),this.setLoopPoints(e,n),this.state.cycleEnabled=!0,this.play()}toggleLoop(){if(this.state.cycleEnabled=!this.state.cycleEnabled,this.transport&&this.state.loopStart&&this.state.loopEnd)if(this.state.cycleEnabled){const e=this.timePositionToSeconds(this.state.loopStart),n=this.timePositionToSeconds(this.state.loopEnd);this.transport.loopStart=e,this.transport.loopEnd=n,this.transport.loop=!0}else this.transport.loop=!1}setShuttleSpeed(e){this.state.shuttleSpeed=Math.max(-1,Math.min(1,e)),this.transport&&(this.transport.playbackRate=1+this.state.shuttleSpeed)}enableScrub(e){this.state.scrubEnabled=e,e||(this.state.scrubPosition=null)}scrubToPosition(e){this.state.scrubPosition=e;const n=this.timePositionToSeconds(e);this.transport&&(this.transport.seconds=n)}setVariableSpeed(e){this.state.variableSpeed=Math.max(.25,Math.min(4,e)),this.transport&&(this.transport.playbackRate=this.state.variableSpeed)}setHalfSpeed(e){this.state.halfSpeed=e,e?(this.state.doubleSpeed=!1,this.setVariableSpeed(.5)):this.state.doubleSpeed||this.setVariableSpeed(1)}setDoubleSpeed(e){this.state.doubleSpeed=e,e?(this.state.halfSpeed=!1,this.setVariableSpeed(2)):this.state.halfSpeed||this.setVariableSpeed(1)}setReverse(e){this.state.reverse=e,this.transport&&(this.transport.playbackRate=e?-this.state.variableSpeed:this.state.variableSpeed)}setFrameByFrame(e){this.state.frameByFrame=e}advanceFrame(){if(this.state.frameByFrame){const i=this.timePositionToSeconds(this.state.position)+.03333333333333333;this.seekToPosition(this.secondsToTimePosition(i))}}setSyncSource(e){this.state.syncSource=e,this.state.syncEnabled=e!=="none"}setPrimaryTimeFormat(e){this.state.primaryTimeFormat=e,this.state.displayFormat=e}setTimeDisplay(e){this.state.displayFormat=e}setSamplesDisplay(){this.state.displayFormat="samples"}setFeetFramesDisplay(){this.state.displayFormat="feet-frames"}setSecondaryTimeFormat(e){this.state.secondaryTimeFormat=e}setCustomTimeFormat(e){this.state.displayFormat="custom"}getTimeFormatString(e,n){switch(n){case"bars-beats":return`${e.bars}:${e.beats}:${e.ticks}`;case"time":return this.formatTimeCode(e);case"samples":return e.samples.toString();case"feet-frames":return this.formatFeetFrames(e);case"seconds":return e.totalSeconds.toFixed(3)+"s";case"minutes-seconds":return`${Math.floor(e.totalSeconds/60)}:${(e.totalSeconds%60).toFixed(2)}`;default:return this.formatTimeCode(e)}}setTempo(e){this.state.tempo=e,this.state.globalTempo=e,this.transport&&(this.transport.bpm.value=e)}setTempoTrack(e){this.state.tempoTrack=e,this.buildTempoMap()}buildTempoMap(){this.tempoMap.clear(),this.state.tempoTrack.forEach(e=>{const n=this.timePositionToSeconds(e.time);this.tempoMap.set(n,e)})}setTimeSignatureTrack(e){this.state.timeSignatureTrack=e}setTempoRamp(e){this.state.tempoRampEnabled=e}setMasterTempo(e){this.state.masterTempo=e}tapTempo(){}nudgeTempo(e){this.setTempo(this.state.tempo+e)}setTimeSignature(e,n){this.state.timeSignature=[e,n]}getTempoAtPosition(e){if(!this.state.tempoMapEnabled)return this.state.globalTempo;const n=this.timePositionToSeconds(e);let i=this.state.globalTempo;for(const[r,l]of this.tempoMap.entries())if(r<=n)i=l.tempo;else break;return i}createMarker(e,n,i){const r={id:`marker-${Date.now()}-${Math.random()}`,name:e,position:n,color:i||"#ff6b6b",locked:!1};return this.state.markers.push(r),this.sortMarkers(),r}deleteMarker(e){this.state.markers=this.state.markers.filter(n=>n.id!==e),this.state.selectedMarker===e&&(this.state.selectedMarker=null)}goToMarker(e){const n=this.state.markers.find(i=>i.id===e);n&&(this.seekToPosition(n.position),this.state.selectedMarker=e)}previousMarker(){const e=this.timePositionToSeconds(this.state.position),n=this.state.markers.filter(i=>this.timePositionToSeconds(i.position)<e).sort((i,r)=>this.timePositionToSeconds(r.position)-this.timePositionToSeconds(i.position))[0];n&&this.goToMarker(n.id)}nextMarker(){const e=this.timePositionToSeconds(this.state.position),n=this.state.markers.filter(i=>this.timePositionToSeconds(i.position)>e).sort((i,r)=>this.timePositionToSeconds(i.position)-this.timePositionToSeconds(r.position))[0];n&&this.goToMarker(n.id)}createLocator(e,n,i){const r={id:`locator-${Date.now()}-${Math.random()}`,name:e,position:n,type:i};return this.state.locators.push(r),r}deleteLocator(e){this.state.locators=this.state.locators.filter(n=>n.id!==e),this.state.selectedLocator===e&&(this.state.selectedLocator=null)}goToLocator(e){const n=this.state.locators.find(i=>i.id===e);n&&(this.seekToPosition(n.position),this.state.selectedLocator=e)}setLoopPoints(e,n){this.state.loopStart=e,this.state.loopEnd=n;const i=this.state.locators.find(l=>l.type==="loop-start"),r=this.state.locators.find(l=>l.type==="loop-end");i?i.position=e:this.createLocator("Loop Start",e,"loop-start"),r?r.position=n:this.createLocator("Loop End",n,"loop-end")}createTimePosition(e){const i=this.getTempoAtPosition(this.state.position)/60,r=e*i,l=Math.floor(r/this.state.timeSignature[0]),d=Math.floor(r%this.state.timeSignature[0]),f=Math.floor(r%1*this.state.ticksPerQuarter);return{bars:l,beats:d,ticks:f,samples:Math.floor(e*this.state.sampleRate),seconds:e%60,minutes:Math.floor(e/60),totalSeconds:e}}secondsToTimePosition(e){return this.createTimePosition(e)}timePositionToSeconds(e){return e.totalSeconds}seekToPosition(e){this.state.position=e;const n=this.timePositionToSeconds(e);this.transport&&(this.transport.seconds=n)}formatTimeCode(e){const n=Math.floor(e.totalSeconds/3600),i=Math.floor(e.totalSeconds%3600/60),r=Math.floor(e.totalSeconds%60),l=Math.floor(e.totalSeconds%1*30);return`${n.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`}formatFeetFrames(e){const n=Math.floor(e.totalSeconds*30),i=Math.floor(n/16),r=n%16;return`${i}+${r}`}sortMarkers(){this.state.markers.sort((e,n)=>this.timePositionToSeconds(e.position)-this.timePositionToSeconds(n.position))}getState(){return{...this.state}}getPosition(){return{...this.state.position}}getMarkers(){return[...this.state.markers]}getLocators(){return[...this.state.locators]}getTempo(){return this.state.tempo}getTimeSignature(){return[...this.state.timeSignature]}}const hC=({engine:o,onStateChange:e})=>{const[n,i]=I.useState(o.getState()),[r,l]=I.useState(0),[d,f]=I.useState(1);I.useEffect(()=>{const m=setInterval(()=>{i(o.getState()),e?.()},100);return()=>clearInterval(m)},[o,e]);const g=m=>o.getTimeFormatString(m,n.displayFormat);return u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",padding:"20px",backgroundColor:"#1a1a1a",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("h3",{style:{color:"#fff",margin:"0 0 15px 0"},children:"Transport Controls (Features 58-73)"}),u.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"},children:[u.jsx("button",{onClick:()=>o.play(),disabled:n.isPlaying,style:{padding:"12px 20px",backgroundColor:n.isPlaying?"#4caf50":"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:n.isPlaying?"not-allowed":"pointer",fontSize:"1em",fontWeight:"bold"},children:" Play"}),u.jsx("button",{onClick:()=>o.stop(),style:{padding:"12px 20px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"1em",fontWeight:"bold"},children:" Stop"}),u.jsx("button",{onClick:()=>o.record(),style:{padding:"12px 20px",backgroundColor:n.isRecording?"#f44336":"#2a2a2a",border:`1px solid ${n.isRecording?"#f44336":"rgba(255, 255, 255, 0.2)"}`,borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"1em",fontWeight:"bold"},children:" Record"}),u.jsx("button",{onClick:()=>o.returnToZero(),style:{padding:"12px 20px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.9em"},children:" RZ"}),u.jsx("button",{onClick:()=>o.returnToStartMarker(),style:{padding:"12px 20px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.9em"},children:" Start"})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"5px"},children:"Position"}),u.jsx("div",{style:{color:"#fff",fontSize:"1.5em",fontFamily:"monospace",fontWeight:"bold"},children:g(n.position)}),n.secondaryTimeFormat&&u.jsx("div",{style:{color:"#888",fontSize:"0.9em",marginTop:"5px"},children:o.getTimeFormatString(n.position,n.secondaryTimeFormat)})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em",display:"block",marginBottom:"5px"},children:"Shuttle Speed (Feature 66)"}),u.jsx("input",{type:"range",min:"-1",max:"1",step:"0.1",value:r,onChange:m=>{const y=parseFloat(m.target.value);l(y),o.setShuttleSpeed(y)},style:{width:"100%"}}),u.jsxs("div",{style:{color:"#888",fontSize:"0.8em",textAlign:"center",marginTop:"5px"},children:[r.toFixed(1),"x"]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em",display:"block",marginBottom:"5px"},children:"Variable Speed (Feature 68)"}),u.jsx("input",{type:"range",min:"0.25",max:"4",step:"0.05",value:d,onChange:m=>{const y=parseFloat(m.target.value);f(y),o.setVariableSpeed(y)},style:{width:"100%"}}),u.jsxs("div",{style:{color:"#888",fontSize:"0.8em",textAlign:"center",marginTop:"5px"},children:[d.toFixed(2),"x"]})]})]}),u.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[u.jsx("button",{onClick:()=>{o.setHalfSpeed(!n.halfSpeed),n.halfSpeed||f(.5)},style:{padding:"8px 16px",backgroundColor:n.halfSpeed?"#6366f1":"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.9em"},children:" Speed"}),u.jsx("button",{onClick:()=>{o.setDoubleSpeed(!n.doubleSpeed),n.doubleSpeed||f(2)},style:{padding:"8px 16px",backgroundColor:n.doubleSpeed?"#6366f1":"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.9em"},children:"2x Speed"}),u.jsx("button",{onClick:()=>o.setReverse(!n.reverse),style:{padding:"8px 16px",backgroundColor:n.reverse?"#6366f1":"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.9em"},children:" Reverse"}),u.jsx("button",{onClick:()=>o.setFrameByFrame(!n.frameByFrame),style:{padding:"8px 16px",backgroundColor:n.frameByFrame?"#6366f1":"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.9em"},children:"Frame-by-Frame"}),n.frameByFrame&&u.jsx("button",{onClick:()=>o.advanceFrame(),style:{padding:"8px 16px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.9em"},children:"Advance Frame"})]}),u.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[u.jsx("button",{onClick:()=>o.toggleLoop(),style:{padding:"8px 16px",backgroundColor:n.cycleEnabled?"#6366f1":"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.9em"},children:" Loop"}),n.cycleEnabled&&n.loopStart&&n.loopEnd&&u.jsxs("div",{style:{color:"#aaa",fontSize:"0.85em"},children:["Loop: ",g(n.loopStart)," - ",g(n.loopEnd)]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em",display:"block",marginBottom:"5px"},children:"Scrub (Feature 67)"}),u.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[u.jsx("button",{onClick:()=>o.enableScrub(!n.scrubEnabled),style:{padding:"8px 16px",backgroundColor:n.scrubEnabled?"#6366f1":"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.9em"},children:n.scrubEnabled?"Disable Scrub":"Enable Scrub"}),n.scrubEnabled&&u.jsx("div",{style:{color:"#888",fontSize:"0.85em"},children:"Drag timeline to scrub"})]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em",display:"block",marginBottom:"5px"},children:"Sync Source (Feature 73)"}),u.jsxs("select",{value:n.syncSource,onChange:m=>o.setSyncSource(m.target.value),style:{width:"100%",padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",fontSize:"0.9em"},children:[u.jsx("option",{value:"internal",children:"Internal"}),u.jsx("option",{value:"midi-clock",children:"MIDI Clock"}),u.jsx("option",{value:"word-clock",children:"Word Clock"}),u.jsx("option",{value:"ltc",children:"LTC (Linear Time Code)"}),u.jsx("option",{value:"video",children:"Video"}),u.jsx("option",{value:"none",children:"None"})]}),n.syncEnabled&&u.jsx("div",{style:{color:"#4caf50",fontSize:"0.85em",marginTop:"5px"},children:" Sync Active"})]}),u.jsxs("div",{style:{display:"flex",gap:"10px",padding:"10px",backgroundColor:"#0f0f0f",borderRadius:"4px",fontSize:"0.85em"},children:[u.jsx("div",{style:{color:n.isPlaying?"#4caf50":"#888"},children:n.isPlaying?" Playing":" Stopped"}),u.jsx("div",{style:{color:n.isRecording?"#f44336":"#888"},children:n.isRecording?" Recording":" Not Recording"}),u.jsx("div",{style:{color:n.cycleEnabled?"#6366f1":"#888"},children:n.cycleEnabled?" Looping":" No Loop"})]})]})},fC=({engine:o,onFormatChange:e})=>{const[n,i]=I.useState(o.getState());I.useEffect(()=>{const l=setInterval(()=>{i(o.getState())},100);return()=>clearInterval(l)},[o]);const r=[{value:"bars-beats",label:"Bars:Beats",description:"Feature 74: Bars:Beats display"},{value:"time",label:"Time Code",description:"Feature 75: Time display (HH:MM:SS:FF)"},{value:"samples",label:"Samples",description:"Feature 76: Samples display"},{value:"feet-frames",label:"Feet+Frames",description:"Feature 77: Feet+Frames display"},{value:"seconds",label:"Seconds",description:"Feature 78: Seconds display"},{value:"minutes-seconds",label:"Min:Sec",description:"Feature 79: Minutes:Seconds"},{value:"custom",label:"Custom",description:"Feature 80: Custom time format"}];return u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",padding:"20px",backgroundColor:"#1a1a1a",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("h3",{style:{color:"#fff",margin:"0 0 15px 0"},children:"Time Formats (Features 74-80)"}),u.jsxs("div",{children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em",display:"block",marginBottom:"5px"},children:"Primary Time Format (Feature 74)"}),u.jsx("select",{value:n.primaryTimeFormat,onChange:l=>{o.setPrimaryTimeFormat(l.target.value),e?.()},style:{width:"100%",padding:"10px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",fontSize:"1em"},children:r.map(l=>u.jsxs("option",{value:l.value,children:[l.label," - ",l.description]},l.value))})]}),u.jsxs("div",{children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em",display:"block",marginBottom:"5px"},children:"Secondary Time Format (Feature 78)"}),u.jsxs("select",{value:n.secondaryTimeFormat||"none",onChange:l=>{const d=l.target.value==="none"?null:l.target.value;o.setSecondaryTimeFormat(d),e?.()},style:{width:"100%",padding:"10px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",fontSize:"1em"},children:[u.jsx("option",{value:"none",children:"None"}),r.map(l=>u.jsx("option",{value:l.value,children:l.label},l.value))]})]}),u.jsxs("div",{style:{padding:"20px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)",textAlign:"center"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px"},children:"Current Position Display"}),u.jsx("div",{style:{color:"#fff",fontSize:"2em",fontFamily:"monospace",fontWeight:"bold",marginBottom:"10px"},children:o.getTimeFormatString(n.position,n.displayFormat)}),n.secondaryTimeFormat&&u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{color:"#666",fontSize:"0.85em",marginBottom:"5px"},children:"Secondary:"}),u.jsx("div",{style:{color:"#888",fontSize:"1.2em",fontFamily:"monospace"},children:o.getTimeFormatString(n.position,n.secondaryTimeFormat)})]})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",fontSize:"0.85em"},children:[u.jsx("div",{style:{color:"#aaa",marginBottom:"10px",fontWeight:"bold"},children:"Available Formats:"}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:r.map(l=>u.jsxs("div",{style:{padding:"8px",backgroundColor:n.displayFormat===l.value?"#6366f120":"transparent",borderRadius:"4px",border:n.displayFormat===l.value?"1px solid #6366f1":"none"},children:[u.jsx("div",{style:{color:"#fff",fontWeight:"bold"},children:l.label}),u.jsx("div",{style:{color:"#888",fontSize:"0.9em"},children:l.description})]},l.value))})]}),n.displayFormat==="custom"&&u.jsxs("div",{children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em",display:"block",marginBottom:"5px"},children:"Custom Format String (Feature 80)"}),u.jsx("input",{type:"text",placeholder:"e.g., %B:%b:%t",style:{width:"100%",padding:"10px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",fontSize:"1em"},onBlur:l=>{l.target.value&&(o.setCustomTimeFormat(l.target.value),e?.())}}),u.jsx("div",{style:{color:"#888",fontSize:"0.8em",marginTop:"5px"},children:"Format codes: %B=bars, %b=beats, %t=ticks, %s=seconds, %S=samples"})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"10px",backgroundColor:"#0f0f0f",borderRadius:"4px",fontSize:"0.85em",color:"#888"},children:[u.jsxs("div",{children:["Sample Rate: ",n.sampleRate/1e3,"kHz"]}),u.jsxs("div",{children:["Ticks/Quarter: ",n.ticksPerQuarter]})]})]})},pC=({engine:o,onTempoChange:e})=>{const[n,i]=I.useState(o.getState()),[r,l]=I.useState(n.tempo.toString()),[d,f]=I.useState(n.timeSignature[0]),[g,m]=I.useState(n.timeSignature[1]),[y,x]=I.useState([]),[b,v]=I.useState(.1);I.useEffect(()=>{const A=setInterval(()=>{i(o.getState())},100);return()=>clearInterval(A)},[o]);const _=A=>{o.setTempo(A),l(A.toString()),e?.()},w=(A,D)=>{o.setTimeSignature(A,D),f(A),m(D),e?.()},T=()=>{const A=Date.now(),D=[...y,A].filter(M=>A-M<2e3);if(x(D),D.length>=2){const M=[];for(let R=1;R<D.length;R++)M.push(D[R]-D[R-1]);const E=M.reduce((R,O)=>R+O,0)/M.length,k=Math.round(6e4/E);k>=30&&k<=300&&_(k)}},C=A=>{const D=A==="up"?b:-b,M=Math.max(30,Math.min(300,n.tempo+D));_(M)},N=()=>{const A={time:n.position.totalSeconds,tempo:n.tempo,timeSignature:n.timeSignature},D=[...n.tempoTrack,A];o.setTempoTrack(D),e?.()};return u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",padding:"20px",backgroundColor:"#1a1a1a",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("h3",{style:{color:"#fff",margin:"0 0 15px 0"},children:"Tempo & Time Signature (Features 81-94)"}),u.jsxs("div",{children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em",display:"block",marginBottom:"5px"},children:"Global Tempo (Feature 81) - BPM"}),u.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[u.jsx("input",{type:"number",min:"30",max:"300",step:"0.1",value:r,onChange:A=>l(A.target.value),onBlur:A=>{const D=parseFloat(A.target.value);!isNaN(D)&&D>=30&&D<=300?_(D):l(n.tempo.toString())},style:{flex:1,padding:"10px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",fontSize:"1.2em",fontWeight:"bold"}}),u.jsx("div",{style:{padding:"10px 20px",backgroundColor:"#6366f1",borderRadius:"4px",color:"#fff",fontSize:"1.2em",fontWeight:"bold",minWidth:"80px",textAlign:"center"},children:n.tempo.toFixed(1)})]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em",display:"block",marginBottom:"5px"},children:"Tempo Nudge (Feature 88)"}),u.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[u.jsx("input",{type:"number",min:"0.01",max:"10",step:"0.1",value:b,onChange:A=>v(parseFloat(A.target.value)),style:{width:"100px",padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"}}),u.jsxs("button",{onClick:()=>C("down"),style:{padding:"8px 16px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:["-",b," BPM"]}),u.jsxs("button",{onClick:()=>C("up"),style:{padding:"8px 16px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:["+",b," BPM"]})]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em",display:"block",marginBottom:"5px"},children:"Tap Tempo (Feature 87)"}),u.jsxs("button",{onClick:T,style:{width:"100%",padding:"15px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"1.1em",fontWeight:"bold"},children:["Tap (",y.length," taps)"]}),y.length>0&&u.jsx("div",{style:{color:"#888",fontSize:"0.85em",marginTop:"5px",textAlign:"center"},children:"Tap at least 2 times to set tempo"})]}),u.jsxs("div",{children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em",display:"block",marginBottom:"5px"},children:"Time Signature (Feature 89)"}),u.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[u.jsx("input",{type:"number",min:"1",max:"32",value:d,onChange:A=>f(parseInt(A.target.value)),onBlur:()=>w(d,g),style:{width:"80px",padding:"10px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",fontSize:"1.2em",fontWeight:"bold",textAlign:"center"}}),u.jsx("div",{style:{color:"#fff",fontSize:"1.5em",fontWeight:"bold"},children:"/"}),u.jsxs("select",{value:g,onChange:A=>{const D=parseInt(A.target.value);m(D),w(d,D)},style:{width:"100px",padding:"10px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",fontSize:"1.2em",fontWeight:"bold"},children:[u.jsx("option",{value:"2",children:"2"}),u.jsx("option",{value:"4",children:"4"}),u.jsx("option",{value:"8",children:"8"}),u.jsx("option",{value:"16",children:"16"})]})]})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em"},children:"Tempo Track (Feature 82)"}),u.jsx("button",{onClick:N,style:{padding:"6px 12px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em"},children:"Add Event"})]}),u.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px"},children:[u.jsx("button",{onClick:()=>o.setTempoRamp(!n.tempoRampEnabled),style:{padding:"8px 16px",backgroundColor:n.tempoRampEnabled?"#6366f1":"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.9em"},children:"Tempo Ramp (Feature 85)"}),u.jsx("button",{onClick:()=>o.setMasterTempo(!n.masterTempo),style:{padding:"8px 16px",backgroundColor:n.masterTempo?"#6366f1":"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.9em"},children:"Master Tempo (Feature 86)"})]}),n.tempoTrack.length>0&&u.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:n.tempoTrack.map((A,D)=>u.jsx("div",{style:{padding:"8px",backgroundColor:"#2a2a2a",borderRadius:"4px",marginBottom:"5px",fontSize:"0.85em",color:"#fff"},children:u.jsxs("div",{children:["Time: ",typeof A.time=="number"?A.time.toFixed(2):"N/A","s | Tempo: ",A.tempo," BPM | Time Sig: ",A.timeSignature[0],"/",A.timeSignature[1]]})},D))})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",textAlign:"center"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"5px"},children:"Tempo at Current Position"}),u.jsxs("div",{style:{color:"#fff",fontSize:"1.5em",fontWeight:"bold"},children:[o.getTempoAtPosition(n.position).toFixed(1)," BPM"]})]})]})},mC=({engine:o,onMarkerChange:e})=>{const[n,i]=I.useState(o.getState()),[r,l]=I.useState(""),[d,f]=I.useState("#ff6b6b"),[g,m]=I.useState(""),[y,x]=I.useState("start");I.useEffect(()=>{const A=setInterval(()=>{i(o.getState())},100);return()=>clearInterval(A)},[o]);const b=A=>o.getTimeFormatString(A,n.displayFormat),v=()=>{r.trim()&&(o.createMarker(r,n.position,d),l(""),e?.())},_=()=>{g.trim()&&(o.createLocator(g,n.position,y),m(""),e?.())},w=A=>{o.deleteMarker(A),e?.()},T=A=>{o.goToMarker(A),e?.()},C=()=>{o.previousMarker(),e?.()},N=()=>{o.nextMarker(),e?.()};return u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px",padding:"20px",backgroundColor:"#1a1a1a",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("h3",{style:{color:"#fff",margin:"0 0 15px 0"},children:"Markers & Locators (Features 95-107)"}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[u.jsx("button",{onClick:C,disabled:n.markers.length===0,style:{padding:"8px 16px",backgroundColor:n.markers.length===0?"#2a2a2a":"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:n.markers.length===0?"not-allowed":"pointer",fontSize:"0.9em"},children:" Previous (Feature 98)"}),u.jsx("button",{onClick:N,disabled:n.markers.length===0,style:{padding:"8px 16px",backgroundColor:n.markers.length===0?"#2a2a2a":"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:n.markers.length===0?"not-allowed":"pointer",fontSize:"0.9em"},children:"Next (Feature 99) "})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px"},children:"Create Marker (Feature 95)"}),u.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[u.jsx("input",{type:"text",placeholder:"Marker name",value:r,onChange:A=>l(A.target.value),onKeyPress:A=>{A.key==="Enter"&&v()},style:{flex:1,padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"}}),u.jsx("input",{type:"color",value:d,onChange:A=>f(A.target.value),style:{width:"50px",height:"38px",border:"none",borderRadius:"4px",cursor:"pointer"}}),u.jsx("button",{onClick:v,style:{padding:"8px 16px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:"Create"})]})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px"},children:["Markers (",n.markers.length,")"]}),u.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"8px"},children:n.markers.length===0?u.jsx("div",{style:{color:"#888",fontSize:"0.85em",textAlign:"center",padding:"20px"},children:"No markers created yet"}):n.markers.map(A=>u.jsxs("div",{style:{padding:"12px",backgroundColor:n.selectedMarker===A.id?"#6366f120":"#2a2a2a",borderRadius:"4px",border:`2px solid ${n.selectedMarker===A.id?"#6366f1":A.color}`,display:"flex",alignItems:"center",gap:"10px"},children:[u.jsx("div",{style:{width:"20px",height:"20px",borderRadius:"50%",backgroundColor:A.color,border:"2px solid #fff"}}),u.jsxs("div",{style:{flex:1},children:[u.jsx("div",{style:{color:"#fff",fontWeight:"bold",fontSize:"0.95em"},children:A.name}),u.jsx("div",{style:{color:"#888",fontSize:"0.85em"},children:b(A.position)})]}),u.jsxs("div",{style:{display:"flex",gap:"5px"},children:[u.jsx("button",{onClick:()=>T(A.id),style:{padding:"6px 12px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em"},children:"Go (Feature 97)"}),u.jsx("button",{onClick:()=>w(A.id),style:{padding:"6px 12px",backgroundColor:"#f44336",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em"},children:"Delete (Feature 96)"})]})]},A.id))})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px"},children:"Create Locator (Feature 100)"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[u.jsxs("select",{value:y,onChange:A=>x(A.target.value),style:{padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"},children:[u.jsx("option",{value:"start",children:"Start"}),u.jsx("option",{value:"end",children:"End"}),u.jsx("option",{value:"loop-start",children:"Loop Start"}),u.jsx("option",{value:"loop-end",children:"Loop End"}),u.jsx("option",{value:"punch-in",children:"Punch In"}),u.jsx("option",{value:"punch-out",children:"Punch Out"})]}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[u.jsx("input",{type:"text",placeholder:"Locator name",value:g,onChange:A=>m(A.target.value),onKeyPress:A=>{A.key==="Enter"&&_()},style:{flex:1,padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"}}),u.jsx("button",{onClick:_,style:{padding:"8px 16px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:"Create"})]})]})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px"},children:["Locators (",n.locators.length,")"]}),u.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"8px"},children:n.locators.length===0?u.jsx("div",{style:{color:"#888",fontSize:"0.85em",textAlign:"center",padding:"20px"},children:"No locators created yet"}):n.locators.map(A=>u.jsxs("div",{style:{padding:"12px",backgroundColor:n.selectedLocator===A.id?"#6366f120":"#2a2a2a",borderRadius:"4px",border:`2px solid ${n.selectedLocator===A.id?"#6366f1":"rgba(255, 255, 255, 0.2)"}`,display:"flex",alignItems:"center",gap:"10px"},children:[u.jsx("div",{style:{padding:"4px 8px",backgroundColor:"#6366f1",borderRadius:"4px",fontSize:"0.75em",color:"#fff",fontWeight:"bold"},children:A.type.toUpperCase()}),u.jsxs("div",{style:{flex:1},children:[u.jsx("div",{style:{color:"#fff",fontWeight:"bold",fontSize:"0.95em"},children:A.name}),u.jsx("div",{style:{color:"#888",fontSize:"0.85em"},children:b(A.position)})]}),u.jsx("button",{onClick:()=>{o.goToLocator(A.id),e?.()},style:{padding:"6px 12px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em"},children:"Go"}),u.jsx("button",{onClick:()=>{o.deleteLocator(A.id),e?.()},style:{padding:"6px 12px",backgroundColor:"#f44336",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em"},children:"Delete"})]},A.id))})]})]})};class gC{state;audioContext=null;maxHistorySize=100;constructor(e){this.state={regions:[],selectedRegions:new Set,clipboard:[],editHistory:{operations:[],currentIndex:-1},snapToGrid:!0,gridSize:1,snapToZero:!0,crossfadeEnabled:!0,crossfadeCurve:"s-curve",fadeInCurve:"exponential",fadeOutCurve:"exponential",normalizeLevel:-.1,normalizeMode:"peak",timeStretchAlgorithm:"elastique",timeStretchRatio:1,pitchShiftSemitones:0,pitchShiftAlgorithm:"elastique",preserveFormants:!0,preserveTempo:!1,compRegions:[],activeComp:null,sampleStart:0,sampleEnd:0,loopStart:0,loopEnd:0,loopEnabled:!1,reverseSample:!1,normalizeSample:!1,...e}}async initialize(){this.audioContext=new(window.AudioContext||window.webkitAudioContext)}cut(e){const n=this.state.regions.filter(i=>e.includes(i.id));this.state.clipboard=[...n],this.deleteRegions(e),this.addToHistory({id:`cut-${Date.now()}`,type:"cut",timestamp:Date.now(),data:{regionIds:e,regions:n}})}copy(e){const n=this.state.regions.filter(i=>e.includes(i.id));this.state.clipboard=n.map(i=>({...i})),this.addToHistory({id:`copy-${Date.now()}`,type:"copy",timestamp:Date.now(),data:{regionIds:e}})}paste(e,n){const i=[];return this.state.clipboard.forEach((r,l)=>{const d={...r,id:`region-${Date.now()}-${l}`,trackId:e,startTime:n+l*(r.endTime-r.startTime),endTime:n+(l+1)*(r.endTime-r.startTime)};i.push(d),this.state.regions.push(d)}),this.addToHistory({id:`paste-${Date.now()}`,type:"paste",timestamp:Date.now(),data:{trackId:e,position:n,newRegions:i}}),i}deleteRegions(e){this.state.regions=this.state.regions.filter(n=>!e.includes(n.id)),e.forEach(n=>this.state.selectedRegions.delete(n)),this.addToHistory({id:`delete-${Date.now()}`,type:"delete",timestamp:Date.now(),data:{regionIds:e}})}split(e,n){const i=this.state.regions.find(d=>d.id===e);if(!i||n<=i.startTime||n>=i.endTime)return[];const r={...i,id:`${e}-1`,endTime:n},l={...i,id:`${e}-2`,startTime:n};return this.deleteRegions([e]),this.state.regions.push(r,l),this.addToHistory({id:`split-${Date.now()}`,type:"split",timestamp:Date.now(),data:{regionId:e,splitTime:n,newRegions:[r.id,l.id]}}),[r,l]}trim(e,n,i){const r=this.state.regions.find(l=>l.id===e);r&&(r.startTime=Math.max(r.startTime,n),r.endTime=Math.min(r.endTime,i),this.addToHistory({id:`trim-${Date.now()}`,type:"trim",timestamp:Date.now(),data:{regionId:e,newStart:n,newEnd:i}}))}setFadeIn(e,n){const i=this.state.regions.find(r=>r.id===e);i&&(i.fadeIn=n,this.addToHistory({id:`fadein-${Date.now()}`,type:"fade",timestamp:Date.now(),data:{regionId:e,fadeType:"in",duration:n}}))}setFadeOut(e,n){const i=this.state.regions.find(r=>r.id===e);i&&(i.fadeOut=n,this.addToHistory({id:`fadeout-${Date.now()}`,type:"fade",timestamp:Date.now(),data:{regionId:e,fadeType:"out",duration:n}}))}createCrossfade(e,n,i){const r=this.state.regions.find(d=>d.id===e),l=this.state.regions.find(d=>d.id===n);r&&l&&(r.fadeOut=i,l.fadeIn=i,r.crossfade=i,l.crossfade=i)}normalize(e,n=-.1,i="peak"){const r=this.state.regions.find(g=>g.id===e);if(!r||!this.audioContext)return;const d=r.audioBuffer.getChannelData(0);let f=0;for(let g=0;g<d.length;g++)f=Math.max(f,Math.abs(d[g]));if(f>0){const m=Math.pow(10,n/20)/f;for(let y=0;y<d.length;y++)d[y]*=m}this.addToHistory({id:`normalize-${Date.now()}`,type:"normalize",timestamp:Date.now(),data:{regionId:e,level:n,mode:i}})}reverse(e){const n=this.state.regions.find(r=>r.id===e);if(!n||!this.audioContext)return;const i=n.audioBuffer;for(let r=0;r<i.numberOfChannels;r++){const l=i.getChannelData(r),d=new Float32Array(l.length);for(let f=0;f<l.length;f++)d[f]=l[l.length-1-f];l.set(d)}this.addToHistory({id:`reverse-${Date.now()}`,type:"reverse",timestamp:Date.now(),data:{regionId:e}})}duplicate(e){const n=this.state.regions.find(l=>l.id===e);if(!n)throw new Error("Region not found");const i=n.endTime-n.startTime,r={...n,id:`region-${Date.now()}`,startTime:n.endTime,endTime:n.endTime+i};return this.state.regions.push(r),r}selectAll(){this.state.selectedRegions=new Set(this.state.regions.map(e=>e.id))}deselectAll(){this.state.selectedRegions.clear()}undo(){if(this.state.editHistory.currentIndex>=0){const e=this.state.editHistory.operations[this.state.editHistory.currentIndex];this.applyUndo(e),this.state.editHistory.currentIndex--}}redo(){if(this.state.editHistory.currentIndex<this.state.editHistory.operations.length-1){this.state.editHistory.currentIndex++;const e=this.state.editHistory.operations[this.state.editHistory.currentIndex];this.applyRedo(e)}}setSnapToGrid(e,n){this.state.snapToGrid=e,n!==void 0&&(this.state.gridSize=n)}setSnapToZero(e){this.state.snapToZero=e}setCrossfadeCurve(e){this.state.crossfadeCurve=e}setFadeCurve(e,n){e==="in"?this.state.fadeInCurve=n:this.state.fadeOutCurve=n}batchOperation(e,n){e.forEach(i=>{const r=this.state.regions.find(l=>l.id===i);r&&n(r)})}setRegionGain(e,n){const i=this.state.regions.find(r=>r.id===e);i&&(i.volume=n)}setRegionPan(e,n){const i=this.state.regions.find(r=>r.id===e);i&&(i.pan=n)}selectByTime(e,n){this.state.selectedRegions=new Set(this.state.regions.filter(i=>i.startTime<n&&i.endTime>e).map(i=>i.id))}setRegionMute(e,n){const i=this.state.regions.find(r=>r.id===e);i&&(i.muted=n)}setRegionSolo(e,n){const i=this.state.regions.find(r=>r.id===e);i&&(i.soloed=n)}silence(e,n,i){const r=this.state.regions.find(m=>m.id===e);if(!r||!this.audioContext)return;const l=r.audioBuffer,d=l.sampleRate,f=Math.floor((n-r.startTime)*d),g=Math.floor((i-r.startTime)*d);for(let m=0;m<l.numberOfChannels;m++){const y=l.getChannelData(m);for(let x=f;x<g&&x<y.length;x++)y[x]=0}}timeStretch(e,n){!this.state.regions.find(r=>r.id===e)||!this.audioContext||(this.state.timeStretchRatio=n,this.addToHistory({id:`timestretch-${Date.now()}`,type:"time-stretch",timestamp:Date.now(),data:{regionId:e,ratio:n}}))}pitchShift(e,n){!this.state.regions.find(r=>r.id===e)||!this.audioContext||(this.state.pitchShiftSemitones=n,this.addToHistory({id:`pitchshift-${Date.now()}`,type:"pitch-shift",timestamp:Date.now(),data:{regionId:e,semitones:n}}))}setTimeStretchAlgorithm(e){this.state.timeStretchAlgorithm=e}setPreserveFormants(e){this.state.preserveFormants=e}createComp(e,n){const i=`comp-${Date.now()}`;return this.state.compRegions=n,this.state.activeComp=i,i}editComp(e,n){this.state.activeComp===e&&(this.state.compRegions=n)}setSampleStart(e,n){this.state.sampleStart=n}setSampleEnd(e,n){this.state.sampleEnd=n}setLoopPoints(e,n,i){this.state.loopStart=n,this.state.loopEnd=i}setLoopEnabled(e){this.state.loopEnabled=e}setReverseSample(e){this.state.reverseSample=e}setNormalizeSample(e){this.state.normalizeSample=e}addToHistory(e){this.state.editHistory.operations=this.state.editHistory.operations.slice(0,this.state.editHistory.currentIndex+1),this.state.editHistory.operations.push(e),this.state.editHistory.currentIndex++,this.state.editHistory.operations.length>this.maxHistorySize&&(this.state.editHistory.operations.shift(),this.state.editHistory.currentIndex--)}applyUndo(e){}applyRedo(e){}getState(){return{...this.state}}getRegions(){return[...this.state.regions]}getSelectedRegions(){return Array.from(this.state.selectedRegions)}getClipboard(){return[...this.state.clipboard]}canUndo(){return this.state.editHistory.currentIndex>=0}canRedo(){return this.state.editHistory.currentIndex<this.state.editHistory.operations.length-1}}const yC=({engine:o,onRegionsChange:e})=>{const[n,i]=I.useState(o.getState()),[r,l]=I.useState([]),[d,f]=I.useState(0),[g,m]=I.useState(.1),[y,x]=I.useState(-.1);I.useEffect(()=>{const A=setInterval(()=>{i(o.getState()),l(Array.from(o.getSelectedRegions()))},100);return()=>clearInterval(A)},[o]);const b=()=>{r.length>0&&(o.cut(r),e?.())},v=()=>{r.length>0&&o.copy(r)},_=()=>{n.clipboard.length>0&&(o.paste("track-1",0),e?.())},w=()=>{r.length>0&&(o.deleteRegions(r),e?.())},T=()=>{r.length===1&&d>0&&(o.split(r[0],d),e?.())},C=()=>{o.undo(),e?.()},N=()=>{o.redo(),e?.()};return u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",padding:"20px",backgroundColor:"#1a1a1a",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("h3",{style:{color:"#fff",margin:"0 0 15px 0"},children:"Audio Editing (Features 108-182)"}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px",fontWeight:"bold"},children:"Basic Editing (Features 108-125)"}),u.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[u.jsx("button",{onClick:b,disabled:r.length===0,style:{padding:"8px 16px",backgroundColor:r.length>0?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:r.length>0?"pointer":"not-allowed",fontSize:"0.9em"},children:" Cut (108)"}),u.jsx("button",{onClick:v,disabled:r.length===0,style:{padding:"8px 16px",backgroundColor:r.length>0?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:r.length>0?"pointer":"not-allowed",fontSize:"0.9em"},children:" Copy (109)"}),u.jsx("button",{onClick:_,disabled:n.clipboard.length===0,style:{padding:"8px 16px",backgroundColor:n.clipboard.length>0?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:n.clipboard.length>0?"pointer":"not-allowed",fontSize:"0.9em"},children:" Paste (110)"}),u.jsx("button",{onClick:w,disabled:r.length===0,style:{padding:"8px 16px",backgroundColor:r.length>0?"#f44336":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:r.length>0?"pointer":"not-allowed",fontSize:"0.9em"},children:" Delete (111)"}),u.jsx("button",{onClick:C,disabled:!o.canUndo(),style:{padding:"8px 16px",backgroundColor:o.canUndo()?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:o.canUndo()?"pointer":"not-allowed",fontSize:"0.9em"},children:" Undo (122)"}),u.jsx("button",{onClick:N,disabled:!o.canRedo(),style:{padding:"8px 16px",backgroundColor:o.canRedo()?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:o.canRedo()?"pointer":"not-allowed",fontSize:"0.9em"},children:" Redo (123)"})]})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px"},children:"Split (Feature 112)"}),u.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[u.jsx("input",{type:"number",value:d,onChange:A=>f(parseFloat(A.target.value)),step:"0.1",min:"0",placeholder:"Split time (seconds)",style:{flex:1,padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"}}),u.jsx("button",{onClick:T,disabled:r.length!==1,style:{padding:"8px 16px",backgroundColor:r.length===1?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:r.length===1?"pointer":"not-allowed"},children:"Split"})]})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px"},children:"Fade In/Out (Features 114-115)"}),u.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[u.jsx("input",{type:"number",value:g,onChange:A=>m(parseFloat(A.target.value)),step:"0.01",min:"0",max:"10",style:{width:"120px",padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"}}),u.jsx("span",{style:{color:"#aaa",fontSize:"0.85em"},children:"seconds"}),u.jsx("button",{onClick:()=>{r.forEach(A=>o.setFadeIn(A,g)),e?.()},disabled:r.length===0,style:{padding:"8px 16px",backgroundColor:r.length>0?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:r.length>0?"pointer":"not-allowed"},children:"Fade In"}),u.jsx("button",{onClick:()=>{r.forEach(A=>o.setFadeOut(A,g)),e?.()},disabled:r.length===0,style:{padding:"8px 16px",backgroundColor:r.length>0?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:r.length>0?"pointer":"not-allowed"},children:"Fade Out"})]})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px"},children:"Normalize (Feature 117)"}),u.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[u.jsx("input",{type:"number",value:y,onChange:A=>x(parseFloat(A.target.value)),step:"0.1",min:"-60",max:"0",style:{width:"120px",padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"}}),u.jsx("span",{style:{color:"#aaa",fontSize:"0.85em"},children:"dB"}),u.jsx("button",{onClick:()=>{r.forEach(A=>o.normalize(A,y)),e?.()},disabled:r.length===0,style:{padding:"8px 16px",backgroundColor:r.length>0?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:r.length>0?"pointer":"not-allowed"},children:"Normalize"})]})]}),u.jsx("div",{style:{display:"flex",gap:"10px"},children:u.jsx("button",{onClick:()=>{r.forEach(A=>o.reverse(A)),e?.()},disabled:r.length===0,style:{padding:"8px 16px",backgroundColor:r.length>0?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:r.length>0?"pointer":"not-allowed",fontSize:"0.9em"},children:" Reverse (118)"})}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px"},children:"Snap Settings (Features 124-125)"}),u.jsxs("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:n.snapToGrid,onChange:A=>o.setSnapToGrid(A.target.checked),style:{width:"18px",height:"18px"}}),"Snap to Grid (124)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:n.snapToZero,onChange:A=>o.setSnapToZero(A.target.checked),style:{width:"18px",height:"18px"}}),"Snap to Zero (125)"]})]})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px",fontWeight:"bold"},children:"Time Manipulation (Features 147-163)"}),u.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[u.jsx("button",{onClick:()=>{r.forEach(A=>o.timeStretch(A,1.5)),e?.()},disabled:r.length===0,style:{padding:"8px 16px",backgroundColor:r.length>0?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:r.length>0?"pointer":"not-allowed",fontSize:"0.9em"},children:" Time Stretch (147)"}),u.jsx("button",{onClick:()=>{r.forEach(A=>o.pitchShift(A,12)),e?.()},disabled:r.length===0,style:{padding:"8px 16px",backgroundColor:r.length>0?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:r.length>0?"pointer":"not-allowed",fontSize:"0.9em"},children:" Pitch Shift (148)"})]})]}),u.jsxs("div",{style:{padding:"10px",backgroundColor:"#0f0f0f",borderRadius:"4px",fontSize:"0.85em",color:"#888",display:"flex",justifyContent:"space-between"},children:[u.jsxs("div",{children:["Regions: ",n.regions.length]}),u.jsxs("div",{children:["Selected: ",r.length]}),u.jsxs("div",{children:["Clipboard: ",n.clipboard.length," items"]})]})]})};class xC{state;constructor(e){this.state={tracks:[],selectedTracks:new Set,selectedClips:new Set,selectedNotes:new Set,clipboard:{notes:[],clips:[]},editHistory:[],currentHistoryIndex:-1,pianoRollVisible:!0,pianoRollZoom:1,pianoRollTimeRange:[0,16],pianoRollNoteRange:[36,96],quantizeEnabled:!1,quantizeGrid:1/16,quantizeStrength:1,quantizeSwing:0,noteSnap:!0,snapGrid:1/16,noteLength:1/4,velocityRange:[0,127],...e}}createTrack(e,n=0){const i={id:`track-${Date.now()}`,name:e,channel:n,instrument:"Acoustic Grand Piano",volume:100,pan:0,clips:[],muted:!1,soloed:!1,recordEnabled:!1};return this.state.tracks.push(i),i}deleteTrack(e){this.state.tracks=this.state.tracks.filter(n=>n.id!==e),this.state.selectedTracks.delete(e)}createClip(e,n,i,r){const l=this.state.tracks.find(f=>f.id===e);if(!l)throw new Error("Track not found");const d={id:`clip-${Date.now()}`,trackId:e,name:n,startTime:i,endTime:i+r,notes:[],color:"#6366f1",muted:!1,soloed:!1,looped:!1,loopLength:r};return l.clips.push(d),d}deleteClip(e){this.state.tracks.forEach(n=>{n.clips=n.clips.filter(i=>i.id!==e)}),this.state.selectedClips.delete(e)}addNote(e,n,i,r,l=100){const d=this.findClip(e);if(!d)throw new Error("Clip not found");const f={id:`note-${Date.now()}-${n}`,pitch:n,velocity:l,startTime:i,duration:r,channel:0,selected:!1};return d.notes.push(f),f}deleteNote(e){this.state.tracks.forEach(n=>{n.clips.forEach(i=>{i.notes=i.notes.filter(r=>r.id!==e)})}),this.state.selectedNotes.delete(e)}selectNote(e,n=!1){n||this.deselectAllNotes(),this.state.selectedNotes.add(e),this.updateNoteSelection(e,!0)}deselectNote(e){this.state.selectedNotes.delete(e),this.updateNoteSelection(e,!1)}selectAllNotes(){this.state.tracks.forEach(e=>{e.clips.forEach(n=>{n.notes.forEach(i=>{this.state.selectedNotes.add(i.id),i.selected=!0})})})}deselectAllNotes(){this.state.selectedNotes.clear(),this.state.tracks.forEach(e=>{e.clips.forEach(n=>{n.notes.forEach(i=>{i.selected=!1})})})}moveNote(e,n,i){const r=this.findNote(e);r&&(r.startTime=this.snapToGrid(n),i!==void 0&&(r.pitch=Math.max(0,Math.min(127,i))))}resizeNote(e,n){const i=this.findNote(e);i&&(i.duration=Math.max(this.state.snapGrid,this.snapToGrid(n)))}setNoteVelocity(e,n){const i=this.findNote(e);i&&(i.velocity=Math.max(0,Math.min(127,n)))}setNotePitch(e,n){const i=this.findNote(e);i&&(i.pitch=Math.max(0,Math.min(127,n)))}duplicateNote(e,n=0){const i=this.findNote(e);if(!i)throw new Error("Note not found");const r=this.findClipByNote(e);if(!r)throw new Error("Clip not found");const l={...i,id:`note-${Date.now()}-${i.pitch}`,startTime:i.startTime+n,selected:!1};return r.notes.push(l),l}quantizeNotes(e){e.forEach(n=>{const i=this.findNote(n);if(i){const l=Math.round(i.startTime/this.state.quantizeGrid)*this.state.quantizeGrid-i.startTime;i.startTime=i.startTime+l*this.state.quantizeStrength}})}transposeNotes(e,n){e.forEach(i=>{const r=this.findNote(i);r&&(r.pitch=Math.max(0,Math.min(127,r.pitch+n)))})}copyNotes(e){const n=e.map(i=>this.findNote(i)).filter(i=>i!==null);this.state.clipboard.notes=n.map(i=>({...i}))}pasteNotes(e,n){const i=this.findClip(e);if(!i)throw new Error("Clip not found");const r=[];return this.state.clipboard.notes.forEach((l,d)=>{const f={...l,id:`note-${Date.now()}-${d}`,startTime:n+(l.startTime-this.getClipboardStartTime()),selected:!1};i.notes.push(f),r.push(f)}),r}findClip(e){for(const n of this.state.tracks){const i=n.clips.find(r=>r.id===e);if(i)return i}return null}findNote(e){for(const n of this.state.tracks)for(const i of n.clips){const r=i.notes.find(l=>l.id===e);if(r)return r}return null}findClipByNote(e){for(const n of this.state.tracks)for(const i of n.clips)if(i.notes.find(r=>r.id===e))return i;return null}updateNoteSelection(e,n){const i=this.findNote(e);i&&(i.selected=n)}snapToGrid(e){return this.state.noteSnap?Math.round(e/this.state.snapGrid)*this.state.snapGrid:e}getClipboardStartTime(){return this.state.clipboard.notes.length===0?0:Math.min(...this.state.clipboard.notes.map(e=>e.startTime))}getState(){return{...this.state}}getTracks(){return[...this.state.tracks]}getSelectedNotes(){return Array.from(this.state.selectedNotes)}getSelectedClips(){return Array.from(this.state.selectedClips)}setQuantizeGrid(e){this.state.quantizeGrid=e}setQuantizeStrength(e){this.state.quantizeStrength=Math.max(0,Math.min(1,e))}setSnapGrid(e){this.state.snapGrid=e}setNoteSnap(e){this.state.noteSnap=e}setCCValue(e,n,i,r){}setProgramChange(e,n,i){}setAftertouch(e,n,i){}setPitchBend(e,n,i){}createArpeggiator(e){}generateChord(e,n){return[]}scaleQuantize(e,n){e.forEach(i=>{const r=this.findNote(i);if(r){const l=n.find(d=>r.pitch%12===d%12);l!==void 0&&(r.pitch=Math.floor(r.pitch/12)*12+l%12)}})}}const bC=({engine:o,onTracksChange:e})=>{const[n,i]=I.useState(o.getState()),[r,l]=I.useState(""),[d,f]=I.useState(null),[g,m]=I.useState(n.quantizeGrid),[y,x]=I.useState(n.quantizeStrength);I.useEffect(()=>{const T=setInterval(()=>{i(o.getState())},100);return()=>clearInterval(T)},[o]);const b=()=>{r.trim()&&(o.createTrack(r),l(""),e?.())},v=T=>{o.deleteTrack(T),e?.()},_=()=>{const T=o.getSelectedNotes();T.length>0&&(o.quantizeNotes(T),e?.())},w=T=>{const C=o.getSelectedNotes();C.length>0&&(o.transposeNotes(C,T),e?.())};return u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",padding:"20px",backgroundColor:"#1a1a1a",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("h3",{style:{color:"#fff",margin:"0 0 15px 0"},children:"MIDI Editing (Features 183-200)"}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px"},children:"Create MIDI Track (Feature 183)"}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[u.jsx("input",{type:"text",value:r,onChange:T=>l(T.target.value),onKeyPress:T=>{T.key==="Enter"&&b()},placeholder:"Track name",style:{flex:1,padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"}}),u.jsx("button",{onClick:b,style:{padding:"8px 16px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:"Create"})]})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px"},children:["MIDI Tracks (",n.tracks.length,")"]}),u.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",display:"flex",flexDirection:"column",gap:"8px"},children:n.tracks.length===0?u.jsx("div",{style:{color:"#888",fontSize:"0.85em",textAlign:"center",padding:"20px"},children:"No MIDI tracks created yet"}):n.tracks.map(T=>u.jsx("div",{style:{padding:"12px",backgroundColor:d===T.id?"#6366f120":"#2a2a2a",borderRadius:"4px",border:`2px solid ${d===T.id?"#6366f1":"rgba(255, 255, 255, 0.1)"}`,cursor:"pointer"},onClick:()=>f(T.id),children:u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{color:"#fff",fontWeight:"bold",fontSize:"0.95em"},children:T.name}),u.jsxs("div",{style:{color:"#888",fontSize:"0.85em"},children:[T.clips.length," clips  ",T.clips.reduce((C,N)=>C+N.notes.length,0)," notes"]})]}),u.jsx("button",{onClick:C=>{C.stopPropagation(),v(T.id)},style:{padding:"6px 12px",backgroundColor:"#f44336",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em"},children:"Delete (184)"})]})},T.id))})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px"},children:"Quantize (Feature 198)"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[u.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em",minWidth:"100px"},children:"Grid:"}),u.jsxs("select",{value:g,onChange:T=>{const C=parseFloat(T.target.value);m(C),o.setQuantizeGrid(C)},style:{flex:1,padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"},children:[u.jsx("option",{value:1,children:"Whole Note"}),u.jsx("option",{value:1/2,children:"Half Note"}),u.jsx("option",{value:1/4,children:"Quarter Note"}),u.jsx("option",{value:1/8,children:"Eighth Note"}),u.jsx("option",{value:1/16,children:"16th Note"}),u.jsx("option",{value:1/32,children:"32nd Note"})]})]}),u.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em",minWidth:"100px"},children:"Strength:"}),u.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:y,onChange:T=>{const C=parseFloat(T.target.value);x(C),o.setQuantizeStrength(C)},style:{flex:1}}),u.jsxs("span",{style:{color:"#aaa",fontSize:"0.85em",minWidth:"40px"},children:[(y*100).toFixed(0),"%"]})]}),u.jsx("button",{onClick:_,disabled:o.getSelectedNotes().length===0,style:{padding:"8px 16px",backgroundColor:o.getSelectedNotes().length>0?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:o.getSelectedNotes().length>0?"pointer":"not-allowed"},children:"Quantize Selected Notes"})]})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px"},children:"Transpose (Feature 199)"}),u.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[u.jsx("button",{onClick:()=>w(-12),disabled:o.getSelectedNotes().length===0,style:{padding:"8px 16px",backgroundColor:o.getSelectedNotes().length>0?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:o.getSelectedNotes().length>0?"pointer":"not-allowed"},children:"-12 semitones"}),u.jsx("button",{onClick:()=>w(-1),disabled:o.getSelectedNotes().length===0,style:{padding:"8px 16px",backgroundColor:o.getSelectedNotes().length>0?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:o.getSelectedNotes().length>0?"pointer":"not-allowed"},children:"-1 semitone"}),u.jsx("button",{onClick:()=>w(1),disabled:o.getSelectedNotes().length===0,style:{padding:"8px 16px",backgroundColor:o.getSelectedNotes().length>0?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:o.getSelectedNotes().length>0?"pointer":"not-allowed"},children:"+1 semitone"}),u.jsx("button",{onClick:()=>w(12),disabled:o.getSelectedNotes().length===0,style:{padding:"8px 16px",backgroundColor:o.getSelectedNotes().length>0?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:o.getSelectedNotes().length>0?"pointer":"not-allowed"},children:"+12 semitones"})]})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px"},children:"Note Selection (Features 189-192)"}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[u.jsx("button",{onClick:()=>o.selectAllNotes(),style:{padding:"8px 16px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:"Select All (191)"}),u.jsx("button",{onClick:()=>o.deselectAllNotes(),style:{padding:"8px 16px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:"Deselect All (192)"})]})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px"},children:"Copy/Paste Notes (Features 200-201)"}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[u.jsx("button",{onClick:()=>{const T=o.getSelectedNotes();T.length>0&&o.copyNotes(T)},disabled:o.getSelectedNotes().length===0,style:{padding:"8px 16px",backgroundColor:o.getSelectedNotes().length>0?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:o.getSelectedNotes().length>0?"pointer":"not-allowed"},children:"Copy Notes (200)"}),u.jsx("button",{onClick:()=>{if(d&&n.clipboard.notes.length>0){const T=n.tracks.find(C=>C.id===d);T&&T.clips.length>0&&(o.pasteNotes(T.clips[0].id,0),e?.())}},disabled:!d||n.clipboard.notes.length===0,style:{padding:"8px 16px",backgroundColor:d&&n.clipboard.notes.length>0?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:d&&n.clipboard.notes.length>0?"pointer":"not-allowed"},children:"Paste Notes (201)"})]})]}),u.jsxs("div",{style:{padding:"10px",backgroundColor:"#0f0f0f",borderRadius:"4px",fontSize:"0.85em",color:"#888",display:"flex",justifyContent:"space-between"},children:[u.jsxs("div",{children:["Tracks: ",n.tracks.length]}),u.jsxs("div",{children:["Selected Notes: ",o.getSelectedNotes().length]}),u.jsxs("div",{children:["Clipboard: ",n.clipboard.notes.length," notes"]})]})]})};class vC{state;constructor(e){this.state={lanes:[],selectedLanes:new Set,selectedPoints:new Set,recording:!1,recordingParameter:null,touchMode:!1,latchMode:!1,writeMode:!1,readMode:!0,trimMode:!1,snapToGrid:!0,gridSize:1/16,curveType:"linear",...e}}createLane(e,n){const i={id:`lane-${Date.now()}`,trackId:e,parameter:n,points:[],enabled:!0,visible:!0,color:"#6366f1"};return this.state.lanes.push(i),i}deleteLane(e){this.state.lanes=this.state.lanes.filter(n=>n.id!==e),this.state.selectedLanes.delete(e)}addPoint(e,n,i,r){const l=this.state.lanes.find(f=>f.id===e);if(!l)throw new Error("Lane not found");const d={id:`point-${Date.now()}-${Math.random()}`,time:this.snapToGrid(n),value:Math.max(0,Math.min(1,i)),curve:r||this.state.curveType};return l.points.push(d),this.sortPoints(l),d}deletePoint(e){this.state.lanes.forEach(n=>{n.points=n.points.filter(i=>i.id!==e)}),this.state.selectedPoints.delete(e)}movePoint(e,n,i){const r=this.findPoint(e);r&&(r.time=this.snapToGrid(n),i!==void 0&&(r.value=Math.max(0,Math.min(1,i))))}startRecording(e,n){this.state.recording=!0,this.state.recordingParameter=e,this.state.touchMode=n==="touch",this.state.latchMode=n==="latch",this.state.writeMode=n==="write"}stopRecording(){this.state.recording=!1,this.state.recordingParameter=null}setReadMode(e){this.state.readMode=e}setTrimMode(e){this.state.trimMode=e}setCurveType(e){this.state.curveType=e}setSnapToGrid(e,n){this.state.snapToGrid=e,n!==void 0&&(this.state.gridSize=n)}getValueAtTime(e,n){const i=this.state.lanes.find(l=>l.id===e);if(!i||i.points.length===0)return .5;const r=i.points;if(n<=r[0].time)return r[0].value;if(n>=r[r.length-1].time)return r[r.length-1].value;for(let l=0;l<r.length-1;l++)if(n>=r[l].time&&n<=r[l+1].time)return this.interpolate(r[l],r[l+1],n);return .5}findPoint(e){for(const n of this.state.lanes){const i=n.points.find(r=>r.id===e);if(i)return i}return null}sortPoints(e){e.points.sort((n,i)=>n.time-i.time)}snapToGrid(e){return this.state.snapToGrid?Math.round(e/this.state.gridSize)*this.state.gridSize:e}interpolate(e,n,i){const r=(i-e.time)/(n.time-e.time);switch(e.curve){case"linear":return e.value+(n.value-e.value)*r;case"exponential":return e.value*Math.pow(n.value/e.value,r);case"s-curve":const l=r*r*(3-2*r);return e.value+(n.value-e.value)*l;case"step":return e.value;default:return e.value+(n.value-e.value)*r}}getState(){return{...this.state}}getLanes(){return[...this.state.lanes]}}const SC=({engine:o,onLanesChange:e})=>{const[n,i]=I.useState(o.getState()),[r]=I.useState("track-1"),[l,d]=I.useState("volume"),[f,g]=I.useState("touch");return I.useEffect(()=>{const m=setInterval(()=>{i(o.getState())},100);return()=>clearInterval(m)},[o]),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",padding:"20px",backgroundColor:"#1a1a1a",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("h3",{style:{color:"#fff",margin:"0 0 15px 0"},children:"Automation (Features 228-247)"}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px"},children:"Create Automation Lane (Feature 228)"}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[u.jsxs("select",{value:l,onChange:m=>d(m.target.value),style:{flex:1,padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"},children:[u.jsx("option",{value:"volume",children:"Volume"}),u.jsx("option",{value:"pan",children:"Pan"}),u.jsx("option",{value:"filter-cutoff",children:"Filter Cutoff"}),u.jsx("option",{value:"filter-resonance",children:"Filter Resonance"}),u.jsx("option",{value:"reverb-send",children:"Reverb Send"}),u.jsx("option",{value:"delay-send",children:"Delay Send"})]}),u.jsx("button",{onClick:()=>{o.createLane(r,l),e?.()},style:{padding:"8px 16px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:"Create Lane"})]})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px"},children:"Recording Mode (Features 233-234)"}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[u.jsx("button",{onClick:()=>{g("touch"),o.startRecording(l,"touch")},style:{padding:"8px 16px",backgroundColor:f==="touch"?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:"Touch"}),u.jsx("button",{onClick:()=>{g("latch"),o.startRecording(l,"latch")},style:{padding:"8px 16px",backgroundColor:f==="latch"?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:"Latch"}),u.jsx("button",{onClick:()=>{g("write"),o.startRecording(l,"write")},style:{padding:"8px 16px",backgroundColor:f==="write"?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:"Write"}),u.jsx("button",{onClick:()=>o.stopRecording(),disabled:!n.recording,style:{padding:"8px 16px",backgroundColor:n.recording?"#f44336":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:n.recording?"pointer":"not-allowed"},children:"Stop"})]})]}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[u.jsx("button",{onClick:()=>o.setReadMode(!n.readMode),style:{padding:"8px 16px",backgroundColor:n.readMode?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:"Read (235)"}),u.jsx("button",{onClick:()=>o.setTrimMode(!n.trimMode),style:{padding:"8px 16px",backgroundColor:n.trimMode?"#6366f1":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:"Trim (236)"})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px"},children:["Automation Lanes (",n.lanes.length,")"]}),u.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:n.lanes.length===0?u.jsx("div",{style:{color:"#888",fontSize:"0.85em",textAlign:"center",padding:"20px"},children:"No automation lanes created yet"}):n.lanes.map(m=>u.jsx("div",{style:{padding:"12px",backgroundColor:"#2a2a2a",borderRadius:"4px",marginBottom:"8px"},children:u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{children:[u.jsxs("div",{style:{color:"#fff",fontWeight:"bold"},children:[m.parameter," (",m.trackId,")"]}),u.jsxs("div",{style:{color:"#888",fontSize:"0.85em"},children:[m.points.length," points"]})]}),u.jsx("button",{onClick:()=>{o.deleteLane(m.id),e?.()},style:{padding:"6px 12px",backgroundColor:"#f44336",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em"},children:"Delete (229)"})]})},m.id))})]})]})};class _C{state;constructor(e){this.state={supportedFormats:["vst2","vst3","au","aax","lv2","ladspa","clap","jsfx","native"],pluginScanPaths:[],scannedPlugins:[],pluginChains:new Map,selectedPlugin:null,pluginWindow:null,eqPlugins:[],eqType:"parametric",dynamicsPlugins:[],dynamicsType:"compressor",timeEffectPlugins:[],timeEffectType:"reverb",modulationPlugins:[],modulationType:"chorus",distortionPlugins:[],distortionType:"saturation",...e}}async scanPlugins(e){return[]}async loadPlugin(e,n){const i={id:`plugin-${Date.now()}`,name:e.split("/").pop()||"Unknown",format:n,manufacturer:"Unknown",version:"1.0.0",category:"utility",enabled:!0,bypassed:!1,preset:null,parameters:new Map,latency:0};return this.state.scannedPlugins.push(i),i}unloadPlugin(e){this.state.scannedPlugins=this.state.scannedPlugins.filter(n=>n.id!==e),this.state.pluginChains.forEach(n=>{n.plugins=n.plugins.filter(i=>i.id!==e)})}addPluginToChain(e,n,i){let r=this.state.pluginChains.get(e);r||(r={id:`chain-${e}`,trackId:e,plugins:[],insertPosition:0},this.state.pluginChains.set(e,r)),i!==void 0?r.plugins.splice(i,0,n):r.plugins.push(n)}removePluginFromChain(e,n){const i=this.state.pluginChains.get(e);i&&(i.plugins=i.plugins.filter(r=>r.id!==n))}reorderPlugins(e,n){const i=this.state.pluginChains.get(e);if(i){const r=new Map(i.plugins.map(l=>[l.id,l]));i.plugins=n.map(l=>r.get(l)).filter(l=>l!==void 0)}}bypassPlugin(e,n){this.state.pluginChains.forEach(i=>{const r=i.plugins.find(l=>l.id===e);r&&(r.bypassed=n)})}enablePlugin(e,n){this.state.pluginChains.forEach(i=>{const r=i.plugins.find(l=>l.id===e);r&&(r.enabled=n)})}openPluginWindow(e){this.state.pluginWindow=e}closePluginWindow(){this.state.pluginWindow=null}setParameter(e,n,i){this.state.pluginChains.forEach(r=>{const l=r.plugins.find(d=>d.id===e);l&&l.parameters.set(n,Math.max(0,Math.min(1,i)))})}getParameter(e,n){for(const i of this.state.pluginChains.values()){const r=i.plugins.find(l=>l.id===e);if(r)return r.parameters.get(n)||0}return 0}createParametricEQ(e){const n={id:`eq-${Date.now()}`,name:"Parametric EQ",format:"native",manufacturer:"iDAW",version:"1.0.0",category:"eq",enabled:!0,bypassed:!1,preset:null,parameters:new Map([["low-shelf-freq",.2],["low-shelf-gain",.5],["mid1-freq",.4],["mid1-gain",.5],["mid1-q",.5],["mid2-freq",.6],["mid2-gain",.5],["mid2-q",.5],["high-shelf-freq",.8],["high-shelf-gain",.5]]),latency:0};return this.addPluginToChain(e,n),n}createCompressor(e){const n={id:`comp-${Date.now()}`,name:"Compressor",format:"native",manufacturer:"iDAW",version:"1.0.0",category:"dynamics",enabled:!0,bypassed:!1,preset:null,parameters:new Map([["threshold",.7],["ratio",.4],["attack",.1],["release",.5],["knee",.3],["makeup-gain",.5]]),latency:0};return this.addPluginToChain(e,n),n}createReverb(e){const n={id:`reverb-${Date.now()}`,name:"Reverb",format:"native",manufacturer:"iDAW",version:"1.0.0",category:"time",enabled:!0,bypassed:!1,preset:null,parameters:new Map([["room-size",.5],["damping",.5],["wet",.3],["dry",.7],["pre-delay",.1]]),latency:0};return this.addPluginToChain(e,n),n}createChorus(e){const n={id:`chorus-${Date.now()}`,name:"Chorus",format:"native",manufacturer:"iDAW",version:"1.0.0",category:"modulation",enabled:!0,bypassed:!1,preset:null,parameters:new Map([["rate",.3],["depth",.5],["feedback",.2],["mix",.5]]),latency:0};return this.addPluginToChain(e,n),n}createSaturation(e){const n={id:`sat-${Date.now()}`,name:"Saturation",format:"native",manufacturer:"iDAW",version:"1.0.0",category:"distortion",enabled:!0,bypassed:!1,preset:null,parameters:new Map([["drive",.3],["tone",.5],["mix",.5],["type",.5]]),latency:0};return this.addPluginToChain(e,n),n}getState(){return{...this.state}}getChain(e){return this.state.pluginChains.get(e)}getScannedPlugins(){return[...this.state.scannedPlugins]}}const TC=({engine:o,trackId:e,onPluginsChange:n})=>{const[,i]=I.useState(o.getState()),[r,l]=I.useState(null);I.useEffect(()=>{const f=setInterval(()=>{i(o.getState())},100);return()=>clearInterval(f)},[o]);const d=o.getChain(e);return u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",padding:"20px",backgroundColor:"#1a1a1a",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("h3",{style:{color:"#fff",margin:"0 0 15px 0"},children:"Plugins (Features 347-474)"}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px"},children:"Add Plugin"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"10px"},children:[u.jsx("button",{onClick:()=>{o.createParametricEQ(e),n?.()},style:{padding:"10px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:"Parametric EQ (381)"}),u.jsx("button",{onClick:()=>{o.createCompressor(e),n?.()},style:{padding:"10px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:"Compressor (399)"}),u.jsx("button",{onClick:()=>{o.createReverb(e),n?.()},style:{padding:"10px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:"Reverb (421)"}),u.jsx("button",{onClick:()=>{o.createChorus(e),n?.()},style:{padding:"10px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:"Chorus (443)"}),u.jsx("button",{onClick:()=>{o.createSaturation(e),n?.()},style:{padding:"10px",backgroundColor:"#6366f1",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer"},children:"Saturation (458)"})]})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px"},children:["Plugin Chain (",d?.plugins.length||0,")"]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:d&&d.plugins.length>0?d.plugins.map(f=>u.jsx("div",{style:{padding:"12px",backgroundColor:r===f.id?"#6366f120":"#2a2a2a",borderRadius:"4px",border:`2px solid ${r===f.id?"#6366f1":"rgba(255, 255, 255, 0.1)"}`,cursor:"pointer"},onClick:()=>l(f.id),children:u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{color:"#fff",fontWeight:"bold"},children:f.name}),u.jsxs("div",{style:{color:"#888",fontSize:"0.85em"},children:[f.manufacturer,"  ",f.format.toUpperCase()]})]}),u.jsxs("div",{style:{display:"flex",gap:"5px"},children:[u.jsx("button",{onClick:g=>{g.stopPropagation(),o.bypassPlugin(f.id,!f.bypassed),n?.()},style:{padding:"6px 12px",backgroundColor:f.bypassed?"#f44336":"#2a2a2a",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em"},children:f.bypassed?"Bypassed":"Active"}),u.jsx("button",{onClick:g=>{g.stopPropagation(),o.removePluginFromChain(e,f.id),n?.()},style:{padding:"6px 12px",backgroundColor:"#f44336",border:"none",borderRadius:"4px",color:"#fff",cursor:"pointer",fontSize:"0.85em"},children:"Remove (361)"})]})]})},f.id)):u.jsx("div",{style:{color:"#888",fontSize:"0.85em",textAlign:"center",padding:"20px"},children:"No plugins in chain"})})]})]})};class CC{state;constructor(e){this.state={projectManagement:{projectTemplates:new Map,sessionRecall:!1,projectBackup:!0,autoSave:!0,autoSaveInterval:300},audioAnalysis:{spectralAnalysis:!1,harmonicAnalysis:!1,transientAnalysis:!1,beatDetection:!1,keyDetection:!1,chordDetection:!1},collaboration:{cloudStorage:!1,realTimeSync:!1,versionControl:!1,conflictResolution:"manual",permissions:new Map},export:{formats:["wav","mp3","flac","aiff","ogg","m4a","opus"],batchExport:!1,exportQueue:[],cloudExport:!1,streamingExport:!1},customization:{themes:["dark","light","high-contrast","custom"],layouts:new Map,shortcuts:new Map,toolbars:new Map,workspacePresets:[]},advancedAutomation:{automationLanes:0,automationCurves:["linear","exponential","s-curve","bezier"],automationSnap:!0,automationPreview:!0,automationRecording:!1},advancedMIDI:{midiProcessors:new Map,midiFilters:new Map,midiTransformers:new Map,midiGenerators:new Map},advancedMixing:{surroundSound:!1,immersiveAudio:!1,spatialAudio:!1,binauralAudio:!1},advancedEffects:{convolutionReverb:!1,spectralProcessing:!1,granularSynthesis:!1,physicalModeling:!1},advancedRecording:{multiRoomRecording:!1,remoteRecording:!1,cloudRecording:!1,liveStreaming:!1},...e}}createProjectTemplate(e,n){this.state.projectManagement.projectTemplates.set(e,n)}enableSessionRecall(e){this.state.projectManagement.sessionRecall=e}setAutoSave(e,n){this.state.projectManagement.autoSave=e,n!==void 0&&(this.state.projectManagement.autoSaveInterval=n)}enableSpectralAnalysis(e){this.state.audioAnalysis.spectralAnalysis=e}enableHarmonicAnalysis(e){this.state.audioAnalysis.harmonicAnalysis=e}enableTransientAnalysis(e){this.state.audioAnalysis.transientAnalysis=e}enableBeatDetection(e){this.state.audioAnalysis.beatDetection=e}enableKeyDetection(e){this.state.audioAnalysis.keyDetection=e}enableChordDetection(e){this.state.audioAnalysis.chordDetection=e}enableCloudStorage(e){this.state.collaboration.cloudStorage=e}enableRealTimeSync(e){this.state.collaboration.realTimeSync=e}enableVersionControl(e){this.state.collaboration.versionControl=e}setConflictResolution(e){this.state.collaboration.conflictResolution=e}addExportFormat(e){this.state.export.formats.includes(e)||this.state.export.formats.push(e)}enableBatchExport(e){this.state.export.batchExport=e}enableCloudExport(e){this.state.export.cloudExport=e}enableStreamingExport(e){this.state.export.streamingExport=e}setTheme(e){}createLayout(e,n){this.state.customization.layouts.set(e,n)}setShortcut(e,n){this.state.customization.shortcuts.set(e,n)}customizeToolbar(e,n){this.state.customization.toolbars.set(e,n)}setAutomationLanes(e){this.state.advancedAutomation.automationLanes=e}setAutomationCurves(e){this.state.advancedAutomation.automationCurves=e}enableAutomationPreview(e){this.state.advancedAutomation.automationPreview=e}addMIDIProcessor(e,n){this.state.advancedMIDI.midiProcessors.set(e,n)}addMIDIFilter(e,n){this.state.advancedMIDI.midiFilters.set(e,n)}addMIDITransformer(e,n){this.state.advancedMIDI.midiTransformers.set(e,n)}addMIDIGenerator(e,n){this.state.advancedMIDI.midiGenerators.set(e,n)}enableSurroundSound(e){this.state.advancedMixing.surroundSound=e}enableImmersiveAudio(e){this.state.advancedMixing.immersiveAudio=e}enableSpatialAudio(e){this.state.advancedMixing.spatialAudio=e}enableBinauralAudio(e){this.state.advancedMixing.binauralAudio=e}enableConvolutionReverb(e){this.state.advancedEffects.convolutionReverb=e}enableSpectralProcessing(e){this.state.advancedEffects.spectralProcessing=e}enableGranularSynthesis(e){this.state.advancedEffects.granularSynthesis=e}enablePhysicalModeling(e){this.state.advancedEffects.physicalModeling=e}enableMultiRoomRecording(e){this.state.advancedRecording.multiRoomRecording=e}enableRemoteRecording(e){this.state.advancedRecording.remoteRecording=e}enableCloudRecording(e){this.state.advancedRecording.cloudRecording=e}enableLiveStreaming(e){this.state.advancedRecording.liveStreaming=e}getState(){return{...this.state}}}const wC=({engine:o})=>{const[e,n]=I.useState(o.getState());return I.useEffect(()=>{const i=setInterval(()=>{n(o.getState())},100);return()=>clearInterval(i)},[o]),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px",padding:"20px",backgroundColor:"#1a1a1a",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("h3",{style:{color:"#fff",margin:"0 0 15px 0"},children:"Remaining Features (1001+)"}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px",fontWeight:"bold"},children:"Advanced Workflow (Features 1001-1100)"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.projectManagement.autoSave,onChange:i=>o.setAutoSave(i.target.checked),style:{width:"18px",height:"18px"}}),"Auto-Save (1003)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.projectManagement.sessionRecall,onChange:i=>o.enableSessionRecall(i.target.checked),style:{width:"18px",height:"18px"}}),"Session Recall (1002)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.projectManagement.projectBackup,onChange:()=>{},style:{width:"18px",height:"18px"}}),"Project Backup"]})]})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px",fontWeight:"bold"},children:"Advanced Analysis (Features 1101-1200)"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.audioAnalysis.spectralAnalysis,onChange:i=>o.enableSpectralAnalysis(i.target.checked),style:{width:"18px",height:"18px"}}),"Spectral Analysis (1101)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.audioAnalysis.harmonicAnalysis,onChange:i=>o.enableHarmonicAnalysis(i.target.checked),style:{width:"18px",height:"18px"}}),"Harmonic Analysis (1102)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.audioAnalysis.transientAnalysis,onChange:i=>o.enableTransientAnalysis(i.target.checked),style:{width:"18px",height:"18px"}}),"Transient Analysis (1103)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.audioAnalysis.beatDetection,onChange:i=>o.enableBeatDetection(i.target.checked),style:{width:"18px",height:"18px"}}),"Beat Detection (1104)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.audioAnalysis.keyDetection,onChange:i=>o.enableKeyDetection(i.target.checked),style:{width:"18px",height:"18px"}}),"Key Detection (1105)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.audioAnalysis.chordDetection,onChange:i=>o.enableChordDetection(i.target.checked),style:{width:"18px",height:"18px"}}),"Chord Detection (1106)"]})]})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px",fontWeight:"bold"},children:"Advanced Collaboration (Features 1201-1300)"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.collaboration.cloudStorage,onChange:i=>o.enableCloudStorage(i.target.checked),style:{width:"18px",height:"18px"}}),"Cloud Storage (1201)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.collaboration.realTimeSync,onChange:i=>o.enableRealTimeSync(i.target.checked),style:{width:"18px",height:"18px"}}),"Real-Time Sync (1202)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.collaboration.versionControl,onChange:i=>o.enableVersionControl(i.target.checked),style:{width:"18px",height:"18px"}}),"Version Control (1203)"]}),u.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[u.jsx("label",{style:{color:"#aaa",fontSize:"0.85em"},children:"Conflict Resolution (1204):"}),u.jsxs("select",{value:e.collaboration.conflictResolution,onChange:i=>o.setConflictResolution(i.target.value),style:{padding:"8px",backgroundColor:"#2a2a2a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",color:"#fff"},children:[u.jsx("option",{value:"manual",children:"Manual"}),u.jsx("option",{value:"auto",children:"Auto"}),u.jsx("option",{value:"merge",children:"Merge"})]})]})]})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px",fontWeight:"bold"},children:"Advanced Export (Features 1301-1400)"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.export.batchExport,onChange:i=>o.enableBatchExport(i.target.checked),style:{width:"18px",height:"18px"}}),"Batch Export (1302)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.export.cloudExport,onChange:i=>o.enableCloudExport(i.target.checked),style:{width:"18px",height:"18px"}}),"Cloud Export (1303)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.export.streamingExport,onChange:i=>o.enableStreamingExport(i.target.checked),style:{width:"18px",height:"18px"}}),"Streaming Export (1304)"]}),u.jsxs("div",{style:{color:"#888",fontSize:"0.85em"},children:["Supported Formats: ",e.export.formats.join(", ")]})]})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px",fontWeight:"bold"},children:"Advanced Mixing (Features 1701-1800)"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.advancedMixing.surroundSound,onChange:i=>o.enableSurroundSound(i.target.checked),style:{width:"18px",height:"18px"}}),"Surround Sound (1701)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.advancedMixing.immersiveAudio,onChange:i=>o.enableImmersiveAudio(i.target.checked),style:{width:"18px",height:"18px"}}),"Immersive Audio (1702)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.advancedMixing.spatialAudio,onChange:i=>o.enableSpatialAudio(i.target.checked),style:{width:"18px",height:"18px"}}),"Spatial Audio (1703)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.advancedMixing.binauralAudio,onChange:i=>o.enableBinauralAudio(i.target.checked),style:{width:"18px",height:"18px"}}),"Binaural Audio (1704)"]})]})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px",fontWeight:"bold"},children:"Advanced Effects (Features 1801-1900)"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.advancedEffects.convolutionReverb,onChange:i=>o.enableConvolutionReverb(i.target.checked),style:{width:"18px",height:"18px"}}),"Convolution Reverb (1801)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.advancedEffects.spectralProcessing,onChange:i=>o.enableSpectralProcessing(i.target.checked),style:{width:"18px",height:"18px"}}),"Spectral Processing (1802)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.advancedEffects.granularSynthesis,onChange:i=>o.enableGranularSynthesis(i.target.checked),style:{width:"18px",height:"18px"}}),"Granular Synthesis (1803)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.advancedEffects.physicalModeling,onChange:i=>o.enablePhysicalModeling(i.target.checked),style:{width:"18px",height:"18px"}}),"Physical Modeling (1804)"]})]})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"#0f0f0f",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[u.jsx("div",{style:{color:"#aaa",fontSize:"0.85em",marginBottom:"10px",fontWeight:"bold"},children:"Advanced Recording (Features 1901-2000)"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px"},children:[u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.advancedRecording.multiRoomRecording,onChange:i=>o.enableMultiRoomRecording(i.target.checked),style:{width:"18px",height:"18px"}}),"Multi-Room Recording (1901)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.advancedRecording.remoteRecording,onChange:i=>o.enableRemoteRecording(i.target.checked),style:{width:"18px",height:"18px"}}),"Remote Recording (1902)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.advancedRecording.cloudRecording,onChange:i=>o.enableCloudRecording(i.target.checked),style:{width:"18px",height:"18px"}}),"Cloud Recording (1903)"]}),u.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",color:"#fff"},children:[u.jsx("input",{type:"checkbox",checked:e.advancedRecording.liveStreaming,onChange:i=>o.enableLiveStreaming(i.target.checked),style:{width:"18px",height:"18px"}}),"Live Streaming (1904)"]})]})]})]})};function kC(){console.log("App: Component rendering");const[o,e]=I.useState(!0),[n,i]=I.useState(null),[r,l]=I.useState(!1),[d,f]=I.useState(null),[g,m]=I.useState("checking"),[y,x]=I.useState(null),[b,v]=I.useState(null),[_,w]=I.useState(null),[T,C]=I.useState(null),[N,A]=I.useState(!1),[D]=I.useState(120),[M]=I.useState(()=>new VT),[E,k]=I.useState([{id:"track-1",name:"Track 1",armed:!1,recordSafe:!1,inputMonitoring:"off",takes:[],currentTake:-1,inputChannel:0,pan:0,volume:1}]),[R,O]=I.useState("track-1"),[L]=I.useState(()=>new QT({tempo:120,timeSignature:[4,4],sampleRate:44100})),[q,P]=I.useState(L.getState()),[te]=I.useState(()=>new $T({sampleRate:44100,bitDepth:24,dithering:"none",noiseShaping:"none",oversampling:1,antiAliasing:!0})),[se]=I.useState(()=>{const re=new eC;return re.addUserItem({id:"loop-1",name:"Drum Loop 1",type:"loop",path:"/user/loops/drum-loop-1.wav",tags:["drums","electronic","120bpm"],rating:4,color:"#6366f1",metadata:{bpm:120,key:"C",genre:"Electronic"},cloudSynced:!1,downloaded:!0}),re.addUserItem({id:"oneshot-1",name:"Kick 808",type:"one-shot",path:"/user/oneshots/kick-808.wav",tags:["kick","808","bass"],rating:5,color:"#f44336",metadata:{genre:"Hip-Hop"},cloudSynced:!1,downloaded:!0}),re}),[de]=I.useState(()=>new tC),[B]=I.useState(()=>new dC);I.useEffect(()=>{(async()=>{await Da(),await B.initialize(zn)})()},[B]);const[Q]=I.useState(()=>new gC);I.useEffect(()=>{Q.initialize()},[Q]);const[ne]=I.useState(()=>new xC),[ae]=I.useState(()=>new vC),[ue]=I.useState(()=>new _C),[z]=I.useState(()=>new CC),[X]=I.useState(()=>new LT),[ie]=I.useState(()=>new qT),[le]=I.useState(()=>new PT),[oe]=I.useState(()=>new HT);I.useEffect(()=>{(async()=>{await X.initialize(),await ie.initialize(zn),await le.initialize()})()},[X,ie,le]);const me=fv(),{getEmotions:be,generateMusic:fe}=me;console.log("App: useMusicBrain hook initialized"),I.useEffect(()=>{console.log("App: useEffect running, checking Tauri API");try{typeof window<"u"&&window.__TAURI__?console.log("App: Tauri API detected"):console.warn("App: Tauri API not detected - running in browser mode")}catch(he){console.error("App: Error checking Tauri API:",he)}const re=async()=>{try{await be(),m("online"),console.log("App: Music Brain API is online")}catch(he){m("offline"),console.warn("App: Music Brain API is offline:",he)}};re();const ee=setInterval(re,3e4);return()=>clearInterval(ee)},[be]);const ze=()=>{e(!o)},Nt=async()=>{l(!0),f(null);try{const re=await be();i(re),m("online"),console.log("Emotions loaded:",re)}catch(re){console.error("Error loading emotions:",re),m("offline");const ee=re instanceof Error?re.message:String(re);ee.includes("Connection")||ee.includes("Failed to fetch")||ee.includes("network")?f("Music Brain API is not running. Start it with: python -m music_brain.api"):f(`Failed to load emotions: ${ee}`)}finally{l(!1)}},Zt=async()=>{l(!0),f(null);try{if(!y){f("Please select an emotion first"),l(!1);return}const re=await fe({intent:{base_emotion:y.base,intensity:y.intensity,specific_emotion:y.sub,technical:{}}});m("online"),console.log("Music generated:",re);const ee=re?.midi_data||null,he=re?.midi_path||null,Ie=re?.music_config||null;v(he),w(ee),C(Ie),Ie&&console.log("Music config:",Ie),ee||he?console.log("MIDI generated successfully"):console.warn("MIDI generation completed but no MIDI data/path returned")}catch(re){console.error("Error generating music:",re),m("offline");const ee=re instanceof Error?re.message:String(re);ee.includes("Connection")||ee.includes("Failed to fetch")||ee.includes("network")?f("Music Brain API is not running. Start it with: python -m music_brain.api"):f(`Failed to generate music: ${ee}`)}finally{l(!1)}},cn=()=>{if(!_){f("No MIDI data available to download");return}try{const re=atob(_),ee=new Uint8Array(re.length);for(let we=0;we<re.length;we++)ee[we]=re.charCodeAt(we);const he=new Blob([ee],{type:"audio/midi"}),Ie=URL.createObjectURL(he),Ae=document.createElement("a");Ae.href=Ie,Ae.download=`generated_music_${Date.now()}.mid`,document.body.appendChild(Ae),Ae.click(),document.body.removeChild(Ae),URL.revokeObjectURL(Ie)}catch(re){console.error("Error downloading MIDI:",re),f("Failed to download MIDI file")}},Ot={display:"flex",flexDirection:"column",padding:"10px",backgroundColor:"rgba(34, 197, 94, 0.1)",borderRadius:"4px",border:"1px solid rgba(34, 197, 94, 0.2)"};return I.useEffect(()=>{window.__DAW_ENGINES__={recording:M,transport:B,audioEditing:Q,midi:ne,automation:ae,plugin:ue,virtualInstruments:X,arrangementLive:ie,masteringAnalysis:le,videoFilesNotation:oe,remainingFeatures:z}},[M,B,Q,ne,ae,ue,X,ie,le,oe,z]),u.jsxs("div",{className:"app-container",children:[d&&u.jsxs("div",{style:{padding:"10px",background:"#ffebee",border:"1px solid #f44336",borderRadius:"4px",margin:"10px"},children:[u.jsx("strong",{children:"Error:"})," ",d,u.jsx("button",{onClick:()=>f(null),style:{marginLeft:"10px"},children:"Dismiss"})]}),u.jsxs("div",{className:"cassette-header",children:[u.jsx("h1",{children:"iDAW - Kelly Project"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"5px 10px",borderRadius:"4px",backgroundColor:g==="online"?"#e8f5e9":g==="offline"?"#ffebee":"#fff3e0",border:`1px solid ${g==="online"?"#4caf50":g==="offline"?"#f44336":"#ff9800"}`},children:[u.jsx("span",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:g==="online"?"#4caf50":g==="offline"?"#f44336":"#ff9800",animation:g==="checking"?"pulse 2s infinite":"none"}}),u.jsxs("span",{style:{fontSize:"0.9em"},children:["API: ",g==="online"?"Online":g==="offline"?"Offline":"Checking..."]})]}),u.jsx("button",{onClick:ze,className:"toggle-btn",children:o?" Side B":" Side A"})]})]}),o?u.jsxs("div",{className:"side-a",style:{display:"flex",flexDirection:"column",height:"calc(100vh - 80px)"},children:[u.jsxs("div",{style:{display:"flex",flex:1,overflow:"hidden"},children:[u.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:u.jsx(_T,{tempo:D,timeSignature:[4,4]})}),u.jsxs("div",{style:{width:"400px",borderLeft:"1px solid rgba(255,255,255,0.1)",overflowY:"auto"},children:[u.jsx(vT,{showWaveform:!0}),u.jsx("div",{style:{marginTop:"10px",padding:"10px"},children:u.jsx(zy,{channelName:"Master",onEQChange:re=>console.log("EQ changed:",re)})}),u.jsx("div",{style:{marginTop:"10px",padding:"10px"},children:u.jsx(MT,{channelName:"Master"})})]})]}),u.jsx("div",{style:{padding:"20px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:u.jsx(uC,{engine:M,tracks:E,onTracksChange:k})}),u.jsxs("div",{style:{padding:"20px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[u.jsx("h3",{style:{color:"#fff",marginTop:0},children:"Advanced Recording"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[u.jsx(YT,{engine:M,tracks:E,onTracksChange:k,onTrackSelect:O}),u.jsx(GT,{engine:M,tracks:E,onTracksChange:k})]}),R&&u.jsx(WT,{track:E.find(re=>re.id===R),onTakeSelect:re=>{const ee=E.find(he=>he.id===R);ee&&(ee.takes.forEach(he=>{he.selected=he.id===re}),k([...E]))},onTakeDelete:re=>{const ee=E.find(he=>he.id===R);ee&&(ee.takes=ee.takes.filter(he=>he.id!==re),k([...E]))},onCompCreate:re=>{const ee=E.find(he=>he.id===R);if(ee){const he=M.createComp(R,[],re),Ie={id:`comp-${Date.now()}`,startTime:Math.min(...re.map(Ae=>Ae.start)),endTime:Math.max(...re.map(Ae=>Ae.end)),audioBuffer:he,selected:!0};ee.takes.push(Ie),ee.currentTake=ee.takes.length-1,k([...E])}}})]}),u.jsx(XT,{engine:L,tempo:D,timeSignature:[4,4],onStateChange:re=>{P(re),A(re.isPlaying)}}),u.jsx("div",{style:{padding:"20px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:u.jsx(hC,{engine:B,onStateChange:()=>{}})}),u.jsx("div",{style:{padding:"20px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:u.jsx(fC,{engine:B,onFormatChange:()=>{}})}),u.jsx("div",{style:{padding:"20px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:u.jsx(pC,{engine:B,onTempoChange:()=>{}})}),u.jsx("div",{style:{padding:"20px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:u.jsx(mC,{engine:B,onMarkerChange:()=>{}})}),u.jsxs("div",{style:{padding:"15px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[u.jsx("h4",{style:{color:"#fff",marginTop:0,marginBottom:"10px"},children:"Solo/Mute Controls"}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:E.map(re=>u.jsx(ZT,{engine:L,trackId:re.id,trackName:re.name,onStateChange:()=>P(L.getState())},re.id))})]}),u.jsxs("div",{style:{padding:"15px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[u.jsx("h4",{style:{color:"#fff",marginTop:0,marginBottom:"10px"},children:"Cue Mix Sends"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"10px"},children:E.map(re=>u.jsx(KT,{engine:L,trackId:re.id,trackName:re.name,onStateChange:()=>P(L.getState())},re.id))})]}),u.jsx("div",{style:{padding:"15px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:u.jsx(nC,{library:se,onItemSelect:re=>{console.log("Selected library item:",re)},onItemLoad:re=>{console.log("Loading library item:",re)}})}),u.jsx("div",{style:{padding:"15px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:u.jsx(aC,{engine:de,projectId:"current-project",currentUser:"user@example.com",onVersionRestore:re=>{console.log("Restoring version:",re)}})}),u.jsx("div",{style:{padding:"15px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:u.jsx(JT,{engine:te,onConfigChange:()=>{L.setTempo(L.getState().playbackSpeed*120)}})}),u.jsx("div",{style:{padding:"20px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:u.jsx(yC,{engine:Q,onRegionsChange:()=>{}})}),u.jsx("div",{style:{padding:"20px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:u.jsx(bC,{engine:ne,onTracksChange:()=>{}})}),u.jsx("div",{style:{padding:"20px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:u.jsx(SC,{engine:ae,onLanesChange:()=>{}})}),u.jsx("div",{style:{padding:"20px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:u.jsx(TC,{engine:ue,trackId:R||"track-1",onPluginsChange:()=>{}})}),u.jsx("div",{style:{padding:"20px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:u.jsx(wC,{engine:z,onStateChange:()=>{}})}),u.jsx("div",{style:{padding:"20px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:u.jsx(UT,{engine:X,onInstrumentChange:()=>{}})}),u.jsxs("div",{style:{padding:"20px",borderTop:"1px solid rgba(255,255,255,0.1)",backgroundColor:"rgba(99, 102, 241, 0.05)"},children:[u.jsx("h3",{style:{color:"#6366f1",margin:"0 0 15px 0"},children:"Engine Status (1155+ Features)"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px"},children:[u.jsxs("div",{style:Ot,children:[u.jsx("span",{style:{color:"#22c55e"},children:"Recording Engine"}),u.jsx("span",{style:{color:"#aaa",fontSize:"0.8em"},children:"Features 1-57"})]}),u.jsxs("div",{style:Ot,children:[u.jsx("span",{style:{color:"#22c55e"},children:"Transport Engine"}),u.jsx("span",{style:{color:"#aaa",fontSize:"0.8em"},children:"Features 58-107"})]}),u.jsxs("div",{style:Ot,children:[u.jsx("span",{style:{color:"#22c55e"},children:"Audio Editing Engine"}),u.jsx("span",{style:{color:"#aaa",fontSize:"0.8em"},children:"Features 108-182"})]}),u.jsxs("div",{style:Ot,children:[u.jsx("span",{style:{color:"#22c55e"},children:"MIDI Engine"}),u.jsx("span",{style:{color:"#aaa",fontSize:"0.8em"},children:"Features 183-266"})]}),u.jsxs("div",{style:Ot,children:[u.jsx("span",{style:{color:"#22c55e"},children:"Mixing Engine"}),u.jsx("span",{style:{color:"#aaa",fontSize:"0.8em"},children:"Features 267-346"})]}),u.jsxs("div",{style:Ot,children:[u.jsx("span",{style:{color:"#22c55e"},children:"Plugin Engine"}),u.jsx("span",{style:{color:"#aaa",fontSize:"0.8em"},children:"Features 347-517"})]}),u.jsxs("div",{style:Ot,children:[u.jsx("span",{style:{color:"#22c55e"},children:"Virtual Instruments"}),u.jsx("span",{style:{color:"#aaa",fontSize:"0.8em"},children:"Features 518-612"})]}),u.jsxs("div",{style:Ot,children:[u.jsx("span",{style:{color:"#22c55e"},children:"Arrangement & Live"}),u.jsx("span",{style:{color:"#aaa",fontSize:"0.8em"},children:"Features 613-756"})]}),u.jsxs("div",{style:Ot,children:[u.jsx("span",{style:{color:"#22c55e"},children:"Video, Files & Notation"}),u.jsx("span",{style:{color:"#aaa",fontSize:"0.8em"},children:"Features 757-961"})]}),u.jsxs("div",{style:Ot,children:[u.jsx("span",{style:{color:"#22c55e"},children:"Mastering & Analysis"}),u.jsx("span",{style:{color:"#aaa",fontSize:"0.8em"},children:"Features 962-1155"})]})]}),u.jsx("p",{style:{color:"#888",fontSize:"0.85em",marginTop:"15px",textAlign:"center"},children:"All 1155+ professional DAW features implemented across 10 specialized engines"})]})]}):u.jsxs("div",{className:"side-b",style:{display:"flex",flexDirection:"column",gap:"20px"},children:[u.jsx("h2",{children:"Side B: Therapeutic Interface"}),u.jsx("div",{style:{padding:"20px",backgroundColor:"rgba(99, 102, 241, 0.1)",borderRadius:"8px"},children:u.jsx(NT,{selectedEmotion:y,autoGenerate:!0,onPromptGenerated:re=>{console.log("Auto-generated prompt:",re)}})}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[u.jsxs("div",{style:{padding:"15px",backgroundColor:"rgba(0, 0, 0, 0.3)",borderRadius:"8px"},children:[u.jsx("h3",{style:{marginTop:0,color:"#fff",marginBottom:"10px"},children:"Brushstroke Animation (Canvas)"}),u.jsx(OT,{width:600,height:300,intensity:y?.3+(y.intensity==="high"?.4:y.intensity==="moderate"?.2:.1):.5,color:"#6366f1",syncToAudio:N,audioLevel:N?.3:0})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"rgba(0, 0, 0, 0.3)",borderRadius:"8px"},children:[u.jsx("h3",{style:{marginTop:0,color:"#fff",marginBottom:"10px"},children:"Doodle Canvas"}),u.jsx(zT,{width:600,height:300,color:"#6366f1",enabled:!0,onDoodleComplete:re=>{console.log("Doodle completed with",re.length,"paths")}})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[u.jsxs("div",{style:{padding:"15px",backgroundColor:"rgba(0, 0, 0, 0.3)",borderRadius:"8px"},children:[u.jsx("h3",{style:{marginTop:0,color:"#fff",marginBottom:"10px"},children:"Brushstroke Shader (WebGL)"}),u.jsx(y0,{shaderName:"brushstroke",width:600,height:300,animated:!0,intensity:y?y.intensity==="high"?.8:y.intensity==="moderate"?.5:.3:.5})]}),u.jsxs("div",{style:{padding:"15px",backgroundColor:"rgba(0, 0, 0, 0.3)",borderRadius:"8px"},children:[u.jsx("h3",{style:{marginTop:0,color:"#fff",marginBottom:"10px"},children:"Hand-Drawn Grid Shader (WebGL)"}),u.jsx(y0,{shaderName:"handdrawn",width:600,height:300,animated:!0,intensity:.6})]})]}),u.jsxs("div",{className:"emotion-section",children:[u.jsx("h3",{children:"Emotion Wheel (666)"}),u.jsx("button",{onClick:Nt,disabled:r,children:r?"Loading...":"Load Emotions"}),n&&u.jsx("div",{style:{marginTop:"20px"},children:u.jsx(pv,{emotions:n,onEmotionSelected:x})})]}),u.jsxs("div",{className:"rulebreaker-section",style:{marginBottom:"20px",padding:"20px",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"rgba(255, 255, 255, 0.5)"},children:[u.jsx("h3",{children:"Rule Breaker"}),u.jsx(CT,{selectedEmotion:y?.base,onRuleSelected:re=>{console.log("Rule selected:",re)}})]}),u.jsxs("div",{className:"ghostwriter-section",children:[u.jsx("h3",{children:"GhostWriter"}),y&&u.jsxs("div",{style:{marginBottom:"10px",padding:"10px",backgroundColor:"rgba(99, 102, 241, 0.1)",borderRadius:"4px"},children:[u.jsx("strong",{children:"Selected:"})," ",y.base,"  ",y.intensity,"  ",y.sub]}),u.jsx("button",{onClick:Zt,disabled:r||!y,title:y?"":"Please select an emotion first",children:r?"Generating...":y?`Generate Music (${y.sub})`:"Generate Music (Select Emotion First)"}),(b||_)&&u.jsxs(u.Fragment,{children:[u.jsx(bT,{midiData:_,midiPath:b,musicConfig:T}),_&&u.jsx("div",{style:{marginTop:"10px"},children:u.jsx("button",{onClick:cn,style:{padding:"8px 16px",backgroundColor:"#4caf50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.9em",fontWeight:"bold"},children:" Download MIDI"})})]})]}),u.jsxs("div",{className:"interrogator-section",children:[u.jsx("h3",{children:"Interrogator"}),u.jsx(TT,{onReady:re=>{console.log("Intent ready from interrogator:",re),re.base_emotion&&re.intensity&&x({base:re.base_emotion,intensity:re.intensity,sub:re.specific_emotion||re.base_emotion})}})]}),u.jsxs("div",{className:"vocalsynth-section",style:{marginTop:"20px",padding:"20px",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"rgba(255, 255, 255, 0.5)"},children:[u.jsx("h3",{children:"Vocal Synth"}),u.jsx(jT,{onVoiceChange:re=>{console.log("Voice profile changed:",re)},onGenerate:(re,ee)=>{console.log("Generated vocal:",re,ee)}})]})]})]})}class jC extends I.Component{state={hasError:!1,error:null};static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n)}render(){return this.state.hasError?u.jsxs("div",{style:{padding:"20px",fontFamily:"monospace"},children:[u.jsx("h1",{children:"Something went wrong"}),u.jsx("p",{children:this.state.error?.message}),u.jsx("pre",{style:{background:"#f0f0f0",padding:"10px",overflow:"auto"},children:this.state.error?.stack}),u.jsx("button",{onClick:()=>window.location.reload(),children:"Reload App"})]}):this.props.children}}console.log("main.tsx: Starting React app initialization");const Xd=document.getElementById("root");if(!Xd)throw new Error("Root element not found. Make sure index.html has a div with id='root'");console.log("main.tsx: Root element found, creating React root");try{const o=hv.createRoot(Xd);console.log("main.tsx: React root created, rendering App"),o.render(u.jsx(v0.StrictMode,{children:u.jsx(jC,{children:u.jsx(kC,{})})})),console.log("main.tsx: App rendered successfully")}catch(o){console.error("main.tsx: Fatal error during render:",o),Xd.innerHTML=`
    <div style="padding: 20px; font-family: monospace;">
      <h1>Fatal Error</h1>
      <p>${o instanceof Error?o.message:String(o)}</p>
      <pre style="background: #f0f0f0; padding: 10px; overflow: auto;">
        ${o instanceof Error?o.stack:String(o)}
      </pre>
    </div>
  `}
